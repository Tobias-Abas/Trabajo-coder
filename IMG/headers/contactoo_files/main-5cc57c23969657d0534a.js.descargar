(()=>{var e={185:(e,t)=>{"use strict";var n=function(e){return e instanceof Uint8Array?e:new Uint8Array(e&&e.buffer||e,e&&e.byteOffset||0,e&&e.byteLength||0)};t.lx=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=t.reduce((function(e,t){return e+=t&&(t.byteLength||t.length)||0}),0),a=new Uint8Array(i),s=0;return t.forEach((function(e){e=n(e),a.set(e,s),s+=e.byteLength})),a},t.qX=function(e,t){void 0===t&&(t=!1);return"string"!=typeof e&&e&&"function"==typeof e.toString&&(e=e.toString()),"string"!=typeof e?[]:(t||(e=unescape(encodeURIComponent(e))),e.split("").map((function(e){return 255&e.charCodeAt(0)})))},t.Ki=n},8044:(e,t,n)=>{"use strict";var r,i=(r=n(8908))&&"object"==typeof r&&"default"in r?r.default:r,a={mp4:/^(av0?1|avc0?[1234]|vp0?9|flac|opus|mp3|mp4a|mp4v|stpp.ttml.im1t)/,webm:/^(vp0?[89]|av0?1|opus|vorbis)/,ogg:/^(vp0?[89]|theora|flac|opus|vorbis)/,video:/^(av0?1|avc0?[1234]|vp0?[89]|hvc1|hev1|theora|mp4v)/,audio:/^(mp4a|flac|vorbis|opus|ac-[34]|ec-3|alac|mp3)/,text:/^(stpp.ttml.im1t)/,muxerVideo:/^(avc0?1)/,muxerAudio:/^(mp4a)/,muxerText:/a^/},s=["video","audio","text"],o=["Video","Audio","Text"],u=function(e){return e?e.replace(/avc1\.(\d+)\.(\d+)/i,(function(e,t,n){return"avc1."+("00"+Number(t).toString(16)).slice(-2)+"00"+("00"+Number(n).toString(16)).slice(-2)})):e},c=function(e){return e.map(u)},l=function(e){void 0===e&&(e="");var t=e.split(","),n={},r=[];return t.forEach((function(e){var t;e=e.trim(),s.forEach((function(r){var i=a[r].exec(e.toLowerCase());if(i&&!(i.length<=1)){t=r;var s=e.substring(0,i[1].length),o=e.replace(s,"");n[r]={type:s,details:o}}})),t||r.push(e)})),r.length&&(n.unknown=r),n},d=function(e){return void 0===e&&(e=""),a.audio.test(e.trim().toLowerCase())},h=function(e){return void 0===e&&(e=""),a.text.test(e.trim().toLowerCase())},p=function(e){if(e&&"string"==typeof e){var t=e.toLowerCase().split(",").map((function(e){return u(e.trim())})),n="video";1===t.length&&d(t[0])?n="audio":1===t.length&&h(t[0])&&(n="application");var r="mp4";return t.every((function(e){return a.mp4.test(e)}))?r="mp4":t.every((function(e){return a.webm.test(e)}))?r="webm":t.every((function(e){return a.ogg.test(e)}))&&(r="ogg"),n+"/"+r+';codecs="'+e+'"'}};t.lA="mp4a.40.2",t.xz="avc1.4d400d",t.p7=function(e){return void 0===e&&(e=""),i.MediaSource&&i.MediaSource.isTypeSupported&&i.MediaSource.isTypeSupported(p(e))||!1},t.Jg=function(e,t){if(!e.mediaGroups.AUDIO||!t)return null;var n=e.mediaGroups.AUDIO[t];if(!n)return null;for(var r in n){var i=n[r];if(i.default&&i.playlists)return l(i.playlists[0].attributes.CODECS)}return null},t._5=p,t.KL=d,t.tf=function(e){return void 0===e&&(e=""),a.video.test(e.trim().toLowerCase())},t.Hi=function(e){return void 0===e&&(e=""),e.toLowerCase().split(",").every((function(e){e=e.trim();for(var t=0;t<o.length;t++){if(a["muxer"+o[t]].test(e))return!0}return!1}))},t.kS=l,t.ws=u},9352:(e,t)=>{"use strict";var n=function(e){return e instanceof Uint8Array?e:new Uint8Array(e&&e.buffer||e,e&&e.byteOffset||0,e&&e.byteLength||0)},r=function(e){if(!e)return"";e=Array.prototype.slice.call(e);var t=String.fromCharCode.apply(null,n(e));try{return decodeURIComponent(escape(t))}catch(e){}return t},i=function(e,t){void 0===t&&(t=0);var r=(e=n(e))[t+6]<<21|e[t+7]<<14|e[t+8]<<7|e[t+9];return(16&e[t+5])>>4?r+20:r+10},a=function e(t,a){return void 0===a&&(a=0),(t=n(t)).length-a<10||"ID3"!==r(t.subarray(a,a+3))?a:e(t,a+=i(t,a))},s={aac:function(e){var t=a(e);return e.length>=t+2&&255==(255&e[t])&&224==(224&e[t+1])&&16==(22&e[t+1])},mp3:function(e){var t=a(e);return e.length>=t+2&&255==(255&e[t])&&224==(224&e[t+1])&&2==(6&e[t+1])},webm:function(e){return e.length>=4&&26==(255&e[0])&&69==(255&e[1])&&223==(255&e[2])&&163==(255&e[3])},mp4:function(e){return e.length>=8&&/^(f|s)typ$/.test(r(e.subarray(4,8)))&&!/^ftyp3g$/.test(r(e.subarray(4,10)))},"3gp":function(e){return e.length>=10&&/^ftyp3g$/.test(r(e.subarray(4,10)))},ts:function(e){if(e.length<189&&e.length>=1)return 71===e[0];for(var t=0;t+188<e.length&&t<188;){if(71===e[t]&&71===e[t+188])return!0;t+=1}return!1},flac:function(e){return e.length>=4&&/^fLaC$/.test(r(e.subarray(0,4)))},ogg:function(e){return e.length>=4&&/^OggS$/.test(r(e.subarray(0,4)))}},o=Object.keys(s).filter((function(e){return"ts"!==e})).concat("ts");o.forEach((function(e){var t=s[e];s[e]=function(e){return t(n(e))}}));t.Xm=function(e){e=n(e);for(var t=0;t<o.length;t++){var r=o[t];if(s[r](e))return r}return""},t.cc=a,t.cz=function(e){e=n(e);for(var t=0;t<e.length;){var i=(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0;if("moof"===r(e.subarray(t+4,t+8)))return!0;0===i||i+t>e.length?t=e.length:t+=i}return!1}},7927:(e,t,n)=>{"use strict";
/*! @name @videojs/vhs-utils @version 2.3.0 @license MIT */var r,i=(r=n(8908))&&"object"==typeof r&&"default"in r?r.default:r;e.exports=function(e){for(var t,n=(t=e,i.atob?i.atob(t):Buffer.from(t,"base64").toString("binary")),r=new Uint8Array(n.length),a=0;a<n.length;a++)r[a]=n.charCodeAt(a);return r}},4810:(e,t)=>{"use strict";var n=/^(audio|video|application)\/(x-|vnd\.apple\.)?mpegurl/i,r=/^application\/dash\+xml/i;t.t=function(e){return n.test(e)?"hls":r.test(e)?"dash":"application/vnd.videojs.vhs+json"===e?"vhs-json":null}},9972:(e,t,n)=>{"use strict";
/*! @name @videojs/vhs-utils @version 2.3.0 @license MIT */function r(e){return e&&"object"==typeof e&&"default"in e?e.default:e}var i=r(n(9945)),a=r(n(8908));e.exports=function(e,t){return/^[a-z]+:/i.test(t)?t:(/\/\//i.test(e)||(e=i.buildAbsoluteURL(a.location&&a.location.href||"",e)),i.buildAbsoluteURL(e,t))}},7388:e=>{"use strict";
/*! @name @videojs/vhs-utils @version 2.3.0 @license MIT */var t=function(){function e(){this.listeners={}}var t=e.prototype;return t.on=function(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t)},t.off=function(e,t){if(!this.listeners[e])return!1;var n=this.listeners[e].indexOf(t);return this.listeners[e]=this.listeners[e].slice(0),this.listeners[e].splice(n,1),n>-1},t.trigger=function(e){var t=this.listeners[e];if(t)if(2===arguments.length)for(var n=t.length,r=0;r<n;++r)t[r].call(this,arguments[1]);else for(var i=Array.prototype.slice.call(arguments,1),a=t.length,s=0;s<a;++s)t[s].apply(this,i)},t.dispose=function(){this.listeners={}},t.pipe=function(e){this.on("data",(function(t){e.push(t)}))},e}();e.exports=t},8466:(e,t,n)=>{"use strict";var r=n(5387),i=n.n(r),a=n(8908),s=n.n(a),o=n(9144),u=n.n(o),c="6.9.0";var l=function(e,t){t.isImmediatePropagationStopped=function(){return!0},t.cancelBubble=!0,t.isPropagationStopped=function(){return!0}},d=function(e,t,n){l(0,n),e.trigger({type:t+n.type,originalEvent:n})};function h(e){"playing"===e.type?function(e,t){e.ads.isInAdMode()&&(e.ads.isContentResuming()?e.ads._contentEnding&&d(e,"content",t):d(e,"ad",t))}(this,e):"ended"===e.type?function(e,t){e.ads.isInAdMode()?e.ads.isContentResuming()?(l(0,t),e.trigger("resumeended")):d(e,"ad",t):e.ads._contentHasEnded||e.ads.stitchedAds()||(d(e,"content",t),e.trigger("readyforpostroll"))}(this,e):"loadstart"===e.type||"loadeddata"===e.type||"loadedmetadata"===e.type?function(e,t){if(!("loadstart"===t.type&&!e.ads._hasThereBeenALoadStartDuringPlayerLife||"loadeddata"===t.type&&!e.ads._hasThereBeenALoadedData||"loadedmetadata"===t.type&&!e.ads._hasThereBeenALoadedMetaData))if(e.ads.inAdBreak())d(e,"ad",t);else{if(e.currentSrc()!==e.ads.contentSrc)return;d(e,"content",t)}}(this,e):"play"===e.type?function(e,t){e.ads.inAdBreak()?d(e,"ad",t):e.ads.isContentResuming()&&d(e,"content",t)}(this,e):this.ads.isInAdMode()&&(this.ads.isContentResuming()?d(this,"content",e):d(this,"ad",e))}var p={},f=function(){!function(e){if(i().dom.isInFrame()&&"function"!=typeof s().__tcfapi){for(var t,n=s(),r={};n;){try{if(n.frames.__tcfapiLocator){t=n;break}}catch(e){}if(n===s().top)break;n=n.parent}if(!t)return;s().__tcfapi=function(e,n,i,a){var s=Math.random()+"",o={__tcfapiCall:{command:e,parameter:a,version:n,callId:s}};r[s]=i,t.postMessage(o,"*")},s().addEventListener("message",(function(e){var t={};try{t="string"==typeof e.data?JSON.parse(e.data):e.data}catch(e){}var n=t.__tcfapiReturn;n&&"function"==typeof r[n.callId]&&(r[n.callId](n.returnValue,n.success),r[n.callId]=null)}),!1)}}(),"function"==typeof s().__tcfapi&&s().__tcfapi("addEventListener",2,(function(e,t){t&&(p=e)}))},m=function(e,t){return t?encodeURIComponent(e):e},g=function(e,t,n){if(e&&e[n])for(var r=e[n],i=Object.keys(r),a=0;a<i.length;a++){t["{mediainfo."+n+"."+i[a]+"}"]=r[i[a]]}};function v(e,t,n){var r=this,a={};e=e.replace(/{([^}=]+)=([^}]+)}/g,(function(e,t,n){return a["{"+t+"}"]=n,"{"+t+"}"})),void 0===t&&(t=!1);var o={};for(var c in void 0!==n&&(o=n),o["{player.id}"]=this.options_["data-player"]||this.id_,o["{player.height}"]=this.currentHeight(),o["{player.width}"]=this.currentWidth(),o["{mediainfo.id}"]=this.mediainfo?this.mediainfo.id:"",o["{mediainfo.name}"]=this.mediainfo?this.mediainfo.name:"",o["{mediainfo.duration}"]=this.mediainfo?this.mediainfo.duration:"",o["{player.duration}"]=this.duration(),o["{player.pageUrl}"]=i().dom.isInFrame()?u().referrer:s().location.href,o["{playlistinfo.id}"]=this.playlistinfo?this.playlistinfo.id:"",o["{playlistinfo.name}"]=this.playlistinfo?this.playlistinfo.name:"",o["{timestamp}"]=(new Date).getTime(),o["{document.referrer}"]=u().referrer,o["{window.location.href}"]=s().location.href,o["{random}"]=Math.floor(1e12*Math.random()),["description","tags","reference_id","ad_keys"].forEach((function(e){r.mediainfo&&r.mediainfo[e]?o["{mediainfo."+e+"}"]=r.mediainfo[e]:a["{mediainfo."+e+"}"]?o["{mediainfo."+e+"}"]=a["{mediainfo."+e+"}"]:o["{mediainfo."+e+"}"]=""})),g(this.mediainfo,o,"custom_fields"),g(this.mediainfo,o,"customFields"),Object.keys(p).forEach((function(e){o["{tcf."+e+"}"]=p[e]})),o["{tcf.gdprAppliesInt}"]=p.gdprApplies?1:0,o)e=e.split(c).join(m(o[c],t));for(var l in e=e.replace(/{pageVariable\.([^}]+)}/g,(function(e,n){for(var r,o=s(),u=n.split("."),c=0;c<u.length;c++)c===u.length-1?r=o[u[c]]:o=o[u[c]];var l=typeof r;return null===r?"null":void 0===r?a["{pageVariable."+n+"}"]?a["{pageVariable."+n+"}"]:(i().log.warn('Page variable "'+n+'" not found'),""):"string"!==l&&"number"!==l&&"boolean"!==l?(i().log.warn('Page variable "'+n+'" is not a supported type'),""):m(String(r),t)})),a)e=e.replace(l,a[l]);return e}var y={processMetadataTracks:function(e,t){for(var n=e.textTracks(),r=function(n){"metadata"===n.kind&&(e.ads.cueTextTracks.setMetadataTrackMode(n),t(e,n))},i=0;i<n.length;i++)r(n[i]);n.addEventListener("addtrack",(function(e){r(e.track)}))},setMetadataTrackMode:function(e){},getSupportedAdCue:function(e,t){return t},isSupportedAdCue:function(e,t){return!0},getCueId:function(e,t){return t.id}},b=function(e,t){return void 0!==t&&e.ads.includedCues[t]},_=function(e,t){void 0!==t&&""!==t&&(e.ads.includedCues[t]=!0)};function T(){!1!==this.ads._shouldBlockPlay&&(this.paused()||(this.ads.debug("Playback was canceled by cancelContentPlay"),this.pause()),this.ads._cancelledPlay=!0)}y.processAdTrack=function(e,t,n,r){e.ads.includedCues={};for(var a=0;a<t.length;a++){var s=t[a],o=this.getSupportedAdCue(e,s);if(!this.isSupportedAdCue(e,s))return void i().log.warn("Skipping as this is not a supported ad cue.",s);var u=this.getCueId(e,s),c=s.startTime;if(b(e,u))return void i().log("Skipping ad already seen with ID "+u);r&&r(e,o,u,c),n(e,o,u,c),_(e,u)}};var w={},S=i();w.isMiddlewareMediatorSupported=function(){return!S.browser.IS_IOS&&!S.browser.IS_ANDROID&&!!(S.use&&S.middleware&&S.middleware.TERMINATOR)},w.playMiddleware=function(e){return{setSource:function(e,t){t(null,e)},callPlay:function(){if(e.ads&&!0===e.ads._shouldBlockPlay)return e.ads.debug("Using playMiddleware to block content playback"),e.ads._playBlocked=!0,S.middleware.TERMINATOR},play:function(t,n){e.ads&&e.ads._playBlocked&&t?(e.ads.debug("Play call to Tech was terminated."),e.trigger("play"),e.addClass("vjs-has-started"),e.ads._playBlocked=!1):n&&n.catch&&n.catch((function(t){"NotAllowedError"!==t.name||i().browser.IS_SAFARI||e.trigger("pause")}))}}},w.testHook=function(e){S=e};var C=w.playMiddleware,E=w.isMiddlewareMediatorSupported;var k=function(){function e(){}return e.getState=function(t){if(t)return e.states_&&e.states_[t]?e.states_[t]:void 0},e.registerState=function(t,n){if("string"!=typeof t||!t)throw new Error('Illegal state name, "'+t+'"; must be a non-empty string.');return e.states_||(e.states_={}),e.states_[t]=n,n},e}(),O=function(){function e(e){this.player=e}e._getName=function(){return"Anonymous State"};var t=e.prototype;return t.transitionTo=function(e){var t=this.player;this.cleanup(t);var n=new e(t);t.ads._state=n,t.ads.debug(this.constructor._getName()+" -> "+n.constructor._getName());for(var r=arguments.length,i=new Array(r>1?r-1:0),a=1;a<r;a++)i[a-1]=arguments[a];n.init.apply(n,[t].concat(i))},t.init=function(){},t.cleanup=function(){},t.onPlay=function(){},t.onPlaying=function(){},t.onEnded=function(){},t.onAdEnded=function(){},t.onAdsReady=function(){i().log.warn("Unexpected adsready event")},t.onAdsError=function(){},t.onAdsCanceled=function(){},t.onAdTimeout=function(){},t.onAdStarted=function(){},t.onContentChanged=function(){},t.onContentResumed=function(){},t.onReadyForPostroll=function(){i().log.warn("Unexpected readyforpostroll event")},t.onNoPreroll=function(){},t.onNoPostroll=function(){},t.startLinearAdMode=function(){i().log.warn("Unexpected startLinearAdMode invocation (State via "+this.constructor._getName()+")")},t.endLinearAdMode=function(){i().log.warn("Unexpected endLinearAdMode invocation (State via "+this.constructor._getName()+")")},t.skipLinearAdMode=function(){i().log.warn("Unexpected skipLinearAdMode invocation (State via "+this.constructor._getName()+")")},t.isAdState=function(){throw new Error("isAdState unimplemented for "+this.constructor._getName())},t.isWaitingForAdBreak=function(){return!1},t.isContentResuming=function(){return!1},t.inAdBreak=function(){return!1},t.handleEvent=function(e){var t=this.player;"play"===e?this.onPlay(t):"adsready"===e?this.onAdsReady(t):"adserror"===e?this.onAdsError(t):"adscanceled"===e?this.onAdsCanceled(t):"adtimeout"===e?this.onAdTimeout(t):"ads-ad-started"===e?this.onAdStarted(t):"contentchanged"===e?this.onContentChanged(t):"contentresumed"===e?this.onContentResumed(t):"readyforpostroll"===e?this.onReadyForPostroll(t):"playing"===e?this.onPlaying(t):"ended"===e?this.onEnded(t):"nopreroll"===e?this.onNoPreroll(t):"nopostroll"===e?this.onNoPostroll(t):"adended"===e&&this.onAdEnded(t)},e}();function x(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}k.registerState("State",O);var A=function(e){function t(t){var n;return(n=e.call(this,t)||this).contentResuming=!1,n.waitingForAdBreak=!1,n}x(t,e);var n=t.prototype;return n.isAdState=function(){return!0},n.onPlaying=function(){var e=k.getState("ContentPlayback");this.contentResuming&&this.transitionTo(e)},n.onContentResumed=function(){var e=k.getState("ContentPlayback");this.contentResuming&&this.transitionTo(e)},n.isWaitingForAdBreak=function(){return this.waitingForAdBreak},n.isContentResuming=function(){return this.contentResuming},n.inAdBreak=function(){return!0===this.player.ads._inLinearAdMode},t}(O);k.registerState("AdState",A);var P=function(e){function t(){return e.apply(this,arguments)||this}x(t,e);var n=t.prototype;return n.isAdState=function(){return!1},n.onContentChanged=function(e){var t=k.getState("BeforePreroll"),n=k.getState("Preroll");e.ads.debug("Received contentchanged event (ContentState)"),e.paused()?this.transitionTo(t):(this.transitionTo(n,!1),e.pause(),e.ads._pausedOnContentupdate=!0)},t}(O);k.registerState("ContentState",P);var I,L=function(e){function t(){return e.apply(this,arguments)||this}x(t,e),t._getName=function(){return"AdsDone"};var n=t.prototype;return n.init=function(e){e.ads._contentHasEnded=!0,e.trigger("ended")},n.startLinearAdMode=function(){i().log.warn("Unexpected startLinearAdMode invocation (AdsDone)")},t}(k.getState("ContentState"));k.registerState("AdsDone",L);var M={start:function(e){e.ads.debug("Starting ad break"),e.ads._inLinearAdMode=!0,e.trigger("adstart"),e.ads.shouldTakeSnapshots()&&(e.ads.snapshot=function(e){var t;t=i().browser.IS_IOS&&e.ads.isLive(e)&&e.seekable().length>0?e.currentTime()-e.seekable().end(0):e.currentTime();var n=e.$(".vjs-tech"),r=e.textTracks?e.textTracks():[],a=[],s={ended:e.ended(),currentSrc:e.currentSrc(),sources:e.currentSources(),src:e.tech_.src(),currentTime:t,type:e.currentType()};n&&(s.style=n.getAttribute("style"));for(var o=0;o<r.length;o++){var u=r[o];a.push({track:u,mode:u.mode}),u.mode="disabled"}return s.suppressedTracks=a,s}(e)),e.ads.shouldPlayContentBehindAd(e)&&(e.ads.preAdVolume_=e.volume(),e.volume(0)),e.addClass("vjs-ad-playing"),e.hasClass("vjs-live")&&e.removeClass("vjs-live"),e.ads.removeNativePoster()},end:function(e,t){e.ads.debug("Ending ad break"),void 0===t&&(t=function(){}),e.ads.adType=null,e.ads._inLinearAdMode=!1,e.trigger("adend"),e.removeClass("vjs-ad-playing"),e.ads.isLive(e)&&e.addClass("vjs-live"),e.ads.shouldTakeSnapshots()?function(e,t){var n=e.ads.snapshot;if(void 0===t&&(t=function(){}),!0===e.ads.disableNextSnapshotRestore)return e.ads.disableNextSnapshotRestore=!1,delete e.ads.snapshot,void t();var r,a=e.$(".vjs-tech"),s=20,o=n.suppressedTracks,u=function(){for(var e=0;e<o.length;e++)(r=o[e]).track.mode=r.mode},c=function(){var t;if(i().browser.IS_IOS&&e.ads.isLive(e)){if(n.currentTime<0&&(t=e.seekable().length>0?e.seekable().end(0)+n.currentTime:e.currentTime(),e.currentTime(t)),e.paused()){var r=e.play();r&&r.catch&&r.catch((function(e){i().log.warn("Play promise rejected in IOS snapshot resume",e)}))}}else if(n.ended)e.currentTime(e.duration());else{e.currentTime(n.currentTime);var a=e.play();a&&a.catch&&a.catch((function(e){i().log.warn("Play promise rejected in snapshot resume",e)}))}e.ads.shouldRemoveAutoplay_&&(e.autoplay(!1),e.ads.shouldRemoveAutoplay_=!1)},l=function t(){if(e.off("contentcanplay",t),I&&e.clearTimeout(I),(a=e.el().querySelector(".vjs-tech")).readyState>1)return c();if(void 0===a.seekable)return c();if(a.seekable.length>0)return c();if(s--)e.setTimeout(t,50);else try{c()}catch(e){i().log.warn("Failed to resume the content after an advertisement",e)}};if("style"in n&&a.setAttribute("style",n.style||""),e.ads.videoElementRecycled())e.one("resumeended",(function(){delete e.ads.snapshot,t()})),e.one("contentloadedmetadata",u),i().browser.IS_IOS&&!e.autoplay()&&(e.autoplay(!0),e.ads.shouldRemoveAutoplay_=!0),e.src(n.sources),e.one("contentcanplay",l),I=e.setTimeout(l,2e3);else{if(u(),!e.ended()){var d=e.play();d&&d.catch&&d.catch((function(e){i().log.warn("Play promise rejected in snapshot restore",e)}))}delete e.ads.snapshot,t()}}(e,t):(e.volume(e.ads.preAdVolume_),t())}},D=function(e){function t(){return e.apply(this,arguments)||this}x(t,e),t._getName=function(){return"Preroll"};var n=t.prototype;return n.init=function(e,t,n){if(this.waitingForAdBreak=!0,e.addClass("vjs-ad-loading"),n||e.ads.nopreroll_)return this.resumeAfterNoPreroll(e);var r=e.ads.settings.timeout;"number"==typeof e.ads.settings.prerollTimeout&&(r=e.ads.settings.prerollTimeout),this._timeout=e.setTimeout((function(){e.trigger("adtimeout")}),r),t?this.handleAdsReady():this.adsReady=!1},n.onAdsReady=function(e){e.ads.inAdBreak()?i().log.warn("Unexpected adsready event (Preroll)"):(e.ads.debug("Received adsready event (Preroll)"),this.handleAdsReady())},n.handleAdsReady=function(){this.adsReady=!0,this.readyForPreroll()},n.afterLoadStart=function(e){var t=this.player;t.ads._hasThereBeenALoadStartDuringPlayerLife?e():(t.ads.debug("Waiting for loadstart..."),t.one("loadstart",(function(){t.ads.debug("Received loadstart event"),e()})))},n.noPreroll=function(){var e=this;this.afterLoadStart((function(){e.player.ads.debug("Skipping prerolls due to nopreroll event (Preroll)"),e.resumeAfterNoPreroll(e.player)}))},n.readyForPreroll=function(){var e=this.player;this.afterLoadStart((function(){e.ads.debug("Triggered readyforpreroll event (Preroll)"),e.trigger("readyforpreroll")}))},n.onAdsCanceled=function(e){var t=this;e.ads.debug("adscanceled (Preroll)"),this.afterLoadStart((function(){t.resumeAfterNoPreroll(e)}))},n.onAdsError=function(e){var t=this;i().log("adserror (Preroll)"),this.inAdBreak()?e.ads.endLinearAdMode():this.afterLoadStart((function(){t.resumeAfterNoPreroll(e)}))},n.startLinearAdMode=function(){var e=this.player;!this.adsReady||e.ads.inAdBreak()||this.isContentResuming()?i().log.warn("Unexpected startLinearAdMode invocation (Preroll)"):(this.clearTimeout(e),e.ads.adType="preroll",this.waitingForAdBreak=!1,M.start(e),e.ads._shouldBlockPlay=!1)},n.onAdStarted=function(e){e.removeClass("vjs-ad-loading")},n.endLinearAdMode=function(){var e=this.player;this.inAdBreak()&&(e.removeClass("vjs-ad-loading"),e.addClass("vjs-ad-content-resuming"),this.contentResuming=!0,M.end(e))},n.skipLinearAdMode=function(){var e=this,t=this.player;t.ads.inAdBreak()||this.isContentResuming()?i().log.warn("Unexpected skipLinearAdMode invocation"):this.afterLoadStart((function(){t.trigger("adskip"),t.ads.debug("skipLinearAdMode (Preroll)"),e.resumeAfterNoPreroll(t)}))},n.onAdTimeout=function(e){var t=this;this.afterLoadStart((function(){e.ads.debug("adtimeout (Preroll)"),t.resumeAfterNoPreroll(e)}))},n.onNoPreroll=function(e){e.ads.inAdBreak()||this.isContentResuming()?i().log.warn("Unexpected nopreroll event (Preroll)"):this.noPreroll()},n.resumeAfterNoPreroll=function(e){if(this.contentResuming=!0,e.ads._shouldBlockPlay=!1,this.cleanupPartial(e),e.ads._playRequested||e.ads._pausedOnContentupdate)if(e.paused()){e.ads.debug("resumeAfterNoPreroll: attempting to resume playback (Preroll)");var t=e.play();t&&t.then&&t.then(null,(function(e){}))}else e.ads.debug("resumeAfterNoPreroll: already playing (Preroll)"),e.trigger("play"),e.trigger("playing")},n.cleanup=function(e){e.ads._hasThereBeenALoadStartDuringPlayerLife||i().log.warn("Leaving Preroll state before loadstart event can cause issues."),this.cleanupPartial(e)},n.cleanupPartial=function(e){e.removeClass("vjs-ad-loading"),e.removeClass("vjs-ad-content-resuming"),this.clearTimeout(e)},n.clearTimeout=function(e){e.clearTimeout(this._timeout),this._timeout=null},t}(k.getState("AdState"));k.registerState("Preroll",D);var R=function(e){function t(){return e.apply(this,arguments)||this}x(t,e),t._getName=function(){return"BeforePreroll"};var n=t.prototype;return n.init=function(e){this.adsReady=!1,this.shouldResumeToContent=!1,e.ads._shouldBlockPlay=!e.ads.settings.allowVjsAutoplay||!e.autoplay()},n.onAdsReady=function(e){e.ads.debug("Received adsready event (BeforePreroll)"),this.adsReady=!0},n.onPlay=function(e){var t=k.getState("Preroll");e.ads.debug("Received play event (BeforePreroll)"),this.transitionTo(t,this.adsReady,this.shouldResumeToContent)},n.onAdsCanceled=function(e){e.ads.debug("adscanceled (BeforePreroll)"),this.shouldResumeToContent=!0},n.onAdsError=function(){this.player.ads.debug("adserror (BeforePreroll)"),this.shouldResumeToContent=!0},n.onNoPreroll=function(){this.player.ads.debug("Skipping prerolls due to nopreroll event (BeforePreroll)"),this.shouldResumeToContent=!0},n.skipLinearAdMode=function(){var e=this.player;e.trigger("adskip"),e.ads.debug("skipLinearAdMode (BeforePreroll)"),this.shouldResumeToContent=!0},n.onContentChanged=function(){this.init(this.player)},t}(k.getState("ContentState"));k.registerState("BeforePreroll",R);var N=function(e){function t(){return e.apply(this,arguments)||this}x(t,e),t._getName=function(){return"Midroll"};var n=t.prototype;return n.init=function(e){e.ads.adType="midroll",M.start(e),e.addClass("vjs-ad-loading")},n.onAdStarted=function(e){e.removeClass("vjs-ad-loading")},n.endLinearAdMode=function(){var e=this.player;this.inAdBreak()&&(this.contentResuming=!0,e.addClass("vjs-ad-content-resuming"),e.removeClass("vjs-ad-loading"),M.end(e))},n.onAdsError=function(e){this.inAdBreak()&&e.ads.endLinearAdMode()},n.cleanup=function(e){e.removeClass("vjs-ad-loading"),e.removeClass("vjs-ad-content-resuming")},t}(k.getState("AdState"));k.registerState("Midroll",N);var j=function(e){function t(){return e.apply(this,arguments)||this}x(t,e),t._getName=function(){return"Postroll"};var n=t.prototype;return n.init=function(e){if(this.waitingForAdBreak=!0,e.ads._contentEnding=!0,e.ads.nopostroll_){this.resumeContent(e);var t=k.getState("AdsDone");this.transitionTo(t)}else{e.addClass("vjs-ad-loading");var n=e.ads.settings.timeout;"number"==typeof e.ads.settings.postrollTimeout&&(n=e.ads.settings.postrollTimeout),this._postrollTimeout=e.setTimeout((function(){e.trigger("adtimeout")}),n)}},n.startLinearAdMode=function(){var e=this.player;e.ads.inAdBreak()||this.isContentResuming()?i().log.warn("Unexpected startLinearAdMode invocation (Postroll)"):(e.ads.adType="postroll",e.clearTimeout(this._postrollTimeout),this.waitingForAdBreak=!1,M.start(e))},n.onAdStarted=function(e){e.removeClass("vjs-ad-loading")},n.endLinearAdMode=function(){var e=this,t=this.player,n=k.getState("AdsDone");this.inAdBreak()&&(t.removeClass("vjs-ad-loading"),this.resumeContent(t),M.end(t,(function(){e.transitionTo(n)})))},n.skipLinearAdMode=function(){var e=this.player;e.ads.inAdBreak()||this.isContentResuming()?i().log.warn("Unexpected skipLinearAdMode invocation"):(e.ads.debug("Postroll abort (skipLinearAdMode)"),e.trigger("adskip"),this.abort(e))},n.onAdTimeout=function(e){e.ads.debug("Postroll abort (adtimeout)"),this.abort(e)},n.onAdsError=function(e){e.ads.debug("Postroll abort (adserror)"),e.ads.inAdBreak()?e.ads.endLinearAdMode():this.abort(e)},n.onContentChanged=function(e){if(this.isContentResuming()){var t=k.getState("BeforePreroll");this.transitionTo(t)}else if(!this.inAdBreak()){var n=k.getState("Preroll");this.transitionTo(n)}},n.onNoPostroll=function(e){this.isContentResuming()||this.inAdBreak()?i().log.warn("Unexpected nopostroll event (Postroll)"):this.abort(e)},n.resumeContent=function(e){this.contentResuming=!0,e.addClass("vjs-ad-content-resuming")},n.abort=function(e){var t=k.getState("AdsDone");this.resumeContent(e),e.removeClass("vjs-ad-loading"),this.transitionTo(t)},n.cleanup=function(e){e.removeClass("vjs-ad-content-resuming"),e.clearTimeout(this._postrollTimeout),e.ads._contentEnding=!1},t}(k.getState("AdState"));k.registerState("Postroll",j);var U=function(e){function t(){return e.apply(this,arguments)||this}x(t,e),t._getName=function(){return"ContentPlayback"};var n=t.prototype;return n.init=function(e){e.ads._shouldBlockPlay=!1},n.onAdsReady=function(e){e.ads.debug("Received adsready event (ContentPlayback)"),e.ads.nopreroll_||(e.ads.debug("Triggered readyforpreroll event (ContentPlayback)"),e.trigger("readyforpreroll"))},n.onReadyForPostroll=function(e){var t=k.getState("Postroll");e.ads.debug("Received readyforpostroll event"),this.transitionTo(t)},n.startLinearAdMode=function(){var e=k.getState("Midroll");this.transitionTo(e)},t}(k.getState("ContentState"));k.registerState("ContentPlayback",U);var F=function(e){function t(){return e.apply(this,arguments)||this}x(t,e),t._getName=function(){return"StitchedContentPlayback"};var n=t.prototype;return n.init=function(){this.player.ads._shouldBlockPlay=!1},n.onContentChanged=function(){this.player.ads.debug("Received contentchanged event ("+this.constructor._getName()+")")},n.startLinearAdMode=function(){var e=k.getState("StitchedAdRoll");this.transitionTo(e)},t}(k.getState("ContentState"));k.registerState("StitchedContentPlayback",F);var $=function(e){function t(){return e.apply(this,arguments)||this}x(t,e),t._getName=function(){return"StitchedAdRoll"};var n=t.prototype;return n.init=function(){this.waitingForAdBreak=!1,this.contentResuming=!1,this.player.ads.adType="stitched",M.start(this.player)},n.onPlaying=function(){},n.onContentResumed=function(){},n.onAdEnded=function(){this.endLinearAdMode(),this.player.trigger("ended")},n.endLinearAdMode=function(){var e=k.getState("StitchedContentPlayback");M.end(this.player),this.transitionTo(e)},t}(k.getState("AdState"));k.registerState("StitchedAdRoll",$);var B=w.isMiddlewareMediatorSupported,V=i().getTech("Html5").Events,q={timeout:5e3,prerollTimeout:void 0,postrollTimeout:void 0,debug:!1,stitchedAds:!1,contentIsLive:void 0,liveCuePoints:!0,allowVjsAutoplay:i().options.normalizeAutoplay||!1},H=function(e){var t=this,n=i().mergeOptions(q,e),r=[];V.concat(["firstplay","loadedalldata"]).forEach((function(e){-1===r.indexOf(e)&&r.push(e)})),t.on(r,h),B()||function(e,t){t&&i().log("Using cancelContentPlay to block content playback"),e.on("play",T)}(t,n.debug),t.setTimeout((function(){t.ads._hasThereBeenALoadStartDuringPlayerLife||""===t.src()||i().log.error("videojs-contrib-ads has not seen a loadstart event 5 seconds after being initialized, but a source is present. This indicates that videojs-contrib-ads was initialized too late. It must be initialized immediately after video.js in the same tick. As a result, some ads will not play and some media events will be incorrect. For more information, see http://videojs.github.io/videojs-contrib-ads/integrator/getting-started.html")}),5e3),t.on("ended",(function(){t.hasClass("vjs-has-started")||t.addClass("vjs-has-started")})),t.on("contenttimeupdate",(function(){t.removeClass("vjs-waiting")})),t.on(["addurationchange","adcanplay"],(function(){if(!t.ads.settings.stitchedAds&&!t.hasStarted()&&(!t.ads.snapshot||t.currentSrc()!==t.ads.snapshot.currentSrc)&&t.ads.inAdBreak()){var e=t.play();e&&e.catch&&e.catch((function(e){i().log.warn("Play promise rejected when playing ad",e)}))}})),t.on("nopreroll",(function(){t.ads.debug("Received nopreroll event"),t.ads.nopreroll_=!0})),t.on("nopostroll",(function(){t.ads.debug("Received nopostroll event"),t.ads.nopostroll_=!0})),t.on("playing",(function(){t.ads._cancelledPlay=!1,t.ads._pausedOnContentupdate=!1})),t.on("play",(function(){t.ads._playRequested=!0})),t.one("loadstart",(function(){t.ads._hasThereBeenALoadStartDuringPlayerLife=!0})),t.on("loadeddata",(function(){t.ads._hasThereBeenALoadedData=!0})),t.on("loadedmetadata",(function(){t.ads._hasThereBeenALoadedMetaData=!0})),t.ads=function(e){return{disableNextSnapshotRestore:!1,_contentEnding:!1,_contentHasEnded:!1,_hasThereBeenALoadStartDuringPlayerLife:!1,_hasThereBeenALoadedData:!1,_hasThereBeenALoadedMetaData:!1,_inLinearAdMode:!1,_shouldBlockPlay:!1,_playBlocked:!1,_playRequested:!1,adType:null,VERSION:c,reset:function(){e.ads.disableNextSnapshotRestore=!1,e.ads._contentEnding=!1,e.ads._contentHasEnded=!1,e.ads.snapshot=null,e.ads.adType=null,e.ads._hasThereBeenALoadedData=!1,e.ads._hasThereBeenALoadedMetaData=!1,e.ads._cancelledPlay=!1,e.ads._shouldBlockPlay=!1,e.ads._playBlocked=!1,e.ads.nopreroll_=!1,e.ads.nopostroll_=!1,e.ads._playRequested=!1},startLinearAdMode:function(){e.ads._state.startLinearAdMode()},endLinearAdMode:function(){e.ads._state.endLinearAdMode()},skipLinearAdMode:function(){e.ads._state.skipLinearAdMode()},stitchedAds:function(e){return void 0!==e&&(i().log.warn("Using player.ads.stitchedAds() as a setter is deprecated, it should be set as an option upon initialization of contrib-ads."),this.settings.stitchedAds=!!e),this.settings.stitchedAds},videoElementRecycled:function(){if(e.ads.shouldPlayContentBehindAd(e))return!1;if(!this.snapshot)throw new Error("You cannot use videoElementRecycled while there is no snapshot.");var t=e.tech_.src()!==this.snapshot.src,n=e.currentSrc()!==this.snapshot.currentSrc;return t||n},isLive:function(t){return void 0===t&&(t=e),"boolean"==typeof t.ads.settings.contentIsLive?t.ads.settings.contentIsLive:t.duration()===1/0||"8"===i().browser.IOS_VERSION&&0===t.duration()},shouldPlayContentBehindAd:function(t){if(void 0===t&&(t=e),t)return!!t.ads.settings.liveCuePoints&&!i().browser.IS_IOS&&!i().browser.IS_ANDROID&&t.duration()===1/0;throw new Error("shouldPlayContentBehindAd requires a player as a param")},shouldTakeSnapshots:function(t){return void 0===t&&(t=e),!this.shouldPlayContentBehindAd(t)&&!this.stitchedAds()},isInAdMode:function(){return this._state.isAdState()},isWaitingForAdBreak:function(){return this._state.isWaitingForAdBreak()},isContentResuming:function(){return this._state.isContentResuming()},isAdPlaying:function(){return this._state.inAdBreak()},inAdBreak:function(){return this._state.inAdBreak()},removeNativePoster:function(){var t=e.$(".vjs-tech");t&&t.removeAttribute("poster")},debug:function(){if(this.settings.debug){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];1===t.length&&"string"==typeof t[0]?i().log("ADS: "+t[0]):i().log.apply(i(),["ADS:"].concat(t))}}}}(t),t.ads.settings=n,n.stitchedAds=!!n.stitchedAds,n.stitchedAds?t.ads._state=new(k.getState("StitchedContentPlayback"))(t):t.ads._state=new(k.getState("BeforePreroll"))(t),t.ads._state.init(t),t.ads.cueTextTracks=y,t.ads.adMacroReplacement=v.bind(t),function(e){e.ads.contentSrc=e.currentSrc(),e.ads._seenInitialLoadstart=!1,e.on("loadstart",(function(){if(!e.ads.inAdBreak()){var t=e.currentSrc();t!==e.ads.contentSrc&&(e.ads._seenInitialLoadstart&&e.trigger({type:"contentchanged"}),e.trigger({type:"contentupdate",oldValue:e.ads.contentSrc,newValue:t}),e.ads.contentSrc=t),e.ads._seenInitialLoadstart=!0}}))}(t),t.on("contentchanged",t.ads.reset);var a=function(){var e=t.textTracks();if(!t.ads.shouldPlayContentBehindAd(t)&&t.ads.inAdBreak()&&t.tech_.featuresNativeTextTracks&&i().browser.IS_IOS&&!Array.isArray(t.textTracks()))for(var n=0;n<e.length;n++){var r=e[n];"showing"===r.mode&&(r.mode="disabled")}};t.ready((function(){t.textTracks().addEventListener("change",a)})),t.on(["play","playing","ended","adsready","adscanceled","adskip","adserror","adtimeout","adended","ads-ad-started","contentchanged","dispose","contentresumed","readyforpostroll","nopreroll","nopostroll"],(function(e){t.ads._state.handleEvent(e.type)})),t.on("dispose",(function(){t.ads.reset(),t.textTracks().removeEventListener("change",a)})),f(),t.ads.listenToTcf=f};H.VERSION=c,function(e){!function(){if(i().getPlugin)return Boolean(i().getPlugin("ads"));var e=i().getComponent("Player");return Boolean(e&&e.prototype.ads)}(i())&&((i().registerPlugin||i().plugin)("ads",e),E()&&!i().usingContribAdsMiddleware_&&(i().use("*",C),i().usingContribAdsMiddleware_=!0,i().log.debug("Play middleware has been registered with videojs")))}(H);function W(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function z(e,t){return z=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},z(e,t)}function G(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,z(e,t)}var K=n(9972),X=n.n(K),Y=n(7388),Q=n.n(Y);function J(){return J=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},J.apply(this,arguments)}var Z,ee=n(7927),te=n.n(ee),ne=function(e){function t(){var t;return(t=e.call(this)||this).buffer="",t}return G(t,e),t.prototype.push=function(e){var t;for(this.buffer+=e,t=this.buffer.indexOf("\n");t>-1;t=this.buffer.indexOf("\n"))this.trigger("data",this.buffer.substring(0,t)),this.buffer=this.buffer.substring(t+1)},t}(Q()),re=function(e){for(var t,n=e.split(new RegExp('(?:^|,)((?:[^=]*)=(?:"[^"]*"|[^,]*))')),r={},i=n.length;i--;)""!==n[i]&&((t=/([^=]*)=(.*)/.exec(n[i]).slice(1))[0]=t[0].replace(/^\s+|\s+$/g,""),t[1]=t[1].replace(/^\s+|\s+$/g,""),t[1]=t[1].replace(/^['"](.*)['"]$/g,"$1"),r[t[0]]=t[1]);return r},ie=function(e){function t(){var t;return(t=e.call(this)||this).customParsers=[],t.tagMappers=[],t}G(t,e);var n=t.prototype;return n.push=function(e){var t,n,r=this;0!==(e=e.trim()).length&&("#"===e[0]?this.tagMappers.reduce((function(t,n){var r=n(e);return r===e?t:t.concat([r])}),[e]).forEach((function(e){for(var i=0;i<r.customParsers.length;i++)if(r.customParsers[i].call(r,e))return;if(0===e.indexOf("#EXT"))if(e=e.replace("\r",""),t=/^#EXTM3U/.exec(e))r.trigger("data",{type:"tag",tagType:"m3u"});else{if(t=/^#EXTINF:?([0-9\.]*)?,?(.*)?$/.exec(e))return n={type:"tag",tagType:"inf"},t[1]&&(n.duration=parseFloat(t[1])),t[2]&&(n.title=t[2]),void r.trigger("data",n);if(t=/^#EXT-X-TARGETDURATION:?([0-9.]*)?/.exec(e))return n={type:"tag",tagType:"targetduration"},t[1]&&(n.duration=parseInt(t[1],10)),void r.trigger("data",n);if(t=/^#ZEN-TOTAL-DURATION:?([0-9.]*)?/.exec(e))return n={type:"tag",tagType:"totalduration"},t[1]&&(n.duration=parseInt(t[1],10)),void r.trigger("data",n);if(t=/^#EXT-X-VERSION:?([0-9.]*)?/.exec(e))return n={type:"tag",tagType:"version"},t[1]&&(n.version=parseInt(t[1],10)),void r.trigger("data",n);if(t=/^#EXT-X-MEDIA-SEQUENCE:?(\-?[0-9.]*)?/.exec(e))return n={type:"tag",tagType:"media-sequence"},t[1]&&(n.number=parseInt(t[1],10)),void r.trigger("data",n);if(t=/^#EXT-X-DISCONTINUITY-SEQUENCE:?(\-?[0-9.]*)?/.exec(e))return n={type:"tag",tagType:"discontinuity-sequence"},t[1]&&(n.number=parseInt(t[1],10)),void r.trigger("data",n);if(t=/^#EXT-X-PLAYLIST-TYPE:?(.*)?$/.exec(e))return n={type:"tag",tagType:"playlist-type"},t[1]&&(n.playlistType=t[1]),void r.trigger("data",n);if(t=/^#EXT-X-BYTERANGE:?([0-9.]*)?@?([0-9.]*)?/.exec(e))return n={type:"tag",tagType:"byterange"},t[1]&&(n.length=parseInt(t[1],10)),t[2]&&(n.offset=parseInt(t[2],10)),void r.trigger("data",n);if(t=/^#EXT-X-ALLOW-CACHE:?(YES|NO)?/.exec(e))return n={type:"tag",tagType:"allow-cache"},t[1]&&(n.allowed=!/NO/.test(t[1])),void r.trigger("data",n);if(t=/^#EXT-X-MAP:?(.*)$/.exec(e)){if(n={type:"tag",tagType:"map"},t[1]){var a=re(t[1]);if(a.URI&&(n.uri=a.URI),a.BYTERANGE){var s=a.BYTERANGE.split("@"),o=s[0],u=s[1];n.byterange={},o&&(n.byterange.length=parseInt(o,10)),u&&(n.byterange.offset=parseInt(u,10))}}r.trigger("data",n)}else if(t=/^#EXT-X-STREAM-INF:?(.*)$/.exec(e)){if(n={type:"tag",tagType:"stream-inf"},t[1]){if(n.attributes=re(t[1]),n.attributes.RESOLUTION){var c=n.attributes.RESOLUTION.split("x"),l={};c[0]&&(l.width=parseInt(c[0],10)),c[1]&&(l.height=parseInt(c[1],10)),n.attributes.RESOLUTION=l}n.attributes.BANDWIDTH&&(n.attributes.BANDWIDTH=parseInt(n.attributes.BANDWIDTH,10)),n.attributes["PROGRAM-ID"]&&(n.attributes["PROGRAM-ID"]=parseInt(n.attributes["PROGRAM-ID"],10))}r.trigger("data",n)}else{if(t=/^#EXT-X-MEDIA:?(.*)$/.exec(e))return n={type:"tag",tagType:"media"},t[1]&&(n.attributes=re(t[1])),void r.trigger("data",n);if(t=/^#EXT-X-ENDLIST/.exec(e))r.trigger("data",{type:"tag",tagType:"endlist"});else if(t=/^#EXT-X-DISCONTINUITY/.exec(e))r.trigger("data",{type:"tag",tagType:"discontinuity"});else{if(t=/^#EXT-X-PROGRAM-DATE-TIME:?(.*)$/.exec(e))return n={type:"tag",tagType:"program-date-time"},t[1]&&(n.dateTimeString=t[1],n.dateTimeObject=new Date(t[1])),void r.trigger("data",n);if(t=/^#EXT-X-KEY:?(.*)$/.exec(e))return n={type:"tag",tagType:"key"},t[1]&&(n.attributes=re(t[1]),n.attributes.IV&&("0x"===n.attributes.IV.substring(0,2).toLowerCase()&&(n.attributes.IV=n.attributes.IV.substring(2)),n.attributes.IV=n.attributes.IV.match(/.{8}/g),n.attributes.IV[0]=parseInt(n.attributes.IV[0],16),n.attributes.IV[1]=parseInt(n.attributes.IV[1],16),n.attributes.IV[2]=parseInt(n.attributes.IV[2],16),n.attributes.IV[3]=parseInt(n.attributes.IV[3],16),n.attributes.IV=new Uint32Array(n.attributes.IV))),void r.trigger("data",n);if(t=/^#EXT-X-START:?(.*)$/.exec(e))return n={type:"tag",tagType:"start"},t[1]&&(n.attributes=re(t[1]),n.attributes["TIME-OFFSET"]=parseFloat(n.attributes["TIME-OFFSET"]),n.attributes.PRECISE=/YES/.test(n.attributes.PRECISE)),void r.trigger("data",n);if(t=/^#EXT-X-CUE-OUT-CONT:?(.*)?$/.exec(e))return n={type:"tag",tagType:"cue-out-cont"},t[1]?n.data=t[1]:n.data="",void r.trigger("data",n);if(t=/^#EXT-X-CUE-OUT:?(.*)?$/.exec(e))return n={type:"tag",tagType:"cue-out"},t[1]?n.data=t[1]:n.data="",void r.trigger("data",n);if(t=/^#EXT-X-CUE-IN:?(.*)?$/.exec(e))return n={type:"tag",tagType:"cue-in"},t[1]?n.data=t[1]:n.data="",void r.trigger("data",n);r.trigger("data",{type:"tag",data:e.slice(4)})}}}else r.trigger("data",{type:"comment",text:e.slice(1)})})):this.trigger("data",{type:"uri",uri:e}))},n.addParser=function(e){var t=this,n=e.expression,r=e.customType,i=e.dataParser,a=e.segment;"function"!=typeof i&&(i=function(e){return e}),this.customParsers.push((function(e){if(n.exec(e))return t.trigger("data",{type:"custom",data:i(e),customType:r,segment:a}),!0}))},n.addTagMapper=function(e){var t=e.expression,n=e.map;this.tagMappers.push((function(e){return t.test(e)?n(e):e}))},t}(Q()),ae=function(e){function t(){var t;(t=e.call(this)||this).lineStream=new ne,t.parseStream=new ie,t.lineStream.pipe(t.parseStream);var n,r,i=W(t),a=[],s={},o=function(){},u={AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},c=0;t.manifest={allowCache:!0,discontinuityStarts:[],segments:[]};var l=0;return t.parseStream.on("data",(function(e){var t,d;({tag:function(){({"allow-cache":function(){this.manifest.allowCache=e.allowed,"allowed"in e||(this.trigger("info",{message:"defaulting allowCache to YES"}),this.manifest.allowCache=!0)},byterange:function(){var t={};"length"in e&&(s.byterange=t,t.length=e.length,"offset"in e||(e.offset=l)),"offset"in e&&(s.byterange=t,t.offset=e.offset),l=t.offset+t.length},endlist:function(){this.manifest.endList=!0},inf:function(){"mediaSequence"in this.manifest||(this.manifest.mediaSequence=0,this.trigger("info",{message:"defaulting media sequence to zero"})),"discontinuitySequence"in this.manifest||(this.manifest.discontinuitySequence=0,this.trigger("info",{message:"defaulting discontinuity sequence to zero"})),e.duration>0&&(s.duration=e.duration),0===e.duration&&(s.duration=.01,this.trigger("info",{message:"updating zero segment duration to a small value"})),this.manifest.segments=a},key:function(){if(e.attributes)if("NONE"!==e.attributes.METHOD)if(e.attributes.URI){if("urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed"===e.attributes.KEYFORMAT){return-1===["SAMPLE-AES","SAMPLE-AES-CTR","SAMPLE-AES-CENC"].indexOf(e.attributes.METHOD)?void this.trigger("warn",{message:"invalid key method provided for Widevine"}):("SAMPLE-AES-CENC"===e.attributes.METHOD&&this.trigger("warn",{message:"SAMPLE-AES-CENC is deprecated, please use SAMPLE-AES-CTR instead"}),"data:text/plain;base64,"!==e.attributes.URI.substring(0,23)?void this.trigger("warn",{message:"invalid key URI provided for Widevine"}):e.attributes.KEYID&&"0x"===e.attributes.KEYID.substring(0,2)?void(this.manifest.contentProtection={"com.widevine.alpha":{attributes:{schemeIdUri:e.attributes.KEYFORMAT,keyId:e.attributes.KEYID.substring(2)},pssh:te()(e.attributes.URI.split(",")[1])}}):void this.trigger("warn",{message:"invalid key ID provided for Widevine"}))}e.attributes.METHOD||this.trigger("warn",{message:"defaulting key method to AES-128"}),r={method:e.attributes.METHOD||"AES-128",uri:e.attributes.URI},void 0!==e.attributes.IV&&(r.iv=e.attributes.IV)}else this.trigger("warn",{message:"ignoring key declaration without URI"});else r=null;else this.trigger("warn",{message:"ignoring key declaration without attribute list"})},"media-sequence":function(){isFinite(e.number)?this.manifest.mediaSequence=e.number:this.trigger("warn",{message:"ignoring invalid media sequence: "+e.number})},"discontinuity-sequence":function(){isFinite(e.number)?(this.manifest.discontinuitySequence=e.number,c=e.number):this.trigger("warn",{message:"ignoring invalid discontinuity sequence: "+e.number})},"playlist-type":function(){/VOD|EVENT/.test(e.playlistType)?this.manifest.playlistType=e.playlistType:this.trigger("warn",{message:"ignoring unknown playlist type: "+e.playlist})},map:function(){n={},e.uri&&(n.uri=e.uri),e.byterange&&(n.byterange=e.byterange)},"stream-inf":function(){this.manifest.playlists=a,this.manifest.mediaGroups=this.manifest.mediaGroups||u,e.attributes?(s.attributes||(s.attributes={}),J(s.attributes,e.attributes)):this.trigger("warn",{message:"ignoring empty stream-inf attributes"})},media:function(){if(this.manifest.mediaGroups=this.manifest.mediaGroups||u,e.attributes&&e.attributes.TYPE&&e.attributes["GROUP-ID"]&&e.attributes.NAME){var n=this.manifest.mediaGroups[e.attributes.TYPE];n[e.attributes["GROUP-ID"]]=n[e.attributes["GROUP-ID"]]||{},t=n[e.attributes["GROUP-ID"]],(d={default:/yes/i.test(e.attributes.DEFAULT)}).default?d.autoselect=!0:d.autoselect=/yes/i.test(e.attributes.AUTOSELECT),e.attributes.LANGUAGE&&(d.language=e.attributes.LANGUAGE),e.attributes.URI&&(d.uri=e.attributes.URI),e.attributes["INSTREAM-ID"]&&(d.instreamId=e.attributes["INSTREAM-ID"]),e.attributes.CHARACTERISTICS&&(d.characteristics=e.attributes.CHARACTERISTICS),e.attributes.FORCED&&(d.forced=/yes/i.test(e.attributes.FORCED)),t[e.attributes.NAME]=d}else this.trigger("warn",{message:"ignoring incomplete or missing media group"})},discontinuity:function(){c+=1,s.discontinuity=!0,this.manifest.discontinuityStarts.push(a.length)},"program-date-time":function(){void 0===this.manifest.dateTimeString&&(this.manifest.dateTimeString=e.dateTimeString,this.manifest.dateTimeObject=e.dateTimeObject),s.dateTimeString=e.dateTimeString,s.dateTimeObject=e.dateTimeObject},targetduration:function(){!isFinite(e.duration)||e.duration<0?this.trigger("warn",{message:"ignoring invalid target duration: "+e.duration}):this.manifest.targetDuration=e.duration},totalduration:function(){!isFinite(e.duration)||e.duration<0?this.trigger("warn",{message:"ignoring invalid total duration: "+e.duration}):this.manifest.totalDuration=e.duration},start:function(){e.attributes&&!isNaN(e.attributes["TIME-OFFSET"])?this.manifest.start={timeOffset:e.attributes["TIME-OFFSET"],precise:e.attributes.PRECISE}:this.trigger("warn",{message:"ignoring start declaration without appropriate attribute list"})},"cue-out":function(){s.cueOut=e.data},"cue-out-cont":function(){s.cueOutCont=e.data},"cue-in":function(){s.cueIn=e.data}}[e.tagType]||o).call(i)},uri:function(){s.uri=e.uri,a.push(s),this.manifest.targetDuration&&!("duration"in s)&&(this.trigger("warn",{message:"defaulting segment duration to the target duration"}),s.duration=this.manifest.targetDuration),r&&(s.key=r),s.timeline=c,n&&(s.map=n),s={}},comment:function(){},custom:function(){e.segment?(s.custom=s.custom||{},s.custom[e.customType]=e.data):(this.manifest.custom=this.manifest.custom||{},this.manifest.custom[e.customType]=e.data)}})[e.type].call(i)})),t}G(t,e);var n=t.prototype;return n.push=function(e){this.lineStream.push(e)},n.end=function(){this.lineStream.push("\n")},n.addParser=function(e){this.parseStream.addParser(e)},n.addTagMapper=function(e){this.parseStream.addTagMapper(e)},t}(Q()),se=n(4810),oe=n(6150),ue=function(e){return!!e&&"object"==typeof e},ce=function e(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return n.reduce((function(t,n){return Object.keys(n).forEach((function(r){Array.isArray(t[r])&&Array.isArray(n[r])?t[r]=t[r].concat(n[r]):ue(t[r])&&ue(n[r])?t[r]=e(t[r],n[r]):t[r]=n[r]})),t}),{})},le=function(e){return e.reduce((function(e,t){return e.concat(t)}),[])},de=function(e){if(!e.length)return[];for(var t=[],n=0;n<e.length;n++)t.push(e[n]);return t},he="INVALID_NUMBER_OF_PERIOD",pe="DASH_EMPTY_MANIFEST",fe="DASH_INVALID_XML",me="NO_BASE_URL",ge="SEGMENT_TIME_UNSPECIFIED",ve="UNSUPPORTED_UTC_TIMING_SCHEME",ye=function(e){var t=e.baseUrl,n=void 0===t?"":t,r=e.source,i=void 0===r?"":r,a=e.range,s=void 0===a?"":a,o=e.indexRange,u=void 0===o?"":o,c={uri:i,resolvedUri:X()(n||"",i)};if(s||u){var l=(s||u).split("-"),d=parseInt(l[0],10),h=parseInt(l[1],10);c.byterange={length:h-d+1,offset:d}}return c},be={static:function(e){var t=e.duration,n=e.timescale,r=void 0===n?1:n,i=e.sourceDuration;return{start:0,end:Math.ceil(i/(t/r))}},dynamic:function(e){var t=e.NOW,n=e.clientOffset,r=e.availabilityStartTime,i=e.timescale,a=void 0===i?1:i,s=e.duration,o=e.start,u=void 0===o?0:o,c=e.minimumUpdatePeriod,l=void 0===c?0:c,d=e.timeShiftBufferDepth,h=void 0===d?1/0:d,p=(t+n)/1e3,f=r+u,m=p+l-f,g=Math.ceil(m*a/s),v=Math.floor((p-f-h)*a/s),y=Math.floor((p-f)*a/s);return{start:Math.max(0,v),end:Math.min(g,y)}}},_e=function(e){var t=e.type,n=void 0===t?"static":t,r=e.duration,i=e.timescale,a=void 0===i?1:i,s=e.sourceDuration,o=be[n](e),u=function(e,t){for(var n=[],r=e;r<t;r++)n.push(r);return n}(o.start,o.end).map(function(e){return function(t,n){var r=e.duration,i=e.timescale,a=void 0===i?1:i,s=e.periodIndex,o=e.startNumber;return{number:(void 0===o?1:o)+t,duration:r/a,timeline:s,time:n*r}}}(e));if("static"===n){var c=u.length-1;u[c].duration=s-r/a*c}return u},Te=function(e){var t=e.baseUrl,n=e.initialization,r=void 0===n?{}:n,i=e.sourceDuration,a=e.indexRange,s=void 0===a?"":a,o=e.duration;if(!t)throw new Error(me);var u=ye({baseUrl:t,source:r.sourceURL,range:r.range}),c=ye({baseUrl:t,source:t,indexRange:s});if(c.map=u,o){var l=_e(e);l.length&&(c.duration=l[0].duration,c.timeline=l[0].timeline)}else i&&(c.duration=i,c.timeline=0);return c.number=0,[c]},we=function(e,t,n){for(var r=e.sidx.map?e.sidx.map:null,i=e.sidx.duration,a=e.timeline||0,s=e.sidx.byterange,o=s.offset+s.length,u=t.timescale,c=t.references.filter((function(e){return 1!==e.referenceType})),l=[],d=o+t.firstOffset,h=0;h<c.length;h++){var p=t.references[h],f=p.referencedSize,m=p.subsegmentDuration,g=Te({baseUrl:n,timescale:u,timeline:a,periodIndex:a,duration:m,sourceDuration:i,indexRange:d+"-"+(d+f-1)})[0];r&&(g.map=r),l.push(g),d+=f}return e.segments=l,e},Se=function(e){var t;return(t=e.reduce((function(e,t){var n,r=t.attributes.id+(t.attributes.lang||"");return e[r]?(t.segments[0]&&(t.segments[0].discontinuity=!0),(n=e[r].segments).push.apply(n,t.segments),t.attributes.contentProtection&&(e[r].attributes.contentProtection=t.attributes.contentProtection)):e[r]=t,e}),{}),Object.keys(t).map((function(e){return t[e]}))).map((function(e){var t,n;return e.discontinuityStarts=(t=e.segments,n="discontinuity",t.reduce((function(e,t,r){return t[n]&&e.push(r),e}),[])),e}))},Ce=function(e,t){if(void 0===t&&(t={}),!Object.keys(t).length)return e;for(var n in e){var r=e[n];if(r.sidx){var i=r.sidx.uri+"-"+(s=r.sidx.byterange,o=void 0,o=s.offset+s.length-1,s.offset+"-"+o),a=t[i]&&t[i].sidx;r.sidx&&a&&we(r,a,r.sidx.resolvedUri)}}var s,o;return e},Ee=function(e){var t,n=e.attributes,r=e.segments,i=e.sidx,a={attributes:(t={NAME:n.id,BANDWIDTH:n.bandwidth,CODECS:n.codecs},t["PROGRAM-ID"]=1,t),uri:"",endList:"static"===(n.type||"static"),timeline:n.periodIndex,resolvedUri:"",targetDuration:n.duration,segments:r,mediaSequence:r.length?r[0].number:1};return n.contentProtection&&(a.contentProtection=n.contentProtection),i&&(a.sidx=i),a},ke=function(e){var t,n=e.attributes,r=e.segments;void 0===r&&(r=[{uri:n.baseUrl,timeline:n.periodIndex,resolvedUri:n.baseUrl||"",duration:n.sourceDuration,number:0}],n.duration=n.sourceDuration);var i=((t={NAME:n.id,BANDWIDTH:n.bandwidth})["PROGRAM-ID"]=1,t);return n.codecs&&(i.CODECS=n.codecs),{attributes:i,uri:"",endList:"static"===(n.type||"static"),timeline:n.periodIndex,resolvedUri:n.baseUrl||"",targetDuration:n.duration,segments:r,mediaSequence:r.length?r[0].number:1}},Oe=function(e){var t,n=e.attributes,r=e.segments,i=e.sidx,a={attributes:(t={NAME:n.id,AUDIO:"audio",SUBTITLES:"subs",RESOLUTION:{width:n.width,height:n.height},CODECS:n.codecs,BANDWIDTH:n.bandwidth},t["PROGRAM-ID"]=1,t),uri:"",endList:"static"===(n.type||"static"),timeline:n.periodIndex,resolvedUri:"",targetDuration:n.duration,segments:r,mediaSequence:r.length?r[0].number:1};return n.contentProtection&&(a.contentProtection=n.contentProtection),i&&(a.sidx=i),a},xe=function(e,t,n){var r;if(void 0===n&&(n={}),!e.length)return{};var i=e[0].attributes,a=i.sourceDuration,s=i.type,o=void 0===s?"static":s,u=i.suggestedPresentationDelay,c=i.minimumUpdatePeriod,l=Se(e.filter((function(e){var t=e.attributes;return"video/mp4"===t.mimeType||"video"===t.contentType}))).map(Oe),d=Se(e.filter((function(e){var t=e.attributes;return"audio/mp4"===t.mimeType||"audio"===t.contentType}))),h=e.filter((function(e){var t=e.attributes;return"text/vtt"===t.mimeType||"text"===t.contentType})),p={allowCache:!0,discontinuityStarts:[],segments:[],endList:!0,mediaGroups:(r={AUDIO:{},VIDEO:{}},r["CLOSED-CAPTIONS"]={},r.SUBTITLES={},r),uri:"",duration:a,playlists:Ce(l,n)};return c>=0&&(p.minimumUpdatePeriod=1e3*c),t&&(p.locations=t),"dynamic"===o&&(p.suggestedPresentationDelay=u),d.length&&(p.mediaGroups.AUDIO.audio=function(e,t){var n;void 0===t&&(t={});var r=e.reduce((function(e,r){var i=r.attributes.role&&r.attributes.role.value||"",a=r.attributes.lang||"",s="main";if(a){var o=i?" ("+i+")":"";s=""+r.attributes.lang+o}return e[s]&&e[s].playlists[0].attributes.BANDWIDTH>r.attributes.bandwidth||(e[s]={language:a,autoselect:!0,default:"main"===i,playlists:Ce([Ee(r)],t),uri:""},void 0===n&&"main"===i&&((n=r).default=!0)),e}),{});return n||(r[Object.keys(r)[0]].default=!0),r}(d,n)),h.length&&(p.mediaGroups.SUBTITLES.subs=function(e,t){return void 0===t&&(t={}),e.reduce((function(e,n){var r=n.attributes.lang||"text";return e[r]||(e[r]={language:r,default:!1,autoselect:!1,playlists:Ce([ke(n)],t),uri:""}),e}),{})}(h,n)),p},Ae=function(e,t,n){var r=e.NOW,i=e.clientOffset,a=e.availabilityStartTime,s=e.timescale,o=void 0===s?1:s,u=e.start,c=void 0===u?0:u,l=e.minimumUpdatePeriod,d=(r+i)/1e3+(void 0===l?0:l)-(a+c);return Math.ceil((d*o-t)/n)},Pe=function(e,t){for(var n=e.type,r=void 0===n?"static":n,i=e.minimumUpdatePeriod,a=void 0===i?0:i,s=e.media,o=void 0===s?"":s,u=e.sourceDuration,c=e.timescale,l=void 0===c?1:c,d=e.startNumber,h=void 0===d?1:d,p=e.periodIndex,f=[],m=-1,g=0;g<t.length;g++){var v=t[g],y=v.d,b=v.r||0,_=v.t||0;m<0&&(m=_),_&&_>m&&(m=_);var T=void 0;if(b<0){var w=g+1;T=w===t.length?"dynamic"===r&&a>0&&o.indexOf("$Number$")>0?Ae(e,m,y):(u*l-m)/y:(t[w].t-m)/y}else T=b+1;for(var S=h+f.length+T,C=h+f.length;C<S;)f.push({number:C,duration:y/l,time:m,timeline:p}),m+=y,C++}return f},Ie=/\$([A-z]*)(?:(%0)([0-9]+)d)?\$/g,Le=function(e,t){return e.replace(Ie,function(e){return function(t,n,r,i){if("$$"===t)return"$";if(void 0===e[n])return t;var a=""+e[n];return"RepresentationID"===n?a:(i=r?parseInt(i,10):1,a.length>=i?a:""+new Array(i-a.length+1).join("0")+a)}}(t))},Me=function(e,t){var n={RepresentationID:e.id,Bandwidth:e.bandwidth||0},r=e.initialization,i=void 0===r?{sourceURL:"",range:""}:r,a=ye({baseUrl:e.baseUrl,source:Le(i.sourceURL,n),range:i.range}),s=function(e,t){return e.duration||t?e.duration?_e(e):Pe(e,t):[{number:e.startNumber||1,duration:e.sourceDuration,time:0,timeline:e.periodIndex}]}(e,t);return s.map((function(t){n.Number=t.number,n.Time=t.time;var r=Le(e.media||"",n);return{uri:r,timeline:t.timeline,duration:t.duration,resolvedUri:X()(e.baseUrl||"",r),map:a,number:t.number}}))},De=function(e,t){var n=e.duration,r=e.segmentUrls,i=void 0===r?[]:r;if(!n&&!t||n&&t)throw new Error(ge);var a,s=i.map((function(t){return function(e,t){var n=e.baseUrl,r=e.initialization,i=void 0===r?{}:r,a=ye({baseUrl:n,source:i.sourceURL,range:i.range}),s=ye({baseUrl:n,source:t.media,range:t.mediaRange});return s.map=a,s}(e,t)}));return n&&(a=_e(e)),t&&(a=Pe(e,t)),a.map((function(e,t){if(s[t]){var n=s[t];return n.timeline=e.timeline,n.duration=e.duration,n.number=e.number,n}})).filter((function(e){return e}))},Re=function(e){var t,n,r=e.attributes,i=e.segmentInfo;i.template?(n=Me,t=ce(r,i.template)):i.base?(n=Te,t=ce(r,i.base)):i.list&&(n=De,t=ce(r,i.list));var a={attributes:r};if(!n)return a;var s=n(t,i.timeline);if(t.duration){var o=t,u=o.duration,c=o.timescale,l=void 0===c?1:c;t.duration=u/l}else s.length?t.duration=s.reduce((function(e,t){return Math.max(e,Math.ceil(t.duration))}),0):t.duration=0;return a.attributes=t,a.segments=s,i.base&&t.indexRange&&(a.sidx=s[0],a.segments=[]),a},Ne=function(e,t){return de(e.childNodes).filter((function(e){return e.tagName===t}))},je=function(e){return e.textContent.trim()},Ue=function(e){var t=/P(?:(\d*)Y)?(?:(\d*)M)?(?:(\d*)D)?(?:T(?:(\d*)H)?(?:(\d*)M)?(?:([\d.]*)S)?)?/.exec(e);if(!t)return 0;var n=t.slice(1),r=n[0],i=n[1],a=n[2],s=n[3],o=n[4],u=n[5];return 31536e3*parseFloat(r||0)+2592e3*parseFloat(i||0)+86400*parseFloat(a||0)+3600*parseFloat(s||0)+60*parseFloat(o||0)+parseFloat(u||0)},Fe={mediaPresentationDuration:function(e){return Ue(e)},availabilityStartTime:function(e){return/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(t=e)&&(t+="Z"),Date.parse(t)/1e3;var t},minimumUpdatePeriod:function(e){return Ue(e)},suggestedPresentationDelay:function(e){return Ue(e)},type:function(e){return e},timeShiftBufferDepth:function(e){return Ue(e)},start:function(e){return Ue(e)},width:function(e){return parseInt(e,10)},height:function(e){return parseInt(e,10)},bandwidth:function(e){return parseInt(e,10)},startNumber:function(e){return parseInt(e,10)},timescale:function(e){return parseInt(e,10)},duration:function(e){var t=parseInt(e,10);return isNaN(t)?Ue(e):t},d:function(e){return parseInt(e,10)},t:function(e){return parseInt(e,10)},r:function(e){return parseInt(e,10)},DEFAULT:function(e){return e}},$e=function(e){return e&&e.attributes?de(e.attributes).reduce((function(e,t){var n=Fe[t.name]||Fe.DEFAULT;return e[t.name]=n(t.value),e}),{}):{}},Be={"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime"},Ve=function(e,t){return t.length?le(e.map((function(e){return t.map((function(t){return X()(e,je(t))}))}))):e},qe=function(e){var t=Ne(e,"SegmentTemplate")[0],n=Ne(e,"SegmentList")[0],r=n&&Ne(n,"SegmentURL").map((function(e){return ce({tag:"SegmentURL"},$e(e))})),i=Ne(e,"SegmentBase")[0],a=n||t,s=a&&Ne(a,"SegmentTimeline")[0],o=n||i||t,u=o&&Ne(o,"Initialization")[0],c=t&&$e(t);c&&u?c.initialization=u&&$e(u):c&&c.initialization&&(c.initialization={sourceURL:c.initialization});var l={template:c,timeline:s&&Ne(s,"S").map((function(e){return $e(e)})),list:n&&ce($e(n),{segmentUrls:r,initialization:$e(u)}),base:i&&ce($e(i),{initialization:$e(u)})};return Object.keys(l).forEach((function(e){l[e]||delete l[e]})),l},He=function(e,t,n){return function(r){var i=$e(r),a=Ve(t,Ne(r,"BaseURL")),s=Ne(r,"Role")[0],o={role:$e(s)},u=ce(e,i,o),c=Ne(r,"ContentProtection").reduce((function(e,t){var n=$e(t),r=Be[n.schemeIdUri];if(r){e[r]={attributes:n};var i=Ne(t,"cenc:pssh")[0];if(i){var a=je(i),s=a&&te()(a);e[r].pssh=s}}return e}),{});Object.keys(c).length&&(u=ce(u,{contentProtection:c}));var l=qe(r),d=Ne(r,"Representation"),h=ce(n,l);return le(d.map(function(e,t,n){return function(r){var i=Ne(r,"BaseURL"),a=Ve(t,i),s=ce(e,$e(r)),o=qe(r);return a.map((function(e){return{segmentInfo:ce(n,o),attributes:ce(s,{baseUrl:e})}}))}}(u,a,h)))}},We=function(e,t){return function(n,r){var i=Ve(t,Ne(n,"BaseURL")),a=$e(n),o=parseInt(a.id,10),u=s().isNaN(o)?r:o,c=ce(e,{periodIndex:u}),l=Ne(n,"AdaptationSet"),d=qe(n);return le(l.map(He(c,i,d)))}},ze=function(e){if(""===e)throw new Error(pe);var t=(new oe.a).parseFromString(e,"application/xml"),n=t&&"MPD"===t.documentElement.tagName?t.documentElement:null;if(!n||n&&n.getElementsByTagName("parsererror").length>0)throw new Error(fe);return n},Ge=function(e,t){void 0===t&&(t={});var n=function(e,t){void 0===t&&(t={});var n=t,r=n.manifestUri,i=void 0===r?"":r,a=n.NOW,s=void 0===a?Date.now():a,o=n.clientOffset,u=void 0===o?0:o,c=Ne(e,"Period");if(!c.length)throw new Error(he);var l=Ne(e,"Location"),d=$e(e),h=Ve([i],Ne(e,"BaseURL"));return d.sourceDuration=d.mediaPresentationDuration||0,d.NOW=s,d.clientOffset=u,l.length&&(d.locations=l.map(je)),{locations:d.locations,representationInfo:le(c.map(We(d,h)))}}(ze(e),t),r=n.representationInfo.map(Re);return xe(r,n.locations,t.sidxMapping)},Ke=function(e){return function(e){var t=Ne(e,"UTCTiming")[0];if(!t)return null;var n=$e(t);switch(n.schemeIdUri){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":n.method="HEAD";break;case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":n.method="GET";break;case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":n.method="DIRECT",n.value=Date.parse(n.value);break;default:throw new Error(ve)}return n}(ze(e))},Xe=n(4221),Ye=n.n(Xe),Qe=n(9352),Je=n(185),Ze=n(5547),et=n.n(Ze),tt=n(1489),nt=n(7661),rt=n.n(nt),it=n(8044),at=X(),st=function(e,t,n){return e&&n&&n.responseURL&&t!==n.responseURL?n.responseURL:t},ot=i().log,ut=function(e,t){return e+"-"+t},ct=function(e){var t=e.manifestString,n=e.customTagParsers,r=void 0===n?[]:n,i=e.customTagMappers,a=void 0===i?[]:i,s=new ae;return r.forEach((function(e){return s.addParser(e)})),a.forEach((function(e){return s.addTagMapper(e)})),s.push(t),s.end(),s.manifest},lt=function(e,t){["AUDIO","SUBTITLES"].forEach((function(n){for(var r in e.mediaGroups[n])for(var i in e.mediaGroups[n][r]){var a=e.mediaGroups[n][r][i];t(a,n,r,i)}}))},dt=function(e){var t=e.playlist,n=e.uri,r=e.id;t.id=r,n&&(t.uri=n),t.attributes=t.attributes||{}},ht=function(e,t){e.uri=t;for(var n=0;n<e.playlists.length;n++)if(!e.playlists[n].uri){var r="placeholder-uri-"+n;e.playlists[n].uri=r}lt(e,(function(t,n,r,i){if(t.playlists&&t.playlists.length&&!t.playlists[0].uri){var a="placeholder-uri-"+n+"-"+r+"-"+i,s=ut(0,a);t.playlists[0].uri=a,t.playlists[0].id=s,e.playlists[s]=t.playlists[0],e.playlists[a]=t.playlists[0]}})),function(e){for(var t=e.playlists.length;t--;){var n=e.playlists[t];dt({playlist:n,id:ut(t,n.uri)}),n.resolvedUri=at(e.uri,n.uri),e.playlists[n.id]=n,e.playlists[n.uri]=n,n.attributes.BANDWIDTH||ot.warn("Invalid playlist STREAM-INF detected. Missing BANDWIDTH attribute.")}}(e),function(e){lt(e,(function(t){t.uri&&(t.resolvedUri=at(e.uri,t.uri))}))}(e)},pt=i().mergeOptions,ft=i().EventTarget,mt=function(e,t){e.resolvedUri||(e.resolvedUri=at(t,e.uri)),e.key&&!e.key.resolvedUri&&(e.key.resolvedUri=at(t,e.key.uri)),e.map&&!e.map.resolvedUri&&(e.map.resolvedUri=at(t,e.map.uri))},gt=function(e,t){var n=pt(e,{}),r=n.playlists[t.id];if(!r)return null;if(r.segments&&t.segments&&r.segments.length===t.segments.length&&r.endList===t.endList&&r.mediaSequence===t.mediaSequence)return null;var i=pt(r,t);r.segments&&(i.segments=function(e,t,n){var r=t.slice();n=n||0;for(var i=Math.min(e.length,t.length+n),a=n;a<i;a++)r[a-n]=pt(e[a],r[a-n]);return r}(r.segments,t.segments,t.mediaSequence-r.mediaSequence)),i.segments.forEach((function(e){mt(e,i.resolvedUri)}));for(var a=0;a<n.playlists.length;a++)n.playlists[a].id===t.id&&(n.playlists[a]=i);return n.playlists[t.id]=i,n.playlists[t.uri]=i,n},vt=function(e,t){var n=e.segments[e.segments.length-1];return t&&n&&n.duration?1e3*n.duration:500*(e.targetDuration||10)},yt=function(e){function t(t,n,r){var i;if(void 0===r&&(r={}),i=e.call(this)||this,!t)throw new Error("A non-empty playlist URL or object is required");var a=r,s=a.withCredentials,o=void 0!==s&&s,u=a.handleManifestRedirects,c=void 0!==u&&u;i.src=t,i.vhs_=n,i.withCredentials=o,i.handleManifestRedirects=c;var l=n.options_;return i.customTagParsers=l&&l.customTagParsers||[],i.customTagMappers=l&&l.customTagMappers||[],i.state="HAVE_NOTHING",i.on("mediaupdatetimeout",(function(){"HAVE_METADATA"===i.state&&(i.state="HAVE_CURRENT_METADATA",i.request=i.vhs_.xhr({uri:at(i.master.uri,i.media().uri),withCredentials:i.withCredentials},(function(e,t){if(i.request)return e?i.playlistRequestError(i.request,i.media(),"HAVE_METADATA"):void i.haveMetadata({playlistString:i.request.responseText,url:i.media().uri,id:i.media().id})})))})),i}G(t,e);var n=t.prototype;return n.playlistRequestError=function(e,t,n){var r=t.uri,i=t.id;this.request=null,n&&(this.state=n),this.error={playlist:this.master.playlists[i],status:e.status,message:"HLS playlist request error at URL: "+r+".",responseText:e.responseText,code:e.status>=500?4:2},this.trigger("error")},n.haveMetadata=function(e){var t=this,n=e.playlistString,r=e.playlistObject,i=e.url,a=e.id;this.request=null,this.state="HAVE_METADATA";var o=r||ct({manifestString:n,customTagParsers:this.customTagParsers,customTagMappers:this.customTagMappers});dt({playlist:o,uri:i,id:a});var u=gt(this.master,o);this.targetDuration=o.targetDuration,u?(this.master=u,this.media_=this.master.playlists[a]):this.trigger("playlistunchanged"),this.media().endList||(s().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=s().setTimeout((function(){t.trigger("mediaupdatetimeout")}),vt(this.media(),!!u))),this.trigger("loadedplaylist")},n.dispose=function(){this.trigger("dispose"),this.stopRequest(),s().clearTimeout(this.mediaUpdateTimeout),s().clearTimeout(this.finalRenditionTimeout),this.off()},n.stopRequest=function(){if(this.request){var e=this.request;this.request=null,e.onreadystatechange=null,e.abort()}},n.media=function(e,t){var n=this;if(!e)return this.media_;if("HAVE_NOTHING"===this.state)throw new Error("Cannot switch media playlist from "+this.state);if("string"==typeof e){if(!this.master.playlists[e])throw new Error("Unknown playlist URI: "+e);e=this.master.playlists[e]}if(s().clearTimeout(this.finalRenditionTimeout),t){var r=e.targetDuration/2*1e3||5e3;this.finalRenditionTimeout=s().setTimeout(this.media.bind(this,e,!1),r)}else{var i=this.state,a=!this.media_||e.id!==this.media_.id;if(this.master.playlists[e.id].endList||e.endList&&e.segments.length)return this.request&&(this.request.onreadystatechange=null,this.request.abort(),this.request=null),this.state="HAVE_METADATA",this.media_=e,void(a&&(this.trigger("mediachanging"),"HAVE_MASTER"===i?this.trigger("loadedmetadata"):this.trigger("mediachange")));if(a){if(this.state="SWITCHING_MEDIA",this.request){if(e.resolvedUri===this.request.url)return;this.request.onreadystatechange=null,this.request.abort(),this.request=null}this.media_&&this.trigger("mediachanging"),this.request=this.vhs_.xhr({uri:e.resolvedUri,withCredentials:this.withCredentials},(function(t,r){if(n.request){if(e.resolvedUri=st(n.handleManifestRedirects,e.resolvedUri,r),t)return n.playlistRequestError(n.request,e,i);n.haveMetadata({playlistString:r.responseText,url:e.uri,id:e.id}),"HAVE_MASTER"===i?n.trigger("loadedmetadata"):n.trigger("mediachange")}}))}}},n.pause=function(){this.stopRequest(),s().clearTimeout(this.mediaUpdateTimeout),"HAVE_NOTHING"===this.state&&(this.started=!1),"SWITCHING_MEDIA"===this.state?this.media_?this.state="HAVE_METADATA":this.state="HAVE_MASTER":"HAVE_CURRENT_METADATA"===this.state&&(this.state="HAVE_METADATA")},n.load=function(e){var t=this;s().clearTimeout(this.mediaUpdateTimeout);var n=this.media();if(e){var r=n?n.targetDuration/2*1e3:5e3;this.mediaUpdateTimeout=s().setTimeout((function(){return t.load()}),r)}else this.started?n&&!n.endList?this.trigger("mediaupdatetimeout"):this.trigger("loadedplaylist"):this.start()},n.start=function(){var e=this;if(this.started=!0,"object"==typeof this.src)return this.src.uri||(this.src.uri=s().location.href),this.src.resolvedUri=this.src.uri,void setTimeout((function(){e.setupInitialPlaylist(e.src)}),0);this.request=this.vhs_.xhr({uri:this.src,withCredentials:this.withCredentials},(function(t,n){if(e.request){if(e.request=null,t)return e.error={status:n.status,message:"HLS playlist request error at URL: "+e.src+".",responseText:n.responseText,code:2},"HAVE_NOTHING"===e.state&&(e.started=!1),e.trigger("error");e.src=st(e.handleManifestRedirects,e.src,n);var r=ct({manifestString:n.responseText,customTagParsers:e.customTagParsers,customTagMappers:e.customTagMappers});e.setupInitialPlaylist(r)}}))},n.srcUri=function(){return"string"==typeof this.src?this.src:this.src.uri},n.setupInitialPlaylist=function(e){if(this.state="HAVE_MASTER",e.playlists)return this.master=e,ht(this.master,this.srcUri()),e.playlists.forEach((function(e){e.segments&&e.segments.forEach((function(t){mt(t,e.resolvedUri)}))})),this.trigger("loadedplaylist"),void(this.request||this.media(this.master.playlists[0]));var t=this.srcUri()||s().location.href;this.master=function(e,t){var n=ut(0,t),r={mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:s().location.href,resolvedUri:s().location.href,playlists:[{uri:t,id:n,resolvedUri:t,attributes:{}}]};return r.playlists[n]=r.playlists[0],r.playlists[t]=r.playlists[0],r}(0,t),this.haveMetadata({playlistObject:e,url:t,id:this.master.playlists[0].id}),this.trigger("loadedmetadata")},t}(ft),bt=1/30,_t=.1,Tt=function(e,t){var n,r=[];if(e&&e.length)for(n=0;n<e.length;n++)t(e.start(n),e.end(n))&&r.push([e.start(n),e.end(n)]);return i().createTimeRanges(r)},wt=function(e,t){return Tt(e,(function(e,n){return e-_t<=t&&n+_t>=t}))},St=function(e,t){return Tt(e,(function(e){return e-bt>=t}))},Ct=function(e){var t=[];if(!e||!e.length)return"";for(var n=0;n<e.length;n++)t.push(e.start(n)+" => "+e.end(n));return t.join(", ")},Et=function(e){for(var t=[],n=0;n<e.length;n++)t.push({start:e.start(n),end:e.end(n)});return t},kt=i().createTimeRange,Ot=function(e,t,n){if(void 0===t&&(t=e.mediaSequence+e.segments.length),t<e.mediaSequence)return 0;var r=function(e,t){var n=0,r=t-e.mediaSequence,i=e.segments[r];if(i){if(void 0!==i.start)return{result:i.start,precise:!0};if(void 0!==i.end)return{result:i.end-i.duration,precise:!0}}for(;r--;){if(void 0!==(i=e.segments[r]).end)return{result:n+i.end,precise:!0};if(n+=i.duration,void 0!==i.start)return{result:n+i.start,precise:!0}}return{result:n,precise:!1}}(e,t);if(r.precise)return r.result;var i=function(e,t){for(var n,r=0,i=t-e.mediaSequence;i<e.segments.length;i++){if(void 0!==(n=e.segments[i]).start)return{result:n.start-r,precise:!0};if(r+=n.duration,void 0!==n.end)return{result:n.end-r,precise:!0}}return{result:-1,precise:!1}}(e,t);return i.precise?i.result:r.result+n},xt=function(e,t,n){if(!e)return 0;if("number"!=typeof n&&(n=0),void 0===t){if(e.totalDuration)return e.totalDuration;if(!e.endList)return s()[1/0]}return Ot(e,t,n)},At=function(e,t,n){var r=0;if(t>n){var i=[n,t];t=i[0],n=i[1]}if(t<0){for(var a=t;a<Math.min(0,n);a++)r+=e.targetDuration;t=0}for(var s=t;s<n;s++)r+=e.segments[s].duration;return r},Pt=function(e,t){if(!e.segments.length)return 0;var n=e.segments.length,r=e.segments[n-1].duration||e.targetDuration,i="number"==typeof t?t:r+2*e.targetDuration;if(0===i)return n;for(var a=0;n--&&!((a+=e.segments[n].duration)>=i););return Math.max(0,n)},It=function(e,t,n,r){if(!e||!e.segments)return null;if(e.endList)return xt(e);if(null===t)return null;t=t||0;var i=n?Pt(e,r):e.segments.length;return Ot(e,e.mediaSequence+i,t)},Lt=function(e){return e.excludeUntil&&e.excludeUntil>Date.now()},Mt=function(e){return e.excludeUntil&&e.excludeUntil===1/0},Dt=function(e){var t=Lt(e);return!e.disabled&&!t},Rt=function(e,t){return t.attributes&&t.attributes[e]},Nt=function(e,t){if(1===e.playlists.length)return!0;var n=t.attributes.BANDWIDTH||Number.MAX_VALUE;return 0===e.playlists.filter((function(e){return!!Dt(e)&&(e.attributes.BANDWIDTH||0)<n})).length},jt={duration:xt,seekable:function(e,t,n){var r=t||0,i=It(e,t,!0,n);return null===i?kt():kt(r,i)},safeLiveIndex:Pt,getMediaInfoForTime:function(e,t,n,r){var i,a=e.segments.length,s=t-r;if(s<0){if(n>0)for(i=n-1;i>=0;i--)if((s+=e.segments[i].duration+bt)>0)return{mediaIndex:i,startTime:r-At(e,n,i)};return{mediaIndex:0,startTime:t}}if(n<0){for(i=n;i<0;i++)if((s-=e.targetDuration)<0)return{mediaIndex:0,startTime:t};n=0}for(i=n;i<a;i++)if((s-=e.segments[i].duration+bt)<0)return{mediaIndex:i,startTime:r+At(e,n,i)};return{mediaIndex:a-1,startTime:t}},isEnabled:Dt,isDisabled:function(e){return e.disabled},isBlacklisted:Lt,isIncompatible:Mt,playlistEnd:It,isAes:function(e){for(var t=0;t<e.segments.length;t++)if(e.segments[t].key)return!0;return!1},hasAttribute:Rt,estimateSegmentRequestTime:function(e,t,n,r){return void 0===r&&(r=0),Rt("BANDWIDTH",n)?(e*n.attributes.BANDWIDTH-8*r)/t:NaN},isLowestEnabledRendition:Nt},Ut=i().xhr,Ft=i().mergeOptions,$t=function(e,t,n,r){var i="arraybuffer"===e.responseType?e.response:e.responseText;!t&&i&&(e.responseTime=Date.now(),e.roundTripTime=e.responseTime-e.requestTime,e.bytesReceived=i.byteLength||i.length,e.bandwidth||(e.bandwidth=Math.floor(e.bytesReceived/e.roundTripTime*8*1e3))),n.headers&&(e.responseHeaders=n.headers),t&&"ETIMEDOUT"===t.code&&(e.timedout=!0),t||e.aborted||200===n.statusCode||206===n.statusCode||0===n.statusCode||(t=new Error("XHR Failed with a response of: "+(e&&(i||e.responseText)))),r(t,e)},Bt=function(){return function e(t,n){t=Ft({timeout:45e3},t);var r=e.beforeRequest||i().Vhs.xhr.beforeRequest;if(r&&"function"==typeof r){var a=r(t);a&&(t=a)}var s=Ut(t,(function(e,t){return $t(s,e,t,n)})),o=s.abort;return s.abort=function(){return s.aborted=!0,o.apply(s,arguments)},s.uri=t.uri,s.requestTime=Date.now(),s}},Vt=function(e){var t,n,r={};return e.byterange&&(r.Range=(t=e.byterange,n=t.offset+t.length-1,"bytes="+t.offset+"-"+n)),r},qt=function(e,t){return e.start(t)+"-"+e.end(t)},Ht=function(e,t){var n=e.toString(16);return"00".substring(0,2-n.length)+n+(t%2?" ":"")},Wt=function(e){return e>=32&&e<126?String.fromCharCode(e):"."},zt=function(e){var t={};return Object.keys(e).forEach((function(n){var r=e[n];ArrayBuffer.isView(r)?t[n]={bytes:r.buffer,byteOffset:r.byteOffset,byteLength:r.byteLength}:t[n]=r})),t},Gt=function(e){var t=e.byterange||{length:1/0,offset:0};return[t.length,t.offset,e.resolvedUri].join(",")},Kt=function(e){return e.resolvedUri},Xt=function(e){for(var t=Array.prototype.slice.call(e),n=16,r="",i=0;i<t.length/n;i++)r+=t.slice(i*n,i*n+n).map(Ht).join("")+" "+t.slice(i*n,i*n+n).map(Wt).join("")+"\n";return r},Yt=Object.freeze({__proto__:null,createTransferableMessage:zt,initSegmentId:Gt,segmentKeyId:Kt,hexDump:Xt,tagDump:function(e){var t=e.bytes;return Xt(t)},textRanges:function(e){var t,n="";for(t=0;t<e.length;t++)n+=qt(e,t)+" ";return n}}),Qt=function(e){var t=e.playlist,n=e.time,r=void 0===n?void 0:n,i=e.callback;if(!i)throw new Error("getProgramTime: callback must be provided");if(!t||void 0===r)return i({message:"getProgramTime: playlist and time must be provided"});var a=function(e,t){if(!t||!t.segments||0===t.segments.length)return null;for(var n,r=0,i=0;i<t.segments.length&&!(e<=(r=(n=t.segments[i]).videoTimingInfo?n.videoTimingInfo.transmuxedPresentationEnd:r+n.duration));i++);var a=t.segments[t.segments.length-1];if(a.videoTimingInfo&&a.videoTimingInfo.transmuxedPresentationEnd<e)return null;if(e>r){if(e>r+.25*a.duration)return null;n=a}return{segment:n,estimatedStart:n.videoTimingInfo?n.videoTimingInfo.transmuxedPresentationStart:r-n.duration,type:n.videoTimingInfo?"accurate":"estimate"}}(r,t);if(!a)return i({message:"valid programTime was not found"});if("estimate"===a.type)return i({message:"Accurate programTime could not be determined. Please seek to e.seekTime and try again",seekTime:a.estimatedStart});var s={mediaSeconds:r},o=function(e,t){if(!t.dateTimeObject)return null;var n=t.videoTimingInfo.transmuxerPrependedSeconds,r=e-(t.videoTimingInfo.transmuxedPresentationStart+n);return new Date(t.dateTimeObject.getTime()+1e3*r)}(r,a.segment);return o&&(s.programDateTime=o.toISOString()),i(null,s)},Jt=function e(t){var n=t.programTime,r=t.playlist,i=t.retryCount,a=void 0===i?2:i,s=t.seekTo,o=t.pauseAfterSeek,u=void 0===o||o,c=t.tech,l=t.callback;if(!l)throw new Error("seekToProgramTime: callback must be provided");if(void 0===n||!r||!s)return l({message:"seekToProgramTime: programTime, seekTo and playlist must be provided"});if(!r.endList&&!c.hasStarted_)return l({message:"player must be playing a live stream to start buffering"});if(!function(e){if(!e.segments||0===e.segments.length)return!1;for(var t=0;t<e.segments.length;t++)if(!e.segments[t].dateTimeObject)return!1;return!0}(r))return l({message:"programDateTime tags must be provided in the manifest "+r.resolvedUri});var d=function(e,t){var n;try{n=new Date(e)}catch(e){return null}if(!t||!t.segments||0===t.segments.length)return null;var r=t.segments[0];if(n<r.dateTimeObject)return null;for(var i=0;i<t.segments.length-1&&(r=t.segments[i],!(n<t.segments[i+1].dateTimeObject));i++);var a,s=t.segments[t.segments.length-1],o=s.dateTimeObject,u=s.videoTimingInfo?(a=s.videoTimingInfo).transmuxedPresentationEnd-a.transmuxedPresentationStart-a.transmuxerPrependedSeconds:s.duration+.25*s.duration;return n>new Date(o.getTime()+1e3*u)?null:(n>o&&(r=s),{segment:r,estimatedStart:r.videoTimingInfo?r.videoTimingInfo.transmuxedPresentationStart:jt.duration(t,t.mediaSequence+t.segments.indexOf(r)),type:r.videoTimingInfo?"accurate":"estimate"})}(n,r);if(!d)return l({message:n+" was not found in the stream"});var h=d.segment,p=function(e,t){var n,r;try{n=new Date(e),r=new Date(t)}catch(e){}var i=n.getTime();return(r.getTime()-i)/1e3}(h.dateTimeObject,n);if("estimate"===d.type)return 0===a?l({message:n+" is not buffered yet. Try again"}):(s(d.estimatedStart+p),void c.one("seeked",(function(){e({programTime:n,playlist:r,retryCount:a-1,seekTo:s,pauseAfterSeek:u,tech:c,callback:l})})));var f=h.start+p;c.one("seeked",(function(){return l(null,c.currentTime())})),u&&c.pause(),s(f)},Zt=function(e,t){if(4===e.readyState)return t()},en=i().EventTarget,tn=i().mergeOptions,nn=function(e){var t=e.masterXml,n=e.srcUrl,r=e.clientOffset,i=e.sidxMapping,a=Ge(t,{manifestUri:n,clientOffset:r,sidxMapping:i});return ht(a,n),a},rn=function(e,t){for(var n=!0,r=tn(e,{duration:t.duration,minimumUpdatePeriod:t.minimumUpdatePeriod}),i=0;i<t.playlists.length;i++){var a=gt(r,t.playlists[i]);a&&(r=a,n=!1)}return lt(t,(function(e,t,i,a){if(e.playlists&&e.playlists.length){var s=e.playlists[0].id,o=gt(r,e.playlists[0]);o&&((r=o).mediaGroups[t][i][a].playlists[0]=r.playlists[s],n=!1)}})),t.minimumUpdatePeriod!==e.minimumUpdatePeriod&&(n=!1),n?null:r},an=function(e){var t=e.byterange.offset+e.byterange.length-1;return e.uri+"-"+e.byterange.offset+"-"+t},sn=function(e,t){var n,r,i={};for(var a in e){var s=e[a].sidx;if(s){var o=an(s);if(!t[o])break;var u=t[o].sidxInfo;n=u,r=s,(Boolean(!n.map&&!r.map)||Boolean(n.map&&r.map&&n.map.byterange.offset===r.map.byterange.offset&&n.map.byterange.length===r.map.byterange.length))&&n.uri===r.uri&&n.byterange.offset===r.byterange.offset&&n.byterange.length===r.byterange.length&&(i[o]=t[o])}}return i},on=function(e,t,n,r,a,s){var o={uri:st(a.handleManifestRedirects,t.resolvedUri),byterange:t.byterange,playlist:n},u=i().mergeOptions(o,{responseType:"arraybuffer",headers:Vt(o)});return function(e,t,n){var r,i=[],a=!1,s=function(e,t,r,i){return t.abort(),a=!0,n(e,t,r,i)},o=function(e,t){if(!a){if(e)return s(e,t,"",i);var n=t.responseText.substring(i&&i.byteLength||0,t.responseText.length);if(i=(0,Je.lx)(i,(0,Je.qX)(n,!0)),r=r||(0,Qe.cc)(i),i.length<10||r&&i.length<r+2)return Zt(t,(function(){return s(e,t,"",i)}));var o=(0,Qe.Xm)(i);return"ts"===o&&i.length<188||!o&&i.length<376?Zt(t,(function(){return s(e,t,"",i)})):s(null,t,o,i)}},u={uri:e,beforeSend:function(e){e.overrideMimeType("text/plain; charset=x-user-defined"),e.addEventListener("progress",(function(t){return t.total,t.loaded,$t(e,null,{statusCode:e.status},o)}))}},c=t(u,(function(e,t){return $t(c,e,t,o)}));return c}(o.uri,r,(function(t,i,a,c){if(t)return s(t,i);if(!a||"mp4"!==a)return s({status:i.status,message:"Unsupported "+(a||"unknown")+" container type for sidx segment at URL: "+o.uri,response:"",playlist:n,internal:!0,blacklistDuration:1/0,code:2},i);var l=o.byterange,d=l.offset,h=l.length;if(c.length>=h+d)return s(t,{response:c.subarray(d,d+h),status:i.status,uri:i.uri});e.request=r(u,s)}))},un=function(e){function t(t,n,r,i){var a;void 0===r&&(r={}),a=e.call(this)||this;var s=r,o=s.withCredentials,u=void 0!==o&&o,c=s.handleManifestRedirects,l=void 0!==c&&c;if(a.vhs_=n,a.withCredentials=u,a.handleManifestRedirects=l,!t)throw new Error("A non-empty playlist URL or object is required");return a.on("minimumUpdatePeriod",(function(){a.refreshXml_()})),a.on("mediaupdatetimeout",(function(){a.refreshMedia_(a.media().id)})),a.state="HAVE_NOTHING",a.loadedPlaylists_={},"string"==typeof t?(a.srcUrl=t,a.sidxMapping_={},W(a)):(a.setupChildLoader(i,t),a)}G(t,e);var n=t.prototype;return n.setupChildLoader=function(e,t){this.masterPlaylistLoader_=e,this.childPlaylist_=t},n.dispose=function(){this.trigger("dispose"),this.stopRequest(),this.loadedPlaylists_={},s().clearTimeout(this.minimumUpdatePeriodTimeout_),s().clearTimeout(this.mediaRequest_),s().clearTimeout(this.mediaUpdateTimeout),this.off()},n.hasPendingRequest=function(){return this.request||this.mediaRequest_},n.stopRequest=function(){if(this.request){var e=this.request;this.request=null,e.onreadystatechange=null,e.abort()}},n.sidxRequestFinished_=function(e,t,n,r){var i=this;return function(a,s){if(i.request){if(i.request=null,a)return i.error="object"==typeof a?a:{status:s.status,message:"DASH playlist request error at URL: "+e.uri,response:s.response,code:2},n&&(i.state=n),void i.trigger("error");var o=(0,Je.Ki)(s.response),u=Ye()(o.subarray(8));return r(t,u)}}},n.media=function(e){var t=this;if(!e)return this.media_;if("HAVE_NOTHING"===this.state)throw new Error("Cannot switch media playlist from "+this.state);var n=this.state;if("string"==typeof e){if(!this.master.playlists[e])throw new Error("Unknown playlist URI: "+e);e=this.master.playlists[e]}var r=!this.media_||e.id!==this.media_.id;if(r&&this.loadedPlaylists_[e.id]&&this.loadedPlaylists_[e.id].endList)return this.state="HAVE_METADATA",this.media_=e,void(r&&(this.trigger("mediachanging"),this.trigger("mediachange")));if(r)if(this.media_&&this.trigger("mediachanging"),e.sidx){var i,a;this.masterPlaylistLoader_?(i=this.masterPlaylistLoader_.master,a=this.masterPlaylistLoader_.sidxMapping_):(i=this.master,a=this.sidxMapping_);var o=an(e.sidx);a[o]={sidxInfo:e.sidx},this.request=on(this,e.sidx,e,this.vhs_.xhr,{handleManifestRedirects:this.handleManifestRedirects},this.sidxRequestFinished_(e,i,n,(function(r,i){if(!r||!i)throw new Error("failed to request sidx");a[o].sidx=i,t.haveMetadata({startingState:n,playlist:r.playlists[e.id]})})))}else this.mediaRequest_=s().setTimeout(this.haveMetadata.bind(this,{startingState:n,playlist:e}),0)},n.haveMetadata=function(e){var t=e.startingState,n=e.playlist;this.state="HAVE_METADATA",this.loadedPlaylists_[n.id]=n,this.mediaRequest_=null,this.refreshMedia_(n.id),"HAVE_MASTER"===t?this.trigger("loadedmetadata"):this.trigger("mediachange")},n.pause=function(){this.stopRequest(),s().clearTimeout(this.mediaUpdateTimeout),s().clearTimeout(this.minimumUpdatePeriodTimeout_),"HAVE_NOTHING"===this.state&&(this.started=!1)},n.load=function(e){var t=this;s().clearTimeout(this.mediaUpdateTimeout),s().clearTimeout(this.minimumUpdatePeriodTimeout_);var n=this.media();if(e){var r=n?n.targetDuration/2*1e3:5e3;this.mediaUpdateTimeout=s().setTimeout((function(){return t.load()}),r)}else this.started?n&&!n.endList?this.trigger("mediaupdatetimeout"):this.trigger("loadedplaylist"):this.start()},n.start=function(){var e=this;this.started=!0,this.masterPlaylistLoader_?this.mediaRequest_=s().setTimeout(this.haveMaster_.bind(this),0):this.request=this.vhs_.xhr({uri:this.srcUrl,withCredentials:this.withCredentials},(function(t,n){if(e.request){if(e.request=null,t)return e.error={status:n.status,message:"DASH playlist request error at URL: "+e.srcUrl,responseText:n.responseText,code:2},"HAVE_NOTHING"===e.state&&(e.started=!1),e.trigger("error");e.masterXml_=n.responseText,n.responseHeaders&&n.responseHeaders.date?e.masterLoaded_=Date.parse(n.responseHeaders.date):e.masterLoaded_=Date.now(),e.srcUrl=st(e.handleManifestRedirects,e.srcUrl,n),e.syncClientServerClock_(e.onClientServerClockSync_.bind(e))}}))},n.syncClientServerClock_=function(e){var t=this,n=Ke(this.masterXml_);return null===n?(this.clientOffset_=this.masterLoaded_-Date.now(),e()):"DIRECT"===n.method?(this.clientOffset_=n.value-Date.now(),e()):void(this.request=this.vhs_.xhr({uri:at(this.srcUrl,n.value),method:n.method,withCredentials:this.withCredentials},(function(r,i){if(t.request){if(r)return t.clientOffset_=t.masterLoaded_-Date.now(),e();var a;a="HEAD"===n.method?i.responseHeaders&&i.responseHeaders.date?Date.parse(i.responseHeaders.date):t.masterLoaded_:Date.parse(i.responseText),t.clientOffset_=a-Date.now(),e()}})))},n.haveMaster_=function(){this.state="HAVE_MASTER",this.mediaRequest_=null,this.masterPlaylistLoader_?this.media_||this.media(this.childPlaylist_):(this.updateMainManifest_(nn({masterXml:this.masterXml_,srcUrl:this.srcUrl,clientOffset:this.clientOffset_,sidxMapping:this.sidxMapping_})),this.trigger("loadedplaylist"))},n.updateMinimumUpdatePeriodTimeout_=function(){var e=this;s().clearTimeout(this.minimumUpdatePeriodTimeout_);var t=function(t){e.minimumUpdatePeriodTimeout_=s().setTimeout((function(){e.trigger("minimumUpdatePeriod")}),t)},n=this.master&&this.master.minimumUpdatePeriod;n>0?t(n):0===n&&(this.media()?t(1e3*this.media().targetDuration):this.one("loadedplaylist",(function(){t(1e3*e.media().targetDuration)})))},n.onClientServerClockSync_=function(){this.haveMaster_(),this.hasPendingRequest()||this.media_||this.media(this.master.playlists[0]),this.updateMinimumUpdatePeriodTimeout_()},n.updateMainManifest_=function(e){if(this.master=e,this.master.locations&&this.master.locations.length){var t=this.master.locations[0];t!==this.srcUrl&&(this.srcUrl=t)}},n.refreshXml_=function(){var e=this;this.request=this.vhs_.xhr({uri:this.srcUrl,withCredentials:this.withCredentials},(function(t,n){if(e.request){if(e.request=null,t)return e.error={status:n.status,message:"DASH playlist request error at URL: "+e.srcUrl,responseText:n.responseText,code:2},"HAVE_NOTHING"===e.state&&(e.started=!1),e.trigger("error");e.masterXml_=n.responseText,e.sidxMapping_=function(e,t,n,r){var i=Ge(e,{manifestUri:t,clientOffset:n}),a=sn(i.playlists,r);return lt(i,(function(e,t,n,i){if(e.playlists&&e.playlists.length){var s=e.playlists;a=tn(a,sn(s,r))}})),a}(e.masterXml_,e.srcUrl,e.clientOffset_,e.sidxMapping_);var r=nn({masterXml:e.masterXml_,srcUrl:e.srcUrl,clientOffset:e.clientOffset_,sidxMapping:e.sidxMapping_}),i=rn(e.master,r),a=e.media().sidx;if(i)if(a){var s=an(a);if(!e.sidxMapping_[s]){var o=e.media();e.request=on(e,o.sidx,o,e.vhs_.xhr,{handleManifestRedirects:e.handleManifestRedirects},e.sidxRequestFinished_(o,r,e.state,(function(t,n){if(!t||!n)throw new Error("failed to request sidx on minimumUpdatePeriod");e.sidxMapping_[s].sidx=n,e.updateMinimumUpdatePeriodTimeout_(),e.refreshMedia_(e.media().id)})))}}else e.updateMainManifest_(i),e.media_&&(e.media_=e.master.playlists[e.media_.id]);e.updateMinimumUpdatePeriodTimeout_()}}))},n.refreshMedia_=function(e){var t,n,r=this;if(!e)throw new Error("refreshMedia_ must take a media id");this.masterPlaylistLoader_?(t=this.masterPlaylistLoader_.master,n=nn({masterXml:this.masterPlaylistLoader_.masterXml_,srcUrl:this.masterPlaylistLoader_.srcUrl,clientOffset:this.masterPlaylistLoader_.clientOffset_,sidxMapping:this.masterPlaylistLoader_.sidxMapping_})):(t=this.master,n=nn({masterXml:this.masterXml_,srcUrl:this.srcUrl,clientOffset:this.clientOffset_,sidxMapping:this.sidxMapping_}));var i=rn(t,n);i?(this.masterPlaylistLoader_?this.masterPlaylistLoader_.master=i:this.master=i,this.media_=i.playlists[e]):(this.media_=t.playlists[e],this.trigger("playlistunchanged")),this.media().endList||(this.mediaUpdateTimeout=s().setTimeout((function(){r.trigger("mediaupdatetimeout")}),vt(this.media(),!!i))),this.trigger("loadedplaylist")},t}(en),cn={GOAL_BUFFER_LENGTH:30,MAX_GOAL_BUFFER_LENGTH:60,BACK_BUFFER_LENGTH:30,GOAL_BUFFER_LENGTH_RATE:1,INITIAL_BANDWIDTH:4194304,BANDWIDTH_VARIANCE:1.2,BUFFER_LOW_WATER_LINE:0,MAX_BUFFER_LOW_WATER_LINE:30,BUFFER_LOW_WATER_LINE_RATE:1},ln=function(e){for(var t=new Uint8Array(new ArrayBuffer(e.length)),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t.buffer},dn=[],hn=function(e){var t=e.transmuxer,n=e.bytes,r=e.audioAppendStart,i=e.gopsToAlignWith,a=e.isPartial,s=e.remux,o=e.onData,u=e.onTrackInfo,c=e.onAudioTimingInfo,l=e.onVideoTimingInfo,d=e.onVideoSegmentTimingInfo,h=e.onId3,p=e.onCaptions,f=e.onDone,m={isPartial:a,buffer:[]};if(t.onmessage=function(e){Z&&("data"===e.data.action&&function(e,t,n){var r=e.data.segment,i=r.type,a=r.initSegment,s=r.captions,o=r.captionStreams,u=r.metadata,c=r.videoFrameDtsTime,l=r.videoFramePtsTime;t.buffer.push({captions:s,captionStreams:o,metadata:u});var d=e.data.segment.boxes||{data:e.data.segment.data},h={type:i,data:new Uint8Array(d.data,d.data.byteOffset,d.data.byteLength),initSegment:new Uint8Array(a.data,a.byteOffset,a.byteLength)};void 0!==c&&(h.videoFrameDtsTime=c),void 0!==l&&(h.videoFramePtsTime=l),n(h)}(e,m,o),"trackinfo"===e.data.action&&u(e.data.trackInfo),"gopInfo"===e.data.action&&function(e,t){t.gopInfo=e.data.gopInfo}(e,m),"audioTimingInfo"===e.data.action&&c(e.data.audioTimingInfo),"videoTimingInfo"===e.data.action&&l(e.data.videoTimingInfo),"videoSegmentTimingInfo"===e.data.action&&d(e.data.videoSegmentTimingInfo),"id3Frame"===e.data.action&&h([e.data.id3Frame],e.data.id3Frame.dispatchType),"caption"===e.data.action&&p(e.data.caption),"transmuxed"===e.data.type&&(t.onmessage=null,function(e){var t=e.transmuxedData,n=e.callback;t.buffer=[],n(t)}({transmuxedData:m,callback:f}),pn()))},r&&t.postMessage({action:"setAudioAppendStart",appendStart:r}),Array.isArray(i)&&t.postMessage({action:"alignGopsWith",gopsToAlignWith:i}),void 0!==s&&t.postMessage({action:"setRemux",remux:s}),n.byteLength){var g=n instanceof ArrayBuffer?n:n.buffer,v=n instanceof ArrayBuffer?0:n.byteOffset;t.postMessage({action:"push",data:g,byteOffset:v,byteLength:n.byteLength},[g])}t.postMessage({action:a?"partialFlush":"flush"})},pn=function(){Z=null,dn.length&&("function"==typeof(Z=dn.shift())?Z():hn(Z))},fn=function(e,t){e.postMessage({action:t}),pn()},mn=function(e,t){if(!Z)return Z=e,void fn(t,e);dn.push(fn.bind(null,t,e))},gn=function(e){if(!Z)return Z=e,void hn(e);dn.push(e)},vn=function(e){mn("reset",e)},yn=function(){Z=null,dn.length=0},bn=function(e){mn("endTimeline",e)},_n=2,Tn=-101,wn=-102,Sn=function(e){e.forEach((function(e){e.abort()}))},Cn=function(e,t){return t.timedout?{status:t.status,message:"HLS request timed-out at URL: "+t.uri,code:Tn,xhr:t}:t.aborted?{status:t.status,message:"HLS request aborted at URL: "+t.uri,code:wn,xhr:t}:e?{status:t.status,message:"HLS request errored at URL: "+t.uri,code:_n,xhr:t}:null},En=function(e){var t=e.segment,n=e.bytes,r=e.isPartial,i=e.trackInfoFn,a=e.timingInfoFn,s=e.videoSegmentTimingInfoFn,o=e.id3Fn,u=e.captionsFn,c=e.dataFn,l=e.doneFn,d=t.map&&t.map.tracks||{},h=Boolean(d.audio&&d.video),p=a.bind(null,t,"audio","start"),f=a.bind(null,t,"audio","end"),m=a.bind(null,t,"video","start"),g=a.bind(null,t,"video","end");if(!r&&!t.lastReachedChar){var v=function(e,t){var n=et().inspect(e,t*tt.ONE_SECOND_IN_TS);if(!n)return null;var r={hasVideo:n.video&&2===n.video.length||!1,hasAudio:n.audio&&2===n.audio.length||!1};return r.hasVideo&&(r.videoStart=n.video[0].ptsTime),r.hasAudio&&(r.audioStart=n.audio[0].ptsTime),r}(n,t.baseStartTime);v&&(i(t,{hasAudio:v.hasAudio,hasVideo:v.hasVideo,isMuxed:h}),i=null,v.hasAudio&&!h&&p(v.audioStart),v.hasVideo&&m(v.videoStart),p=null,m=null)}gn({bytes:n,transmuxer:t.transmuxer,audioAppendStart:t.audioAppendStart,gopsToAlignWith:t.gopsToAlignWith,isPartial:r,remux:h,onData:function(e){e.type="combined"===e.type?"video":e.type,c(t,e)},onTrackInfo:function(e){i&&(h&&(e.isMuxed=!0),i(t,e))},onAudioTimingInfo:function(e){p&&void 0!==e.start&&(p(e.start),p=null),f&&void 0!==e.end&&f(e.end)},onVideoTimingInfo:function(e){m&&void 0!==e.start&&(m(e.start),m=null),g&&void 0!==e.end&&g(e.end)},onVideoSegmentTimingInfo:function(e){s(e)},onId3:function(e,n){o(t,e,n)},onCaptions:function(e){u(t,[e])},onDone:function(e){l&&!r&&(e.type="combined"===e.type?"video":e.type,l(null,t,e))}})},kn=function(e){var t=e.segment,n=e.bytes,r=e.isPartial,i=e.trackInfoFn,a=e.timingInfoFn,s=e.videoSegmentTimingInfoFn,o=e.id3Fn,u=e.captionsFn,c=e.dataFn,l=e.doneFn,d=new Uint8Array(n);if((0,Qe.cz)(d)){t.isFmp4=!0;var h=t.map.tracks,p={isFmp4:!0,hasVideo:!!h.video,hasAudio:!!h.audio};h.audio&&h.audio.codec&&"enca"!==h.audio.codec&&(p.audioCodec=h.audio.codec),h.video&&h.video.codec&&"encv"!==h.video.codec&&(p.videoCodec=h.video.codec),h.video&&h.audio&&(p.isMuxed=!0),i(t,p);var f=rt().startTime(t.map.timescales,d);p.hasAudio&&!p.isMuxed&&a(t,"audio","start",f),p.hasVideo&&a(t,"video","start",f);var m=function(e){c(t,{data:n,type:p.hasAudio&&!p.isMuxed?"audio":"video"}),e&&e.length&&u(t,e),l(null,t,{})};if(!h.video||!n.byteLength||!t.transmuxer)return void m();var g=n instanceof ArrayBuffer?n:n.buffer,v=n instanceof ArrayBuffer?0:n.byteOffset;return t.transmuxer.addEventListener("message",(function e(r){if("mp4Captions"===r.data.action){t.transmuxer.removeEventListener("message",e);var i=r.data.data;t.bytes=n=new Uint8Array(i,i.byteOffset||0,i.byteLength),m(r.data.captions)}})),void t.transmuxer.postMessage({action:"pushMp4Captions",timescales:t.map.timescales,trackIds:[h.video.id],data:g,byteOffset:v,byteLength:n.byteLength},[g])}if(t.transmuxer){if(void 0===t.container&&(t.container=(0,Qe.Xm)(d)),"ts"!==t.container&&"aac"!==t.container)return i(t,{hasAudio:!1,hasVideo:!1}),void l(null,t,{});En({segment:t,bytes:n,isPartial:r,trackInfoFn:i,timingInfoFn:a,videoSegmentTimingInfoFn:s,id3Fn:o,captionsFn:u,dataFn:c,doneFn:l})}else l(null,t,{})},On=function(e){var t=e.activeXhrs,n=e.decryptionWorker,r=e.trackInfoFn,i=e.timingInfoFn,a=e.videoSegmentTimingInfoFn,s=e.id3Fn,o=e.captionsFn,u=e.dataFn,c=e.doneFn,l=0,d=!1;return function(e,h){if(!d){if(e)return d=!0,Sn(t),c(e,h);if((l+=1)===t.length){if(h.endOfAllRequests=Date.now(),h.encryptedBytes)return function(e){var t,n=e.decryptionWorker,r=e.segment,i=e.trackInfoFn,a=e.timingInfoFn,s=e.videoSegmentTimingInfoFn,o=e.id3Fn,u=e.captionsFn,c=e.dataFn,l=e.doneFn;n.addEventListener("message",(function e(t){if(t.data.source===r.requestId){n.removeEventListener("message",e);var d=t.data.decrypted;r.bytes=new Uint8Array(d.bytes,d.byteOffset,d.byteLength),kn({segment:r,bytes:r.bytes,isPartial:!1,trackInfoFn:i,timingInfoFn:a,videoSegmentTimingInfoFn:s,id3Fn:o,captionsFn:u,dataFn:c,doneFn:l})}})),t=r.key.bytes.slice?r.key.bytes.slice():new Uint32Array(Array.prototype.slice.call(r.key.bytes)),n.postMessage(zt({source:r.requestId,encrypted:r.encryptedBytes,key:t,iv:r.key.iv}),[r.encryptedBytes.buffer,t.buffer])}({decryptionWorker:n,segment:h,trackInfoFn:r,timingInfoFn:i,videoSegmentTimingInfoFn:a,id3Fn:s,captionsFn:o,dataFn:u,doneFn:c});kn({segment:h,bytes:h.bytes,isPartial:!1,trackInfoFn:r,timingInfoFn:i,videoSegmentTimingInfoFn:a,id3Fn:s,captionsFn:o,dataFn:u,doneFn:c})}}}},xn=function(e){var t=e.segment,n=e.progressFn,r=e.trackInfoFn,a=e.timingInfoFn,s=e.videoSegmentTimingInfoFn,o=e.id3Fn,u=e.captionsFn,c=e.dataFn,l=e.handlePartialData;return function(e){var d=e.target;if(!d.aborted){if(l&&!t.key&&d.responseText&&d.responseText.length>=8){var h=ln(d.responseText.substring(t.lastReachedChar||0));!t.lastReachedChar&&(0,Qe.cz)(new Uint8Array(h))||(t.lastReachedChar=d.responseText.length,kn({segment:t,bytes:h,isPartial:!0,trackInfoFn:r,timingInfoFn:a,videoSegmentTimingInfoFn:s,id3Fn:o,captionsFn:u,dataFn:c}))}return t.stats=i().mergeOptions(t.stats,function(e){var t=e.target,n={bandwidth:1/0,bytesReceived:0,roundTripTime:Date.now()-t.requestTime||0};return n.bytesReceived=e.loaded,n.bandwidth=Math.floor(n.bytesReceived/n.roundTripTime*8*1e3),n}(e)),!t.stats.firstBytesReceivedAt&&t.stats.bytesReceived&&(t.stats.firstBytesReceivedAt=Date.now()),n(e,t)}}},An=function(e){var t=e.xhr,n=e.xhrOptions,r=e.decryptionWorker,a=e.segment,s=e.abortFn,o=e.progressFn,u=e.trackInfoFn,c=e.timingInfoFn,l=e.videoSegmentTimingInfoFn,d=e.id3Fn,h=e.captionsFn,p=e.dataFn,f=e.doneFn,m=e.handlePartialData,g=[],v=On({activeXhrs:g,decryptionWorker:r,trackInfoFn:u,timingInfoFn:c,videoSegmentTimingInfoFn:l,id3Fn:d,captionsFn:h,dataFn:p,doneFn:f});if(a.key&&!a.key.bytes){var y=i().mergeOptions(n,{uri:a.key.resolvedUri,responseType:"arraybuffer"}),b=function(e,t){return function(n,r){var i=r.response,a=Cn(n,r);if(a)return t(a,e);if(16!==i.byteLength)return t({status:r.status,message:"Invalid HLS key at URL: "+r.uri,code:_n,xhr:r},e);var s=new DataView(i);return e.key.bytes=new Uint32Array([s.getUint32(0),s.getUint32(4),s.getUint32(8),s.getUint32(12)]),t(null,e)}}(a,v),_=t(y,b);g.push(_)}if(a.map&&!a.map.bytes){var T=i().mergeOptions(n,{uri:a.map.resolvedUri,responseType:"arraybuffer",headers:Vt(a.map)}),w=function(e){var t=e.segment,n=e.finishProcessingFn;return function(e,r){var i=r.response,a=Cn(e,r);if(a)return n(a,t);if(0===i.byteLength)return n({status:r.status,message:"Empty HLS segment content at URL: "+r.uri,code:_n,xhr:r},t);t.map.bytes=new Uint8Array(r.response);var s=(0,Qe.Xm)(t.map.bytes);return"mp4"!==s?n({status:r.status,message:"Found unsupported "+(s||"unknown")+" container for initialization segment at URL: "+r.uri,code:_n,internal:!0,xhr:r},t):(rt().tracks(t.map.bytes).forEach((function(e){t.map.tracks=t.map.tracks||{},t.map.tracks[e.type]||(t.map.tracks[e.type]=e,e.id&&e.timescale&&(t.map.timescales=t.map.timescales||{},t.map.timescales[e.id]=e.timescale))})),n(null,t))}}({segment:a,finishProcessingFn:v}),S=t(T,w);g.push(S)}var C=i().mergeOptions(n,{uri:a.resolvedUri,responseType:"arraybuffer",headers:Vt(a)});m&&(C.responseType="text",C.beforeSend=function(e){e.overrideMimeType("text/plain; charset=x-user-defined")});var E=function(e){var t=e.segment,n=e.finishProcessingFn,r=e.responseType;return function(e,i){var a=i.response,s=Cn(e,i);if(s)return n(s,t);var o="arraybuffer"!==r&&i.responseText?ln(i.responseText.substring(t.lastReachedChar||0)):i.response;return 0===a.byteLength?n({status:i.status,message:"Empty HLS segment content at URL: "+i.uri,code:_n,xhr:i},t):(t.stats=function(e){return{bandwidth:e.bandwidth,bytesReceived:e.bytesReceived||0,roundTripTime:e.roundTripTime||0}}(i),t.key?t.encryptedBytes=new Uint8Array(o):t.bytes=new Uint8Array(o),n(null,t))}}({segment:a,finishProcessingFn:v,responseType:C.responseType}),k=t(C,E);k.addEventListener("progress",xn({segment:a,progressFn:o,trackInfoFn:u,timingInfoFn:c,videoSegmentTimingInfoFn:l,id3Fn:d,captionsFn:h,dataFn:p,handlePartialData:m})),g.push(k);var O={};return g.forEach((function(e){e.addEventListener("loadend",function(e){var t=e.loadendState,n=e.abortFn;return function(e){e.target.aborted&&n&&!t.calledAbortFn&&(n(),t.calledAbortFn=!0)}}({loadendState:O,abortFn:s}))})),function(){return Sn(g)}},Pn="undefined"!=typeof window?window:{},In="undefined"==typeof Symbol?"__target":Symbol(),Ln=Pn.BlobBuilder||Pn.WebKitBlobBuilder||Pn.MozBlobBuilder||Pn.MSBlobBuilder,Mn=Pn.URL||Pn.webkitURL||Mn&&Mn.msURL,Dn=Pn.Worker;function Rn(e,t){return function(n){var r=this;if(!t)return new Dn(e);if(Dn&&!n){var i=Fn(t.toString().replace(/^function.+?{/,"").slice(0,-1));return this[In]=new Dn(i),function(e,t){if(!e||!t)return;var n=e.terminate;e.objURL=t,e.terminate=function(){e.objURL&&Mn.revokeObjectURL(e.objURL),n.call(e)}}(this[In],i),this[In]}var a={postMessage:function(e){r.onmessage&&setTimeout((function(){r.onmessage({data:e,target:a})}))}};t.call(a),this.postMessage=function(e){setTimeout((function(){a.onmessage({data:e,target:r})}))},this.isThisThread=!0}}if(Dn){var Nn,jn=Fn("self.onmessage = function () {}"),Un=new Uint8Array(1);try{(Nn=new Dn(jn)).postMessage(Un,[Un.buffer])}catch(e){Dn=null}finally{Mn.revokeObjectURL(jn),Nn&&Nn.terminate()}}function Fn(e){try{return Mn.createObjectURL(new Blob([e],{type:"application/javascript"}))}catch(n){var t=new Ln;return t.append(e),Mn.createObjectURL(t.getBlob(type))}}var $n=new Rn("./transmuxer-worker.worker.js",(function(e,t){var n=this;
/*! @name @videojs/http-streaming @version 2.2.4 @license Apache-2.0 */!function(){var e=function(){this.init=function(){var e={};this.on=function(t,n){e[t]||(e[t]=[]),e[t]=e[t].concat(n)},this.off=function(t,n){var r;return!!e[t]&&(r=e[t].indexOf(n),e[t]=e[t].slice(),e[t].splice(r,1),r>-1)},this.trigger=function(t){var n,r,i,a;if(n=e[t])if(2===arguments.length)for(i=n.length,r=0;r<i;++r)n[r].call(this,arguments[1]);else{for(a=[],r=arguments.length,r=1;r<arguments.length;++r)a.push(arguments[r]);for(i=n.length,r=0;r<i;++r)n[r].apply(this,a)}},this.dispose=function(){e={}}}};e.prototype.pipe=function(e){return this.on("data",(function(t){e.push(t)})),this.on("done",(function(t){e.flush(t)})),this.on("partialdone",(function(t){e.partialFlush(t)})),this.on("endedtimeline",(function(t){e.endTimeline(t)})),this.on("reset",(function(t){e.reset(t)})),e},e.prototype.push=function(e){this.trigger("data",e)},e.prototype.flush=function(e){this.trigger("done",e)},e.prototype.partialFlush=function(e){this.trigger("partialdone",e)},e.prototype.endTimeline=function(e){this.trigger("endedtimeline",e)},e.prototype.reset=function(e){this.trigger("reset",e)};var t,r,i,a,s,o,u,c,l,d,h,p,f,m,g,v,y,b,_,T,w,S,C,E,k,O,x,A,P,I,L,M,D,R,N,j,U,F,$,B,V=e,q=Math.pow(2,32)-1;!function(){var e;if(S={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],pasp:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]},"undefined"!=typeof Uint8Array){for(e in S)S.hasOwnProperty(e)&&(S[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);C=new Uint8Array(["i".charCodeAt(0),"s".charCodeAt(0),"o".charCodeAt(0),"m".charCodeAt(0)]),k=new Uint8Array(["a".charCodeAt(0),"v".charCodeAt(0),"c".charCodeAt(0),"1".charCodeAt(0)]),E=new Uint8Array([0,0,0,1]),O=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),x=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),A={video:O,audio:x},L=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),I=new Uint8Array([0,0,0,0,0,0,0,0]),M=new Uint8Array([0,0,0,0,0,0,0,0]),D=M,R=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),N=M,P=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}}(),t=function(e){var t,n,r=[],i=0;for(t=1;t<arguments.length;t++)r.push(arguments[t]);for(t=r.length;t--;)i+=r[t].byteLength;for(n=new Uint8Array(i+8),new DataView(n.buffer,n.byteOffset,n.byteLength).setUint32(0,n.byteLength),n.set(e,4),t=0,i=8;t<r.length;t++)n.set(r[t],i),i+=r[t].byteLength;return n},r=function(){return t(S.dinf,t(S.dref,L))},i=function(e){return t(S.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,e.audioobjecttype<<3|e.samplingfrequencyindex>>>1,e.samplingfrequencyindex<<7|e.channelcount<<3,6,1,2]))},g=function(e){return t(S.hdlr,A[e])},m=function(e){var n=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,e.duration>>>24&255,e.duration>>>16&255,e.duration>>>8&255,255&e.duration,85,196,0,0]);return e.samplerate&&(n[12]=e.samplerate>>>24&255,n[13]=e.samplerate>>>16&255,n[14]=e.samplerate>>>8&255,n[15]=255&e.samplerate),t(S.mdhd,n)},f=function(e){return t(S.mdia,m(e),g(e.type),o(e))},s=function(e){return t(S.mfhd,new Uint8Array([0,0,0,0,(4278190080&e)>>24,(16711680&e)>>16,(65280&e)>>8,255&e]))},o=function(e){return t(S.minf,"video"===e.type?t(S.vmhd,P):t(S.smhd,I),r(),y(e))},u=function(e,n){for(var r=[],i=n.length;i--;)r[i]=_(n[i]);return t.apply(null,[S.moof,s(e)].concat(r))},c=function(e){for(var n=e.length,r=[];n--;)r[n]=h(e[n]);return t.apply(null,[S.moov,d(4294967295)].concat(r).concat(l(e)))},l=function(e){for(var n=e.length,r=[];n--;)r[n]=T(e[n]);return t.apply(null,[S.mvex].concat(r))},d=function(e){var n=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(4278190080&e)>>24,(16711680&e)>>16,(65280&e)>>8,255&e,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return t(S.mvhd,n)},v=function(e){var n,r,i=e.samples||[],a=new Uint8Array(4+i.length);for(r=0;r<i.length;r++)n=i[r].flags,a[r+4]=n.dependsOn<<4|n.isDependedOn<<2|n.hasRedundancy;return t(S.sdtp,a)},y=function(e){return t(S.stbl,b(e),t(S.stts,N),t(S.stsc,D),t(S.stsz,R),t(S.stco,M))},b=function(e){return t(S.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),"video"===e.type?j(e):U(e))},j=function(e){var n,r,i=e.sps||[],a=e.pps||[],s=[],o=[];for(n=0;n<i.length;n++)s.push((65280&i[n].byteLength)>>>8),s.push(255&i[n].byteLength),s=s.concat(Array.prototype.slice.call(i[n]));for(n=0;n<a.length;n++)o.push((65280&a[n].byteLength)>>>8),o.push(255&a[n].byteLength),o=o.concat(Array.prototype.slice.call(a[n]));if(r=[S.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(65280&e.width)>>8,255&e.width,(65280&e.height)>>8,255&e.height,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),t(S.avcC,new Uint8Array([1,e.profileIdc,e.profileCompatibility,e.levelIdc,255].concat([i.length],s,[a.length],o))),t(S.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192]))],e.sarRatio){var u=e.sarRatio[0],c=e.sarRatio[1];r.push(t(S.pasp,new Uint8Array([(4278190080&u)>>24,(16711680&u)>>16,(65280&u)>>8,255&u,(4278190080&c)>>24,(16711680&c)>>16,(65280&c)>>8,255&c])))}return t.apply(null,r)},U=function(e){return t(S.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(65280&e.channelcount)>>8,255&e.channelcount,(65280&e.samplesize)>>8,255&e.samplesize,0,0,0,0,(65280&e.samplerate)>>8,255&e.samplerate,0,0]),i(e))},p=function(e){var n=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(4278190080&e.id)>>24,(16711680&e.id)>>16,(65280&e.id)>>8,255&e.id,0,0,0,0,(4278190080&e.duration)>>24,(16711680&e.duration)>>16,(65280&e.duration)>>8,255&e.duration,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(65280&e.width)>>8,255&e.width,0,0,(65280&e.height)>>8,255&e.height,0,0]);return t(S.tkhd,n)},_=function(e){var n,r,i,a,s,o;return n=t(S.tfhd,new Uint8Array([0,0,0,58,(4278190080&e.id)>>24,(16711680&e.id)>>16,(65280&e.id)>>8,255&e.id,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),s=Math.floor(e.baseMediaDecodeTime/(q+1)),o=Math.floor(e.baseMediaDecodeTime%(q+1)),r=t(S.tfdt,new Uint8Array([1,0,0,0,s>>>24&255,s>>>16&255,s>>>8&255,255&s,o>>>24&255,o>>>16&255,o>>>8&255,255&o])),92,"audio"===e.type?(i=w(e,92),t(S.traf,n,r,i)):(a=v(e),i=w(e,a.length+92),t(S.traf,n,r,i,a))},h=function(e){return e.duration=e.duration||4294967295,t(S.trak,p(e),f(e))},T=function(e){var n=new Uint8Array([0,0,0,0,(4278190080&e.id)>>24,(16711680&e.id)>>16,(65280&e.id)>>8,255&e.id,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return"video"!==e.type&&(n[n.length-1]=0),t(S.trex,n)},B=function(e,t){var n=0,r=0,i=0,a=0;return e.length&&(void 0!==e[0].duration&&(n=1),void 0!==e[0].size&&(r=2),void 0!==e[0].flags&&(i=4),void 0!==e[0].compositionTimeOffset&&(a=8)),[0,0,n|r|i|a,1,(4278190080&e.length)>>>24,(16711680&e.length)>>>16,(65280&e.length)>>>8,255&e.length,(4278190080&t)>>>24,(16711680&t)>>>16,(65280&t)>>>8,255&t]},$=function(e,n){var r,i,a,s,o,u;for(n+=20+16*(s=e.samples||[]).length,a=B(s,n),(i=new Uint8Array(a.length+16*s.length)).set(a),r=a.length,u=0;u<s.length;u++)o=s[u],i[r++]=(4278190080&o.duration)>>>24,i[r++]=(16711680&o.duration)>>>16,i[r++]=(65280&o.duration)>>>8,i[r++]=255&o.duration,i[r++]=(4278190080&o.size)>>>24,i[r++]=(16711680&o.size)>>>16,i[r++]=(65280&o.size)>>>8,i[r++]=255&o.size,i[r++]=o.flags.isLeading<<2|o.flags.dependsOn,i[r++]=o.flags.isDependedOn<<6|o.flags.hasRedundancy<<4|o.flags.paddingValue<<1|o.flags.isNonSyncSample,i[r++]=61440&o.flags.degradationPriority,i[r++]=15&o.flags.degradationPriority,i[r++]=(4278190080&o.compositionTimeOffset)>>>24,i[r++]=(16711680&o.compositionTimeOffset)>>>16,i[r++]=(65280&o.compositionTimeOffset)>>>8,i[r++]=255&o.compositionTimeOffset;return t(S.trun,i)},F=function(e,n){var r,i,a,s,o,u;for(n+=20+8*(s=e.samples||[]).length,a=B(s,n),(r=new Uint8Array(a.length+8*s.length)).set(a),i=a.length,u=0;u<s.length;u++)o=s[u],r[i++]=(4278190080&o.duration)>>>24,r[i++]=(16711680&o.duration)>>>16,r[i++]=(65280&o.duration)>>>8,r[i++]=255&o.duration,r[i++]=(4278190080&o.size)>>>24,r[i++]=(16711680&o.size)>>>16,r[i++]=(65280&o.size)>>>8,r[i++]=255&o.size;return t(S.trun,r)},w=function(e,t){return"audio"===e.type?F(e,t):$(e,t)};a=function(){return t(S.ftyp,C,E,C,k)};var H,W,z,G,K,X,Y,Q,J=function(e){return t(S.mdat,e)},Z=u,ee=function(e){var t,n=a(),r=c(e);return(t=new Uint8Array(n.byteLength+r.byteLength)).set(n),t.set(r,n.byteLength),t},te=function(e,t){var n={size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0,isNonSyncSample:1}};return n.dataOffset=t,n.compositionTimeOffset=e.pts-e.dts,n.duration=e.duration,n.size=4*e.length,n.size+=e.byteLength,e.keyFrame&&(n.flags.dependsOn=2,n.flags.isNonSyncSample=0),n},ne=function(e){var t,n,r=[],i=[];for(i.byteLength=0,i.nalCount=0,i.duration=0,r.byteLength=0,t=0;t<e.length;t++)"access_unit_delimiter_rbsp"===(n=e[t]).nalUnitType?(r.length&&(r.duration=n.dts-r.dts,i.byteLength+=r.byteLength,i.nalCount+=r.length,i.duration+=r.duration,i.push(r)),(r=[n]).byteLength=n.data.byteLength,r.pts=n.pts,r.dts=n.dts):("slice_layer_without_partitioning_rbsp_idr"===n.nalUnitType&&(r.keyFrame=!0),r.duration=n.dts-r.dts,r.byteLength+=n.data.byteLength,r.push(n));return i.length&&(!r.duration||r.duration<=0)&&(r.duration=i[i.length-1].duration),i.byteLength+=r.byteLength,i.nalCount+=r.length,i.duration+=r.duration,i.push(r),i},re=function(e){var t,n,r=[],i=[];for(r.byteLength=0,r.nalCount=0,r.duration=0,r.pts=e[0].pts,r.dts=e[0].dts,i.byteLength=0,i.nalCount=0,i.duration=0,i.pts=e[0].pts,i.dts=e[0].dts,t=0;t<e.length;t++)(n=e[t]).keyFrame?(r.length&&(i.push(r),i.byteLength+=r.byteLength,i.nalCount+=r.nalCount,i.duration+=r.duration),(r=[n]).nalCount=n.length,r.byteLength=n.byteLength,r.pts=n.pts,r.dts=n.dts,r.duration=n.duration):(r.duration+=n.duration,r.nalCount+=n.length,r.byteLength+=n.byteLength,r.push(n));return i.length&&r.duration<=0&&(r.duration=i[i.length-1].duration),i.byteLength+=r.byteLength,i.nalCount+=r.nalCount,i.duration+=r.duration,i.push(r),i},ie=function(e){var t;return!e[0][0].keyFrame&&e.length>1&&(t=e.shift(),e.byteLength-=t.byteLength,e.nalCount-=t.nalCount,e[0][0].dts=t.dts,e[0][0].pts=t.pts,e[0][0].duration+=t.duration),e},ae=function(e,t){var n,r,i,a,s,o=t||0,u=[];for(n=0;n<e.length;n++)for(a=e[n],r=0;r<a.length;r++)s=a[r],o+=(i=te(s,o)).size,u.push(i);return u},se=function(e){var t,n,r,i,a,s,o=0,u=e.byteLength,c=e.nalCount,l=new Uint8Array(u+4*c),d=new DataView(l.buffer);for(t=0;t<e.length;t++)for(i=e[t],n=0;n<i.length;n++)for(a=i[n],r=0;r<a.length;r++)s=a[r],d.setUint32(o,s.data.byteLength),o+=4,l.set(s.data,o),o+=s.data.byteLength;return l},oe=function(e,t){var n,r=[];return n=te(e,t||0),r.push(n),r},ue=function(e){var t,n,r=0,i=e.byteLength,a=e.length,s=new Uint8Array(i+4*a),o=new DataView(s.buffer);for(t=0;t<e.length;t++)n=e[t],o.setUint32(r,n.data.byteLength),r+=4,s.set(n.data,r),r+=n.data.byteLength;return s},ce=[33,16,5,32,164,27],le=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252],de=function(e){for(var t=[];e--;)t.push(0);return t},he=function(){if(!H){var e={96e3:[ce,[227,64],de(154),[56]],88200:[ce,[231],de(170),[56]],64e3:[ce,[248,192],de(240),[56]],48e3:[ce,[255,192],de(268),[55,148,128],de(54),[112]],44100:[ce,[255,192],de(268),[55,163,128],de(84),[112]],32e3:[ce,[255,192],de(268),[55,234],de(226),[112]],24e3:[ce,[255,192],de(268),[55,255,128],de(268),[111,112],de(126),[224]],16e3:[ce,[255,192],de(268),[55,255,128],de(268),[111,255],de(269),[223,108],de(195),[1,192]],12e3:[le,de(268),[3,127,248],de(268),[6,255,240],de(268),[13,255,224],de(268),[27,253,128],de(259),[56]],11025:[le,de(268),[3,127,248],de(268),[6,255,240],de(268),[13,255,224],de(268),[27,255,192],de(268),[55,175,128],de(108),[112]],8e3:[le,de(268),[3,121,16],de(47),[7]]};t=e,H=Object.keys(t).reduce((function(e,n){return e[n]=new Uint8Array(t[n].reduce((function(e,t){return e.concat(t)}),[])),e}),{})}var t;return H},pe=9e4;X=function(e,t){return W(K(e,t))},Y=function(e,t){return z(G(e),t)},Q=function(e,t,n){return G(n?e:e-t)};var fe=pe,me=(z=function(e,t){return e*t},G=function(e){return e/pe}),ge=(K=function(e,t){return e/t},X),ve=Y,ye=Q,be=W=function(e){return e*pe},_e=me,Te=function(e,t,n,r){var i,a,s,o,u,c=0,l=0,d=0;if(t.length&&(i=ge(e.baseMediaDecodeTime,e.samplerate),a=Math.ceil(fe/(e.samplerate/1024)),n&&r&&(c=i-Math.max(n,r),d=(l=Math.floor(c/a))*a),!(l<1||d>fe/2))){for((s=he()[e.samplerate])||(s=t[0].data),o=0;o<l;o++)u=t[0],t.splice(0,0,{data:s,dts:u.dts-a,pts:u.pts-a});e.baseMediaDecodeTime-=Math.floor(ve(d,e.samplerate))}},we=function(e,t,n){return t.minSegmentDts>=n?e:(t.minSegmentDts=1/0,e.filter((function(e){return e.dts>=n&&(t.minSegmentDts=Math.min(t.minSegmentDts,e.dts),t.minSegmentPts=t.minSegmentDts,!0)})))},Se=function(e){var t,n,r=[];for(t=0;t<e.length;t++)n=e[t],r.push({size:n.data.byteLength,duration:1024});return r},Ce=function(e){var t,n,r=0,i=new Uint8Array(function(e){var t,n=0;for(t=0;t<e.length;t++)n+=e[t].data.byteLength;return n}(e));for(t=0;t<e.length;t++)n=e[t],i.set(n.data,r),r+=n.data.byteLength;return i},Ee=fe,ke=function(e){delete e.minSegmentDts,delete e.maxSegmentDts,delete e.minSegmentPts,delete e.maxSegmentPts},Oe=function(e,t){var n,r=e.minSegmentDts;return t||(r-=e.timelineStartInfo.dts),n=e.timelineStartInfo.baseMediaDecodeTime,n+=r,n=Math.max(0,n),"audio"===e.type&&(n*=e.samplerate/Ee,n=Math.floor(n)),n},xe=function(e,t){"number"==typeof t.pts&&(void 0===e.timelineStartInfo.pts&&(e.timelineStartInfo.pts=t.pts),void 0===e.minSegmentPts?e.minSegmentPts=t.pts:e.minSegmentPts=Math.min(e.minSegmentPts,t.pts),void 0===e.maxSegmentPts?e.maxSegmentPts=t.pts:e.maxSegmentPts=Math.max(e.maxSegmentPts,t.pts)),"number"==typeof t.dts&&(void 0===e.timelineStartInfo.dts&&(e.timelineStartInfo.dts=t.dts),void 0===e.minSegmentDts?e.minSegmentDts=t.dts:e.minSegmentDts=Math.min(e.minSegmentDts,t.dts),void 0===e.maxSegmentDts?e.maxSegmentDts=t.dts:e.maxSegmentDts=Math.max(e.maxSegmentDts,t.dts))},Ae=function(e){for(var t=0,n={payloadType:-1,payloadSize:0},r=0,i=0;t<e.byteLength&&128!==e[t];){for(;255===e[t];)r+=255,t++;for(r+=e[t++];255===e[t];)i+=255,t++;if(i+=e[t++],!n.payload&&4===r){if("GA94"===String.fromCharCode(e[t+3],e[t+4],e[t+5],e[t+6])){n.payloadType=r,n.payloadSize=i,n.payload=e.subarray(t,t+i);break}n.payload=void 0}t+=i,r=0,i=0}return n},Pe=function(e){return 181!==e.payload[0]||49!=(e.payload[1]<<8|e.payload[2])||"GA94"!==String.fromCharCode(e.payload[3],e.payload[4],e.payload[5],e.payload[6])||3!==e.payload[7]?null:e.payload.subarray(8,e.payload.length-1)},Ie=function(e,t){var n,r,i,a,s=[];if(!(64&t[0]))return s;for(r=31&t[0],n=0;n<r;n++)a={type:3&t[(i=3*n)+2],pts:e},4&t[i+2]&&(a.ccData=t[i+3]<<8|t[i+4],s.push(a));return s},Le=function(e){for(var t,n,r=e.byteLength,i=[],a=1;a<r-2;)0===e[a]&&0===e[a+1]&&3===e[a+2]?(i.push(a+2),a+=2):a++;if(0===i.length)return e;t=r-i.length,n=new Uint8Array(t);var s=0;for(a=0;a<t;s++,a++)s===i[0]&&(s++,i.shift()),n[a]=e[s];return n},Me=4,De=function e(){e.prototype.init.call(this),this.captionPackets_=[],this.ccStreams_=[new Fe(0,0),new Fe(0,1),new Fe(1,0),new Fe(1,1)],this.reset(),this.ccStreams_.forEach((function(e){e.on("data",this.trigger.bind(this,"data")),e.on("partialdone",this.trigger.bind(this,"partialdone")),e.on("done",this.trigger.bind(this,"done"))}),this)};(De.prototype=new V).push=function(e){var t,n,r;if("sei_rbsp"===e.nalUnitType&&(t=Ae(e.escapedRBSP)).payloadType===Me&&(n=Pe(t)))if(e.dts<this.latestDts_)this.ignoreNextEqualDts_=!0;else{if(e.dts===this.latestDts_&&this.ignoreNextEqualDts_)return this.numSameDts_--,void(this.numSameDts_||(this.ignoreNextEqualDts_=!1));r=Ie(e.pts,n),this.captionPackets_=this.captionPackets_.concat(r),this.latestDts_!==e.dts&&(this.numSameDts_=0),this.numSameDts_++,this.latestDts_=e.dts}},De.prototype.flushCCStreams=function(e){this.ccStreams_.forEach((function(t){return"flush"===e?t.flush():t.partialFlush()}),this)},De.prototype.flushStream=function(e){this.captionPackets_.length?(this.captionPackets_.forEach((function(e,t){e.presortIndex=t})),this.captionPackets_.sort((function(e,t){return e.pts===t.pts?e.presortIndex-t.presortIndex:e.pts-t.pts})),this.captionPackets_.forEach((function(e){e.type<2&&this.dispatchCea608Packet(e)}),this),this.captionPackets_.length=0,this.flushCCStreams(e)):this.flushCCStreams(e)},De.prototype.flush=function(){return this.flushStream("flush")},De.prototype.partialFlush=function(){return this.flushStream("partialFlush")},De.prototype.reset=function(){this.latestDts_=null,this.ignoreNextEqualDts_=!1,this.numSameDts_=0,this.activeCea608Channel_=[null,null],this.ccStreams_.forEach((function(e){e.reset()}))},De.prototype.dispatchCea608Packet=function(e){this.setsTextOrXDSActive(e)?this.activeCea608Channel_[e.type]=null:this.setsChannel1Active(e)?this.activeCea608Channel_[e.type]=0:this.setsChannel2Active(e)&&(this.activeCea608Channel_[e.type]=1),null!==this.activeCea608Channel_[e.type]&&this.ccStreams_[(e.type<<1)+this.activeCea608Channel_[e.type]].push(e)},De.prototype.setsChannel1Active=function(e){return 4096==(30720&e.ccData)},De.prototype.setsChannel2Active=function(e){return 6144==(30720&e.ccData)},De.prototype.setsTextOrXDSActive=function(e){return 256==(28928&e.ccData)||4138==(30974&e.ccData)||6186==(30974&e.ccData)};var Re={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496},Ne=function(e){return null===e?"":(e=Re[e]||e,String.fromCharCode(e))},je=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],Ue=function(){for(var e=[],t=15;t--;)e.push("");return e},Fe=function e(t,n){e.prototype.init.call(this),this.field_=t||0,this.dataChannel_=n||0,this.name_="CC"+(1+(this.field_<<1|this.dataChannel_)),this.setConstants(),this.reset(),this.push=function(e){var t,n,r,i,a;if((t=32639&e.ccData)!==this.lastControlCode_){if(4096==(61440&t)?this.lastControlCode_=t:t!==this.PADDING_&&(this.lastControlCode_=null),r=t>>>8,i=255&t,t!==this.PADDING_)if(t===this.RESUME_CAPTION_LOADING_)this.mode_="popOn";else if(t===this.END_OF_CAPTION_)this.mode_="popOn",this.clearFormatting(e.pts),this.flushDisplayed(e.pts),n=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=n,this.startPts_=e.pts;else if(t===this.ROLL_UP_2_ROWS_)this.rollUpRows_=2,this.setRollUp(e.pts);else if(t===this.ROLL_UP_3_ROWS_)this.rollUpRows_=3,this.setRollUp(e.pts);else if(t===this.ROLL_UP_4_ROWS_)this.rollUpRows_=4,this.setRollUp(e.pts);else if(t===this.CARRIAGE_RETURN_)this.clearFormatting(e.pts),this.flushDisplayed(e.pts),this.shiftRowsUp_(),this.startPts_=e.pts;else if(t===this.BACKSPACE_)"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1);else if(t===this.ERASE_DISPLAYED_MEMORY_)this.flushDisplayed(e.pts),this.displayed_=Ue();else if(t===this.ERASE_NON_DISPLAYED_MEMORY_)this.nonDisplayed_=Ue();else if(t===this.RESUME_DIRECT_CAPTIONING_)"paintOn"!==this.mode_&&(this.flushDisplayed(e.pts),this.displayed_=Ue()),this.mode_="paintOn",this.startPts_=e.pts;else if(this.isSpecialCharacter(r,i))a=Ne((r=(3&r)<<8)|i),this[this.mode_](e.pts,a),this.column_++;else if(this.isExtCharacter(r,i))"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1),a=Ne((r=(3&r)<<8)|i),this[this.mode_](e.pts,a),this.column_++;else if(this.isMidRowCode(r,i))this.clearFormatting(e.pts),this[this.mode_](e.pts," "),this.column_++,14==(14&i)&&this.addFormatting(e.pts,["i"]),1==(1&i)&&this.addFormatting(e.pts,["u"]);else if(this.isOffsetControlCode(r,i))this.column_+=3&i;else if(this.isPAC(r,i)){var s=je.indexOf(7968&t);"rollUp"===this.mode_&&(s-this.rollUpRows_+1<0&&(s=this.rollUpRows_-1),this.setRollUp(e.pts,s)),s!==this.row_&&(this.clearFormatting(e.pts),this.row_=s),1&i&&-1===this.formatting_.indexOf("u")&&this.addFormatting(e.pts,["u"]),16==(16&t)&&(this.column_=4*((14&t)>>1)),this.isColorPAC(i)&&14==(14&i)&&this.addFormatting(e.pts,["i"])}else this.isNormalChar(r)&&(0===i&&(i=null),a=Ne(r),a+=Ne(i),this[this.mode_](e.pts,a),this.column_+=a.length)}else this.lastControlCode_=null}};Fe.prototype=new V,Fe.prototype.flushDisplayed=function(e){var t=this.displayed_.map((function(e){try{return e.trim()}catch(e){return console.error("Skipping malformed caption."),""}})).join("\n").replace(/^\n+|\n+$/g,"");t.length&&this.trigger("data",{startPts:this.startPts_,endPts:e,text:t,stream:this.name_})},Fe.prototype.reset=function(){this.mode_="popOn",this.topRow_=0,this.startPts_=0,this.displayed_=Ue(),this.nonDisplayed_=Ue(),this.lastControlCode_=null,this.column_=0,this.row_=14,this.rollUpRows_=2,this.formatting_=[]},Fe.prototype.setConstants=function(){0===this.dataChannel_?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):1===this.dataChannel_&&(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,this.OFFSET_=31),this.PADDING_=0,this.RESUME_CAPTION_LOADING_=32|this.CONTROL_,this.END_OF_CAPTION_=47|this.CONTROL_,this.ROLL_UP_2_ROWS_=37|this.CONTROL_,this.ROLL_UP_3_ROWS_=38|this.CONTROL_,this.ROLL_UP_4_ROWS_=39|this.CONTROL_,this.CARRIAGE_RETURN_=45|this.CONTROL_,this.RESUME_DIRECT_CAPTIONING_=41|this.CONTROL_,this.BACKSPACE_=33|this.CONTROL_,this.ERASE_DISPLAYED_MEMORY_=44|this.CONTROL_,this.ERASE_NON_DISPLAYED_MEMORY_=46|this.CONTROL_},Fe.prototype.isSpecialCharacter=function(e,t){return e===this.EXT_&&t>=48&&t<=63},Fe.prototype.isExtCharacter=function(e,t){return(e===this.EXT_+1||e===this.EXT_+2)&&t>=32&&t<=63},Fe.prototype.isMidRowCode=function(e,t){return e===this.EXT_&&t>=32&&t<=47},Fe.prototype.isOffsetControlCode=function(e,t){return e===this.OFFSET_&&t>=33&&t<=35},Fe.prototype.isPAC=function(e,t){return e>=this.BASE_&&e<this.BASE_+8&&t>=64&&t<=127},Fe.prototype.isColorPAC=function(e){return e>=64&&e<=79||e>=96&&e<=127},Fe.prototype.isNormalChar=function(e){return e>=32&&e<=127},Fe.prototype.setRollUp=function(e,t){if("rollUp"!==this.mode_&&(this.row_=14,this.mode_="rollUp",this.flushDisplayed(e),this.nonDisplayed_=Ue(),this.displayed_=Ue()),void 0!==t&&t!==this.row_)for(var n=0;n<this.rollUpRows_;n++)this.displayed_[t-n]=this.displayed_[this.row_-n],this.displayed_[this.row_-n]="";void 0===t&&(t=this.row_),this.topRow_=t-this.rollUpRows_+1},Fe.prototype.addFormatting=function(e,t){this.formatting_=this.formatting_.concat(t);var n=t.reduce((function(e,t){return e+"<"+t+">"}),"");this[this.mode_](e,n)},Fe.prototype.clearFormatting=function(e){if(this.formatting_.length){var t=this.formatting_.reverse().reduce((function(e,t){return e+"</"+t+">"}),"");this.formatting_=[],this[this.mode_](e,t)}},Fe.prototype.popOn=function(e,t){var n=this.nonDisplayed_[this.row_];n+=t,this.nonDisplayed_[this.row_]=n},Fe.prototype.rollUp=function(e,t){var n=this.displayed_[this.row_];n+=t,this.displayed_[this.row_]=n},Fe.prototype.shiftRowsUp_=function(){var e;for(e=0;e<this.topRow_;e++)this.displayed_[e]="";for(e=this.row_+1;e<15;e++)this.displayed_[e]="";for(e=this.topRow_;e<this.row_;e++)this.displayed_[e]=this.displayed_[e+1];this.displayed_[this.row_]=""},Fe.prototype.paintOn=function(e,t){var n=this.displayed_[this.row_];n+=t,this.displayed_[this.row_]=n};var $e={CaptionStream:De,Cea608Stream:Fe},Be={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21},Ve="shared",qe=function(e,t){var n=1;for(e>t&&(n=-1);Math.abs(t-e)>4294967296;)e+=8589934592*n;return e},He=function e(t){var n,r;e.prototype.init.call(this),this.type_=t||Ve,this.push=function(e){this.type_!==Ve&&e.type!==this.type_||(void 0===r&&(r=e.dts),e.dts=qe(e.dts,r),e.pts=qe(e.pts,r),n=e.dts,this.trigger("data",e))},this.flush=function(){r=n,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.discontinuity=function(){r=void 0,n=void 0},this.reset=function(){this.discontinuity(),this.trigger("reset")}};He.prototype=new V;var We,ze=He,Ge=function(e,t,n){var r,i="";for(r=t;r<n;r++)i+="%"+("00"+e[r].toString(16)).slice(-2);return i},Ke=function(e,t,n){return decodeURIComponent(Ge(e,t,n))},Xe=function(e,t,n){return unescape(Ge(e,t,n))},Ye=function(e){return e[0]<<21|e[1]<<14|e[2]<<7|e[3]},Qe={TXXX:function(e){var t;if(3===e.data[0]){for(t=1;t<e.data.length;t++)if(0===e.data[t]){e.description=Ke(e.data,1,t),e.value=Ke(e.data,t+1,e.data.length).replace(/\0*$/,"");break}e.data=e.value}},WXXX:function(e){var t;if(3===e.data[0])for(t=1;t<e.data.length;t++)if(0===e.data[t]){e.description=Ke(e.data,1,t),e.url=Ke(e.data,t+1,e.data.length);break}},PRIV:function(e){var t;for(t=0;t<e.data.length;t++)if(0===e.data[t]){e.owner=Xe(e.data,0,t);break}e.privateData=e.data.subarray(t+1),e.data=e.privateData}};We=function(e){var t,n={debug:!(!e||!e.debug),descriptor:e&&e.descriptor},r=0,i=[],a=0;if(We.prototype.init.call(this),this.dispatchType=Be.METADATA_STREAM_TYPE.toString(16),n.descriptor)for(t=0;t<n.descriptor.length;t++)this.dispatchType+=("00"+n.descriptor[t].toString(16)).slice(-2);this.push=function(e){var t,s,o,u,c;if("timed-metadata"===e.type)if(e.dataAlignmentIndicator&&(a=0,i.length=0),0===i.length&&(e.data.length<10||e.data[0]!=="I".charCodeAt(0)||e.data[1]!=="D".charCodeAt(0)||e.data[2]!=="3".charCodeAt(0)))n.debug;else if(i.push(e),a+=e.data.byteLength,1===i.length&&(r=Ye(e.data.subarray(6,10)),r+=10),!(a<r)){for(t={data:new Uint8Array(r),frames:[],pts:i[0].pts,dts:i[0].dts},c=0;c<r;)t.data.set(i[0].data.subarray(0,r-c),c),c+=i[0].data.byteLength,a-=i[0].data.byteLength,i.shift();s=10,64&t.data[5]&&(s+=4,s+=Ye(t.data.subarray(10,14)),r-=Ye(t.data.subarray(16,20)));do{if((o=Ye(t.data.subarray(s+4,s+8)))<1)return console.log("Malformed ID3 frame encountered. Skipping metadata parsing.");if((u={id:String.fromCharCode(t.data[s],t.data[s+1],t.data[s+2],t.data[s+3]),data:t.data.subarray(s+10,s+o+10)}).key=u.id,Qe[u.id]&&(Qe[u.id](u),"com.apple.streaming.transportStreamTimestamp"===u.owner)){var l=u.data,d=(1&l[3])<<30|l[4]<<22|l[5]<<14|l[6]<<6|l[7]>>>2;d*=4,d+=3&l[7],u.timeStamp=d,void 0===t.pts&&void 0===t.dts&&(t.pts=u.timeStamp,t.dts=u.timeStamp),this.trigger("timestamp",u)}t.frames.push(u),s+=10,s+=o}while(s<r);this.trigger("data",t)}}},We.prototype=new V;var Je,Ze,et,tt=We,nt=ze,rt=188;Je=function(){var e=new Uint8Array(rt),t=0;Je.prototype.init.call(this),this.push=function(n){var r,i=0,a=rt;for(t?((r=new Uint8Array(n.byteLength+t)).set(e.subarray(0,t)),r.set(n,t),t=0):r=n;a<r.byteLength;)71!==r[i]||71!==r[a]?(i++,a++):(this.trigger("data",r.subarray(i,a)),i+=rt,a+=rt);i<r.byteLength&&(e.set(r.subarray(i),0),t=r.byteLength-i)},this.flush=function(){t===rt&&71===e[0]&&(this.trigger("data",e),t=0),this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.reset=function(){t=0,this.trigger("reset")}},Je.prototype=new V,Ze=function(){var e,t,n,r;Ze.prototype.init.call(this),r=this,this.packetsWaitingForPmt=[],this.programMapTable=void 0,e=function(e,r){var i=0;r.payloadUnitStartIndicator&&(i+=e[i]+1),"pat"===r.type?t(e.subarray(i),r):n(e.subarray(i),r)},t=function(e,t){t.section_number=e[7],t.last_section_number=e[8],r.pmtPid=(31&e[10])<<8|e[11],t.pmtPid=r.pmtPid},n=function(e,t){var n,i;if(1&e[5]){for(r.programMapTable={video:null,audio:null,"timed-metadata":{}},n=3+((15&e[1])<<8|e[2])-4,i=12+((15&e[10])<<8|e[11]);i<n;){var a=e[i],s=(31&e[i+1])<<8|e[i+2];a===Be.H264_STREAM_TYPE&&null===r.programMapTable.video?r.programMapTable.video=s:a===Be.ADTS_STREAM_TYPE&&null===r.programMapTable.audio?r.programMapTable.audio=s:a===Be.METADATA_STREAM_TYPE&&(r.programMapTable["timed-metadata"][s]=a),i+=5+((15&e[i+3])<<8|e[i+4])}t.programMapTable=r.programMapTable}},this.push=function(t){var n={},r=4;if(n.payloadUnitStartIndicator=!!(64&t[1]),n.pid=31&t[1],n.pid<<=8,n.pid|=t[2],(48&t[3])>>>4>1&&(r+=t[r]+1),0===n.pid)n.type="pat",e(t.subarray(r),n),this.trigger("data",n);else if(n.pid===this.pmtPid)for(n.type="pmt",e(t.subarray(r),n),this.trigger("data",n);this.packetsWaitingForPmt.length;)this.processPes_.apply(this,this.packetsWaitingForPmt.shift());else void 0===this.programMapTable?this.packetsWaitingForPmt.push([t,r,n]):this.processPes_(t,r,n)},this.processPes_=function(e,t,n){n.pid===this.programMapTable.video?n.streamType=Be.H264_STREAM_TYPE:n.pid===this.programMapTable.audio?n.streamType=Be.ADTS_STREAM_TYPE:n.streamType=this.programMapTable["timed-metadata"][n.pid],n.type="pes",n.data=e.subarray(t),this.trigger("data",n)}},Ze.prototype=new V,Ze.STREAM_TYPES={h264:27,adts:15},et=function(){var e,t=this,n={data:[],size:0},r={data:[],size:0},i={data:[],size:0},a=function(e,n,r){var i,a,s=new Uint8Array(e.size),o={type:n},u=0,c=0;if(e.data.length&&!(e.size<9)){for(o.trackId=e.data[0].pid,u=0;u<e.data.length;u++)a=e.data[u],s.set(a.data,c),c+=a.data.byteLength;var l,d,h;l=s,(d=o).packetLength=6+(l[4]<<8|l[5]),d.dataAlignmentIndicator=0!=(4&l[6]),192&(h=l[7])&&(d.pts=(14&l[9])<<27|(255&l[10])<<20|(254&l[11])<<12|(255&l[12])<<5|(254&l[13])>>>3,d.pts*=4,d.pts+=(6&l[13])>>>1,d.dts=d.pts,64&h&&(d.dts=(14&l[14])<<27|(255&l[15])<<20|(254&l[16])<<12|(255&l[17])<<5|(254&l[18])>>>3,d.dts*=4,d.dts+=(6&l[18])>>>1)),d.data=l.subarray(9+l[8]),i="video"===n||o.packetLength<=e.size,(r||i)&&(e.size=0,e.data.length=0),i&&t.trigger("data",o)}};et.prototype.init.call(this),this.push=function(s){({pat:function(){},pes:function(){var e,t;switch(s.streamType){case Be.H264_STREAM_TYPE:e=n,t="video";break;case Be.ADTS_STREAM_TYPE:e=r,t="audio";break;case Be.METADATA_STREAM_TYPE:e=i,t="timed-metadata";break;default:return}s.payloadUnitStartIndicator&&a(e,t,!0),e.data.push(s),e.size+=s.data.byteLength},pmt:function(){var n={type:"metadata",tracks:[]};null!==(e=s.programMapTable).video&&n.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+e.video,codec:"avc",type:"video"}),null!==e.audio&&n.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+e.audio,codec:"adts",type:"audio"}),t.trigger("data",n)}})[s.type]()},this.reset=function(){n.size=0,n.data.length=0,r.size=0,r.data.length=0,this.trigger("reset")},this.flushStreams_=function(){a(n,"video"),a(r,"audio"),a(i,"timed-metadata")},this.flush=function(){this.flushStreams_(),this.trigger("done")}},et.prototype=new V;var it={PAT_PID:0,MP2T_PACKET_LENGTH:rt,TransportPacketStream:Je,TransportParseStream:Ze,ElementaryStream:et,TimestampRolloverStream:nt,CaptionStream:$e.CaptionStream,Cea608Stream:$e.Cea608Stream,MetadataStream:tt};for(var at in Be)Be.hasOwnProperty(at)&&(it[at]=Be[at]);var st,ot=it,ut=fe,ct=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];st=function(e){var t,n=0;st.prototype.init.call(this),this.push=function(r){var i,a,s,o,u,c,l=0;if(e||(n=0),"audio"===r.type)for(t?(o=t,(t=new Uint8Array(o.byteLength+r.data.byteLength)).set(o),t.set(r.data,o.byteLength)):t=r.data;l+5<t.length;)if(255===t[l]&&240==(246&t[l+1])){if(a=2*(1&~t[l+1]),i=(3&t[l+3])<<11|t[l+4]<<3|(224&t[l+5])>>5,c=(u=1024*(1+(3&t[l+6])))*ut/ct[(60&t[l+2])>>>2],s=l+i,t.byteLength<s)return;if(this.trigger("data",{pts:r.pts+n*c,dts:r.dts+n*c,sampleCount:u,audioobjecttype:1+(t[l+2]>>>6&3),channelcount:(1&t[l+2])<<2|(192&t[l+3])>>>6,samplerate:ct[(60&t[l+2])>>>2],samplingfrequencyindex:(60&t[l+2])>>>2,samplesize:16,data:t.subarray(l+7+a,s)}),n++,t.byteLength===s)return void(t=void 0);t=t.subarray(s)}else l++},this.flush=function(){n=0,this.trigger("done")},this.reset=function(){t=void 0,this.trigger("reset")},this.endTimeline=function(){t=void 0,this.trigger("endedtimeline")}},st.prototype=new V;var lt,dt,ht,pt=st,ft=function(e){var t=e.byteLength,n=0,r=0;this.length=function(){return 8*t},this.bitsAvailable=function(){return 8*t+r},this.loadWord=function(){var i=e.byteLength-t,a=new Uint8Array(4),s=Math.min(4,t);if(0===s)throw new Error("no bytes available");a.set(e.subarray(i,i+s)),n=new DataView(a.buffer).getUint32(0),r=8*s,t-=s},this.skipBits=function(e){var i;r>e?(n<<=e,r-=e):(e-=r,e-=8*(i=Math.floor(e/8)),t-=i,this.loadWord(),n<<=e,r-=e)},this.readBits=function(e){var i=Math.min(r,e),a=n>>>32-i;return(r-=i)>0?n<<=i:t>0&&this.loadWord(),(i=e-i)>0?a<<i|this.readBits(i):a},this.skipLeadingZeros=function(){var e;for(e=0;e<r;++e)if(0!=(n&2147483648>>>e))return n<<=e,r-=e,e;return this.loadWord(),e+this.skipLeadingZeros()},this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.readUnsignedExpGolomb=function(){var e=this.skipLeadingZeros();return this.readBits(e+1)-1},this.readExpGolomb=function(){var e=this.readUnsignedExpGolomb();return 1&e?1+e>>>1:-1*(e>>>1)},this.readBoolean=function(){return 1===this.readBits(1)},this.readUnsignedByte=function(){return this.readBits(8)},this.loadWord()};dt=function(){var e,t,n=0;dt.prototype.init.call(this),this.push=function(r){var i;t?((i=new Uint8Array(t.byteLength+r.data.byteLength)).set(t),i.set(r.data,t.byteLength),t=i):t=r.data;for(var a=t.byteLength;n<a-3;n++)if(1===t[n+2]){e=n+5;break}for(;e<a;)switch(t[e]){case 0:if(0!==t[e-1]){e+=2;break}if(0!==t[e-2]){e++;break}n+3!==e-2&&this.trigger("data",t.subarray(n+3,e-2));do{e++}while(1!==t[e]&&e<a);n=e-2,e+=3;break;case 1:if(0!==t[e-1]||0!==t[e-2]){e+=3;break}this.trigger("data",t.subarray(n+3,e-2)),n=e-2,e+=3;break;default:e+=3}t=t.subarray(n),e-=n,n=0},this.reset=function(){t=null,n=0,this.trigger("reset")},this.flush=function(){t&&t.byteLength>3&&this.trigger("data",t.subarray(n+3)),t=null,n=0,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")}},dt.prototype=new V,ht={100:!0,110:!0,122:!0,244:!0,44:!0,83:!0,86:!0,118:!0,128:!0,138:!0,139:!0,134:!0},lt=function(){var e,t,n,r,i,a,s,o=new dt;lt.prototype.init.call(this),e=this,this.push=function(e){"video"===e.type&&(t=e.trackId,n=e.pts,r=e.dts,o.push(e))},o.on("data",(function(s){var o={trackId:t,pts:n,dts:r,data:s};switch(31&s[0]){case 5:o.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:o.nalUnitType="sei_rbsp",o.escapedRBSP=i(s.subarray(1));break;case 7:o.nalUnitType="seq_parameter_set_rbsp",o.escapedRBSP=i(s.subarray(1)),o.config=a(o.escapedRBSP);break;case 8:o.nalUnitType="pic_parameter_set_rbsp";break;case 9:o.nalUnitType="access_unit_delimiter_rbsp"}e.trigger("data",o)})),o.on("done",(function(){e.trigger("done")})),o.on("partialdone",(function(){e.trigger("partialdone")})),o.on("reset",(function(){e.trigger("reset")})),o.on("endedtimeline",(function(){e.trigger("endedtimeline")})),this.flush=function(){o.flush()},this.partialFlush=function(){o.partialFlush()},this.reset=function(){o.reset()},this.endTimeline=function(){o.endTimeline()},s=function(e,t){var n,r=8,i=8;for(n=0;n<e;n++)0!==i&&(i=(r+t.readExpGolomb()+256)%256),r=0===i?r:i},i=function(e){for(var t,n,r=e.byteLength,i=[],a=1;a<r-2;)0===e[a]&&0===e[a+1]&&3===e[a+2]?(i.push(a+2),a+=2):a++;if(0===i.length)return e;t=r-i.length,n=new Uint8Array(t);var s=0;for(a=0;a<t;s++,a++)s===i[0]&&(s++,i.shift()),n[a]=e[s];return n},a=function(e){var t,n,r,i,a,o,u,c,l,d,h,p,f,m=0,g=0,v=0,y=0,b=1;if(n=(t=new ft(e)).readUnsignedByte(),i=t.readUnsignedByte(),r=t.readUnsignedByte(),t.skipUnsignedExpGolomb(),ht[n]&&(3===(a=t.readUnsignedExpGolomb())&&t.skipBits(1),t.skipUnsignedExpGolomb(),t.skipUnsignedExpGolomb(),t.skipBits(1),t.readBoolean()))for(h=3!==a?8:12,f=0;f<h;f++)t.readBoolean()&&s(f<6?16:64,t);if(t.skipUnsignedExpGolomb(),0===(o=t.readUnsignedExpGolomb()))t.readUnsignedExpGolomb();else if(1===o)for(t.skipBits(1),t.skipExpGolomb(),t.skipExpGolomb(),u=t.readUnsignedExpGolomb(),f=0;f<u;f++)t.skipExpGolomb();if(t.skipUnsignedExpGolomb(),t.skipBits(1),c=t.readUnsignedExpGolomb(),l=t.readUnsignedExpGolomb(),0===(d=t.readBits(1))&&t.skipBits(1),t.skipBits(1),t.readBoolean()&&(m=t.readUnsignedExpGolomb(),g=t.readUnsignedExpGolomb(),v=t.readUnsignedExpGolomb(),y=t.readUnsignedExpGolomb()),t.readBoolean()&&t.readBoolean()){switch(t.readUnsignedByte()){case 1:p=[1,1];break;case 2:p=[12,11];break;case 3:p=[10,11];break;case 4:p=[16,11];break;case 5:p=[40,33];break;case 6:p=[24,11];break;case 7:p=[20,11];break;case 8:p=[32,11];break;case 9:p=[80,33];break;case 10:p=[18,11];break;case 11:p=[15,11];break;case 12:p=[64,33];break;case 13:p=[160,99];break;case 14:p=[4,3];break;case 15:p=[3,2];break;case 16:p=[2,1];break;case 255:p=[t.readUnsignedByte()<<8|t.readUnsignedByte(),t.readUnsignedByte()<<8|t.readUnsignedByte()]}p&&(b=p[0]/p[1])}return{profileIdc:n,levelIdc:r,profileCompatibility:i,width:Math.ceil((16*(c+1)-2*m-2*g)*b),height:(2-d)*(l+1)*16-2*v-2*y,sarRatio:p}}},lt.prototype=new V;var mt,gt={H264Stream:lt,NalByteStream:dt},vt=function(e,t){var n=e[t+6]<<21|e[t+7]<<14|e[t+8]<<7|e[t+9];return n=n>=0?n:0,(16&e[t+5])>>4?n+20:n+10},yt=function e(t,n){return t.length-n<10||t[n]!=="I".charCodeAt(0)||t[n+1]!=="D".charCodeAt(0)||t[n+2]!=="3".charCodeAt(0)?n:e(t,n+=vt(t,n))},bt=function(e){var t=yt(e,0);return e.length>=t+2&&255==(255&e[t])&&240==(240&e[t+1])&&16==(22&e[t+1])},_t=vt,Tt=function(e,t){var n=(224&e[t+5])>>5,r=e[t+4]<<3;return 6144&e[t+3]|r|n};(mt=function(){var e=new Uint8Array,t=0;mt.prototype.init.call(this),this.setTimestamp=function(e){t=e},this.push=function(n){var r,i,a,s,o=0,u=0;for(e.length?(s=e.length,(e=new Uint8Array(n.byteLength+s)).set(e.subarray(0,s)),e.set(n,s)):e=n;e.length-u>=3;)if(e[u]!=="I".charCodeAt(0)||e[u+1]!=="D".charCodeAt(0)||e[u+2]!=="3".charCodeAt(0))if(255!=(255&e[u])||240!=(240&e[u+1]))u++;else{if(e.length-u<7)break;if(u+(o=Tt(e,u))>e.length)break;a={type:"audio",data:e.subarray(u,u+o),pts:t,dts:t},this.trigger("data",a),u+=o}else{if(e.length-u<10)break;if(u+(o=_t(e,u))>e.length)break;i={type:"timed-metadata",data:e.subarray(u,u+o)},this.trigger("data",i),u+=o}r=e.length-u,e=r>0?e.subarray(u):new Uint8Array},this.reset=function(){e=new Uint8Array,this.trigger("reset")},this.endTimeline=function(){e=new Uint8Array,this.trigger("endedtimeline")}}).prototype=new V;var wt,St,Ct,Et,kt=mt,Ot=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"],xt=["width","height","profileIdc","levelIdc","profileCompatibility","sarRatio"],At=gt.H264Stream,Pt=bt,It=fe,Lt=function(e,t){var n;if(e.length!==t.length)return!1;for(n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0},Mt=function(e,t,n,r,i,a){return{start:{dts:e,pts:e+(n-t)},end:{dts:e+(r-t),pts:e+(i-n)},prependedContentDuration:a,baseMediaDecodeTime:e}};St=function(e,t){var n=[],r=0,i=0,a=0,s=1/0;t=t||{},St.prototype.init.call(this),this.push=function(t){xe(e,t),e&&Ot.forEach((function(n){e[n]=t[n]})),n.push(t)},this.setEarliestDts=function(e){i=e},this.setVideoBaseMediaDecodeTime=function(e){s=e},this.setAudioAppendStart=function(e){a=e},this.flush=function(){var o,u,c,l,d;0!==n.length?(o=we(n,e,i),e.baseMediaDecodeTime=Oe(e,t.keepOriginalTimestamps),Te(e,o,a,s),e.samples=Se(o),c=J(Ce(o)),n=[],u=Z(r,[e]),l=new Uint8Array(u.byteLength+c.byteLength),r++,l.set(u),l.set(c,u.byteLength),ke(e),d=Math.ceil(1024*It/e.samplerate),o.length&&this.trigger("timingInfo",{start:o[0].pts,end:o[0].pts+o.length*d}),this.trigger("data",{track:e,boxes:l}),this.trigger("done","AudioSegmentStream")):this.trigger("done","AudioSegmentStream")},this.reset=function(){ke(e),n=[],this.trigger("reset")}},St.prototype=new V,wt=function(e,t){var n,r,i=0,a=[],s=[];t=t||{},wt.prototype.init.call(this),delete e.minPTS,this.gopCache_=[],this.push=function(t){xe(e,t),"seq_parameter_set_rbsp"!==t.nalUnitType||n||(n=t.config,e.sps=[t.data],xt.forEach((function(t){e[t]=n[t]}),this)),"pic_parameter_set_rbsp"!==t.nalUnitType||r||(r=t.data,e.pps=[t.data]),a.push(t)},this.flush=function(){for(var n,r,o,u,c,l,d,h,p=0;a.length&&"access_unit_delimiter_rbsp"!==a[0].nalUnitType;)a.shift();if(0===a.length)return this.resetStream_(),void this.trigger("done","VideoSegmentStream");if(n=ne(a),(o=re(n))[0][0].keyFrame||((r=this.getGopForFusion_(a[0],e))?(p=r.duration,o.unshift(r),o.byteLength+=r.byteLength,o.nalCount+=r.nalCount,o.pts=r.pts,o.dts=r.dts,o.duration+=r.duration):o=ie(o)),s.length){var f;if(!(f=t.alignGopsAtEnd?this.alignGopsAtEnd_(o):this.alignGopsAtStart_(o)))return this.gopCache_.unshift({gop:o.pop(),pps:e.pps,sps:e.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),a=[],this.resetStream_(),void this.trigger("done","VideoSegmentStream");ke(e),o=f}xe(e,o),e.samples=ae(o),c=J(se(o)),e.baseMediaDecodeTime=Oe(e,t.keepOriginalTimestamps),this.trigger("processedGopsInfo",o.map((function(e){return{pts:e.pts,dts:e.dts,byteLength:e.byteLength}}))),d=o[0],h=o[o.length-1],this.trigger("segmentTimingInfo",Mt(e.baseMediaDecodeTime,d.dts,d.pts,h.dts+h.duration,h.pts+h.duration,p)),this.trigger("timingInfo",{start:o[0].pts,end:o[o.length-1].pts+o[o.length-1].duration}),this.gopCache_.unshift({gop:o.pop(),pps:e.pps,sps:e.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),a=[],this.trigger("baseMediaDecodeTime",e.baseMediaDecodeTime),this.trigger("timelineStartInfo",e.timelineStartInfo),u=Z(i,[e]),l=new Uint8Array(u.byteLength+c.byteLength),i++,l.set(u),l.set(c,u.byteLength),this.trigger("data",{track:e,boxes:l}),this.resetStream_(),this.trigger("done","VideoSegmentStream")},this.reset=function(){this.resetStream_(),a=[],this.gopCache_.length=0,s.length=0,this.trigger("reset")},this.resetStream_=function(){ke(e),n=void 0,r=void 0},this.getGopForFusion_=function(t){var n,r,i,a,s,o=1/0;for(s=0;s<this.gopCache_.length;s++)i=(a=this.gopCache_[s]).gop,e.pps&&Lt(e.pps[0],a.pps[0])&&e.sps&&Lt(e.sps[0],a.sps[0])&&(i.dts<e.timelineStartInfo.dts||(n=t.dts-i.dts-i.duration)>=-1e4&&n<=45e3&&(!r||o>n)&&(r=a,o=n));return r?r.gop:null},this.alignGopsAtStart_=function(e){var t,n,r,i,a,o,u,c;for(a=e.byteLength,o=e.nalCount,u=e.duration,t=n=0;t<s.length&&n<e.length&&(r=s[t],i=e[n],r.pts!==i.pts);)i.pts>r.pts?t++:(n++,a-=i.byteLength,o-=i.nalCount,u-=i.duration);return 0===n?e:n===e.length?null:((c=e.slice(n)).byteLength=a,c.duration=u,c.nalCount=o,c.pts=c[0].pts,c.dts=c[0].dts,c)},this.alignGopsAtEnd_=function(e){var t,n,r,i,a,o,u;for(t=s.length-1,n=e.length-1,a=null,o=!1;t>=0&&n>=0;){if(r=s[t],i=e[n],r.pts===i.pts){o=!0;break}r.pts>i.pts?t--:(t===s.length-1&&(a=n),n--)}if(!o&&null===a)return null;if(0===(u=o?n:a))return e;var c=e.slice(u),l=c.reduce((function(e,t){return e.byteLength+=t.byteLength,e.duration+=t.duration,e.nalCount+=t.nalCount,e}),{byteLength:0,duration:0,nalCount:0});return c.byteLength=l.byteLength,c.duration=l.duration,c.nalCount=l.nalCount,c.pts=c[0].pts,c.dts=c[0].dts,c},this.alignGopsWith=function(e){s=e}},wt.prototype=new V,Et=function(e,t){this.numberOfTracks=0,this.metadataStream=t,void 0!==(e=e||{}).remux?this.remuxTracks=!!e.remux:this.remuxTracks=!0,"boolean"==typeof e.keepOriginalTimestamps?this.keepOriginalTimestamps=e.keepOriginalTimestamps:this.keepOriginalTimestamps=!1,this.pendingTracks=[],this.videoTrack=null,this.pendingBoxes=[],this.pendingCaptions=[],this.pendingMetadata=[],this.pendingBytes=0,this.emittedTracks=0,Et.prototype.init.call(this),this.push=function(e){return e.text?this.pendingCaptions.push(e):e.frames?this.pendingMetadata.push(e):(this.pendingTracks.push(e.track),this.pendingBytes+=e.boxes.byteLength,"video"===e.track.type&&(this.videoTrack=e.track,this.pendingBoxes.push(e.boxes)),void("audio"===e.track.type&&(this.audioTrack=e.track,this.pendingBoxes.unshift(e.boxes))))}},Et.prototype=new V,Et.prototype.flush=function(e){var t,n,r,i,a=0,s={captions:[],captionStreams:{},metadata:[],info:{}},o=0;if(this.pendingTracks.length<this.numberOfTracks){if("VideoSegmentStream"!==e&&"AudioSegmentStream"!==e)return;if(this.remuxTracks)return;if(0===this.pendingTracks.length)return this.emittedTracks++,void(this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0))}if(this.videoTrack?(o=this.videoTrack.timelineStartInfo.pts,xt.forEach((function(e){s.info[e]=this.videoTrack[e]}),this)):this.audioTrack&&(o=this.audioTrack.timelineStartInfo.pts,Ot.forEach((function(e){s.info[e]=this.audioTrack[e]}),this)),this.videoTrack||this.audioTrack){for(1===this.pendingTracks.length?s.type=this.pendingTracks[0].type:s.type="combined",this.emittedTracks+=this.pendingTracks.length,r=ee(this.pendingTracks),s.initSegment=new Uint8Array(r.byteLength),s.initSegment.set(r),s.data=new Uint8Array(this.pendingBytes),i=0;i<this.pendingBoxes.length;i++)s.data.set(this.pendingBoxes[i],a),a+=this.pendingBoxes[i].byteLength;for(i=0;i<this.pendingCaptions.length;i++)(t=this.pendingCaptions[i]).startTime=ye(t.startPts,o,this.keepOriginalTimestamps),t.endTime=ye(t.endPts,o,this.keepOriginalTimestamps),s.captionStreams[t.stream]=!0,s.captions.push(t);for(i=0;i<this.pendingMetadata.length;i++)(n=this.pendingMetadata[i]).cueTime=ye(n.pts,o,this.keepOriginalTimestamps),s.metadata.push(n);for(s.metadata.dispatchType=this.metadataStream.dispatchType,this.pendingTracks.length=0,this.videoTrack=null,this.pendingBoxes.length=0,this.pendingCaptions.length=0,this.pendingBytes=0,this.pendingMetadata.length=0,this.trigger("data",s),i=0;i<s.captions.length;i++)t=s.captions[i],this.trigger("caption",t);for(i=0;i<s.metadata.length;i++)n=s.metadata[i],this.trigger("id3Frame",n)}this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)},Et.prototype.setRemux=function(e){this.remuxTracks=e},Ct=function(e){var t,n,r=this,i=!0;Ct.prototype.init.call(this),e=e||{},this.baseMediaDecodeTime=e.baseMediaDecodeTime||0,this.transmuxPipeline_={},this.setupAacPipeline=function(){var i={};this.transmuxPipeline_=i,i.type="aac",i.metadataStream=new ot.MetadataStream,i.aacStream=new kt,i.audioTimestampRolloverStream=new ot.TimestampRolloverStream("audio"),i.timedMetadataTimestampRolloverStream=new ot.TimestampRolloverStream("timed-metadata"),i.adtsStream=new pt,i.coalesceStream=new Et(e,i.metadataStream),i.headOfPipeline=i.aacStream,i.aacStream.pipe(i.audioTimestampRolloverStream).pipe(i.adtsStream),i.aacStream.pipe(i.timedMetadataTimestampRolloverStream).pipe(i.metadataStream).pipe(i.coalesceStream),i.metadataStream.on("timestamp",(function(e){i.aacStream.setTimestamp(e.timeStamp)})),i.aacStream.on("data",(function(a){"timed-metadata"!==a.type&&"audio"!==a.type||i.audioSegmentStream||(n=n||{timelineStartInfo:{baseMediaDecodeTime:r.baseMediaDecodeTime},codec:"adts",type:"audio"},i.coalesceStream.numberOfTracks++,i.audioSegmentStream=new St(n,e),i.audioSegmentStream.on("timingInfo",r.trigger.bind(r,"audioTimingInfo")),i.adtsStream.pipe(i.audioSegmentStream).pipe(i.coalesceStream),r.trigger("trackinfo",{hasAudio:!!n,hasVideo:!!t}))})),i.coalesceStream.on("data",this.trigger.bind(this,"data")),i.coalesceStream.on("done",this.trigger.bind(this,"done"))},this.setupTsPipeline=function(){var i={};this.transmuxPipeline_=i,i.type="ts",i.metadataStream=new ot.MetadataStream,i.packetStream=new ot.TransportPacketStream,i.parseStream=new ot.TransportParseStream,i.elementaryStream=new ot.ElementaryStream,i.timestampRolloverStream=new ot.TimestampRolloverStream,i.adtsStream=new pt,i.h264Stream=new At,i.captionStream=new ot.CaptionStream,i.coalesceStream=new Et(e,i.metadataStream),i.headOfPipeline=i.packetStream,i.packetStream.pipe(i.parseStream).pipe(i.elementaryStream).pipe(i.timestampRolloverStream),i.timestampRolloverStream.pipe(i.h264Stream),i.timestampRolloverStream.pipe(i.adtsStream),i.timestampRolloverStream.pipe(i.metadataStream).pipe(i.coalesceStream),i.h264Stream.pipe(i.captionStream).pipe(i.coalesceStream),i.elementaryStream.on("data",(function(a){var s;if("metadata"===a.type){for(s=a.tracks.length;s--;)t||"video"!==a.tracks[s].type?n||"audio"!==a.tracks[s].type||((n=a.tracks[s]).timelineStartInfo.baseMediaDecodeTime=r.baseMediaDecodeTime):(t=a.tracks[s]).timelineStartInfo.baseMediaDecodeTime=r.baseMediaDecodeTime;t&&!i.videoSegmentStream&&(i.coalesceStream.numberOfTracks++,i.videoSegmentStream=new wt(t,e),i.videoSegmentStream.on("timelineStartInfo",(function(t){n&&!e.keepOriginalTimestamps&&(n.timelineStartInfo=t,i.audioSegmentStream.setEarliestDts(t.dts-r.baseMediaDecodeTime))})),i.videoSegmentStream.on("processedGopsInfo",r.trigger.bind(r,"gopInfo")),i.videoSegmentStream.on("segmentTimingInfo",r.trigger.bind(r,"videoSegmentTimingInfo")),i.videoSegmentStream.on("baseMediaDecodeTime",(function(e){n&&i.audioSegmentStream.setVideoBaseMediaDecodeTime(e)})),i.videoSegmentStream.on("timingInfo",r.trigger.bind(r,"videoTimingInfo")),i.h264Stream.pipe(i.videoSegmentStream).pipe(i.coalesceStream)),n&&!i.audioSegmentStream&&(i.coalesceStream.numberOfTracks++,i.audioSegmentStream=new St(n,e),i.audioSegmentStream.on("timingInfo",r.trigger.bind(r,"audioTimingInfo")),i.adtsStream.pipe(i.audioSegmentStream).pipe(i.coalesceStream)),r.trigger("trackinfo",{hasAudio:!!n,hasVideo:!!t})}})),i.coalesceStream.on("data",this.trigger.bind(this,"data")),i.coalesceStream.on("id3Frame",(function(e){e.dispatchType=i.metadataStream.dispatchType,r.trigger("id3Frame",e)})),i.coalesceStream.on("caption",this.trigger.bind(this,"caption")),i.coalesceStream.on("done",this.trigger.bind(this,"done"))},this.setBaseMediaDecodeTime=function(r){var i=this.transmuxPipeline_;e.keepOriginalTimestamps||(this.baseMediaDecodeTime=r),n&&(n.timelineStartInfo.dts=void 0,n.timelineStartInfo.pts=void 0,ke(n),i.audioTimestampRolloverStream&&i.audioTimestampRolloverStream.discontinuity()),t&&(i.videoSegmentStream&&(i.videoSegmentStream.gopCache_=[]),t.timelineStartInfo.dts=void 0,t.timelineStartInfo.pts=void 0,ke(t),i.captionStream.reset()),i.timestampRolloverStream&&i.timestampRolloverStream.discontinuity()},this.setAudioAppendStart=function(e){n&&this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(e)},this.setRemux=function(t){var n=this.transmuxPipeline_;e.remux=t,n&&n.coalesceStream&&n.coalesceStream.setRemux(t)},this.alignGopsWith=function(e){t&&this.transmuxPipeline_.videoSegmentStream&&this.transmuxPipeline_.videoSegmentStream.alignGopsWith(e)},this.push=function(e){if(i){var t=Pt(e);t&&"aac"!==this.transmuxPipeline_.type?this.setupAacPipeline():t||"ts"===this.transmuxPipeline_.type||this.setupTsPipeline(),i=!1}this.transmuxPipeline_.headOfPipeline.push(e)},this.flush=function(){i=!0,this.transmuxPipeline_.headOfPipeline.flush()},this.endTimeline=function(){this.transmuxPipeline_.headOfPipeline.endTimeline()},this.reset=function(){this.transmuxPipeline_.headOfPipeline&&this.transmuxPipeline_.headOfPipeline.reset()},this.resetCaptions=function(){this.transmuxPipeline_.captionStream&&this.transmuxPipeline_.captionStream.reset()}},Ct.prototype=new V;var Dt={Transmuxer:Ct,VideoSegmentStream:wt,AudioSegmentStream:St,AUDIO_PROPERTIES:Ot,VIDEO_PROPERTIES:xt,generateVideoSegmentTimingInfo:Mt}.Transmuxer,Rt={Adts:pt,h264:gt},Nt=fe,jt=function e(t,n){var r=[],i=0,a=0,s=0,o=1/0,u=null,c=null;n=n||{},e.prototype.init.call(this),this.push=function(e){xe(t,e),t&&Ot.forEach((function(n){t[n]=e[n]})),r.push(e)},this.setEarliestDts=function(e){a=e},this.setVideoBaseMediaDecodeTime=function(e){o=e},this.setAudioAppendStart=function(e){s=e},this.processFrames_=function(){var e,l,d,h,p;0!==r.length&&0!==(e=we(r,t,a)).length&&(t.baseMediaDecodeTime=Oe(t,n.keepOriginalTimestamps),Te(t,e,s,o),t.samples=Se(e),d=J(Ce(e)),r=[],l=Z(i,[t]),i++,t.initSegment=ee([t]),(h=new Uint8Array(l.byteLength+d.byteLength)).set(l),h.set(d,l.byteLength),ke(t),null===u&&(c=u=e[0].pts),c+=e.length*(1024*Nt/t.samplerate),p={start:u},this.trigger("timingInfo",p),this.trigger("data",{track:t,boxes:h}))},this.flush=function(){this.processFrames_(),this.trigger("timingInfo",{start:u,end:c}),this.resetTiming_(),this.trigger("done","AudioSegmentStream")},this.partialFlush=function(){this.processFrames_(),this.trigger("partialdone","AudioSegmentStream")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline","AudioSegmentStream")},this.resetTiming_=function(){ke(t),u=null,c=null},this.reset=function(){this.resetTiming_(),r=[],this.trigger("reset")}};jt.prototype=new V;var Ut=jt,Ft=function e(t,n){var r,i,a,s=0,o=[],u=[],c=null,l=null,d=!0;n=n||{},e.prototype.init.call(this),this.push=function(e){xe(t,e),void 0===t.timelineStartInfo.dts&&(t.timelineStartInfo.dts=e.dts),"seq_parameter_set_rbsp"!==e.nalUnitType||r||(r=e.config,t.sps=[e.data],xt.forEach((function(e){t[e]=r[e]}),this)),"pic_parameter_set_rbsp"!==e.nalUnitType||i||(i=e.data,t.pps=[e.data]),o.push(e)},this.processNals_=function(e){var r;for(o=u.concat(o);o.length&&"access_unit_delimiter_rbsp"!==o[0].nalUnitType;)o.shift();if(0!==o.length){var i=ne(o);if(i.length)if(u=i[i.length-1],e&&(i.pop(),i.duration-=u.duration,i.nalCount-=u.length,i.byteLength-=u.byteLength),i.length){if(this.trigger("timelineStartInfo",t.timelineStartInfo),d){if(!(a=re(i))[0][0].keyFrame){if(!(a=ie(a))[0][0].keyFrame)return o=[].concat.apply([],i).concat(u),void(u=[]);(i=[].concat.apply([],a)).duration=a.duration}d=!1}for(null===c&&(c=i[0].pts,l=c),l+=i.duration,this.trigger("timingInfo",{start:c,end:l}),r=0;r<i.length;r++){var h=i[r];t.samples=oe(h);var p=J(ue(h));ke(t),xe(t,h),t.baseMediaDecodeTime=Oe(t,n.keepOriginalTimestamps);var f=Z(s,[t]);s++,t.initSegment=ee([t]);var m=new Uint8Array(f.byteLength+p.byteLength);m.set(f),m.set(p,f.byteLength),this.trigger("data",{track:t,boxes:m,sequence:s,videoFrameDts:h.dts,videoFramePts:h.pts})}o=[]}else o=[]}},this.resetTimingAndConfig_=function(){r=void 0,i=void 0,c=null,l=null},this.partialFlush=function(){this.processNals_(!0),this.trigger("partialdone","VideoSegmentStream")},this.flush=function(){this.processNals_(!1),this.resetTimingAndConfig_(),this.trigger("done","VideoSegmentStream")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline","VideoSegmentStream")},this.reset=function(){this.resetTimingAndConfig_(),u=[],o=[],d=!0,this.trigger("reset")}};Ft.prototype=new V;var $t=Ft,Bt=bt,Vt=function(e){return e.prototype=new V,e.prototype.init.call(e),e},qt=function(e,t){e.on("data",t.trigger.bind(t,"data")),e.on("done",t.trigger.bind(t,"done")),e.on("partialdone",t.trigger.bind(t,"partialdone")),e.on("endedtimeline",t.trigger.bind(t,"endedtimeline")),e.on("audioTimingInfo",t.trigger.bind(t,"audioTimingInfo")),e.on("videoTimingInfo",t.trigger.bind(t,"videoTimingInfo")),e.on("trackinfo",t.trigger.bind(t,"trackinfo")),e.on("id3Frame",(function(n){n.dispatchType=e.metadataStream.dispatchType,n.cueTime=me(n.pts),t.trigger("id3Frame",n)})),e.on("caption",(function(e){t.trigger("caption",e)}))},Ht=function e(t){var n=null,r=!0;t=t||{},e.prototype.init.call(this),t.baseMediaDecodeTime=t.baseMediaDecodeTime||0,this.push=function(e){if(r){var i=Bt(e);!i||n&&"aac"===n.type?i||n&&"ts"===n.type||(n=function(e){var t={type:"ts",tracks:{audio:null,video:null},packet:new ot.TransportPacketStream,parse:new ot.TransportParseStream,elementary:new ot.ElementaryStream,timestampRollover:new ot.TimestampRolloverStream,adts:new Rt.Adts,h264:new Rt.h264.H264Stream,captionStream:new ot.CaptionStream,metadataStream:new ot.MetadataStream};return t.headOfPipeline=t.packet,t.packet.pipe(t.parse).pipe(t.elementary).pipe(t.timestampRollover),t.timestampRollover.pipe(t.h264),t.h264.pipe(t.captionStream),t.timestampRollover.pipe(t.metadataStream),t.timestampRollover.pipe(t.adts),t.elementary.on("data",(function(n){if("metadata"===n.type){for(var r=0;r<n.tracks.length;r++)t.tracks[n.tracks[r].type]||(t.tracks[n.tracks[r].type]=n.tracks[r],t.tracks[n.tracks[r].type].timelineStartInfo.baseMediaDecodeTime=e.baseMediaDecodeTime);t.tracks.video&&!t.videoSegmentStream&&(t.videoSegmentStream=new $t(t.tracks.video,e),t.videoSegmentStream.on("timelineStartInfo",(function(n){t.tracks.audio&&!e.keepOriginalTimestamps&&t.audioSegmentStream.setEarliestDts(n.dts-e.baseMediaDecodeTime)})),t.videoSegmentStream.on("timingInfo",t.trigger.bind(t,"videoTimingInfo")),t.videoSegmentStream.on("data",(function(e){t.trigger("data",{type:"video",data:e})})),t.videoSegmentStream.on("done",t.trigger.bind(t,"done")),t.videoSegmentStream.on("partialdone",t.trigger.bind(t,"partialdone")),t.videoSegmentStream.on("endedtimeline",t.trigger.bind(t,"endedtimeline")),t.h264.pipe(t.videoSegmentStream)),t.tracks.audio&&!t.audioSegmentStream&&(t.audioSegmentStream=new Ut(t.tracks.audio,e),t.audioSegmentStream.on("data",(function(e){t.trigger("data",{type:"audio",data:e})})),t.audioSegmentStream.on("done",t.trigger.bind(t,"done")),t.audioSegmentStream.on("partialdone",t.trigger.bind(t,"partialdone")),t.audioSegmentStream.on("endedtimeline",t.trigger.bind(t,"endedtimeline")),t.audioSegmentStream.on("timingInfo",t.trigger.bind(t,"audioTimingInfo")),t.adts.pipe(t.audioSegmentStream)),t.trigger("trackinfo",{hasAudio:!!t.tracks.audio,hasVideo:!!t.tracks.video})}})),t.captionStream.on("data",(function(n){var r;r=t.tracks.video&&t.tracks.video.timelineStartInfo.pts||0,n.startTime=ye(n.startPts,r,e.keepOriginalTimestamps),n.endTime=ye(n.endPts,r,e.keepOriginalTimestamps),t.trigger("caption",n)})),(t=Vt(t)).metadataStream.on("data",t.trigger.bind(t,"id3Frame")),t}(t),qt(n,this)):(n=function(e){var t={type:"aac",tracks:{audio:null},metadataStream:new ot.MetadataStream,aacStream:new kt,audioRollover:new ot.TimestampRolloverStream("audio"),timedMetadataRollover:new ot.TimestampRolloverStream("timed-metadata"),adtsStream:new pt(!0)};return t.headOfPipeline=t.aacStream,t.aacStream.pipe(t.audioRollover).pipe(t.adtsStream),t.aacStream.pipe(t.timedMetadataRollover).pipe(t.metadataStream),t.metadataStream.on("timestamp",(function(e){t.aacStream.setTimestamp(e.timeStamp)})),t.aacStream.on("data",(function(n){"timed-metadata"!==n.type&&"audio"!==n.type||t.audioSegmentStream||(t.tracks.audio=t.tracks.audio||{timelineStartInfo:{baseMediaDecodeTime:e.baseMediaDecodeTime},codec:"adts",type:"audio"},t.audioSegmentStream=new Ut(t.tracks.audio,e),t.audioSegmentStream.on("data",(function(e){t.trigger("data",{type:"audio",data:e})})),t.audioSegmentStream.on("partialdone",t.trigger.bind(t,"partialdone")),t.audioSegmentStream.on("done",t.trigger.bind(t,"done")),t.audioSegmentStream.on("endedtimeline",t.trigger.bind(t,"endedtimeline")),t.audioSegmentStream.on("timingInfo",t.trigger.bind(t,"audioTimingInfo")),t.adtsStream.pipe(t.audioSegmentStream),t.trigger("trackinfo",{hasAudio:!!t.tracks.audio,hasVideo:!!t.tracks.video}))})),(t=Vt(t)).metadataStream.on("data",t.trigger.bind(t,"id3Frame")),t}(t),qt(n,this)),r=!1}n.headOfPipeline.push(e)},this.flush=function(){n&&(r=!0,n.headOfPipeline.flush())},this.partialFlush=function(){n&&n.headOfPipeline.partialFlush()},this.endTimeline=function(){n&&n.headOfPipeline.endTimeline()},this.reset=function(){n&&n.headOfPipeline.reset()},this.setBaseMediaDecodeTime=function(e){t.keepOriginalTimestamps||(t.baseMediaDecodeTime=e),n&&(n.tracks.audio&&(n.tracks.audio.timelineStartInfo.dts=void 0,n.tracks.audio.timelineStartInfo.pts=void 0,ke(n.tracks.audio),n.audioRollover&&n.audioRollover.discontinuity()),n.tracks.video&&(n.videoSegmentStream&&(n.videoSegmentStream.gopCache_=[]),n.tracks.video.timelineStartInfo.dts=void 0,n.tracks.video.timelineStartInfo.pts=void 0,ke(n.tracks.video)),n.timestampRollover&&n.timestampRollover.discontinuity())},this.setRemux=function(e){t.remux=e,n&&n.coalesceStream&&n.coalesceStream.setRemux(e)},this.setAudioAppendStart=function(e){n&&n.tracks.audio&&n.audioSegmentStream&&n.audioSegmentStream.setAudioAppendStart(e)},this.alignGopsWith=function(e){}};Ht.prototype=new V;var Wt=Ht,zt=function(e){return e>>>0},Gt=function(e){var t="";return t+=String.fromCharCode(e[0]),t+=String.fromCharCode(e[1]),t+=String.fromCharCode(e[2]),t+=String.fromCharCode(e[3])},Kt=zt,Xt=function e(t,n){var r,i,a,s,o,u=[];if(!n.length)return null;for(r=0;r<t.byteLength;)i=Kt(t[r]<<24|t[r+1]<<16|t[r+2]<<8|t[r+3]),a=Gt(t.subarray(r+4,r+8)),s=i>1?r+i:t.byteLength,a===n[0]&&(1===n.length?u.push(t.subarray(r+8,s)):(o=e(t.subarray(r+8,s),n.slice(1))).length&&(u=u.concat(o))),r=s;return u},Yt=zt,Qt=function(e){var t={version:e[0],flags:new Uint8Array(e.subarray(1,4)),baseMediaDecodeTime:Yt(e[4]<<24|e[5]<<16|e[6]<<8|e[7])};return 1===t.version&&(t.baseMediaDecodeTime*=Math.pow(2,32),t.baseMediaDecodeTime+=Yt(e[8]<<24|e[9]<<16|e[10]<<8|e[11])),t},Jt=function(e){return{isLeading:(12&e[0])>>>2,dependsOn:3&e[0],isDependedOn:(192&e[1])>>>6,hasRedundancy:(48&e[1])>>>4,paddingValue:(14&e[1])>>>1,isNonSyncSample:1&e[1],degradationPriority:e[2]<<8|e[3]}},Zt=function(e){var t,n={version:e[0],flags:new Uint8Array(e.subarray(1,4)),samples:[]},r=new DataView(e.buffer,e.byteOffset,e.byteLength),i=1&n.flags[2],a=4&n.flags[2],s=1&n.flags[1],o=2&n.flags[1],u=4&n.flags[1],c=8&n.flags[1],l=r.getUint32(4),d=8;for(i&&(n.dataOffset=r.getInt32(d),d+=4),a&&l&&(t={flags:Jt(e.subarray(d,d+4))},d+=4,s&&(t.duration=r.getUint32(d),d+=4),o&&(t.size=r.getUint32(d),d+=4),c&&(1===n.version?t.compositionTimeOffset=r.getInt32(d):t.compositionTimeOffset=r.getUint32(d),d+=4),n.samples.push(t),l--);l--;)t={},s&&(t.duration=r.getUint32(d),d+=4),o&&(t.size=r.getUint32(d),d+=4),u&&(t.flags=Jt(e.subarray(d,d+4)),d+=4),c&&(1===n.version?t.compositionTimeOffset=r.getInt32(d):t.compositionTimeOffset=r.getUint32(d),d+=4),n.samples.push(t);return n},en=function(e){var t,n=new DataView(e.buffer,e.byteOffset,e.byteLength),r={version:e[0],flags:new Uint8Array(e.subarray(1,4)),trackId:n.getUint32(4)},i=1&r.flags[2],a=2&r.flags[2],s=8&r.flags[2],o=16&r.flags[2],u=32&r.flags[2],c=65536&r.flags[0],l=131072&r.flags[0];return t=8,i&&(t+=4,r.baseDataOffset=n.getUint32(12),t+=4),a&&(r.sampleDescriptionIndex=n.getUint32(t),t+=4),s&&(r.defaultSampleDuration=n.getUint32(t),t+=4),o&&(r.defaultSampleSize=n.getUint32(t),t+=4),u&&(r.defaultSampleFlags=n.getUint32(t)),c&&(r.durationIsEmpty=!0),!i&&l&&(r.baseDataOffsetIsMoof=!0),r},tn=Le,nn=$e.CaptionStream,rn=function(e,t){for(var n=e,r=0;r<t.length;r++){var i=t[r];if(n<i.size)return i;n-=i.size}return null},an=function(e,t){var n=Xt(e,["moof","traf"]),r=Xt(e,["mdat"]),i={},a=[];return r.forEach((function(e,t){var r=n[t];a.push({mdat:e,traf:r})})),a.forEach((function(e){var n,r,a=e.mdat,s=e.traf,o=Xt(s,["tfhd"]),u=en(o[0]),c=u.trackId,l=Xt(s,["tfdt"]),d=l.length>0?Qt(l[0]).baseMediaDecodeTime:0,h=Xt(s,["trun"]);t===c&&h.length>0&&(n=function(e,t,n){var r=t,i=n.defaultSampleDuration||0,a=n.defaultSampleSize||0,s=n.trackId,o=[];return e.forEach((function(e){var t=Zt(e).samples;t.forEach((function(e){void 0===e.duration&&(e.duration=i),void 0===e.size&&(e.size=a),e.trackId=s,e.dts=r,void 0===e.compositionTimeOffset&&(e.compositionTimeOffset=0),e.pts=r+e.compositionTimeOffset,r+=e.duration})),o=o.concat(t)})),o}(h,d,u),r=function(e,t,n){var r,i,a,s,o=new DataView(e.buffer,e.byteOffset,e.byteLength),u=[];for(i=0;i+4<e.length;i+=a)if(a=o.getUint32(i),i+=4,!(a<=0))switch(31&e[i]){case 6:var c=e.subarray(i+1,i+1+a),l=rn(i,t);if(r={nalUnitType:"sei_rbsp",size:a,data:c,escapedRBSP:tn(c),trackId:n},l)r.pts=l.pts,r.dts=l.dts,s=l;else{if(!s)break;r.pts=s.pts,r.dts=s.dts}u.push(r)}return u}(a,n,c),i[c]||(i[c]=[]),i[c]=i[c].concat(r))})),i},sn=function(){var e,t,n,r,i,a,s=!1;this.isInitialized=function(){return s},this.init=function(t){e=new nn,s=!0,a=!!t&&t.isPartial,e.on("data",(function(e){e.startTime=e.startPts/r,e.endTime=e.endPts/r,i.captions.push(e),i.captionStreams[e.stream]=!0}))},this.isNewInit=function(e,t){return!(e&&0===e.length||t&&"object"==typeof t&&0===Object.keys(t).length)&&(n!==e[0]||r!==t[n])},this.parse=function(e,a,s){var o;if(!this.isInitialized())return null;if(!a||!s)return null;if(this.isNewInit(a,s))n=a[0],r=s[n];else if(null===n||!r)return t.push(e),null;for(;t.length>0;){var u=t.shift();this.parse(u,a,s)}return o=function(e,t,n){return null===t?null:{seiNals:an(e,t)[t],timescale:n}}(e,n,r),null!==o&&o.seiNals?(this.pushNals(o.seiNals),this.flushStream(),i):null},this.pushNals=function(t){if(!this.isInitialized()||!t||0===t.length)return null;t.forEach((function(t){e.push(t)}))},this.flushStream=function(){if(!this.isInitialized())return null;a?e.partialFlush():e.flush()},this.clearParsedCaptions=function(){i.captions=[],i.captionStreams={}},this.resetCaptionStream=function(){if(!this.isInitialized())return null;e.reset()},this.clearAllCaptions=function(){this.clearParsedCaptions(),this.resetCaptionStream()},this.reset=function(){t=[],n=null,r=null,i?this.clearParsedCaptions():i={captions:[],captionStreams:{}},this.resetCaptionStream()},this.reset()},on=function(e){return"AudioSegmentStream"===e?"audio":"VideoSegmentStream"===e?"video":""},un=function(){function e(e,t){this.options=t||{},this.self=e,this.init()}var t=e.prototype;return t.init=function(){this.transmuxer&&this.transmuxer.dispose(),this.transmuxer=this.options.handlePartialData?new Wt(this.options):new Dt(this.options),this.options.handlePartialData?function(e,t){t.on("data",(function(t){var n={data:t.data.track.initSegment.buffer,byteOffset:t.data.track.initSegment.byteOffset,byteLength:t.data.track.initSegment.byteLength},r={boxes:{data:t.data.boxes.buffer,byteOffset:t.data.boxes.byteOffset,byteLength:t.data.boxes.byteLength},initSegment:n,type:t.type,sequence:t.data.sequence};void 0!==t.data.videoFrameDts&&(r.videoFrameDtsTime=_e(t.data.videoFrameDts)),void 0!==t.data.videoFramePts&&(r.videoFramePtsTime=_e(t.data.videoFramePts)),e.postMessage({action:"data",segment:r},[r.boxes.data,r.initSegment.data])})),t.on("id3Frame",(function(t){e.postMessage({action:"id3Frame",id3Frame:t})})),t.on("caption",(function(t){e.postMessage({action:"caption",caption:t})})),t.on("done",(function(t){e.postMessage({action:"done",type:on(t)})})),t.on("partialdone",(function(t){e.postMessage({action:"partialdone",type:on(t)})})),t.on("endedsegment",(function(t){e.postMessage({action:"endedSegment",type:on(t)})})),t.on("trackinfo",(function(t){e.postMessage({action:"trackinfo",trackInfo:t})})),t.on("audioTimingInfo",(function(t){if(null!==t.start){var n={start:_e(t.start)};t.end&&(n.end=_e(t.end)),e.postMessage({action:"audioTimingInfo",audioTimingInfo:n})}else e.postMessage({action:"audioTimingInfo",audioTimingInfo:t})})),t.on("videoTimingInfo",(function(t){var n={start:_e(t.start)};t.end&&(n.end=_e(t.end)),e.postMessage({action:"videoTimingInfo",videoTimingInfo:n})}))}(this.self,this.transmuxer):function(e,t){t.on("data",(function(t){var n=t.initSegment;t.initSegment={data:n.buffer,byteOffset:n.byteOffset,byteLength:n.byteLength};var r=t.data;t.data=r.buffer,e.postMessage({action:"data",segment:t,byteOffset:r.byteOffset,byteLength:r.byteLength},[t.data])})),t.on("done",(function(t){e.postMessage({action:"done"})})),t.on("gopInfo",(function(t){e.postMessage({action:"gopInfo",gopInfo:t})})),t.on("videoSegmentTimingInfo",(function(t){var n={start:{decode:_e(t.start.dts),presentation:_e(t.start.pts)},end:{decode:_e(t.end.dts),presentation:_e(t.end.pts)},baseMediaDecodeTime:_e(t.baseMediaDecodeTime)};t.prependedContentDuration&&(n.prependedContentDuration=_e(t.prependedContentDuration)),e.postMessage({action:"videoSegmentTimingInfo",videoSegmentTimingInfo:n})})),t.on("id3Frame",(function(t){e.postMessage({action:"id3Frame",id3Frame:t})})),t.on("caption",(function(t){e.postMessage({action:"caption",caption:t})})),t.on("trackinfo",(function(t){e.postMessage({action:"trackinfo",trackInfo:t})})),t.on("audioTimingInfo",(function(t){e.postMessage({action:"audioTimingInfo",audioTimingInfo:{start:_e(t.start),end:_e(t.end)}})})),t.on("videoTimingInfo",(function(t){e.postMessage({action:"videoTimingInfo",videoTimingInfo:{start:_e(t.start),end:_e(t.end)}})}))}(this.self,this.transmuxer)},t.pushMp4Captions=function(e){this.captionParser||(this.captionParser=new sn,this.captionParser.init());var t=new Uint8Array(e.data,e.byteOffset,e.byteLength),n=this.captionParser.parse(t,e.trackIds,e.timescales);this.self.postMessage({action:"mp4Captions",captions:n&&n.captions||[],data:t.buffer},[t.buffer])},t.clearAllMp4Captions=function(){this.captionParser&&this.captionParser.clearAllCaptions()},t.clearParsedMp4Captions=function(){this.captionParser&&this.captionParser.clearParsedCaptions()},t.push=function(e){var t=new Uint8Array(e.data,e.byteOffset,e.byteLength);this.transmuxer.push(t)},t.reset=function(){this.transmuxer.reset()},t.setTimestampOffset=function(e){var t=e.timestampOffset||0;this.transmuxer.setBaseMediaDecodeTime(Math.round(be(t)))},t.setAudioAppendStart=function(e){this.transmuxer.setAudioAppendStart(Math.ceil(be(e.appendStart)))},t.setRemux=function(e){this.transmuxer.setRemux(e.remux)},t.flush=function(e){this.transmuxer.flush(),n.postMessage({action:"done",type:"transmuxed"})},t.partialFlush=function(e){this.transmuxer.partialFlush(),n.postMessage({action:"partialdone",type:"transmuxed"})},t.endTimeline=function(){this.transmuxer.endTimeline(),n.postMessage({action:"endedtimeline",type:"transmuxed"})},t.alignGopsWith=function(e){this.transmuxer.alignGopsWith(e.gopsToAlignWith.slice())},e}(),cn=new function(e){e.onmessage=function(t){"init"===t.data.action&&t.data.options?this.messageHandlers=new un(e,t.data.options):(this.messageHandlers||(this.messageHandlers=new un(e)),t.data&&t.data.action&&"init"!==t.data.action&&this.messageHandlers[t.data.action]&&this.messageHandlers[t.data.action](t.data))}}(n)}()})),Bn=function(e,t){var n=t.attributes||{};return e&&e.mediaGroups&&e.mediaGroups.AUDIO&&n.AUDIO&&e.mediaGroups.AUDIO[n.AUDIO]},Vn=function(e,t){var n=t.attributes||{},r=function(e){var t=e.attributes||{};if(t.CODECS)return(0,it.kS)(t.CODECS)}(t)||{};if(Bn(e,t)&&!r.audio&&!function(e,t){if(!Bn(e,t))return!0;var n=t.attributes||{},r=e.mediaGroups.AUDIO[n.AUDIO];for(var i in r)if(!r[i].uri&&!r[i].playlists)return!0;return!1}(e,t)){var i=(0,it.Jg)(e,n.AUDIO);i&&(r.audio=i.audio)}var a={};return r.video&&(a.video=(0,it.ws)(""+r.video.type+r.video.details)),r.audio&&(a.audio=(0,it.ws)(""+r.audio.type+r.audio.details)),a},qn=function(e){return i().log.debug?i().log.debug.bind(i(),"VHS:",e+" >"):function(){}},Hn=qn("PlaylistSelector"),Wn=function(e){if(e&&e.playlist){var t=e.playlist;return JSON.stringify({id:t.id,bandwidth:e.bandwidth,width:e.width,height:e.height,codecs:t.attributes&&t.attributes.CODECS||""})}},zn=function(e,t){if(!e)return"";var n=s().getComputedStyle(e);return n?n[t]:""},Gn=function(e,t){var n=e.slice();e.sort((function(e,r){var i=t(e,r);return 0===i?n.indexOf(e)-n.indexOf(r):i}))},Kn=function(e,t){var n,r;return e.attributes.BANDWIDTH&&(n=e.attributes.BANDWIDTH),n=n||s().Number.MAX_VALUE,t.attributes.BANDWIDTH&&(r=t.attributes.BANDWIDTH),n-(r=r||s().Number.MAX_VALUE)},Xn=function(e){var t=e.inbandTextTracks,n=e.metadataArray,r=e.timestampOffset,a=e.videoDuration;if(n){var o=s().WebKitDataCue||s().VTTCue,u=t.metadataTrack_;if(u&&(n.forEach((function(e){var t=e.cueTime+r;!("number"!=typeof t||s().isNaN(t)||t<0)&&t<1/0&&e.frames.forEach((function(e){var n=new o(t,t,e.value||e.url||e.data||"");n.frame=e,n.value=e,function(e){Object.defineProperties(e.frame,{id:{get:function(){return i().log.warn("cue.frame.id is deprecated. Use cue.value.key instead."),e.value.key}},value:{get:function(){return i().log.warn("cue.frame.value is deprecated. Use cue.value.data instead."),e.value.data}},privateData:{get:function(){return i().log.warn("cue.frame.privateData is deprecated. Use cue.value.data instead."),e.value.data}}})}(n),u.addCue(n)}))})),u.cues&&u.cues.length)){for(var c=u.cues,l=[],d=0;d<c.length;d++)c[d]&&l.push(c[d]);var h=l.reduce((function(e,t){var n=e[t.startTime]||[];return n.push(t),e[t.startTime]=n,e}),{}),p=Object.keys(h).sort((function(e,t){return Number(e)-Number(t)}));p.forEach((function(e,t){var n=h[e],r=Number(p[t+1])||a;n.forEach((function(e){e.endTime=r}))}))}}},Yn=function(e,t,n){var r,i;if(n&&n.cues)for(r=n.cues.length;r--;)(i=n.cues[r]).startTime>=e&&i.endTime<=t&&n.removeCue(i)},Qn=function(e){return"number"==typeof e&&isFinite(e)},Jn=function(e){return e+"TimingInfo"},Zn=function(e){var t=e.segmentTimeline,n=e.currentTimeline,r=e.startOfSegment,i=e.buffered;return e.overrideCheck||t!==n?i.length?i.end(i.length-1):r:null},er=function(e){var t=e.timelineChangeController,n=e.currentTimeline,r=e.segmentTimeline,i=e.loaderType,a=e.audioDisabled;if(n===r)return!1;if("audio"===i){var s=t.lastTimelineChange({type:"main"});return!s||s.to!==r}if("main"===i&&a){var o=t.pendingTimelineChange({type:"audio"});return!o||o.to!==r}return!1},tr=function(e){function t(t,n){var r;if(r=e.call(this)||this,!t)throw new TypeError("Initialization settings are required");if("function"!=typeof t.currentTime)throw new TypeError("No currentTime getter specified");if(!t.mediaSource)throw new TypeError("No MediaSource specified");return r.bandwidth=t.bandwidth,r.throughput={rate:0,count:0},r.roundTrip=NaN,r.resetStats_(),r.mediaIndex=null,r.hasPlayed_=t.hasPlayed,r.currentTime_=t.currentTime,r.seekable_=t.seekable,r.seeking_=t.seeking,r.duration_=t.duration,r.mediaSource_=t.mediaSource,r.vhs_=t.vhs,r.loaderType_=t.loaderType,r.currentMediaInfo_=void 0,r.startingMediaInfo_=void 0,r.segmentMetadataTrack_=t.segmentMetadataTrack,r.goalBufferLength_=t.goalBufferLength,r.sourceType_=t.sourceType,r.sourceUpdater_=t.sourceUpdater,r.inbandTextTracks_=t.inbandTextTracks,r.state_="INIT",r.handlePartialData_=t.handlePartialData,r.timelineChangeController_=t.timelineChangeController,r.shouldSaveSegmentTimingInfo_=!0,r.checkBufferTimeout_=null,r.error_=void 0,r.currentTimeline_=-1,r.pendingSegment_=null,r.xhrOptions_=null,r.pendingSegments_=[],r.audioDisabled_=!1,r.isPendingTimestampOffset_=!1,r.gopBuffer_=[],r.timeMapping_=0,r.safeAppend_=i().browser.IE_VERSION>=11,r.appendInitSegment_={audio:!0,video:!0},r.playlistOfLastInitSegment_={audio:null,video:null},r.callQueue_=[],r.loadQueue_=[],r.metadataQueue_={id3:[],caption:[]},r.activeInitSegmentId_=null,r.initSegments_={},r.cacheEncryptionKeys_=t.cacheEncryptionKeys,r.keyCache_={},r.decrypter_=t.decrypter,r.syncController_=t.syncController,r.syncPoint_={segmentIndex:0,time:0},r.transmuxer_=r.createTransmuxer_(),r.triggerSyncInfoUpdate_=function(){return r.trigger("syncinfoupdate")},r.syncController_.on("syncinfoupdate",r.triggerSyncInfoUpdate_),r.mediaSource_.addEventListener("sourceopen",(function(){r.isEndOfStream_()||(r.ended_=!1)})),r.fetchAtBuffer_=!1,r.logger_=qn("SegmentLoader["+r.loaderType_+"]"),Object.defineProperty(W(r),"state",{get:function(){return this.state_},set:function(e){e!==this.state_&&(this.logger_(this.state_+" -> "+e),this.state_=e,this.trigger("statechange"))}}),r.sourceUpdater_.on("ready",(function(){r.hasEnoughInfoToAppend_()&&r.processCallQueue_()})),"main"===r.loaderType_&&r.timelineChangeController_.on("pendingtimelinechange",(function(){r.hasEnoughInfoToAppend_()&&r.processCallQueue_()})),"audio"===r.loaderType_&&r.timelineChangeController_.on("timelinechange",(function(){r.hasEnoughInfoToLoad_()&&r.processLoadQueue_(),r.hasEnoughInfoToAppend_()&&r.processCallQueue_()})),r}G(t,e);var n=t.prototype;return n.createTransmuxer_=function(){var e=new $n;return e.postMessage({action:"init",options:{remux:!1,alignGopsAtEnd:this.safeAppend_,keepOriginalTimestamps:!0,handlePartialData:this.handlePartialData_}}),e},n.resetStats_=function(){this.mediaBytesTransferred=0,this.mediaRequests=0,this.mediaRequestsAborted=0,this.mediaRequestsTimedout=0,this.mediaRequestsErrored=0,this.mediaTransferDuration=0,this.mediaSecondsLoaded=0},n.dispose=function(){this.trigger("dispose"),this.state="DISPOSED",this.pause(),this.abort_(),this.transmuxer_&&(this.transmuxer_.terminate(),yn()),this.resetStats_(),this.checkBufferTimeout_&&s().clearTimeout(this.checkBufferTimeout_),this.syncController_&&this.triggerSyncInfoUpdate_&&this.syncController_.off("syncinfoupdate",this.triggerSyncInfoUpdate_),this.off()},n.setAudio=function(e){this.audioDisabled_=!e,e?this.appendInitSegment_.audio=!0:this.sourceUpdater_.removeAudio(0,this.duration_())},n.abort=function(){"WAITING"===this.state?(this.abort_(),this.state="READY",this.paused()||this.monitorBuffer_()):this.pendingSegment_&&(this.pendingSegment_=null)},n.abort_=function(){this.pendingSegment_&&this.pendingSegment_.abortRequests&&this.pendingSegment_.abortRequests(),this.pendingSegment_=null,this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.timelineChangeController_.clearPendingTimelineChange(this.loaderType_)},n.checkForAbort_=function(e){return"APPENDING"!==this.state||this.pendingSegment_?!this.pendingSegment_||this.pendingSegment_.requestId!==e:(this.state="READY",!0)},n.error=function(e){return void 0!==e&&(this.logger_("error occurred:",e),this.error_=e),this.pendingSegment_=null,this.error_},n.endOfStream=function(){this.ended_=!0,this.transmuxer_&&vn(this.transmuxer_),this.gopBuffer_.length=0,this.pause(),this.trigger("ended")},n.buffered_=function(){if(!this.sourceUpdater_||!this.startingMediaInfo_)return i().createTimeRanges();if("main"===this.loaderType_){var e=this.startingMediaInfo_,t=e.hasAudio,n=e.hasVideo,r=e.isMuxed;if(n&&t&&!this.audioDisabled_&&!r)return this.sourceUpdater_.buffered();if(n)return this.sourceUpdater_.videoBuffered()}return this.sourceUpdater_.audioBuffered()},n.initSegmentForMap=function(e,t){if(void 0===t&&(t=!1),!e)return null;var n=Gt(e),r=this.initSegments_[n];return t&&!r&&e.bytes&&(this.initSegments_[n]=r={resolvedUri:e.resolvedUri,byterange:e.byterange,bytes:e.bytes,tracks:e.tracks,timescales:e.timescales}),r||e},n.segmentKey=function(e,t){if(void 0===t&&(t=!1),!e)return null;var n=Kt(e),r=this.keyCache_[n];this.cacheEncryptionKeys_&&t&&!r&&e.bytes&&(this.keyCache_[n]=r={resolvedUri:e.resolvedUri,bytes:e.bytes});var i={resolvedUri:(r||e).resolvedUri};return r&&(i.bytes=r.bytes),i},n.couldBeginLoading_=function(){return this.playlist_&&!this.paused()},n.load=function(){if(this.monitorBuffer_(),this.playlist_){if(this.syncController_.setDateTimeMapping(this.playlist_),"INIT"===this.state&&this.couldBeginLoading_())return this.init_();!this.couldBeginLoading_()||"READY"!==this.state&&"INIT"!==this.state||(this.state="READY")}},n.init_=function(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()},n.playlist=function(e,t){if(void 0===t&&(t={}),e){var n=this.playlist_,r=this.pendingSegment_;this.playlist_=e,this.xhrOptions_=t,"INIT"===this.state&&(e.syncInfo={mediaSequence:e.mediaSequence,time:0});var i=null;if(n&&(n.id?i=n.id:n.uri&&(i=n.uri)),this.logger_("playlist update ["+i+" => "+(e.id||e.uri)+"]"),this.trigger("syncinfoupdate"),"INIT"===this.state&&this.couldBeginLoading_())return this.init_();if(!n||n.uri!==e.uri)return(null!==this.mediaIndex||this.handlePartialData_)&&this.resyncLoader(),this.currentMediaInfo_=void 0,void this.trigger("playlistupdate");var a=e.mediaSequence-n.mediaSequence;this.logger_("live window shift ["+a+"]"),null!==this.mediaIndex&&(this.mediaIndex-=a),r&&(r.mediaIndex-=a,r.mediaIndex>=0&&(r.segment=e.segments[r.mediaIndex])),this.syncController_.saveExpiredSegmentInfo(n,e)}},n.pause=function(){this.checkBufferTimeout_&&(s().clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=null)},n.paused=function(){return null===this.checkBufferTimeout_},n.resetEverything=function(e){this.ended_=!1,this.appendInitSegment_={audio:!0,video:!0},this.resetLoader(),this.remove(0,1/0,e),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearAllMp4Captions"})},n.resetLoader=function(){this.fetchAtBuffer_=!1,this.resyncLoader()},n.resyncLoader=function(){this.transmuxer_&&vn(this.transmuxer_),this.mediaIndex=null,this.syncPoint_=null,this.isPendingTimestampOffset_=!1,this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.abort(),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})},n.remove=function(e,t,n){if(void 0===n&&(n=function(){}),t===1/0&&(t=this.duration_()),this.sourceUpdater_&&this.currentMediaInfo_){var r=1,i=function(){0===--r&&n()};for(var a in this.audioDisabled_||(r++,this.sourceUpdater_.removeAudio(e,t,i)),"main"===this.loaderType_&&this.currentMediaInfo_&&this.currentMediaInfo_.hasVideo&&(this.gopBuffer_=function(e,t,n,r){for(var i=Math.ceil((t-r)*tt.ONE_SECOND_IN_TS),a=Math.ceil((n-r)*tt.ONE_SECOND_IN_TS),s=e.slice(),o=e.length;o--&&!(e[o].pts<=a););if(-1===o)return s;for(var u=o+1;u--&&!(e[u].pts<=i););return u=Math.max(u,0),s.splice(u,o-u+1),s}(this.gopBuffer_,e,t,this.timeMapping_),r++,this.sourceUpdater_.removeVideo(e,t,i)),this.inbandTextTracks_)Yn(e,t,this.inbandTextTracks_[a]);Yn(e,t,this.segmentMetadataTrack_),i()}},n.monitorBuffer_=function(){this.checkBufferTimeout_&&s().clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=s().setTimeout(this.monitorBufferTick_.bind(this),1)},n.monitorBufferTick_=function(){"READY"===this.state&&this.fillBuffer_(),this.checkBufferTimeout_&&s().clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=s().setTimeout(this.monitorBufferTick_.bind(this),500)},n.fillBuffer_=function(){if(!this.sourceUpdater_.updating()){this.syncPoint_||(this.syncPoint_=this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_()));var e=this.buffered_(),t=this.checkBuffer_(e,this.playlist_,this.mediaIndex,this.hasPlayed_(),this.currentTime_(),this.syncPoint_);t&&(t.timestampOffset=Zn({segmentTimeline:t.timeline,currentTimeline:this.currentTimeline_,startOfSegment:t.startOfSegment,buffered:e,overrideCheck:this.isPendingTimestampOffset_}),this.isPendingTimestampOffset_=!1,"number"==typeof t.timestampOffset&&this.timelineChangeController_.pendingTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:t.timeline}),this.loadSegment_(t))}},n.isEndOfStream_=function(e,t){if(void 0===e&&(e=this.mediaIndex),void 0===t&&(t=this.playlist_),!t||!this.mediaSource_)return!1;var n=e+1===t.segments.length;return t.endList&&"open"===this.mediaSource_.readyState&&n},n.checkBuffer_=function(e,t,n,r,i,a){var s=0;e.length&&(s=e.end(e.length-1));var o=Math.max(0,s-i);if(!t.segments.length)return null;if(o>=this.goalBufferLength_())return null;if(!r&&o>=1)return null;var u,c=null,l=!1;if(null===a)c=this.getSyncSegmentCandidate_(t),l=!0;else if(null!==n){var d=t.segments[n];u=d&&d.end?d.end:s,c=n+1}else if(this.fetchAtBuffer_){var h=jt.getMediaInfoForTime(t,s,a.segmentIndex,a.time);c=h.mediaIndex,u=h.startTime}else{var p=jt.getMediaInfoForTime(t,i,a.segmentIndex,a.time);c=p.mediaIndex,u=p.startTime}var f=this.generateSegmentInfo_(t,c,u,l);return!f||this.mediaSource_&&this.playlist_&&f.mediaIndex===this.playlist_.segments.length-1&&"ended"===this.mediaSource_.readyState&&!this.seeking_()?void 0:(this.logger_("checkBuffer_ returning "+f.uri,{segmentInfo:f,playlist:t,currentMediaIndex:n,nextMediaIndex:c,startOfSegment:u,isSyncRequest:l}),f)},n.getSyncSegmentCandidate_=function(e){var t=this;if(-1===this.currentTimeline_)return 0;var n=e.segments.map((function(e,t){return{timeline:e.timeline,segmentIndex:t}})).filter((function(e){return e.timeline===t.currentTimeline_}));return n.length?n[Math.min(n.length-1,1)].segmentIndex:Math.max(e.segments.length-1,0)},n.generateSegmentInfo_=function(e,t,n,r){if(t<0||t>=e.segments.length)return null;var i,a,s=e.segments[t],o=this.sourceUpdater_.audioBuffered(),u=this.sourceUpdater_.videoBuffered();return o.length&&(i=o.end(o.length-1)-this.sourceUpdater_.audioTimestampOffset()),u.length&&(a=function(e,t,n){if(null==t||!e.length)return[];var r,i=Math.ceil((t-n+3)*tt.ONE_SECOND_IN_TS);for(r=0;r<e.length&&!(e[r].pts>i);r++);return e.slice(r)}(this.gopBuffer_,this.currentTime_()-this.sourceUpdater_.videoTimestampOffset(),this.timeMapping_)),{requestId:"segment-loader-"+Math.random(),uri:s.resolvedUri,mediaIndex:t,isSyncRequest:r,startOfSegment:n,playlist:e,bytes:null,encryptedBytes:null,timestampOffset:null,timeline:s.timeline,duration:s.duration,segment:s,byteLength:0,transmuxer:this.transmuxer_,audioAppendStart:i,gopsToAlignWith:a}},n.abortRequestEarly_=function(e){if(this.vhs_.tech_.paused()||!this.xhrOptions_.timeout||!this.playlist_.attributes.BANDWIDTH)return!1;if(Date.now()-(e.firstBytesReceivedAt||Date.now())<1e3)return!1;var t=this.currentTime_(),n=e.bandwidth,r=this.pendingSegment_.duration,i=jt.estimateSegmentRequestTime(r,n,this.playlist_,e.bytesReceived),a=function(e,t,n){return void 0===n&&(n=1),((e.length?e.end(e.length-1):0)-t)/n}(this.buffered_(),t,this.vhs_.tech_.playbackRate())-1;if(i<=a)return!1;var s=function(e){var t=e.master,n=e.currentTime,r=e.bandwidth,i=e.duration,a=e.segmentDuration,s=e.timeUntilRebuffer,o=e.currentTimeline,u=e.syncController,c=t.playlists.filter((function(e){return!jt.isIncompatible(e)})),l=c.filter(jt.isEnabled);l.length||(l=c.filter((function(e){return!jt.isDisabled(e)})));var d=l.filter(jt.hasAttribute.bind(null,"BANDWIDTH")).map((function(e){var t=u.getSyncPoint(e,i,o,n)?1:2;return{playlist:e,rebufferingImpact:jt.estimateSegmentRequestTime(a,r,e)*t-s}})),h=d.filter((function(e){return e.rebufferingImpact<=0}));return Gn(h,(function(e,t){return Kn(t.playlist,e.playlist)})),h.length?h[0]:(Gn(d,(function(e,t){return e.rebufferingImpact-t.rebufferingImpact})),d[0]||null)}({master:this.vhs_.playlists.master,currentTime:t,bandwidth:n,duration:this.duration_(),segmentDuration:r,timeUntilRebuffer:a,currentTimeline:this.currentTimeline_,syncController:this.syncController_});if(s){var o=i-a-s.rebufferingImpact,u=.5;return a<=bt&&(u=1),!s.playlist||s.playlist.uri===this.playlist_.uri||o<u?!1:(this.bandwidth=s.playlist.attributes.BANDWIDTH*cn.BANDWIDTH_VARIANCE+1,this.abort(),this.trigger("earlyabort"),!0)}},n.handleAbort_=function(){this.mediaRequestsAborted+=1},n.handleProgress_=function(e,t){this.checkForAbort_(t.requestId)||this.abortRequestEarly_(t.stats)||this.trigger("progress")},n.handleTrackInfo_=function(e,t){this.checkForAbort_(e.requestId)||this.abortRequestEarly_(e.stats)||this.checkForIllegalMediaSwitch(t)||(t=t||{},function(e,t){if(!e&&!t||!e&&t||e&&!t)return!1;if(e===t)return!0;var n=Object.keys(e).sort(),r=Object.keys(t).sort();if(n.length!==r.length)return!1;for(var i=0;i<n.length;i++){var a=n[i];if(a!==r[i])return!1;if(e[a]!==t[a])return!1}return!0}(this.currentMediaInfo_,t)||(this.appendInitSegment_={audio:!0,video:!0},this.startingMediaInfo_=t,this.currentMediaInfo_=t,this.logger_("trackinfo update",t),this.trigger("trackinfo")),this.checkForAbort_(e.requestId)||this.abortRequestEarly_(e.stats)||(this.pendingSegment_.trackInfo=t,this.hasEnoughInfoToAppend_()&&this.processCallQueue_()))},n.handleTimingInfo_=function(e,t,n,r){if(!this.checkForAbort_(e.requestId)&&!this.abortRequestEarly_(e.stats)){var i=this.pendingSegment_,a=Jn(t);i[a]=i[a]||{},i[a][n]=r,this.logger_("timinginfo: "+t+" - "+n+" - "+r),this.hasEnoughInfoToAppend_()&&this.processCallQueue_()}},n.handleCaptions_=function(e,t){var n=this;if(!this.checkForAbort_(e.requestId)&&!this.abortRequestEarly_(e.stats))if(0!==t.length)if(this.pendingSegment_.hasAppendedData_){var r=null===this.sourceUpdater_.videoTimestampOffset()?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset(),i={};t.forEach((function(e){i[e.stream]=i[e.stream]||{startTime:1/0,captions:[],endTime:0};var t=i[e.stream];t.startTime=Math.min(t.startTime,e.startTime+r),t.endTime=Math.max(t.endTime,e.endTime+r),t.captions.push(e)})),Object.keys(i).forEach((function(e){var t=i[e],a=t.startTime,o=t.endTime,u=t.captions,c=n.inbandTextTracks_;n.logger_("adding cues from "+a+" -> "+o+" for "+e),function(e,t,n){if(!e[n]){t.trigger({type:"usage",name:"vhs-608"}),t.trigger({type:"usage",name:"hls-608"});var r=t.textTracks().getTrackById(n);e[n]=r||t.addRemoteTextTrack({kind:"captions",id:n,label:n},!1).track}}(c,n.vhs_.tech_,e),Yn(a,o,c[e]),function(e){var t=e.inbandTextTracks,n=e.captionArray,r=e.timestampOffset;if(n){var i=s().WebKitDataCue||s().VTTCue;n.forEach((function(e){var n=e.stream;t[n].addCue(new i(e.startTime+r,e.endTime+r,e.text))}))}}({captionArray:u,inbandTextTracks:c,timestampOffset:r})})),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})}else this.metadataQueue_.caption.push(this.handleCaptions_.bind(this,e,t));else this.logger_("SegmentLoader received no captions from a caption event")},n.handleId3_=function(e,t,n){if(!this.checkForAbort_(e.requestId)&&!this.abortRequestEarly_(e.stats))if(this.pendingSegment_.hasAppendedData_){var r=null===this.sourceUpdater_.videoTimestampOffset()?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset();!function(e,t,n){e.metadataTrack_||(e.metadataTrack_=n.addRemoteTextTrack({kind:"metadata",label:"Timed Metadata"},!1).track,e.metadataTrack_.inBandMetadataTrackDispatchType=t)}(this.inbandTextTracks_,n,this.vhs_.tech_),Xn({inbandTextTracks:this.inbandTextTracks_,metadataArray:t,timestampOffset:r,videoDuration:this.duration_()})}else this.metadataQueue_.id3.push(this.handleId3_.bind(this,e,t,n))},n.processMetadataQueue_=function(){this.metadataQueue_.id3.forEach((function(e){return e()})),this.metadataQueue_.caption.forEach((function(e){return e()})),this.metadataQueue_.id3=[],this.metadataQueue_.caption=[]},n.processCallQueue_=function(){var e=this.callQueue_;this.callQueue_=[],e.forEach((function(e){return e()}))},n.processLoadQueue_=function(){var e=this.loadQueue_;this.loadQueue_=[],e.forEach((function(e){return e()}))},n.hasEnoughInfoToLoad_=function(){if("audio"!==this.loaderType_)return!0;var e=this.pendingSegment_;return!!e&&(!this.currentMediaInfo_||!er({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:e.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}))},n.hasEnoughInfoToAppend_=function(){if(!this.sourceUpdater_.ready())return!1;var e=this.pendingSegment_;if(!e||!e.trackInfo)return!1;if(!this.handlePartialData_){var t=this.currentMediaInfo_,n=t.hasAudio,r=t.hasVideo,i=t.isMuxed;if(r&&!e.videoTimingInfo)return!1;if(n&&!this.audioDisabled_&&!i&&!e.audioTimingInfo)return!1}return!er({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:e.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_})},n.handleData_=function(e,t){if(!this.checkForAbort_(e.requestId)&&!this.abortRequestEarly_(e.stats))if(!this.callQueue_.length&&this.hasEnoughInfoToAppend_()){var n=this.pendingSegment_;if(this.setTimeMapping_(n.timeline),this.updateMediaSecondsLoaded_(n.segment),"closed"!==this.mediaSource_.readyState){if(e.map&&(e.map=this.initSegmentForMap(e.map,!0),n.segment.map=e.map),e.key&&this.segmentKey(e.key,!0),n.isFmp4=e.isFmp4,n.timingInfo=n.timingInfo||{},n.isFmp4)this.trigger("fmp4"),n.timingInfo.start=n[Jn(t.type)].start;else{var r,i="main"===this.loaderType_&&this.currentMediaInfo_.hasVideo;i&&(r=this.handlePartialData_?t.videoFramePtsTime:n.videoTimingInfo.start),n.timingInfo.start=this.trueSegmentStart_({currentStart:n.timingInfo.start,playlist:n.playlist,mediaIndex:n.mediaIndex,currentVideoTimestampOffset:this.sourceUpdater_.videoTimestampOffset(),useVideoTimingInfo:i,firstVideoFrameTimeForData:r,videoTimingInfo:n.videoTimingInfo,audioTimingInfo:n.audioTimingInfo})}this.updateAppendInitSegmentStatus(n,t.type),this.updateSourceBufferTimestampOffset_(n),n.hasAppendedData_=!0,this.processMetadataQueue_(),this.appendData_(n,t)}}else this.callQueue_.push(this.handleData_.bind(this,e,t))},n.updateAppendInitSegmentStatus=function(e,t){"main"!==this.loaderType_||"number"!=typeof e.timestampOffset||e.changedTimestampOffset||(this.appendInitSegment_={audio:!0,video:!0}),this.playlistOfLastInitSegment_[t]!==e.playlist&&(this.appendInitSegment_[t]=!0)},n.getInitSegmentAndUpdateState_=function(e){var t=e.type,n=e.initSegment,r=e.map,i=e.playlist;if(r){var a=Gt(r);if(this.activeInitSegmentId_===a)return null;n=this.initSegmentForMap(r,!0).bytes,this.activeInitSegmentId_=a}return n&&this.appendInitSegment_[t]?(this.playlistOfLastInitSegment_[t]=i,this.appendInitSegment_[t]=!!r,this.activeInitSegmentId_=null,n):null},n.appendToSourceBuffer_=function(e){var t=this,n=e.segmentInfo,r=e.type,i=e.initSegment,a=e.data,s=[a],o=a.byteLength;i&&(s.unshift(i),o+=i.byteLength);var u,c,l,d=(l=0,(u={bytes:o,segments:s}).bytes&&(c=new Uint8Array(u.bytes),u.segments.forEach((function(e){c.set(e,l),l+=e.byteLength}))),c);this.sourceUpdater_.appendBuffer({segmentInfo:n,type:r,bytes:d},(function(e){e&&(t.error(r+" append of "+d.length+"b failed for segment #"+n.mediaIndex+" in playlist "+n.playlist.id),t.trigger("appenderror"))}))},n.handleVideoSegmentTimingInfo_=function(e,t){if(this.pendingSegment_&&e===this.pendingSegment_.requestId){var n=this.pendingSegment_.segment;n.videoTimingInfo||(n.videoTimingInfo={}),n.videoTimingInfo.transmuxerPrependedSeconds=t.prependedContentDuration||0,n.videoTimingInfo.transmuxedPresentationStart=t.start.presentation,n.videoTimingInfo.transmuxedPresentationEnd=t.end.presentation,n.videoTimingInfo.baseMediaDecodeTime=t.baseMediaDecodeTime}},n.appendData_=function(e,t){var n=t.type,r=t.data;if(r&&r.byteLength&&("audio"!==n||!this.audioDisabled_)){var i=this.getInitSegmentAndUpdateState_({type:n,initSegment:t.initSegment,playlist:e.playlist,map:e.isFmp4?e.segment.map:null});this.appendToSourceBuffer_({segmentInfo:e,type:n,initSegment:i,data:r})}},n.loadSegment_=function(e){var t=this;this.state="WAITING",this.pendingSegment_=e,this.trimBackBuffer_(e),"number"==typeof e.timestampOffset&&this.transmuxer_&&this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),this.hasEnoughInfoToLoad_()?this.updateTransmuxerAndRequestSegment_(e):this.loadQueue_.push((function(){var n=t.buffered_();"number"==typeof e.timestampOffset&&(e.timestampOffset=Zn({segmentTimeline:e.timeline,currentTimeline:t.currentTimeline_,startOfSegment:e.startOfSegment,buffered:n,overrideCheck:!0})),delete e.audioAppendStart;var r=t.sourceUpdater_.audioBuffered();r.length&&(e.audioAppendStart=r.end(r.length-1)-t.sourceUpdater_.audioTimestampOffset()),t.updateTransmuxerAndRequestSegment_(e)}))},n.updateTransmuxerAndRequestSegment_=function(e){this.shouldUpdateTransmuxerTimestampOffset_(e.timestampOffset)&&(this.gopBuffer_.length=0,e.gopsToAlignWith=[],this.timeMapping_=0,this.transmuxer_.postMessage({action:"reset"}),this.transmuxer_.postMessage({action:"setTimestampOffset",timestampOffset:e.timestampOffset}));var t=this.createSimplifiedSegmentObj_(e);e.abortRequests=An({xhr:this.vhs_.xhr,xhrOptions:this.xhrOptions_,decryptionWorker:this.decrypter_,segment:t,handlePartialData:this.handlePartialData_,abortFn:this.handleAbort_.bind(this),progressFn:this.handleProgress_.bind(this),trackInfoFn:this.handleTrackInfo_.bind(this),timingInfoFn:this.handleTimingInfo_.bind(this),videoSegmentTimingInfoFn:this.handleVideoSegmentTimingInfo_.bind(this,e.requestId),captionsFn:this.handleCaptions_.bind(this),id3Fn:this.handleId3_.bind(this),dataFn:this.handleData_.bind(this),doneFn:this.segmentRequestFinished_.bind(this)})},n.trimBackBuffer_=function(e){var t=function(e,t,n){var r=t-cn.BACK_BUFFER_LENGTH;e.length&&(r=Math.max(r,e.start(0)));var i=t-n;return Math.min(i,r)}(this.seekable_(),this.currentTime_(),this.playlist_.targetDuration||10);t>0&&this.remove(0,t)},n.createSimplifiedSegmentObj_=function(e){var t=e.segment,n={resolvedUri:t.resolvedUri,byterange:t.byterange,requestId:e.requestId,transmuxer:e.transmuxer,audioAppendStart:e.audioAppendStart,gopsToAlignWith:e.gopsToAlignWith},r=e.playlist.segments[e.mediaIndex];if(r&&r.end&&r.timeline===t.timeline&&(n.baseStartTime=r.end+e.timestampOffset),t.key){var i=t.key.iv||new Uint32Array([0,0,0,e.mediaIndex+e.playlist.mediaSequence]);n.key=this.segmentKey(t.key),n.key.iv=i}return t.map&&(n.map=this.initSegmentForMap(t.map)),n},n.saveTransferStats_=function(e){this.mediaRequests+=1,e&&(this.mediaBytesTransferred+=e.bytesReceived,this.mediaTransferDuration+=e.roundTripTime)},n.saveBandwidthRelatedStats_=function(e){this.bandwidth=e.bandwidth,this.roundTrip=e.roundTripTime,this.pendingSegment_.byteLength=e.bytesReceived},n.handleTimeout_=function(){this.mediaRequestsTimedout+=1,this.bandwidth=1,this.roundTrip=NaN,this.trigger("bandwidthupdate")},n.segmentRequestFinished_=function(e,t,n){if(this.callQueue_.length)this.callQueue_.push(this.segmentRequestFinished_.bind(this,e,t,n));else if(this.saveTransferStats_(t.stats),this.pendingSegment_&&t.requestId===this.pendingSegment_.requestId){if(e){if(this.pendingSegment_=null,this.state="READY",e.code===wn)return;return this.pause(),e.code===Tn?void this.handleTimeout_():(this.mediaRequestsErrored+=1,this.error(e),void this.trigger("error"))}this.saveBandwidthRelatedStats_(t.stats);var r=this.pendingSegment_;r.endOfAllRequests=t.endOfAllRequests,n.gopInfo&&(this.gopBuffer_=function(e,t,n){if(!t.length)return e;if(n)return t.slice();for(var r=t[0].pts,i=0;i<e.length&&!(e[i].pts>=r);i++);return e.slice(0,i).concat(t)}(this.gopBuffer_,n.gopInfo,this.safeAppend_)),this.state="APPENDING";var i=this.isEndOfStream_(r.mediaIndex,r.playlist),a=null!==this.mediaIndex,s=r.timeline!==this.currentTimeline_&&r.timeline>0;!r.isFmp4&&(i||a&&s)&&bn(this.transmuxer_),this.trigger("appending"),this.waitForAppendsToComplete_(r)}},n.setTimeMapping_=function(e){var t=this.syncController_.mappingForTimeline(e);null!==t&&(this.timeMapping_=t)},n.updateMediaSecondsLoaded_=function(e){"number"==typeof e.start&&"number"==typeof e.end?this.mediaSecondsLoaded+=e.end-e.start:this.mediaSecondsLoaded+=e.duration},n.shouldUpdateTransmuxerTimestampOffset_=function(e){return null!==e&&("main"===this.loaderType_&&e!==this.sourceUpdater_.videoTimestampOffset()||!this.audioDisabled_&&e!==this.sourceUpdater_.audioTimestampOffset())},n.trueSegmentStart_=function(e){var t=e.currentStart,n=e.playlist,r=e.mediaIndex,i=e.firstVideoFrameTimeForData,a=e.currentVideoTimestampOffset,s=e.useVideoTimingInfo,o=e.videoTimingInfo,u=e.audioTimingInfo;if(void 0!==t)return t;if(!s)return u.start;var c=n.segments[r-1];return 0!==r&&c&&void 0!==c.start&&c.end===i+a?o.start:i},n.waitForAppendsToComplete_=function(e){if(!this.currentMediaInfo_)return this.error({message:"No starting media returned, likely due to an unsupported media format.",blacklistDuration:1/0}),void this.trigger("error");var t=this.currentMediaInfo_,n=t.hasAudio,r=t.hasVideo,i=t.isMuxed,a="main"===this.loaderType_&&r,s=!this.audioDisabled_&&n&&!i;if(e.waitingOnAppends=0,!e.hasAppendedData_)return e.timingInfo||"number"!=typeof e.timestampOffset||(this.isPendingTimestampOffset_=!0),e.timingInfo={start:0},e.waitingOnAppends++,this.isPendingTimestampOffset_||(this.updateSourceBufferTimestampOffset_(e),this.processMetadataQueue_()),void this.checkAppendsDone_(e);a&&e.waitingOnAppends++,s&&e.waitingOnAppends++,a&&this.sourceUpdater_.videoQueueCallback(this.checkAppendsDone_.bind(this,e)),s&&this.sourceUpdater_.audioQueueCallback(this.checkAppendsDone_.bind(this,e))},n.checkAppendsDone_=function(e){this.checkForAbort_(e.requestId)||(e.waitingOnAppends--,0===e.waitingOnAppends&&this.handleAppendsDone_())},n.checkForIllegalMediaSwitch=function(e){var t=function(e,t,n){return"main"===e&&t&&n?n.hasAudio||n.hasVideo?t.hasVideo&&!n.hasVideo?"Only audio found in segment when we expected video. We can't switch to audio only from a stream that had video. To get rid of this message, please add codec information to the manifest.":!t.hasVideo&&n.hasVideo?"Video found in segment when we expected only audio. We can't switch to a stream with video from an audio only stream. To get rid of this message, please add codec information to the manifest.":null:"Neither audio nor video found in segment.":null}(this.loaderType_,this.currentMediaInfo_,e);return!!t&&(this.error({message:t,blacklistDuration:1/0}),this.trigger("error"),!0)},n.updateSourceBufferTimestampOffset_=function(e){if(null!==e.timestampOffset&&"number"==typeof e.timingInfo.start&&!e.changedTimestampOffset&&"main"===this.loaderType_){var t=!1;e.timestampOffset-=e.timingInfo.start,e.changedTimestampOffset=!0,e.timestampOffset!==this.sourceUpdater_.videoTimestampOffset()&&(this.sourceUpdater_.videoTimestampOffset(e.timestampOffset),t=!0),e.timestampOffset!==this.sourceUpdater_.audioTimestampOffset()&&(this.sourceUpdater_.audioTimestampOffset(e.timestampOffset),t=!0),t&&this.trigger("timestampoffset")}},n.updateTimingInfoEnd_=function(e){e.timingInfo=e.timingInfo||{};var t="main"===this.loaderType_&&this.currentMediaInfo_.hasVideo&&e.videoTimingInfo?e.videoTimingInfo:e.audioTimingInfo;t&&(e.timingInfo.end="number"==typeof t.end?t.end:t.start+e.duration)},n.handleAppendsDone_=function(){if(this.pendingSegment_&&this.trigger("appendsdone"),!this.pendingSegment_)return this.state="READY",void(this.paused()||this.monitorBuffer_());var e=this.pendingSegment_;if(this.updateTimingInfoEnd_(e),this.shouldSaveSegmentTimingInfo_&&this.syncController_.saveSegmentTimingInfo({segmentInfo:e,shouldSaveTimelineMapping:"main"===this.loaderType_}),this.logger_(function(e){var t=e.segment,n=t.start,r=t.end,i=e.playlist,a=i.mediaSequence,s=i.id,o=i.segments,u=void 0===o?[]:o,c=e.mediaIndex,l=e.timeline;return["appending ["+c+"] of ["+a+", "+(a+u.length)+"] from playlist ["+s+"]","["+n+" => "+r+"] in timeline ["+l+"]"].join(" ")}(e)),this.recordThroughput_(e),this.pendingSegment_=null,this.state="READY",e.isSyncRequest)this.trigger("syncinfoupdate");else{this.addSegmentMetadataCue_(e),this.fetchAtBuffer_=!0,this.currentTimeline_!==e.timeline&&(this.timelineChangeController_.lastTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:e.timeline}),"main"!==this.loaderType_||this.audioDisabled_||this.timelineChangeController_.lastTimelineChange({type:"audio",from:this.currentTimeline_,to:e.timeline})),this.currentTimeline_=e.timeline,this.trigger("syncinfoupdate");var t=e.segment;if(t.end&&this.currentTime_()-t.end>3*e.playlist.targetDuration)this.resetEverything();else null!==this.mediaIndex&&this.trigger("bandwidthupdate"),this.trigger("progress"),this.mediaIndex=e.mediaIndex,this.isEndOfStream_(e.mediaIndex,e.playlist)&&this.endOfStream(),this.trigger("appended"),this.paused()||this.monitorBuffer_()}},n.recordThroughput_=function(e){var t=this.throughput.rate,n=Date.now()-e.endOfAllRequests+1,r=Math.floor(e.byteLength/n*8*1e3);this.throughput.rate+=(r-t)/++this.throughput.count},n.addSegmentMetadataCue_=function(e){if(this.segmentMetadataTrack_){var t=e.segment,n=t.start,r=t.end;if(Qn(n)&&Qn(r)){Yn(n,r,this.segmentMetadataTrack_);var i=s().WebKitDataCue||s().VTTCue,a={custom:t.custom,dateTimeObject:t.dateTimeObject,dateTimeString:t.dateTimeString,bandwidth:e.playlist.attributes.BANDWIDTH,resolution:e.playlist.attributes.RESOLUTION,codecs:e.playlist.attributes.CODECS,byteLength:e.byteLength,uri:e.uri,timeline:e.timeline,playlist:e.playlist.id,start:n,end:r},o=new i(n,r,JSON.stringify(a));o.value=a,this.segmentMetadataTrack_.addCue(o)}}},t}(i().EventTarget);function nr(){}var rr,ir=function(e){return"string"!=typeof e?e:e.replace(/./,(function(e){return e.toUpperCase()}))},ar=["video","audio"],sr=function(e,t){var n=t[e+"Buffer"];return n&&n.updating||t.queuePending[e]},or=function e(t,n){if(0!==n.queue.length){var r=0,i=n.queue[r];if("mediaSource"!==i.type){if("mediaSource"!==t&&n.started_&&"closed"!==n.mediaSource.readyState&&!sr(t,n)){if(i.type!==t){if(r=function(e,t){for(var n=0;n<t.length;n++){var r=t[n];if("mediaSource"===r.type)return null;if(r.type===e)return n}return null}(t,n.queue),null===r)return;i=n.queue[r]}n.queue.splice(r,1),i.action(t,n),i.doneFn?n.queuePending[t]=i:e(t,n)}}else n.updating()||"closed"===n.mediaSource.readyState||(n.queue.shift(),i.action(n),i.doneFn&&i.doneFn(),e("audio",n),e("video",n))}},ur=function(e,t){var n=t[e+"Buffer"],r=ir(e);n&&(n.removeEventListener("updateend",t["on"+r+"UpdateEnd_"]),n.removeEventListener("error",t["on"+r+"Error_"]),t.codecs[e]=null,t[e+"Buffer"]=null)},cr=function(e,t){return e&&t&&-1!==Array.prototype.indexOf.call(e.sourceBuffers,t)},lr=function(e,t){return function(n,r){var i=r[n+"Buffer"];cr(r.mediaSource,i)&&(r.logger_("Appending segment "+t.mediaIndex+"'s "+e.length+" bytes to "+n+"Buffer"),i.appendBuffer(e))}},dr=function(e,t){return function(n,r){var i=r[n+"Buffer"];cr(r.mediaSource,i)&&(r.logger_("Removing "+e+" to "+t+" from "+n+"Buffer"),i.remove(e,t))}},hr=function(e){return function(t,n){var r=n[t+"Buffer"];cr(n.mediaSource,r)&&(n.logger_("Setting "+t+"timestampOffset to "+e),r.timestampOffset=e)}},pr=function(e){return function(t,n){e()}},fr=function(e){return function(t){if("open"===t.mediaSource.readyState){t.logger_("Calling mediaSource endOfStream("+(e||"")+")");try{t.mediaSource.endOfStream(e)}catch(e){i().log.warn("Failed to call media source endOfStream",e)}}}},mr=function(e){return function(t){t.logger_("Setting mediaSource duration to "+e);try{t.mediaSource.duration=e}catch(e){i().log.warn("Failed to set media source duration",e)}}},gr=function(){return function(e,t){if("open"===t.mediaSource.readyState){var n=t[e+"Buffer"];if(cr(t.mediaSource,n)){t.logger_("calling abort on "+e+"Buffer");try{n.abort()}catch(t){i().log.warn("Failed to abort on "+e+"Buffer",t)}}}}},vr=function(e,t){return function(n){var r=ir(e),i=(0,it._5)(t);n.logger_("Adding "+e+"Buffer with codec "+t+" to mediaSource");var a=n.mediaSource.addSourceBuffer(i);a.addEventListener("updateend",n["on"+r+"UpdateEnd_"]),a.addEventListener("error",n["on"+r+"Error_"]),n.codecs[e]=t,n[e+"Buffer"]=a}},yr=function(e){return function(t){var n=t[e+"Buffer"];if(ur(e,t),cr(t.mediaSource,n)){t.logger_("Removing "+e+"Buffer with codec "+t.codecs[e]+" from mediaSource");try{t.mediaSource.removeSourceBuffer(n)}catch(t){i().log.warn("Failed to removeSourceBuffer "+e+"Buffer",t)}}}},br=function(e){return function(t,n){var r=n[t+"Buffer"],i=(0,it._5)(e);cr(n.mediaSource,r)&&n.codecs[t]!==e&&(n.logger_("changing "+t+"Buffer codec from "+n.codecs[t]+" to "+e),r.changeType(i),n.codecs[t]=e)}},_r=function(e){var t=e.type,n=e.sourceUpdater,r=e.action,i=e.doneFn,a=e.name;n.queue.push({type:t,action:r,doneFn:i,name:a}),or(t,n)},Tr=function(e,t){return function(n){if(t.queuePending[e]){var r=t.queuePending[e].doneFn;t.queuePending[e]=null,r&&r(t[e+"Error_"])}or(e,t)}},wr=function(e){function t(t){var n;return(n=e.call(this)||this).mediaSource=t,n.sourceopenListener_=function(){return or("mediaSource",W(n))},n.mediaSource.addEventListener("sourceopen",n.sourceopenListener_),n.logger_=qn("SourceUpdater"),n.audioTimestampOffset_=0,n.videoTimestampOffset_=0,n.queue=[],n.queuePending={audio:null,video:null},n.delayedAudioAppendQueue_=[],n.videoAppendQueued_=!1,n.codecs={},n.onVideoUpdateEnd_=Tr("video",W(n)),n.onAudioUpdateEnd_=Tr("audio",W(n)),n.onVideoError_=function(e){n.videoError_=e},n.onAudioError_=function(e){n.audioError_=e},n.started_=!1,n}G(t,e);var n=t.prototype;return n.ready=function(){return this.started_},n.createSourceBuffers=function(e){this.ready()||(this.addOrChangeSourceBuffers(e),this.started_=!0,this.trigger("ready"))},n.addSourceBuffer=function(e,t){_r({type:"mediaSource",sourceUpdater:this,action:vr(e,t),name:"addSourceBuffer"})},n.abort=function(e){_r({type:e,sourceUpdater:this,action:gr(e),name:"abort"})},n.removeSourceBuffer=function(e){this.canRemoveSourceBuffer()?_r({type:"mediaSource",sourceUpdater:this,action:yr(e),name:"removeSourceBuffer"}):i().log.error("removeSourceBuffer is not supported!")},n.canRemoveSourceBuffer=function(){return!i().browser.IE_VERSION&&s().MediaSource&&s().MediaSource.prototype&&"function"==typeof s().MediaSource.prototype.removeSourceBuffer},t.canChangeType=function(){return s().SourceBuffer&&s().SourceBuffer.prototype&&"function"==typeof s().SourceBuffer.prototype.changeType},n.canChangeType=function(){return this.constructor.canChangeType()},n.changeType=function(e,t){this.canChangeType()?_r({type:e,sourceUpdater:this,action:br(t),name:"changeType"}):i().log.error("changeType is not supported!")},n.addOrChangeSourceBuffers=function(e){var t=this;if(!e||"object"!=typeof e||0===Object.keys(e).length)throw new Error("Cannot addOrChangeSourceBuffers to undefined codecs");Object.keys(e).forEach((function(n){var r=e[n];if(!t.ready())return t.addSourceBuffer(n,r);t.canChangeType()&&t.changeType(n,r)}))},n.appendBuffer=function(e,t){var n=this,r=e.segmentInfo,i=e.type,a=e.bytes;if(this.processedAppend_=!0,"audio"===i&&this.videoBuffer&&!this.videoAppendQueued_)return this.delayedAudioAppendQueue_.push([e,t]),void this.logger_("delayed audio append of "+a.length+" until video append");if(_r({type:i,sourceUpdater:this,action:lr(a,r||{mediaIndex:-1}),doneFn:t,name:"appendBuffer"}),"video"===i){if(this.videoAppendQueued_=!0,!this.delayedAudioAppendQueue_.length)return;var s=this.delayedAudioAppendQueue_.slice();this.logger_("queuing delayed audio "+s.length+" appendBuffers"),this.delayedAudioAppendQueue_.length=0,s.forEach((function(e){n.appendBuffer.apply(n,e)}))}},n.audioBuffered=function(){return cr(this.mediaSource,this.audioBuffer)&&this.audioBuffer.buffered?this.audioBuffer.buffered:i().createTimeRange()},n.videoBuffered=function(){return cr(this.mediaSource,this.videoBuffer)&&this.videoBuffer.buffered?this.videoBuffer.buffered:i().createTimeRange()},n.buffered=function(){var e=cr(this.mediaSource,this.videoBuffer)?this.videoBuffer:null,t=cr(this.mediaSource,this.audioBuffer)?this.audioBuffer:null;return t&&!e?this.audioBuffered():e&&!t?this.videoBuffered():function(e,t){var n=null,r=null,a=0,s=[],o=[];if(!(e&&e.length&&t&&t.length))return i().createTimeRange();for(var u=e.length;u--;)s.push({time:e.start(u),type:"start"}),s.push({time:e.end(u),type:"end"});for(u=t.length;u--;)s.push({time:t.start(u),type:"start"}),s.push({time:t.end(u),type:"end"});for(s.sort((function(e,t){return e.time-t.time})),u=0;u<s.length;u++)"start"===s[u].type?2==++a&&(n=s[u].time):"end"===s[u].type&&1==--a&&(r=s[u].time),null!==n&&null!==r&&(o.push([n,r]),n=null,r=null);return i().createTimeRanges(o)}(this.audioBuffered(),this.videoBuffered())},n.setDuration=function(e,t){void 0===t&&(t=nr),_r({type:"mediaSource",sourceUpdater:this,action:mr(e),name:"duration",doneFn:t})},n.endOfStream=function(e,t){void 0===e&&(e=null),void 0===t&&(t=nr),"string"!=typeof e&&(e=void 0),_r({type:"mediaSource",sourceUpdater:this,action:fr(e),name:"endOfStream",doneFn:t})},n.removeAudio=function(e,t,n){void 0===n&&(n=nr),this.audioBuffered().length&&0!==this.audioBuffered().end(0)?_r({type:"audio",sourceUpdater:this,action:dr(e,t),doneFn:n,name:"remove"}):n()},n.removeVideo=function(e,t,n){void 0===n&&(n=nr),this.videoBuffered().length&&0!==this.videoBuffered().end(0)?_r({type:"video",sourceUpdater:this,action:dr(e,t),doneFn:n,name:"remove"}):n()},n.updating=function(){return!(!sr("audio",this)&&!sr("video",this))},n.audioTimestampOffset=function(e){return void 0!==e&&this.audioBuffer&&this.audioTimestampOffset_!==e&&(_r({type:"audio",sourceUpdater:this,action:hr(e),name:"timestampOffset"}),this.audioTimestampOffset_=e),this.audioTimestampOffset_},n.videoTimestampOffset=function(e){return void 0!==e&&this.videoBuffer&&this.videoTimestampOffset!==e&&(_r({type:"video",sourceUpdater:this,action:hr(e),name:"timestampOffset"}),this.videoTimestampOffset_=e),this.videoTimestampOffset_},n.audioQueueCallback=function(e){this.audioBuffer&&_r({type:"audio",sourceUpdater:this,action:pr(e),name:"callback"})},n.videoQueueCallback=function(e){this.videoBuffer&&_r({type:"video",sourceUpdater:this,action:pr(e),name:"callback"})},n.dispose=function(){var e=this;this.trigger("dispose"),ar.forEach((function(t){e.abort(t),e.canRemoveSourceBuffer()?e.removeSourceBuffer(t):e[t+"QueueCallback"]((function(){return ur(t,e)}))})),this.videoAppendQueued_=!1,this.delayedAudioAppendQueue_.length=0,this.sourceopenListener_&&this.mediaSource.removeEventListener("sourceopen",this.sourceopenListener_),this.off()},t}(i().EventTarget),Sr=function(e){return decodeURIComponent(escape(String.fromCharCode.apply(null,e)))},Cr=new Uint8Array("\n\n".split("").map((function(e){return e.charCodeAt(0)}))),Er=function(e){function t(t,n){var r;return void 0===n&&(n={}),(r=e.call(this,t,n)||this).handlePartialData_=!1,r.mediaSource_=null,r.subtitlesTrack_=null,r.loaderType_="subtitle",r.featuresNativeTextTracks_=t.featuresNativeTextTracks,r.shouldSaveSegmentTimingInfo_=!1,r}G(t,e);var n=t.prototype;return n.createTransmuxer_=function(){return null},n.buffered_=function(){if(!this.subtitlesTrack_||!this.subtitlesTrack_.cues.length)return i().createTimeRanges();var e=this.subtitlesTrack_.cues,t=e[0].startTime,n=e[e.length-1].startTime;return i().createTimeRanges([[t,n]])},n.initSegmentForMap=function(e,t){if(void 0===t&&(t=!1),!e)return null;var n=Gt(e),r=this.initSegments_[n];if(t&&!r&&e.bytes){var i=Cr.byteLength+e.bytes.byteLength,a=new Uint8Array(i);a.set(e.bytes),a.set(Cr,e.bytes.byteLength),this.initSegments_[n]=r={resolvedUri:e.resolvedUri,byterange:e.byterange,bytes:a}}return r||e},n.couldBeginLoading_=function(){return this.playlist_&&this.subtitlesTrack_&&!this.paused()},n.init_=function(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()},n.track=function(e){return void 0===e||(this.subtitlesTrack_=e,"INIT"===this.state&&this.couldBeginLoading_()&&this.init_()),this.subtitlesTrack_},n.remove=function(e,t){Yn(e,t,this.subtitlesTrack_)},n.fillBuffer_=function(){var e=this;this.syncPoint_||(this.syncPoint_=this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_()));var t=this.checkBuffer_(this.buffered_(),this.playlist_,this.mediaIndex,this.hasPlayed_(),this.currentTime_(),this.syncPoint_);if(t=this.skipEmptySegments_(t)){if(null===this.syncController_.timestampOffsetForTimeline(t.timeline)){return this.syncController_.one("timestampoffset",(function(){e.state="READY",e.paused()||e.monitorBuffer_()})),void(this.state="WAITING_ON_TIMELINE")}this.loadSegment_(t)}},n.skipEmptySegments_=function(e){for(;e&&e.segment.empty;)e=this.generateSegmentInfo_(e.playlist,e.mediaIndex+1,e.startOfSegment+e.duration,e.isSyncRequest);return e},n.stopForError=function(e){this.error(e),this.state="READY",this.pause(),this.trigger("error")},n.segmentRequestFinished_=function(e,t,n){var r=this;if(this.subtitlesTrack_){if(this.saveTransferStats_(t.stats),!this.pendingSegment_)return this.state="READY",void(this.mediaRequestsAborted+=1);if(e)return e.code===Tn&&this.handleTimeout_(),e.code===wn?this.mediaRequestsAborted+=1:this.mediaRequestsErrored+=1,void this.stopForError(e);this.saveBandwidthRelatedStats_(t.stats),this.state="APPENDING",this.trigger("appending");var i=this.pendingSegment_,a=i.segment;if(a.map&&(a.map.bytes=t.map.bytes),i.bytes=t.bytes,"function"!=typeof s().WebVTT&&this.subtitlesTrack_&&this.subtitlesTrack_.tech_){var o,u=function(){r.subtitlesTrack_.tech_.off("vttjsloaded",o),r.stopForError({message:"Error loading vtt.js"})};return o=function(){r.subtitlesTrack_.tech_.off("vttjserror",u),r.segmentRequestFinished_(e,t,n)},this.state="WAITING_ON_VTTJS",this.subtitlesTrack_.tech_.one("vttjsloaded",o),void this.subtitlesTrack_.tech_.one("vttjserror",u)}a.requested=!0;try{this.parseVTTCues_(i)}catch(e){return void this.stopForError({message:e.message})}if(this.updateTimeMapping_(i,this.syncController_.timelines[i.timeline],this.playlist_),i.cues.length?i.timingInfo={start:i.cues[0].startTime,end:i.cues[i.cues.length-1].endTime}:i.timingInfo={start:i.startOfSegment,end:i.startOfSegment+i.duration},i.isSyncRequest)return this.trigger("syncinfoupdate"),this.pendingSegment_=null,void(this.state="READY");i.byteLength=i.bytes.byteLength,this.mediaSecondsLoaded+=a.duration,i.cues.forEach((function(e){r.remove(e.startTime,e.endTime),r.subtitlesTrack_.addCue(r.featuresNativeTextTracks_?new(s().VTTCue)(e.startTime,e.endTime,e.text):e)})),this.handleAppendsDone_()}else this.state="READY"},n.handleData_=function(){},n.updateTimingInfoEnd_=function(){},n.parseVTTCues_=function(e){var t,n=!1;"function"==typeof s().TextDecoder?t=new(s().TextDecoder)("utf8"):(t=s().WebVTT.StringDecoder(),n=!0);var r=new(s().WebVTT.Parser)(s(),s().vttjs,t);if(e.cues=[],e.timestampmap={MPEGTS:0,LOCAL:0},r.oncue=e.cues.push.bind(e.cues),r.ontimestampmap=function(t){e.timestampmap=t},r.onparsingerror=function(e){i().log.warn("Error encountered when parsing cues: "+e.message)},e.segment.map){var a=e.segment.map.bytes;n&&(a=Sr(a)),r.parse(a)}var o=e.bytes;n&&(o=Sr(o)),r.parse(o),r.flush()},n.updateTimeMapping_=function(e,t,n){var r=e.segment;if(t)if(e.cues.length){var i=e.timestampmap,a=i.MPEGTS/tt.ONE_SECOND_IN_TS-i.LOCAL+t.mapping;if(e.cues.forEach((function(e){e.startTime+=a,e.endTime+=a})),!n.syncInfo){var s=e.cues[0].startTime,o=e.cues[e.cues.length-1].startTime;n.syncInfo={mediaSequence:n.mediaSequence+e.mediaIndex,time:Math.min(s,o-r.duration)}}}else r.empty=!0},t}(tr),kr=function(e,t){for(var n=e.cues,r=0;r<n.length;r++){var i=n[r];if(t>=i.adStartTime&&t<=i.adEndTime)return i}return null},Or=[{name:"VOD",run:function(e,t,n,r,i){if(n!==1/0){return{time:0,segmentIndex:0}}return null}},{name:"ProgramDateTime",run:function(e,t,n,r,i){if(!e.datetimeToDisplayTime)return null;var a=t.segments||[],s=null,o=null;i=i||0;for(var u=0;u<a.length;u++){var c=a[u];if(c.dateTimeObject){var l=c.dateTimeObject.getTime()/1e3+e.datetimeToDisplayTime,d=Math.abs(i-l);if(null!==o&&(0===d||o<d))break;o=d,s={time:l,segmentIndex:u}}}return s}},{name:"Segment",run:function(e,t,n,r,i){var a=t.segments||[],s=null,o=null;i=i||0;for(var u=0;u<a.length;u++){var c=a[u];if(c.timeline===r&&void 0!==c.start){var l=Math.abs(i-c.start);if(null!==o&&o<l)break;(!s||null===o||o>=l)&&(o=l,s={time:c.start,segmentIndex:u})}}return s}},{name:"Discontinuity",run:function(e,t,n,r,i){var a=null;if(i=i||0,t.discontinuityStarts&&t.discontinuityStarts.length)for(var s=null,o=0;o<t.discontinuityStarts.length;o++){var u=t.discontinuityStarts[o],c=t.discontinuitySequence+o+1,l=e.discontinuities[c];if(l){var d=Math.abs(i-l.time);if(null!==s&&s<d)break;(!a||null===s||s>=d)&&(s=d,a={time:l.time,segmentIndex:u})}}return a}},{name:"Playlist",run:function(e,t,n,r,i){return t.syncInfo?{time:t.syncInfo.time,segmentIndex:t.syncInfo.mediaSequence-t.mediaSequence}:null}}],xr=function(e){function t(t){var n;return(n=e.call(this)||this).timelines=[],n.discontinuities=[],n.datetimeToDisplayTime=null,n.logger_=qn("SyncController"),n}G(t,e);var n=t.prototype;return n.getSyncPoint=function(e,t,n,r){var i=this.runStrategies_(e,t,n,r);return i.length?this.selectSyncPoint_(i,{key:"time",value:r}):null},n.getExpiredTime=function(e,t){if(!e||!e.segments)return null;var n=this.runStrategies_(e,t,e.discontinuitySequence,0);if(!n.length)return null;var r=this.selectSyncPoint_(n,{key:"segmentIndex",value:0});return r.segmentIndex>0&&(r.time*=-1),Math.abs(r.time+At(e,r.segmentIndex,0))},n.runStrategies_=function(e,t,n,r){for(var i=[],a=0;a<Or.length;a++){var s=Or[a],o=s.run(this,e,t,n,r);o&&(o.strategy=s.name,i.push({strategy:s.name,syncPoint:o}))}return i},n.selectSyncPoint_=function(e,t){for(var n=e[0].syncPoint,r=Math.abs(e[0].syncPoint[t.key]-t.value),i=e[0].strategy,a=1;a<e.length;a++){var s=Math.abs(e[a].syncPoint[t.key]-t.value);s<r&&(r=s,n=e[a].syncPoint,i=e[a].strategy)}return this.logger_("syncPoint for ["+t.key+": "+t.value+"] chosen with strategy ["+i+"]: [time:"+n.time+", segmentIndex:"+n.segmentIndex+"]"),n},n.saveExpiredSegmentInfo=function(e,t){for(var n=t.mediaSequence-e.mediaSequence-1;n>=0;n--){var r=e.segments[n];if(r&&void 0!==r.start){t.syncInfo={mediaSequence:e.mediaSequence+n,time:r.start},this.logger_("playlist refresh sync: [time:"+t.syncInfo.time+", mediaSequence: "+t.syncInfo.mediaSequence+"]"),this.trigger("syncinfoupdate");break}}},n.setDateTimeMapping=function(e){if(!this.datetimeToDisplayTime&&e.segments&&e.segments.length&&e.segments[0].dateTimeObject){var t=e.segments[0].dateTimeObject.getTime()/1e3;this.datetimeToDisplayTime=-t}},n.saveSegmentTimingInfo=function(e){var t=e.segmentInfo,n=e.shouldSaveTimelineMapping;this.calculateSegmentTimeMapping_(t,t.timingInfo,n)&&(this.saveDiscontinuitySyncInfo_(t),t.playlist.syncInfo||(t.playlist.syncInfo={mediaSequence:t.playlist.mediaSequence+t.mediaIndex,time:t.segment.start}))},n.timestampOffsetForTimeline=function(e){return void 0===this.timelines[e]?null:this.timelines[e].time},n.mappingForTimeline=function(e){return void 0===this.timelines[e]?null:this.timelines[e].mapping},n.calculateSegmentTimeMapping_=function(e,t,n){var r=e.segment,i=this.timelines[e.timeline];if(null!==e.timestampOffset)i={time:e.startOfSegment,mapping:e.startOfSegment-t.start},n&&(this.timelines[e.timeline]=i,this.trigger("timestampoffset"),this.logger_("time mapping for timeline "+e.timeline+": [time: "+i.time+"] [mapping: "+i.mapping+"]")),r.start=e.startOfSegment,r.end=t.end+i.mapping;else{if(!i)return!1;r.start=t.start+i.mapping,r.end=t.end+i.mapping}return!0},n.saveDiscontinuitySyncInfo_=function(e){var t=e.playlist,n=e.segment;if(n.discontinuity)this.discontinuities[n.timeline]={time:n.start,accuracy:0};else if(t.discontinuityStarts&&t.discontinuityStarts.length)for(var r=0;r<t.discontinuityStarts.length;r++){var i=t.discontinuityStarts[r],a=t.discontinuitySequence+r+1,s=i-e.mediaIndex,o=Math.abs(s);if(!this.discontinuities[a]||this.discontinuities[a].accuracy>o){var u=void 0;u=s<0?n.start-At(t,e.mediaIndex,i):n.end+At(t,e.mediaIndex+1,i),this.discontinuities[a]={time:u,accuracy:o}}}},n.dispose=function(){this.trigger("dispose"),this.off()},t}(i().EventTarget),Ar=function(e){function t(){var t;return(t=e.call(this)||this).pendingTimelineChanges_={},t.lastTimelineChanges_={},t}G(t,e);var n=t.prototype;return n.clearPendingTimelineChange=function(e){this.pendingTimelineChanges_[e]=null,this.trigger("pendingtimelinechange")},n.pendingTimelineChange=function(e){var t=e.type,n=e.from,r=e.to;return"number"==typeof n&&"number"==typeof r&&(this.pendingTimelineChanges_[t]={type:t,from:n,to:r},this.trigger("pendingtimelinechange")),this.pendingTimelineChanges_[t]},n.lastTimelineChange=function(e){var t=e.type,n=e.from,r=e.to;return"number"==typeof n&&"number"==typeof r&&(this.lastTimelineChanges_[t]={type:t,from:n,to:r},delete this.pendingTimelineChanges_[t],this.trigger("timelinechange")),this.lastTimelineChanges_[t]},n.dispose=function(){this.trigger("dispose"),this.pendingTimelineChanges_={},this.lastTimelineChanges_={},this.off()},t}(i().EventTarget),Pr=new Rn("./decrypter-worker.worker.js",(function(e,t){var n=this;
/*! @name @videojs/http-streaming @version 2.2.4 @license Apache-2.0 */!function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var t=function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t};var r=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t},i=function(){function e(){this.listeners={}}var t=e.prototype;return t.on=function(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t)},t.off=function(e,t){if(!this.listeners[e])return!1;var n=this.listeners[e].indexOf(t);return this.listeners[e]=this.listeners[e].slice(0),this.listeners[e].splice(n,1),n>-1},t.trigger=function(e){var t=this.listeners[e];if(t)if(2===arguments.length)for(var n=t.length,r=0;r<n;++r)t[r].call(this,arguments[1]);else for(var i=Array.prototype.slice.call(arguments,1),a=t.length,s=0;s<a;++s)t[s].apply(this,i)},t.dispose=function(){this.listeners={}},t.pipe=function(e){this.on("data",(function(t){e.push(t)}))},e}(),a=i;
/*! @name @videojs/vhs-utils @version 2.2.1 @license MIT */
/*! @name aes-decrypter @version 3.1.0 @license Apache-2.0 */
var s=null,o=function(){function e(e){var t,n,r;s||(s=function(){var e,t,n,r,i,a,s,o,u=[[[],[],[],[],[]],[[],[],[],[],[]]],c=u[0],l=u[1],d=c[4],h=l[4],p=[],f=[];for(e=0;e<256;e++)f[(p[e]=e<<1^283*(e>>7))^e]=e;for(t=n=0;!d[t];t^=r||1,n=f[n]||1)for(a=(a=n^n<<1^n<<2^n<<3^n<<4)>>8^255&a^99,d[t]=a,h[a]=t,o=16843009*p[i=p[r=p[t]]]^65537*i^257*r^16843008*t,s=257*p[a]^16843008*a,e=0;e<4;e++)c[e][t]=s=s<<24^s>>>8,l[e][a]=o=o<<24^o>>>8;for(e=0;e<5;e++)c[e]=c[e].slice(0),l[e]=l[e].slice(0);return u}()),this._tables=[[s[0][0].slice(),s[0][1].slice(),s[0][2].slice(),s[0][3].slice(),s[0][4].slice()],[s[1][0].slice(),s[1][1].slice(),s[1][2].slice(),s[1][3].slice(),s[1][4].slice()]];var i=this._tables[0][4],a=this._tables[1],o=e.length,u=1;if(4!==o&&6!==o&&8!==o)throw new Error("Invalid aes key size");var c=e.slice(0),l=[];for(this._key=[c,l],t=o;t<4*o+28;t++)r=c[t-1],(t%o==0||8===o&&t%o==4)&&(r=i[r>>>24]<<24^i[r>>16&255]<<16^i[r>>8&255]<<8^i[255&r],t%o==0&&(r=r<<8^r>>>24^u<<24,u=u<<1^283*(u>>7))),c[t]=c[t-o]^r;for(n=0;t;n++,t--)r=c[3&n?t:t-4],l[n]=t<=4||n<4?r:a[0][i[r>>>24]]^a[1][i[r>>16&255]]^a[2][i[r>>8&255]]^a[3][i[255&r]]}return e.prototype.decrypt=function(e,t,n,r,i,a){var s,o,u,c,l=this._key[1],d=e^l[0],h=r^l[1],p=n^l[2],f=t^l[3],m=l.length/4-2,g=4,v=this._tables[1],y=v[0],b=v[1],_=v[2],T=v[3],w=v[4];for(c=0;c<m;c++)s=y[d>>>24]^b[h>>16&255]^_[p>>8&255]^T[255&f]^l[g],o=y[h>>>24]^b[p>>16&255]^_[f>>8&255]^T[255&d]^l[g+1],u=y[p>>>24]^b[f>>16&255]^_[d>>8&255]^T[255&h]^l[g+2],f=y[f>>>24]^b[d>>16&255]^_[h>>8&255]^T[255&p]^l[g+3],g+=4,d=s,h=o,p=u;for(c=0;c<4;c++)i[(3&-c)+a]=w[d>>>24]<<24^w[h>>16&255]<<16^w[p>>8&255]<<8^w[255&f]^l[g++],s=d,d=h,h=p,p=f,f=s},e}(),u=function(e){function t(){var t;return(t=e.call(this,a)||this).jobs=[],t.delay=1,t.timeout_=null,t}r(t,e);var n=t.prototype;return n.processJob_=function(){this.jobs.shift()(),this.jobs.length?this.timeout_=setTimeout(this.processJob_.bind(this),this.delay):this.timeout_=null},n.push=function(e){this.jobs.push(e),this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),this.delay))},t}(a),c=function(e){return e<<24|(65280&e)<<8|(16711680&e)>>8|e>>>24},l=function(){function e(t,n,r,i){var a=e.STEP,s=new Int32Array(t.buffer),o=new Uint8Array(t.byteLength),l=0;for(this.asyncStream_=new u,this.asyncStream_.push(this.decryptChunk_(s.subarray(l,l+a),n,r,o)),l=a;l<s.length;l+=a)r=new Uint32Array([c(s[l-4]),c(s[l-3]),c(s[l-2]),c(s[l-1])]),this.asyncStream_.push(this.decryptChunk_(s.subarray(l,l+a),n,r,o));this.asyncStream_.push((function(){
/*! @name pkcs7 @version 1.0.4 @license Apache-2.0 */
var e;i(null,(e=o).subarray(0,e.byteLength-e[e.byteLength-1]))}))}return e.prototype.decryptChunk_=function(e,t,n,r){return function(){var i=function(e,t,n){var r,i,a,s,u,l,d,h,p,f=new Int32Array(e.buffer,e.byteOffset,e.byteLength>>2),m=new o(Array.prototype.slice.call(t)),g=new Uint8Array(e.byteLength),v=new Int32Array(g.buffer);for(r=n[0],i=n[1],a=n[2],s=n[3],p=0;p<f.length;p+=4)u=c(f[p]),l=c(f[p+1]),d=c(f[p+2]),h=c(f[p+3]),m.decrypt(u,l,d,h,v,p),v[p]=c(v[p]^r),v[p+1]=c(v[p+1]^i),v[p+2]=c(v[p+2]^a),v[p+3]=c(v[p+3]^s),r=u,i=l,a=d,s=h;return g}(e,t,n);r.set(i,e.byteOffset)}},t(e,null,[{key:"STEP",get:function(){return 32e3}}]),e}(),d=new function(e){e.onmessage=function(t){var n=t.data,r=new Uint8Array(n.encrypted.bytes,n.encrypted.byteOffset,n.encrypted.byteLength),i=new Uint32Array(n.key.bytes,n.key.byteOffset,n.key.byteLength/4),a=new Uint32Array(n.iv.bytes,n.iv.byteOffset,n.iv.byteLength/4);new l(r,i,a,(function(t,r){var i,a;e.postMessage((i={source:n.source,decrypted:r},a={},Object.keys(i).forEach((function(e){var t=i[e];ArrayBuffer.isView(t)?a[e]={bytes:t.buffer,byteOffset:t.byteOffset,byteLength:t.byteLength}:a[e]=t})),a),[r.buffer])}))}}(n)}()})),Ir=function(e){var t=e.default?"main":"alternative";return e.characteristics&&e.characteristics.indexOf("public.accessibility.describes-video")>=0&&(t="main-desc"),t},Lr=function(e,t){e.abort(),e.pause(),t&&t.activePlaylistLoader&&(t.activePlaylistLoader.pause(),t.activePlaylistLoader=null)},Mr=function(e,t){t.activePlaylistLoader=e,e.load()},Dr={AUDIO:function(e,t){return function(){var n=t.segmentLoaders[e],r=t.mediaTypes[e],a=t.blacklistCurrentPlaylist;Lr(n,r);var s=r.activeTrack(),o=r.activeGroup(),u=(o.filter((function(e){return e.default}))[0]||o[0]).id,c=r.tracks[u];if(s!==c){for(var l in i().log.warn("Problem encountered loading the alternate audio track.Switching back to default."),r.tracks)r.tracks[l].enabled=r.tracks[l]===c;r.onTrackChanged()}else a({message:"Problem encountered loading the default audio track."})}},SUBTITLES:function(e,t){return function(){var n=t.segmentLoaders[e],r=t.mediaTypes[e];i().log.warn("Problem encountered loading the subtitle track.Disabling subtitle track."),Lr(n,r);var a=r.activeTrack();a&&(a.mode="disabled"),r.onTrackChanged()}}},Rr={AUDIO:function(e,t,n){if(t){var r=n.tech,i=n.requestOptions,a=n.segmentLoaders[e];t.on("loadedmetadata",(function(){var e=t.media();a.playlist(e,i),(!r.paused()||e.endList&&"none"!==r.preload())&&a.load()})),t.on("loadedplaylist",(function(){a.playlist(t.media(),i),r.paused()||a.load()})),t.on("error",Dr[e](e,n))}},SUBTITLES:function(e,t,n){var r=n.tech,i=n.requestOptions,a=n.segmentLoaders[e],s=n.mediaTypes[e];t.on("loadedmetadata",(function(){var e=t.media();a.playlist(e,i),a.track(s.activeTrack()),(!r.paused()||e.endList&&"none"!==r.preload())&&a.load()})),t.on("loadedplaylist",(function(){a.playlist(t.media(),i),r.paused()||a.load()})),t.on("error",Dr[e](e,n))}},Nr={AUDIO:function(e,t){var n=t.vhs,r=t.sourceType,a=t.segmentLoaders[e],s=t.requestOptions,o=t.master,u=o.mediaGroups,c=o.playlists,l=t.mediaTypes[e],d=l.groups,h=l.tracks,p=t.masterPlaylistLoader;u[e]&&0!==Object.keys(u[e]).length||(u[e]={main:{default:{default:!0}}});var f=function(a){d[a]||(d[a]=[]);var o=c.filter((function(t){return t.attributes[e]===a})),l=function(c){var l=u[e][a][c];o.filter((function(e){return e.resolvedUri===l.resolvedUri})).length&&delete l.resolvedUri;var f=void 0;if(f="vhs-json"===r&&l.playlists?new yt(l.playlists[0],n,s):l.resolvedUri?new yt(l.resolvedUri,n,s):l.playlists&&"dash"===r?new un(l.playlists[0],n,s,p):null,l=i().mergeOptions({id:c,playlistLoader:f},l),Rr[e](e,l.playlistLoader,t),d[a].push(l),void 0===h[c]){var m=new(i().AudioTrack)({id:c,kind:Ir(l),enabled:!1,language:l.language,default:l.default,label:c});h[c]=m}};for(var f in u[e][a])l(f)};for(var m in u[e])f(m);a.on("error",Dr[e](e,t))},SUBTITLES:function(e,t){var n=t.tech,r=t.vhs,a=t.sourceType,s=t.segmentLoaders[e],o=t.requestOptions,u=t.master.mediaGroups,c=t.mediaTypes[e],l=c.groups,d=c.tracks,h=t.masterPlaylistLoader;for(var p in u[e])for(var f in l[p]||(l[p]=[]),u[e][p])if(!u[e][p][f].forced){var m=u[e][p][f],g=void 0;if("hls"===a?g=new yt(m.resolvedUri,r,o):"dash"===a?g=new un(m.playlists[0],r,o,h):"vhs-json"===a&&(g=new yt(m.playlists?m.playlists[0]:m.resolvedUri,r,o)),m=i().mergeOptions({id:f,playlistLoader:g},m),Rr[e](e,m.playlistLoader,t),l[p].push(m),void 0===d[f]){var v=n.addRemoteTextTrack({id:f,kind:"subtitles",default:m.default&&m.autoselect,language:m.language,label:f},!1).track;d[f]=v}}s.on("error",Dr[e](e,t))},"CLOSED-CAPTIONS":function(e,t){var n=t.tech,r=t.master.mediaGroups,a=t.mediaTypes[e],s=a.groups,o=a.tracks;for(var u in r[e])for(var c in s[u]||(s[u]=[]),r[e][u]){var l=r[e][u][c];if(l.instreamId.match(/CC\d/)&&(s[u].push(i().mergeOptions({id:c},l)),void 0===o[c])){var d=n.addRemoteTextTrack({id:l.instreamId,kind:"captions",default:l.default&&l.autoselect,language:l.language,label:c},!1).track;o[c]=d}}}},jr={AUDIO:function(e,t){return function(){var n=t.mediaTypes[e].tracks;for(var r in n)if(n[r].enabled)return n[r];return null}},SUBTITLES:function(e,t){return function(){var n=t.mediaTypes[e].tracks;for(var r in n)if("showing"===n[r].mode||"hidden"===n[r].mode)return n[r];return null}}},Ur=function(e){["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach((function(t){Nr[t](t,e)}));var t=e.mediaTypes,n=e.masterPlaylistLoader,r=e.tech,i=e.vhs;["AUDIO","SUBTITLES"].forEach((function(n){t[n].activeGroup=function(e,t){return function(n){var r=t.masterPlaylistLoader,i=t.mediaTypes[e].groups,a=r.media();if(!a)return null;var s=null;return a.attributes[e]&&(s=i[a.attributes[e]]),s=s||i.main,void 0===n?s:null===n?null:s.filter((function(e){return e.id===n.id}))[0]||null}}(n,e),t[n].activeTrack=jr[n](n,e),t[n].onGroupChanged=function(e,t){return function(){var n=t.segmentLoaders,r=n[e],i=n.main,a=t.mediaTypes[e],s=a.activeTrack(),o=a.activeGroup(s),u=a.activePlaylistLoader;Lr(r,a),o&&(o.playlistLoader?(r.resyncLoader(),Mr(o.playlistLoader,a)):u&&i.resetEverything())}}(n,e),t[n].onGroupChanging=function(e,t){return function(){var n=t.segmentLoaders[e];n.abort(),n.pause()}}(n,e),t[n].onTrackChanged=function(e,t){return function(){var n=t.segmentLoaders,r=n[e],i=n.main,a=t.mediaTypes[e],s=a.activeTrack(),o=a.activeGroup(s),u=a.activePlaylistLoader;if(Lr(r,a),o){if("AUDIO"===e){if(!o.playlistLoader)return i.setAudio(!0),void i.resetEverything();r.setAudio(!0),i.setAudio(!1)}u!==o.playlistLoader?(r.track&&r.track(s),r.resetEverything(),Mr(o.playlistLoader,a)):Mr(o.playlistLoader,a)}}}(n,e)}));var a=t.AUDIO.activeGroup();if(a){var s=(a.filter((function(e){return e.default}))[0]||a[0]).id;t.AUDIO.tracks[s].enabled=!0,t.AUDIO.onTrackChanged()}n.on("mediachange",(function(){["AUDIO","SUBTITLES"].forEach((function(e){return t[e].onGroupChanged()}))})),n.on("mediachanging",(function(){["AUDIO","SUBTITLES"].forEach((function(e){return t[e].onGroupChanging()}))}));var o=function(){t.AUDIO.onTrackChanged(),r.trigger({type:"usage",name:"vhs-audio-change"}),r.trigger({type:"usage",name:"hls-audio-change"})};for(var u in r.audioTracks().addEventListener("change",o),r.remoteTextTracks().addEventListener("change",t.SUBTITLES.onTrackChanged),i.on("dispose",(function(){r.audioTracks().removeEventListener("change",o),r.remoteTextTracks().removeEventListener("change",t.SUBTITLES.onTrackChanged)})),r.clearTracks("audio"),t.AUDIO.tracks)r.audioTracks().addTrack(t.AUDIO.tracks[u])},Fr=["mediaRequests","mediaRequestsAborted","mediaRequestsTimedout","mediaRequestsErrored","mediaTransferDuration","mediaBytesTransferred"],$r=function(e){return this.audioSegmentLoader_[e]+this.mainSegmentLoader_[e]},Br=function(e){function t(t){var n;n=e.call(this)||this;var r,a=t.src,o=t.handleManifestRedirects,u=t.withCredentials,c=t.tech,l=t.bandwidth,d=t.externVhs,h=t.useCueTags,p=t.blacklistDuration,f=t.enableLowInitialPlaylist,m=t.sourceType,g=t.cacheEncryptionKeys,v=t.handlePartialData;if(!a)throw new Error("A non-empty playlist URL or JSON manifest string is required");rr=d,n.withCredentials=u,n.tech_=c,n.vhs_=c.vhs,n.sourceType_=m,n.useCueTags_=h,n.blacklistDuration=p,n.enableLowInitialPlaylist=f,n.useCueTags_&&(n.cueTagsTrack_=n.tech_.addTextTrack("metadata","ad-cues"),n.cueTagsTrack_.inBandMetadataTrackDispatchType=""),n.requestOptions_={withCredentials:u,handleManifestRedirects:o,timeout:null},n.on("error",n.pauseLoading),n.mediaTypes_=(r={},["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach((function(e){r[e]={groups:{},tracks:{},activePlaylistLoader:null,activeGroup:nr,activeTrack:nr,onGroupChanged:nr,onTrackChanged:nr}})),r),n.mediaSource=new(s().MediaSource),n.handleDurationChange_=n.handleDurationChange_.bind(W(n)),n.handleSourceOpen_=n.handleSourceOpen_.bind(W(n)),n.handleSourceEnded_=n.handleSourceEnded_.bind(W(n)),n.mediaSource.addEventListener("durationchange",n.handleDurationChange_),n.mediaSource.addEventListener("sourceopen",n.handleSourceOpen_),n.mediaSource.addEventListener("sourceended",n.handleSourceEnded_),n.seekable_=i().createTimeRanges(),n.hasPlayed_=!1,n.syncController_=new xr(t),n.segmentMetadataTrack_=c.addRemoteTextTrack({kind:"metadata",label:"segment-metadata"},!1).track,n.decrypter_=new Pr,n.sourceUpdater_=new wr(n.mediaSource),n.inbandTextTracks_={},n.timelineChangeController_=new Ar;var y={vhs:n.vhs_,mediaSource:n.mediaSource,currentTime:n.tech_.currentTime.bind(n.tech_),seekable:function(){return n.seekable()},seeking:function(){return n.tech_.seeking()},duration:function(){return n.duration()},hasPlayed:function(){return n.hasPlayed_},goalBufferLength:function(){return n.goalBufferLength()},bandwidth:l,syncController:n.syncController_,decrypter:n.decrypter_,sourceType:n.sourceType_,inbandTextTracks:n.inbandTextTracks_,cacheEncryptionKeys:g,handlePartialData:v,sourceUpdater:n.sourceUpdater_,timelineChangeController:n.timelineChangeController_};return n.masterPlaylistLoader_="dash"===n.sourceType_?new un(a,n.vhs_,n.requestOptions_):new yt(a,n.vhs_,n.requestOptions_),n.setupMasterPlaylistLoaderListeners_(),n.mainSegmentLoader_=new tr(i().mergeOptions(y,{segmentMetadataTrack:n.segmentMetadataTrack_,loaderType:"main"}),t),n.audioSegmentLoader_=new tr(i().mergeOptions(y,{loaderType:"audio"}),t),n.subtitleSegmentLoader_=new Er(i().mergeOptions(y,{loaderType:"vtt",featuresNativeTextTracks:n.tech_.featuresNativeTextTracks}),t),n.setupSegmentLoaderListeners_(),Fr.forEach((function(e){n[e+"_"]=$r.bind(W(n),e)})),n.logger_=qn("MPC"),n.triggeredFmp4Usage=!1,n.masterPlaylistLoader_.load(),n}G(t,e);var n=t.prototype;return n.setupMasterPlaylistLoaderListeners_=function(){var e=this;this.masterPlaylistLoader_.on("loadedmetadata",(function(){var t=e.masterPlaylistLoader_.media(),n=1.5*t.targetDuration*1e3;Nt(e.masterPlaylistLoader_.master,e.masterPlaylistLoader_.media())?e.requestOptions_.timeout=0:e.requestOptions_.timeout=n,t.endList&&"none"!==e.tech_.preload()&&(e.mainSegmentLoader_.playlist(t,e.requestOptions_),e.mainSegmentLoader_.load()),Ur({sourceType:e.sourceType_,segmentLoaders:{AUDIO:e.audioSegmentLoader_,SUBTITLES:e.subtitleSegmentLoader_,main:e.mainSegmentLoader_},tech:e.tech_,requestOptions:e.requestOptions_,masterPlaylistLoader:e.masterPlaylistLoader_,vhs:e.vhs_,master:e.master(),mediaTypes:e.mediaTypes_,blacklistCurrentPlaylist:e.blacklistCurrentPlaylist.bind(e)}),e.triggerPresenceUsage_(e.master(),t),e.setupFirstPlay(),!e.mediaTypes_.AUDIO.activePlaylistLoader||e.mediaTypes_.AUDIO.activePlaylistLoader.media()?e.trigger("selectedinitialmedia"):e.mediaTypes_.AUDIO.activePlaylistLoader.one("loadedmetadata",(function(){e.trigger("selectedinitialmedia")}))})),this.masterPlaylistLoader_.on("loadedplaylist",(function(){var t=e.masterPlaylistLoader_.media();if(!t){var n;if(e.excludeUnsupportedVariants_(),e.enableLowInitialPlaylist&&(n=e.selectInitialPlaylist()),n||(n=e.selectPlaylist()),e.initialMedia_=n,e.masterPlaylistLoader_.media(e.initialMedia_),!("vhs-json"===e.sourceType_&&e.initialMedia_.segments))return;t=e.initialMedia_}e.handleUpdatedMediaPlaylist(t)})),this.masterPlaylistLoader_.on("error",(function(){e.blacklistCurrentPlaylist(e.masterPlaylistLoader_.error)})),this.masterPlaylistLoader_.on("mediachanging",(function(){e.mainSegmentLoader_.abort(),e.mainSegmentLoader_.pause()})),this.masterPlaylistLoader_.on("mediachange",(function(){var t=e.masterPlaylistLoader_.media(),n=1.5*t.targetDuration*1e3;Nt(e.masterPlaylistLoader_.master,e.masterPlaylistLoader_.media())?e.requestOptions_.timeout=0:e.requestOptions_.timeout=n,e.mainSegmentLoader_.playlist(t,e.requestOptions_),e.mainSegmentLoader_.load(),e.tech_.trigger({type:"mediachange",bubbles:!0})})),this.masterPlaylistLoader_.on("playlistunchanged",(function(){var t=e.masterPlaylistLoader_.media();e.stuckAtPlaylistEnd_(t)&&(e.blacklistCurrentPlaylist({message:"Playlist no longer updating."}),e.tech_.trigger("playliststuck"))})),this.masterPlaylistLoader_.on("renditiondisabled",(function(){e.tech_.trigger({type:"usage",name:"vhs-rendition-disabled"}),e.tech_.trigger({type:"usage",name:"hls-rendition-disabled"})})),this.masterPlaylistLoader_.on("renditionenabled",(function(){e.tech_.trigger({type:"usage",name:"vhs-rendition-enabled"}),e.tech_.trigger({type:"usage",name:"hls-rendition-enabled"})}))},n.handleUpdatedMediaPlaylist=function(e){this.useCueTags_&&this.updateAdCues_(e),this.mainSegmentLoader_.playlist(e,this.requestOptions_),this.updateDuration(!e.endList),this.tech_.paused()||(this.mainSegmentLoader_.load(),this.audioSegmentLoader_&&this.audioSegmentLoader_.load())},n.triggerPresenceUsage_=function(e,t){var n=e.mediaGroups||{},r=!0,i=Object.keys(n.AUDIO);for(var a in n.AUDIO)for(var s in n.AUDIO[a]){n.AUDIO[a][s].uri||(r=!1)}r&&(this.tech_.trigger({type:"usage",name:"vhs-demuxed"}),this.tech_.trigger({type:"usage",name:"hls-demuxed"})),Object.keys(n.SUBTITLES).length&&(this.tech_.trigger({type:"usage",name:"vhs-webvtt"}),this.tech_.trigger({type:"usage",name:"hls-webvtt"})),rr.Playlist.isAes(t)&&(this.tech_.trigger({type:"usage",name:"vhs-aes"}),this.tech_.trigger({type:"usage",name:"hls-aes"})),i.length&&Object.keys(n.AUDIO[i[0]]).length>1&&(this.tech_.trigger({type:"usage",name:"vhs-alternate-audio"}),this.tech_.trigger({type:"usage",name:"hls-alternate-audio"})),this.useCueTags_&&(this.tech_.trigger({type:"usage",name:"vhs-playlist-cue-tags"}),this.tech_.trigger({type:"usage",name:"hls-playlist-cue-tags"}))},n.setupSegmentLoaderListeners_=function(){var e=this;this.mainSegmentLoader_.on("bandwidthupdate",(function(){var t=e.selectPlaylist(),n=e.masterPlaylistLoader_.media(),r=e.tech_.buffered();(function(e){var t=e.currentPlaylist,n=e.nextPlaylist,r=e.forwardBuffer,a=e.bufferLowWaterLine,s=e.duration;return e.log,n?!t.endList||s<cn.MAX_BUFFER_LOW_WATER_LINE||n.attributes.BANDWIDTH<t.attributes.BANDWIDTH||r>=a:(i().log.warn("We received no playlist to switch to. Please check your stream."),!1)})({currentPlaylist:n,nextPlaylist:t,forwardBuffer:r.length?r.end(r.length-1)-e.tech_.currentTime():0,bufferLowWaterLine:e.bufferLowWaterLine(),duration:e.duration(),log:e.logger_})&&e.masterPlaylistLoader_.media(t),e.tech_.trigger("bandwidthupdate")})),this.mainSegmentLoader_.on("progress",(function(){e.trigger("progress")})),this.mainSegmentLoader_.on("error",(function(){e.blacklistCurrentPlaylist(e.mainSegmentLoader_.error())})),this.mainSegmentLoader_.on("appenderror",(function(){e.error=e.mainSegmentLoader_.error_,e.trigger("error")})),this.mainSegmentLoader_.on("syncinfoupdate",(function(){e.onSyncInfoUpdate_()})),this.mainSegmentLoader_.on("timestampoffset",(function(){e.tech_.trigger({type:"usage",name:"vhs-timestamp-offset"}),e.tech_.trigger({type:"usage",name:"hls-timestamp-offset"})})),this.audioSegmentLoader_.on("syncinfoupdate",(function(){e.onSyncInfoUpdate_()})),this.audioSegmentLoader_.on("appenderror",(function(){e.error=e.audioSegmentLoader_.error_,e.trigger("error")})),this.mainSegmentLoader_.on("ended",(function(){e.logger_("main segment loader ended"),e.onEndOfStream()})),this.mainSegmentLoader_.on("earlyabort",(function(){e.blacklistCurrentPlaylist({message:"Aborted early because there isn't enough bandwidth to complete the request without rebuffering."},120)}));var t=function(){if(!e.sourceUpdater_.ready())return e.tryToCreateSourceBuffers_();var t=e.getCodecsOrExclude_();t&&e.sourceUpdater_.addOrChangeSourceBuffers(t)};this.mainSegmentLoader_.on("trackinfo",t),this.audioSegmentLoader_.on("trackinfo",t),this.mainSegmentLoader_.on("fmp4",(function(){e.triggeredFmp4Usage||(e.tech_.trigger({type:"usage",name:"vhs-fmp4"}),e.tech_.trigger({type:"usage",name:"hls-fmp4"}),e.triggeredFmp4Usage=!0)})),this.audioSegmentLoader_.on("fmp4",(function(){e.triggeredFmp4Usage||(e.tech_.trigger({type:"usage",name:"vhs-fmp4"}),e.tech_.trigger({type:"usage",name:"hls-fmp4"}),e.triggeredFmp4Usage=!0)})),this.audioSegmentLoader_.on("ended",(function(){e.logger_("audioSegmentLoader ended"),e.onEndOfStream()}))},n.mediaSecondsLoaded_=function(){return Math.max(this.audioSegmentLoader_.mediaSecondsLoaded+this.mainSegmentLoader_.mediaSecondsLoaded)},n.load=function(){this.mainSegmentLoader_.load(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.load(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.load()},n.smoothQualityChange_=function(e){void 0===e&&(e=this.selectPlaylist()),e!==this.masterPlaylistLoader_.media()&&(this.masterPlaylistLoader_.media(e),this.mainSegmentLoader_.resetLoader())},n.fastQualityChange_=function(e){var t=this;void 0===e&&(e=this.selectPlaylist()),e!==this.masterPlaylistLoader_.media()&&(this.masterPlaylistLoader_.media(e),this.mainSegmentLoader_.resetEverything((function(){i().browser.IE_VERSION||i().browser.IS_EDGE?t.tech_.setCurrentTime(t.tech_.currentTime()+.04):t.tech_.setCurrentTime(t.tech_.currentTime())})))},n.play=function(){if(!this.setupFirstPlay()){this.tech_.ended()&&this.tech_.setCurrentTime(0),this.hasPlayed_&&this.load();var e=this.tech_.seekable();return this.tech_.duration()===1/0&&this.tech_.currentTime()<e.start(0)?this.tech_.setCurrentTime(e.end(e.length-1)):void 0}},n.setupFirstPlay=function(){var e=this,t=this.masterPlaylistLoader_.media();if(!t||this.tech_.paused()||this.hasPlayed_)return!1;if(!t.endList){var n=this.seekable();if(!n.length)return!1;if(i().browser.IE_VERSION&&0===this.tech_.readyState())return this.tech_.one("loadedmetadata",(function(){e.trigger("firstplay"),e.tech_.setCurrentTime(n.end(0)),e.hasPlayed_=!0})),!1;this.trigger("firstplay"),this.tech_.setCurrentTime(n.end(0))}return this.hasPlayed_=!0,this.load(),!0},n.handleSourceOpen_=function(){if(this.tryToCreateSourceBuffers_(),this.tech_.autoplay()){var e=this.tech_.play();void 0!==e&&"function"==typeof e.then&&e.then(null,(function(e){}))}this.trigger("sourceopen")},n.handleSourceEnded_=function(){if(this.inbandTextTracks_.metadataTrack_){var e=this.inbandTextTracks_.metadataTrack_.cues;if(e&&e.length){var t=this.duration();e[e.length-1].endTime=isNaN(t)||Math.abs(t)===1/0?Number.MAX_VALUE:t}}},n.handleDurationChange_=function(){this.tech_.trigger("durationchange")},n.onEndOfStream=function(){var e=this.mainSegmentLoader_.ended_;this.mediaTypes_.AUDIO.activePlaylistLoader&&(e=!this.mainSegmentLoader_.currentMediaInfo_||this.mainSegmentLoader_.currentMediaInfo_.hasVideo?e&&this.audioSegmentLoader_.ended_:this.audioSegmentLoader_.ended_),e&&this.sourceUpdater_.endOfStream()},n.stuckAtPlaylistEnd_=function(e){if(!this.seekable().length)return!1;var t=this.syncController_.getExpiredTime(e,this.duration());if(null===t)return!1;var n=rr.Playlist.playlistEnd(e,t),r=this.tech_.currentTime(),i=this.tech_.buffered();if(!i.length)return n-r<=_t;var a=i.end(i.length-1);return a-r<=_t&&n-a<=_t},n.blacklistCurrentPlaylist=function(e,t){void 0===e&&(e={});var n=e.playlist||this.masterPlaylistLoader_.media();if(t=t||e.blacklistDuration||this.blacklistDuration,!n)return this.error=e,void("open"!==this.mediaSource.readyState?this.trigger("error"):this.sourceUpdater_.endOfStream("network"));var r=this.masterPlaylistLoader_.master.playlists,a=r.filter(Dt),s=1===a.length&&a[0]===n;if(1===r.length&&t!==1/0)return i().log.warn("Problem encountered with playlist "+n.id+". Trying again since it is the only playlist."),this.tech_.trigger("retryplaylist"),this.masterPlaylistLoader_.load(s);if(s){var o=!1;r.forEach((function(e){if(e!==n){var t=e.excludeUntil;void 0!==t&&t!==1/0&&(o=!0,delete e.excludeUntil)}})),o&&(i().log.warn("Removing other playlists from the exclusion list because the last rendition is about to be excluded."),this.tech_.trigger("retryplaylist"))}n.excludeUntil=Date.now()+1e3*t,this.tech_.trigger("blacklistplaylist"),this.tech_.trigger({type:"usage",name:"vhs-rendition-blacklisted"}),this.tech_.trigger({type:"usage",name:"hls-rendition-blacklisted"});var u=this.selectPlaylist();if(!u)return this.error="Playback cannot continue. No available working or supported playlists.",void this.trigger("error");var c=e.internal?this.logger_:i().log.warn,l=e.message?" "+e.message:"";return c((e.internal?"Internal problem":"Problem")+" encountered with playlist "+n.id+"."+l+" Switching to playlist "+u.id+"."),u.attributes.AUDIO!==n.attributes.AUDIO&&this.delegateLoaders_("audio",["abort","pause"]),u.attributes.SUBTITLES!==n.attributes.SUBTITLES&&this.delegateLoaders_("subtitle",["abort","pause"]),this.delegateLoaders_("main",["abort","pause"]),this.masterPlaylistLoader_.media(u,s)},n.pauseLoading=function(){this.delegateLoaders_("all",["abort","pause"])},n.delegateLoaders_=function(e,t){var n=this,r=[],i="all"===e;(i||"main"===e)&&r.push(this.masterPlaylistLoader_);var a=[];(i||"audio"===e)&&a.push("AUDIO"),(i||"subtitle"===e)&&(a.push("CLOSED-CAPTIONS"),a.push("SUBTITLES")),a.forEach((function(e){var t=n.mediaTypes_[e]&&n.mediaTypes_[e].activePlaylistLoader;t&&r.push(t)})),["main","audio","subtitle"].forEach((function(t){var i=n[t+"SegmentLoader_"];!i||e!==t&&"all"!==e||r.push(i)})),r.forEach((function(e){return t.forEach((function(t){"function"==typeof e[t]&&e[t]()}))}))},n.setCurrentTime=function(e){var t=wt(this.tech_.buffered(),e);return this.masterPlaylistLoader_&&this.masterPlaylistLoader_.media()&&this.masterPlaylistLoader_.media().segments?t&&t.length?e:(this.mainSegmentLoader_.resetEverything(),this.mainSegmentLoader_.abort(),this.mediaTypes_.AUDIO.activePlaylistLoader&&(this.audioSegmentLoader_.resetEverything(),this.audioSegmentLoader_.abort()),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&(this.subtitleSegmentLoader_.resetEverything(),this.subtitleSegmentLoader_.abort()),void this.load()):0},n.duration=function(){if(!this.masterPlaylistLoader_)return 0;var e=this.masterPlaylistLoader_.media();return e?e.endList?this.mediaSource?this.mediaSource.duration:rr.Playlist.duration(e):1/0:0},n.seekable=function(){return this.seekable_},n.onSyncInfoUpdate_=function(){var e;if(this.masterPlaylistLoader_){var t=this.masterPlaylistLoader_.media();if(t){var n=this.syncController_.getExpiredTime(t,this.duration());if(null!==n){var r=this.masterPlaylistLoader_.master.suggestedPresentationDelay,a=rr.Playlist.seekable(t,n,r);if(0!==a.length){if(this.mediaTypes_.AUDIO.activePlaylistLoader){if(t=this.mediaTypes_.AUDIO.activePlaylistLoader.media(),null===(n=this.syncController_.getExpiredTime(t,this.duration())))return;if(0===(e=rr.Playlist.seekable(t,n,r)).length)return}var s,o;this.seekable_&&this.seekable_.length&&(s=this.seekable_.end(0),o=this.seekable_.start(0)),e?e.start(0)>a.end(0)||a.start(0)>e.end(0)?this.seekable_=a:this.seekable_=i().createTimeRanges([[e.start(0)>a.start(0)?e.start(0):a.start(0),e.end(0)<a.end(0)?e.end(0):a.end(0)]]):this.seekable_=a,this.seekable_&&this.seekable_.length&&this.seekable_.end(0)===s&&this.seekable_.start(0)===o||(this.logger_("seekable updated ["+Ct(this.seekable_)+"]"),this.tech_.trigger("seekablechanged"))}}}}},n.updateDuration=function(e){if(this.updateDuration_&&(this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.updateDuration_=null),"open"!==this.mediaSource.readyState)return this.updateDuration_=this.updateDuration.bind(this,e),void this.mediaSource.addEventListener("sourceopen",this.updateDuration_);if(e){var t=this.seekable();if(!t.length)return;(isNaN(this.mediaSource.duration)||this.mediaSource.duration<t.end(t.length-1))&&this.sourceUpdater_.setDuration(t.end(t.length-1))}else{var n=this.tech_.buffered(),r=rr.Playlist.duration(this.masterPlaylistLoader_.media());n.length>0&&(r=Math.max(r,n.end(n.length-1))),this.mediaSource.duration!==r&&this.sourceUpdater_.setDuration(r)}},n.dispose=function(){var e=this;this.trigger("dispose"),this.decrypter_.terminate(),this.masterPlaylistLoader_.dispose(),this.mainSegmentLoader_.dispose(),["AUDIO","SUBTITLES"].forEach((function(t){var n=e.mediaTypes_[t].groups;for(var r in n)n[r].forEach((function(e){e.playlistLoader&&e.playlistLoader.dispose()}))})),this.audioSegmentLoader_.dispose(),this.subtitleSegmentLoader_.dispose(),this.sourceUpdater_.dispose(),this.timelineChangeController_.dispose(),this.updateDuration_&&this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.mediaSource.removeEventListener("durationchange",this.handleDurationChange_),this.mediaSource.removeEventListener("sourceopen",this.handleSourceOpen_),this.mediaSource.removeEventListener("sourceended",this.handleSourceEnded_),this.off()},n.master=function(){return this.masterPlaylistLoader_.master},n.media=function(){return this.masterPlaylistLoader_.media()||this.initialMedia_},n.areMediaTypesKnown_=function(){var e=!!this.mediaTypes_.AUDIO.activePlaylistLoader;return!(!this.mainSegmentLoader_.currentMediaInfo_||e&&!this.audioSegmentLoader_.currentMediaInfo_)},n.getCodecsOrExclude_=function(){var e=this,t={main:this.mainSegmentLoader_.currentMediaInfo_||{},audio:this.audioSegmentLoader_.currentMediaInfo_||{}};t.video=t.main;var n=Vn(this.master(),this.media()),r={},i=!!this.mediaTypes_.AUDIO.activePlaylistLoader;if(t.main.hasVideo&&(r.video=n.video||t.main.videoCodec||it.xz),t.main.isMuxed&&(r.video+=","+(n.audio||t.main.audioCodec||it.lA)),(t.main.hasAudio&&!t.main.isMuxed||t.audio.hasAudio||i)&&(r.audio=n.audio||t.main.audioCodec||t.audio.audioCodec||it.lA,t.audio.isFmp4=t.main.hasAudio&&!t.main.isMuxed?t.main.isFmp4:t.audio.isFmp4),r.audio||r.video){var a,s={};if(["video","audio"].forEach((function(e){if(r.hasOwnProperty(e)&&(i=t[e].isFmp4,o=r[e],!(i?(0,it.p7)(o):(0,it.Hi)(o)))){var n=t[e].isFmp4?"browser":"muxer";s[n]=s[n]||[],s[n].push(r[e]),"audio"===e&&(a=n)}var i,o})),i&&a&&this.media().attributes.AUDIO){var o=this.media().attributes.AUDIO;this.master().playlists.forEach((function(t){(t.attributes&&t.attributes.AUDIO)===o&&t!==e.media()&&(t.excludeUntil=1/0)})),this.logger_("excluding audio group "+o+" as "+a+' does not support codec(s): "'+r.audio+'"')}if(!Object.keys(s).length){if(this.sourceUpdater_.ready()&&!this.sourceUpdater_.canChangeType()){var u=[];if(["video","audio"].forEach((function(t){var n=((0,it.kS)(e.sourceUpdater_.codecs[t]||"")[t]||{}).type,i=((0,it.kS)(r[t]||"")[t]||{}).type;n&&i&&n.toLowerCase()!==i.toLowerCase()&&u.push('"'+e.sourceUpdater_.codecs[t]+'" -> "'+r[t]+'"')})),u.length)return void this.blacklistCurrentPlaylist({playlist:this.media(),message:"Codec switching not supported: "+u.join(", ")+".",blacklistDuration:1/0,internal:!0})}return r}var c=Object.keys(s).reduce((function(e,t){return e&&(e+=", "),e+=t+' does not support codec(s): "'+s[t].join(",")+'"'}),"")+".";this.blacklistCurrentPlaylist({playlist:this.media(),internal:!0,message:c,blacklistDuration:1/0})}else this.blacklistCurrentPlaylist({playlist:this.media(),message:"Could not determine codecs for playlist.",blacklistDuration:1/0})},n.tryToCreateSourceBuffers_=function(){if("open"===this.mediaSource.readyState&&!this.sourceUpdater_.ready()&&this.areMediaTypesKnown_()){var e=this.getCodecsOrExclude_();if(e){this.sourceUpdater_.createSourceBuffers(e);var t=[e.video,e.audio].filter(Boolean).join(",");this.excludeIncompatibleVariants_(t)}}},n.excludeUnsupportedVariants_=function(){var e=this;this.master().playlists.forEach((function(t){var n=Vn(e.master,t);!n.audio||(0,it.Hi)(n.audio)||(0,it.p7)(n.audio)||(t.excludeUntil=1/0),!n.video||(0,it.Hi)(n.video)||(0,it.p7)(n.video)||(t.excludeUntil=1/0)}))},n.excludeIncompatibleVariants_=function(e){var t=this,n=(0,it.kS)(e),r=Object.keys(n).length;this.master().playlists.forEach((function(e){if(e.excludeUntil!==1/0){var i={},a=2,s=[],o=Vn(t.masterPlaylistLoader_.master,e);if(o.audio||o.video){var u=[o.video,o.audio].filter(Boolean).join(",");i=(0,it.kS)(u),a=Object.keys(i).length}a!==r&&(s.push('codec count "'+a+'" !== "'+r+'"'),e.excludeUntil=1/0),t.sourceUpdater_.canChangeType()||(i.video&&n.video&&i.video.type.toLowerCase()!==n.video.type.toLowerCase()&&(s.push('video codec "'+i.video.type+'" !== "'+n.video.type+'"'),e.excludeUntil=1/0),i.audio&&n.audio&&i.audio.type.toLowerCase()!==n.audio.type.toLowerCase()&&(e.excludeUntil=1/0,s.push('audio codec "'+i.audio.type+'" !== "'+n.audio.type+'"'))),s.length&&t.logger_("blacklisting "+e.id+": "+s.join(" && "))}}))},n.updateAdCues_=function(e){var t=0,n=this.seekable();n.length&&(t=n.start(0)),function(e,t,n){if(void 0===n&&(n=0),e.segments)for(var r,i=n,a=0;a<e.segments.length;a++){var o=e.segments[a];if(r||(r=kr(t,i+o.duration/2)),r){if("cueIn"in o){r.endTime=i,r.adEndTime=i,i+=o.duration,r=null;continue}if(i<r.endTime){i+=o.duration;continue}r.endTime+=o.duration}else if("cueOut"in o&&((r=new(s().VTTCue)(i,i+o.duration,o.cueOut)).adStartTime=i,r.adEndTime=i+parseFloat(o.cueOut),t.addCue(r)),"cueOutCont"in o){var u=o.cueOutCont.split("/").map(parseFloat),c=u[0],l=u[1];(r=new(s().VTTCue)(i,i+o.duration,"")).adStartTime=i-c,r.adEndTime=r.adStartTime+l,t.addCue(r)}i+=o.duration}}(e,this.cueTagsTrack_,t)},n.goalBufferLength=function(){var e=this.tech_.currentTime(),t=cn.GOAL_BUFFER_LENGTH,n=cn.GOAL_BUFFER_LENGTH_RATE,r=Math.max(t,cn.MAX_GOAL_BUFFER_LENGTH);return Math.min(t+e*n,r)},n.bufferLowWaterLine=function(){var e=this.tech_.currentTime(),t=cn.BUFFER_LOW_WATER_LINE,n=cn.BUFFER_LOW_WATER_LINE_RATE,r=Math.max(t,cn.MAX_BUFFER_LOW_WATER_LINE);return Math.min(t+e*n,r)},t}(i().EventTarget),Vr=function(e,t,n){var r,i,a,s=e.masterPlaylistController_,o=s[(e.options_.smoothQualityChange?"smooth":"fast")+"QualityChange_"].bind(s);if(t.attributes.RESOLUTION){var u=t.attributes.RESOLUTION;this.width=u.width,this.height=u.height}this.bandwidth=t.attributes.BANDWIDTH,this.codecs=Vn(s.master(),t),this.playlist=t,this.id=n,this.enabled=(r=e.playlists,i=t.id,a=o,function(e){var t=r.master.playlists[i],n=Mt(t),s=Dt(t);return void 0===e?s:(e?delete t.disabled:t.disabled=!0,e===s||n||(a(),e?r.trigger("renditionenabled"):r.trigger("renditiondisabled")),e)})},qr=["seeking","seeked","pause","playing","error"],Hr=function(){function e(e){var t=this;this.masterPlaylistController_=e.masterPlaylistController,this.tech_=e.tech,this.seekable=e.seekable,this.allowSeeksWithinUnsafeLiveWindow=e.allowSeeksWithinUnsafeLiveWindow,this.media=e.media,this.consecutiveUpdates=0,this.lastRecordedTime=null,this.timer_=null,this.checkCurrentTimeTimeout_=null,this.logger_=qn("PlaybackWatcher"),this.logger_("initialize");var n=function(){return t.monitorCurrentTime_()},r=function(){return t.techWaiting_()},i=function(){return t.cancelTimer_()},a=function(){return t.fixesBadSeeks_()},o=this.masterPlaylistController_,u=["main","subtitle","audio"],c={};u.forEach((function(e){c[e]={reset:function(){return t.resetSegmentDownloads_(e)},updateend:function(){return t.checkSegmentDownloads_(e)}},o[e+"SegmentLoader_"].on("appendsdone",c[e].updateend),o[e+"SegmentLoader_"].on("playlistupdate",c[e].reset),t.tech_.on(["seeked","seeking"],c[e].reset)})),this.tech_.on("seekablechanged",a),this.tech_.on("waiting",r),this.tech_.on(qr,i),this.tech_.on("canplay",n),this.dispose=function(){t.logger_("dispose"),t.tech_.off("seekablechanged",a),t.tech_.off("waiting",r),t.tech_.off(qr,i),t.tech_.off("canplay",n),u.forEach((function(e){o[e+"SegmentLoader_"].off("appendsdone",c[e].updateend),o[e+"SegmentLoader_"].off("playlistupdate",c[e].reset),t.tech_.off(["seeked","seeking"],c[e].reset)})),t.checkCurrentTimeTimeout_&&s().clearTimeout(t.checkCurrentTimeTimeout_),t.cancelTimer_()}}var t=e.prototype;return t.monitorCurrentTime_=function(){this.checkCurrentTime_(),this.checkCurrentTimeTimeout_&&s().clearTimeout(this.checkCurrentTimeTimeout_),this.checkCurrentTimeTimeout_=s().setTimeout(this.monitorCurrentTime_.bind(this),250)},t.resetSegmentDownloads_=function(e){var t=this.masterPlaylistController_[e+"SegmentLoader_"];this[e+"StalledDownloads_"]>0&&this.logger_("resetting possible stalled download count for "+e+" loader"),this[e+"StalledDownloads_"]=0,this[e+"Buffered_"]=t.buffered_()},t.checkSegmentDownloads_=function(e){var t=this.masterPlaylistController_,n=t[e+"SegmentLoader_"],r=n.buffered_(),i=function(e,t){if(e===t)return!1;if(!e&&t||!t&&e)return!0;if(e.length!==t.length)return!0;for(var n=0;n<e.length;n++)if(e.start(n)!==t.start(n)||e.end(n)!==t.end(n))return!0;return!1}(this[e+"Buffered_"],r);this[e+"Buffered_"]=r,i?this.resetSegmentDownloads_(e):(this[e+"StalledDownloads_"]++,this.logger_("found #"+this[e+"StalledDownloads_"]+" "+e+" appends that did not increase buffer (possible stalled download)",{playlistId:n.playlist_&&n.playlist_.id,buffered:Et(r)}),this[e+"StalledDownloads_"]<10||(this.logger_(e+" loader stalled download exclusion"),this.resetSegmentDownloads_(e),this.tech_.trigger({type:"usage",name:"vhs-"+e+"-download-exclusion"}),"subtitle"!==e&&t.blacklistCurrentPlaylist({message:"Excessive "+e+" segment downloading detected."},1/0)))},t.checkCurrentTime_=function(){if(this.tech_.seeking()&&this.fixesBadSeeks_())return this.consecutiveUpdates=0,void(this.lastRecordedTime=this.tech_.currentTime());if(!this.tech_.paused()&&!this.tech_.seeking()){var e=this.tech_.currentTime(),t=this.tech_.buffered();if(this.lastRecordedTime===e&&(!t.length||e+_t>=t.end(t.length-1)))return this.techWaiting_();this.consecutiveUpdates>=5&&e===this.lastRecordedTime?(this.consecutiveUpdates++,this.waiting_()):e===this.lastRecordedTime?this.consecutiveUpdates++:(this.consecutiveUpdates=0,this.lastRecordedTime=e)}},t.cancelTimer_=function(){this.consecutiveUpdates=0,this.timer_&&(this.logger_("cancelTimer_"),clearTimeout(this.timer_)),this.timer_=null},t.fixesBadSeeks_=function(){if(!this.tech_.seeking())return!1;var e,t=this.seekable(),n=this.tech_.currentTime();this.afterSeekableWindow_(t,n,this.media(),this.allowSeeksWithinUnsafeLiveWindow)&&(e=t.end(t.length-1));if(this.beforeSeekableWindow_(t,n)){var r=t.start(0);e=r+(r===t.end(0)?0:_t)}if(void 0!==e)return this.logger_("Trying to seek outside of seekable at time "+n+" with seekable range "+Ct(t)+". Seeking to "+e+"."),this.tech_.setCurrentTime(e),!0;var i=this.tech_.buffered();return!!function(e){var t=e.buffered,n=e.targetDuration,r=e.currentTime;return!(!t.length||t.end(0)-t.start(0)<2*n||r>t.start(0)||!(t.start(0)-r<n))}({buffered:i,targetDuration:this.media().targetDuration,currentTime:n})&&(e=i.start(0)+_t,this.logger_("Buffered region starts ("+i.start(0)+")  just beyond seek point ("+n+"). Seeking to "+e+"."),this.tech_.setCurrentTime(e),!0)},t.waiting_=function(){if(!this.techWaiting_()){var e=this.tech_.currentTime(),t=this.tech_.buffered(),n=wt(t,e);return n.length&&e+3<=n.end(0)?(this.cancelTimer_(),this.tech_.setCurrentTime(e),this.logger_("Stopped at "+e+" while inside a buffered region ["+n.start(0)+" -> "+n.end(0)+"]. Attempting to resume playback by seeking to the current time."),this.tech_.trigger({type:"usage",name:"vhs-unknown-waiting"}),void this.tech_.trigger({type:"usage",name:"hls-unknown-waiting"})):void 0}},t.techWaiting_=function(){var e=this.seekable(),t=this.tech_.currentTime();if(this.tech_.seeking()&&this.fixesBadSeeks_())return!0;if(this.tech_.seeking()||null!==this.timer_)return!0;if(this.beforeSeekableWindow_(e,t)){var n=e.end(e.length-1);return this.logger_("Fell out of live window at time "+t+". Seeking to live point (seekable end) "+n),this.cancelTimer_(),this.tech_.setCurrentTime(n),this.tech_.trigger({type:"usage",name:"vhs-live-resync"}),this.tech_.trigger({type:"usage",name:"hls-live-resync"}),!0}var r=this.tech_.vhs.masterPlaylistController_.sourceUpdater_,i=this.tech_.buffered();if(this.videoUnderflow_({audioBuffered:r.audioBuffered(),videoBuffered:r.videoBuffered(),currentTime:t}))return this.cancelTimer_(),this.tech_.setCurrentTime(t),this.tech_.trigger({type:"usage",name:"vhs-video-underflow"}),this.tech_.trigger({type:"usage",name:"hls-video-underflow"}),!0;var a=St(i,t);if(a.length>0){var s=a.start(0)-t;return this.logger_("Stopped at "+t+", setting timer for "+s+", seeking to "+a.start(0)),this.cancelTimer_(),this.timer_=setTimeout(this.skipTheGap_.bind(this),1e3*s,t),!0}return!1},t.afterSeekableWindow_=function(e,t,n,r){if(void 0===r&&(r=!1),!e.length)return!1;var i=e.end(e.length-1)+_t;return!n.endList&&r&&(i=e.end(e.length-1)+3*n.targetDuration),t>i},t.beforeSeekableWindow_=function(e,t){return!!(e.length&&e.start(0)>0&&t<e.start(0)-_t)},t.videoUnderflow_=function(e){var t=e.videoBuffered,n=e.audioBuffered,r=e.currentTime;if(t){var i;if(t.length&&n.length){var a=wt(t,r-3),s=wt(t,r),o=wt(n,r);o.length&&!s.length&&a.length&&(i={start:a.end(0),end:o.end(0)})}else{St(t,r).length||(i=this.gapFromVideoUnderflow_(t,r))}return!!i&&(this.logger_("Encountered a gap in video from "+i.start+" to "+i.end+". Seeking to current time "+r),!0)}},t.skipTheGap_=function(e){var t=this.tech_.buffered(),n=this.tech_.currentTime(),r=St(t,n);this.cancelTimer_(),0!==r.length&&n===e&&(this.logger_("skipTheGap_:","currentTime:",n,"scheduled currentTime:",e,"nextRange start:",r.start(0)),this.tech_.setCurrentTime(r.start(0)+bt),this.tech_.trigger({type:"usage",name:"vhs-gap-skip"}),this.tech_.trigger({type:"usage",name:"hls-gap-skip"}))},t.gapFromVideoUnderflow_=function(e,t){for(var n=function(e){if(e.length<2)return i().createTimeRanges();for(var t=[],n=1;n<e.length;n++){var r=e.end(n-1),a=e.start(n);t.push([r,a])}return i().createTimeRanges(t)}(e),r=0;r<n.length;r++){var a=n.start(r),s=n.end(r);if(t-a<4&&t-a>2)return{start:a,end:s}}return null},e}(),Wr={errorInterval:30,getSource:function(e){return e(this.tech({IWillNotUseThisInPlugins:!0}).currentSource_||this.currentSource())}},zr=function e(t,n){var r=0,a=0,s=i().mergeOptions(Wr,n);t.ready((function(){t.trigger({type:"usage",name:"vhs-error-reload-initialized"}),t.trigger({type:"usage",name:"hls-error-reload-initialized"})}));var o=function(){a&&t.currentTime(a)},u=function(e){null!=e&&(a=t.duration()!==1/0&&t.currentTime()||0,t.one("loadedmetadata",o),t.src(e),t.trigger({type:"usage",name:"vhs-error-reload"}),t.trigger({type:"usage",name:"hls-error-reload"}),t.play())},c=function(){return Date.now()-r<1e3*s.errorInterval?(t.trigger({type:"usage",name:"vhs-error-reload-canceled"}),void t.trigger({type:"usage",name:"hls-error-reload-canceled"})):s.getSource&&"function"==typeof s.getSource?(r=Date.now(),s.getSource.call(t,u)):void i().log.error("ERROR: reloadSourceOnError - The option getSource must be a function!")},l=function e(){t.off("loadedmetadata",o),t.off("error",c),t.off("dispose",e)};t.on("error",c),t.on("dispose",l),t.reloadSourceOnError=function(n){l(),e(t,n)}},Gr=function(e){zr(this,e)},Kr="2.2.4",Xr={PlaylistLoader:yt,Playlist:jt,utils:Yt,STANDARD_PLAYLIST_SELECTOR:function(){var e=this.useDevicePixelRatio&&s().devicePixelRatio||1;return function(e,t,n,r,i){var a={bandwidth:t,width:n,height:r,limitRenditionByPlayerDimensions:i},o=e.playlists.map((function(e){var t=e.attributes.RESOLUTION&&e.attributes.RESOLUTION.width,n=e.attributes.RESOLUTION&&e.attributes.RESOLUTION.height;return{bandwidth:e.attributes.BANDWIDTH||s().Number.MAX_VALUE,width:t,height:n,playlist:e}}));Gn(o,(function(e,t){return e.bandwidth-t.bandwidth}));var u=(o=o.filter((function(e){return!jt.isIncompatible(e.playlist)}))).filter((function(e){return jt.isEnabled(e.playlist)}));u.length||(u=o.filter((function(e){return!jt.isDisabled(e.playlist)})));var c=u.filter((function(e){return e.bandwidth*cn.BANDWIDTH_VARIANCE<t})),l=c[c.length-1],d=c.filter((function(e){return e.bandwidth===l.bandwidth}))[0];if(!1===i){var h=d||u[0]||o[0];if(h&&h.playlist){var p="sortedPlaylistReps";return d&&(p="bandwidthBestRep"),u[0]&&(p="enabledPlaylistReps"),Hn("choosing "+Wn(h)+" using "+p+" with options",a),h.playlist}return Hn("could not choose a playlist with options",a),null}var f=c.filter((function(e){return e.width&&e.height}));Gn(f,(function(e,t){return e.width-t.width}));var m=f.filter((function(e){return e.width===n&&e.height===r}));l=m[m.length-1];var g,v,y,b=m.filter((function(e){return e.bandwidth===l.bandwidth}))[0];b||(v=(g=f.filter((function(e){return e.width>n||e.height>r}))).filter((function(e){return e.width===g[0].width&&e.height===g[0].height})),l=v[v.length-1],y=v.filter((function(e){return e.bandwidth===l.bandwidth}))[0]);var _=y||b||d||u[0]||o[0];if(_&&_.playlist){var T="sortedPlaylistReps";return y?T="resolutionPlusOneRep":b?T="resolutionBestRep":d?T="bandwidthBestRep":u[0]&&(T="enabledPlaylistReps"),Hn("choosing "+Wn(_)+" using "+T+" with options",a),_.playlist}return Hn("could not choose a playlist with options",a),null}(this.playlists.master,this.systemBandwidth,parseInt(zn(this.tech_.el(),"width"),10)*e,parseInt(zn(this.tech_.el(),"height"),10)*e,this.limitRenditionByPlayerDimensions)},INITIAL_PLAYLIST_SELECTOR:function(){var e=this,t=this.playlists.master.playlists.filter(jt.isEnabled);return Gn(t,(function(e,t){return Kn(e,t)})),t.filter((function(t){return!!Vn(e.playlists.master,t).video}))[0]||null},comparePlaylistBandwidth:Kn,comparePlaylistResolution:function(e,t){var n,r;return e.attributes.RESOLUTION&&e.attributes.RESOLUTION.width&&(n=e.attributes.RESOLUTION.width),n=n||s().Number.MAX_VALUE,t.attributes.RESOLUTION&&t.attributes.RESOLUTION.width&&(r=t.attributes.RESOLUTION.width),n===(r=r||s().Number.MAX_VALUE)&&e.attributes.BANDWIDTH&&t.attributes.BANDWIDTH?e.attributes.BANDWIDTH-t.attributes.BANDWIDTH:n-r},xhr:Bt()};["GOAL_BUFFER_LENGTH","MAX_GOAL_BUFFER_LENGTH","BACK_BUFFER_LENGTH","GOAL_BUFFER_LENGTH_RATE","BUFFER_LOW_WATER_LINE","MAX_BUFFER_LOW_WATER_LINE","BUFFER_LOW_WATER_LINE_RATE","BANDWIDTH_VARIANCE"].forEach((function(e){Object.defineProperty(Xr,e,{get:function(){return i().log.warn("using Vhs."+e+" is UNSAFE be sure you know what you are doing"),cn[e]},set:function(t){i().log.warn("using Vhs."+e+" is UNSAFE be sure you know what you are doing"),"number"!=typeof t||t<0?i().log.warn("value of Vhs."+e+" must be greater than or equal to 0"):cn[e]=t}})}));var Yr="videojs-vhs",Qr=function(e,t){for(var n=t.media(),r=-1,i=0;i<e.length;i++)if(e[i].id===n.id){r=i;break}e.selectedIndex_=r,e.trigger({selectedIndex:r,type:"change"})};Xr.canPlaySource=function(){return i().log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")};var Jr=function(e){var t=e.player,n=e.sourceKeySystems,r=e.media,a=e.audioMedia,s=e.mainPlaylists,o=function(e,t,n){if(!e)return e;var r={video:t&&t.attributes&&t.attributes.CODECS,audio:n&&n.attributes&&n.attributes.CODECS};!r.audio&&r.video&&r.video.split(",").length>1&&r.video.split(",").forEach((function(e){e=e.trim(),(0,it.KL)(e)?r.audio=e:(0,it.tf)(e)&&(r.video=e)}));var a=r.video?'video/mp4;codecs="'+r.video+'"':null,s=r.audio?'audio/mp4;codecs="'+r.audio+'"':null,o={};for(var u in e)o[u]={audioContentType:s,videoContentType:a},t.contentProtection&&t.contentProtection[u]&&t.contentProtection[u].pssh&&(o[u].pssh=t.contentProtection[u].pssh),"string"==typeof e[u]&&(o[u].url=e[u]);return i().mergeOptions(e,o)}(n,r,a);if(o)if(t.currentSource().keySystems=o,!o||t.eme){if(11!==i().browser.IE_VERSION&&t.eme.initializeMediaKeys){var u=function(e,t){return e.reduce((function(e,n){if(!n.contentProtection)return e;var r=t.reduce((function(e,t){var r=n.contentProtection[t];return r&&r.pssh&&(e[t]={pssh:r.pssh}),e}),{});return Object.keys(r).length&&e.push(r),e}),[])}(a?s.concat([a]):s,Object.keys(n));u.forEach((function(e){t.eme.initializeMediaKeys({keySystems:e})}))}}else i().log.warn("DRM encrypted source cannot be decrypted without a DRM plugin")},Zr=function(){if(!s().localStorage)return null;var e=s().localStorage.getItem(Yr);if(!e)return null;try{return JSON.parse(e)}catch(e){return null}};Xr.supportsNativeHls=function(){if(!u()||!u().createElement)return!1;var e=u().createElement("video");if(!i().getTech("Html5").isSupported())return!1;return["application/vnd.apple.mpegurl","audio/mpegurl","audio/x-mpegurl","application/x-mpegurl","video/x-mpegurl","video/mpegurl","application/mpegurl"].some((function(t){return/maybe|probably/i.test(e.canPlayType(t))}))}(),Xr.supportsNativeDash=!!(u()&&u().createElement&&i().getTech("Html5").isSupported())&&/maybe|probably/i.test(u().createElement("video").canPlayType("application/dash+xml")),Xr.supportsTypeNatively=function(e){return"hls"===e?Xr.supportsNativeHls:"dash"===e&&Xr.supportsNativeDash},Xr.isSupported=function(){return i().log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")};var ei=function(e){function t(t,n,r){var a;if(a=e.call(this,n,i().mergeOptions(r.hls,r.vhs))||this,r.hls&&Object.keys(r.hls).length&&i().log.warn("Using hls options is deprecated. Use vhs instead."),n.options_&&n.options_.playerId){var s=i()(n.options_.playerId);s.hasOwnProperty("hls")||Object.defineProperty(s,"hls",{get:function(){return i().log.warn("player.hls is deprecated. Use player.tech().vhs instead."),n.trigger({type:"usage",name:"hls-player-access"}),W(a)},configurable:!0}),s.hasOwnProperty("vhs")||Object.defineProperty(s,"vhs",{get:function(){return i().log.warn("player.vhs is deprecated. Use player.tech().vhs instead."),n.trigger({type:"usage",name:"vhs-player-access"}),W(a)},configurable:!0}),s.hasOwnProperty("dash")||Object.defineProperty(s,"dash",{get:function(){return i().log.warn("player.dash is deprecated. Use player.tech().vhs instead."),W(a)},configurable:!0}),a.player_=s}if(a.tech_=n,a.source_=t,a.stats={},a.ignoreNextSeekingEvent_=!1,a.setOptions_(),a.options_.overrideNative&&n.overrideNativeAudioTracks&&n.overrideNativeVideoTracks)n.overrideNativeAudioTracks(!0),n.overrideNativeVideoTracks(!0);else if(a.options_.overrideNative&&(n.featuresNativeVideoTracks||n.featuresNativeAudioTracks))throw new Error("Overriding native HLS requires emulated tracks. See https://git.io/vMpjB");return a.on(u(),["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],(function(e){var t=u().fullscreenElement||u().webkitFullscreenElement||u().mozFullScreenElement||u().msFullscreenElement;t&&t.contains(a.tech_.el())&&a.masterPlaylistController_.smoothQualityChange_()})),a.on(a.tech_,"seeking",(function(){this.ignoreNextSeekingEvent_?this.ignoreNextSeekingEvent_=!1:this.setCurrentTime(this.tech_.currentTime())})),a.on(a.tech_,"error",(function(){this.tech_.error()&&this.masterPlaylistController_&&this.masterPlaylistController_.pauseLoading()})),a.on(a.tech_,"play",a.play),a}G(t,e);var n=t.prototype;return n.setOptions_=function(){var e=this;if(this.options_.withCredentials=this.options_.withCredentials||!1,this.options_.handleManifestRedirects=!1!==this.options_.handleManifestRedirects,this.options_.limitRenditionByPlayerDimensions=!1!==this.options_.limitRenditionByPlayerDimensions,this.options_.useDevicePixelRatio=this.options_.useDevicePixelRatio||!1,this.options_.smoothQualityChange=this.options_.smoothQualityChange||!1,this.options_.useBandwidthFromLocalStorage=void 0!==this.source_.useBandwidthFromLocalStorage?this.source_.useBandwidthFromLocalStorage:this.options_.useBandwidthFromLocalStorage||!1,this.options_.customTagParsers=this.options_.customTagParsers||[],this.options_.customTagMappers=this.options_.customTagMappers||[],this.options_.cacheEncryptionKeys=this.options_.cacheEncryptionKeys||!1,this.options_.handlePartialData=this.options_.handlePartialData||!1,"number"!=typeof this.options_.blacklistDuration&&(this.options_.blacklistDuration=300),"number"!=typeof this.options_.bandwidth&&this.options_.useBandwidthFromLocalStorage){var t=Zr();t&&t.bandwidth&&(this.options_.bandwidth=t.bandwidth,this.tech_.trigger({type:"usage",name:"vhs-bandwidth-from-local-storage"}),this.tech_.trigger({type:"usage",name:"hls-bandwidth-from-local-storage"})),t&&t.throughput&&(this.options_.throughput=t.throughput,this.tech_.trigger({type:"usage",name:"vhs-throughput-from-local-storage"}),this.tech_.trigger({type:"usage",name:"hls-throughput-from-local-storage"}))}"number"!=typeof this.options_.bandwidth&&(this.options_.bandwidth=cn.INITIAL_BANDWIDTH),this.options_.enableLowInitialPlaylist=this.options_.enableLowInitialPlaylist&&this.options_.bandwidth===cn.INITIAL_BANDWIDTH,["withCredentials","useDevicePixelRatio","limitRenditionByPlayerDimensions","bandwidth","smoothQualityChange","customTagParsers","customTagMappers","handleManifestRedirects","cacheEncryptionKeys","handlePartialData"].forEach((function(t){void 0!==e.source_[t]&&(e.options_[t]=e.source_[t])})),this.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions,this.useDevicePixelRatio=this.options_.useDevicePixelRatio},n.src=function(e,t){var n,r=this;e&&(this.setOptions_(),this.options_.src=0===(n=this.source_.src).toLowerCase().indexOf("data:application/vnd.videojs.vhs+json,")?JSON.parse(n.substring(n.indexOf(",")+1)):n,this.options_.tech=this.tech_,this.options_.externVhs=Xr,this.options_.sourceType=(0,se.t)(t),this.options_.seekTo=function(e){r.tech_.setCurrentTime(e)},this.masterPlaylistController_=new Br(this.options_),this.playbackWatcher_=new Hr(i().mergeOptions(this.options_,{seekable:function(){return r.seekable()},media:function(){return r.masterPlaylistController_.media()},masterPlaylistController:this.masterPlaylistController_})),this.masterPlaylistController_.on("error",(function(){var e=i().players[r.tech_.options_.playerId],t=r.masterPlaylistController_.error;"object"!=typeof t||t.code?"string"==typeof t&&(t={message:t,code:3}):t.code=3,e.error(t)})),this.masterPlaylistController_.selectPlaylist=this.selectPlaylist?this.selectPlaylist.bind(this):Xr.STANDARD_PLAYLIST_SELECTOR.bind(this),this.masterPlaylistController_.selectInitialPlaylist=Xr.INITIAL_PLAYLIST_SELECTOR.bind(this),this.playlists=this.masterPlaylistController_.masterPlaylistLoader_,this.mediaSource=this.masterPlaylistController_.mediaSource,Object.defineProperties(this,{selectPlaylist:{get:function(){return this.masterPlaylistController_.selectPlaylist},set:function(e){this.masterPlaylistController_.selectPlaylist=e.bind(this)}},throughput:{get:function(){return this.masterPlaylistController_.mainSegmentLoader_.throughput.rate},set:function(e){this.masterPlaylistController_.mainSegmentLoader_.throughput.rate=e,this.masterPlaylistController_.mainSegmentLoader_.throughput.count=1}},bandwidth:{get:function(){return this.masterPlaylistController_.mainSegmentLoader_.bandwidth},set:function(e){this.masterPlaylistController_.mainSegmentLoader_.bandwidth=e,this.masterPlaylistController_.mainSegmentLoader_.throughput={rate:0,count:0}}},systemBandwidth:{get:function(){var e,t=1/(this.bandwidth||1);return e=this.throughput>0?1/this.throughput:0,Math.floor(1/(t+e))},set:function(){i().log.error('The "systemBandwidth" property is read-only')}}}),this.options_.bandwidth&&(this.bandwidth=this.options_.bandwidth),this.options_.throughput&&(this.throughput=this.options_.throughput),Object.defineProperties(this.stats,{bandwidth:{get:function(){return r.bandwidth||0},enumerable:!0},mediaRequests:{get:function(){return r.masterPlaylistController_.mediaRequests_()||0},enumerable:!0},mediaRequestsAborted:{get:function(){return r.masterPlaylistController_.mediaRequestsAborted_()||0},enumerable:!0},mediaRequestsTimedout:{get:function(){return r.masterPlaylistController_.mediaRequestsTimedout_()||0},enumerable:!0},mediaRequestsErrored:{get:function(){return r.masterPlaylistController_.mediaRequestsErrored_()||0},enumerable:!0},mediaTransferDuration:{get:function(){return r.masterPlaylistController_.mediaTransferDuration_()||0},enumerable:!0},mediaBytesTransferred:{get:function(){return r.masterPlaylistController_.mediaBytesTransferred_()||0},enumerable:!0},mediaSecondsLoaded:{get:function(){return r.masterPlaylistController_.mediaSecondsLoaded_()||0},enumerable:!0},buffered:{get:function(){return Et(r.tech_.buffered())},enumerable:!0},currentTime:{get:function(){return r.tech_.currentTime()},enumerable:!0},currentSource:{get:function(){return r.tech_.currentSource_},enumerable:!0},currentTech:{get:function(){return r.tech_.name_},enumerable:!0},duration:{get:function(){return r.tech_.duration()},enumerable:!0},master:{get:function(){return r.playlists.master},enumerable:!0},playerDimensions:{get:function(){return r.tech_.currentDimensions()},enumerable:!0},seekable:{get:function(){return Et(r.tech_.seekable())},enumerable:!0},timestamp:{get:function(){return Date.now()},enumerable:!0},videoPlaybackQuality:{get:function(){return r.tech_.getVideoPlaybackQuality()},enumerable:!0}}),this.tech_.one("canplay",this.masterPlaylistController_.setupFirstPlay.bind(this.masterPlaylistController_)),this.tech_.on("bandwidthupdate",(function(){r.options_.useBandwidthFromLocalStorage&&function(e){if(!s().localStorage)return!1;var t=Zr();t=t?i().mergeOptions(t,e):e;try{s().localStorage.setItem(Yr,JSON.stringify(t))}catch(e){return!1}}({bandwidth:r.bandwidth,throughput:Math.round(r.throughput)})})),this.masterPlaylistController_.on("selectedinitialmedia",(function(){var e,t;t=(e=r).playlists,e.representations=function(){return t&&t.master&&t.master.playlists?t.master.playlists.filter((function(e){return!Mt(e)})).map((function(t,n){return new Vr(e,t,t.id)})):[]}})),this.masterPlaylistController_.sourceUpdater_.on("ready",(function(){var e=r.masterPlaylistController_.mediaTypes_.AUDIO.activePlaylistLoader;Jr({player:r.player_,sourceKeySystems:r.source_.keySystems,media:r.playlists.media(),audioMedia:e&&e.media(),mainPlaylists:r.playlists.master.playlists})})),this.on(this.masterPlaylistController_,"progress",(function(){this.tech_.trigger("progress")})),this.on(this.masterPlaylistController_,"firstplay",(function(){this.ignoreNextSeekingEvent_=!0})),this.setupQualityLevels_(),this.tech_.el()&&(this.mediaSourceUrl_=s().URL.createObjectURL(this.masterPlaylistController_.mediaSource),this.tech_.src(this.mediaSourceUrl_)))},n.setupQualityLevels_=function(){var e=this,t=i().players[this.tech_.options_.playerId];t&&t.qualityLevels&&!this.qualityLevels_&&(this.qualityLevels_=t.qualityLevels(),this.masterPlaylistController_.on("selectedinitialmedia",(function(){var t,n;t=e.qualityLevels_,(n=e).representations().forEach((function(e){t.addQualityLevel(e)})),Qr(t,n.playlists)})),this.playlists.on("mediachange",(function(){Qr(e.qualityLevels_,e.playlists)})))},t.version=function(){return{"@videojs/http-streaming":Kr,"mux.js":"5.6.7","mpd-parser":"0.14.0","m3u8-parser":"4.5.0","aes-decrypter":"3.1.0"}},n.version=function(){return this.constructor.version()},n.canChangeType=function(){return wr.canChangeType()},n.play=function(){this.masterPlaylistController_.play()},n.setCurrentTime=function(e){this.masterPlaylistController_.setCurrentTime(e)},n.duration=function(){return this.masterPlaylistController_.duration()},n.seekable=function(){return this.masterPlaylistController_.seekable()},n.dispose=function(){this.playbackWatcher_&&this.playbackWatcher_.dispose(),this.masterPlaylistController_&&this.masterPlaylistController_.dispose(),this.qualityLevels_&&this.qualityLevels_.dispose(),this.player_&&(delete this.player_.vhs,delete this.player_.dash,delete this.player_.hls),this.tech_&&this.tech_.vhs&&delete this.tech_.vhs,this.tech_&&delete this.tech_.hls,this.mediaSourceUrl_&&s().URL.revokeObjectURL&&(s().URL.revokeObjectURL(this.mediaSourceUrl_),this.mediaSourceUrl_=null),e.prototype.dispose.call(this)},n.convertToProgramTime=function(e,t){return Qt({playlist:this.masterPlaylistController_.media(),time:e,callback:t})},n.seekToProgramTime=function(e,t,n,r){return void 0===n&&(n=!0),void 0===r&&(r=2),Jt({programTime:e,playlist:this.masterPlaylistController_.media(),retryCount:r,pauseAfterSeek:n,seekTo:this.options_.seekTo,tech:this.options_.tech,callback:t})},t}(i().getComponent("Component")),ti={name:"videojs-http-streaming",VERSION:Kr,canHandleSource:function(e,t){void 0===t&&(t={});var n=i().mergeOptions(i().options,t);return ti.canPlayType(e.type,n)},handleSource:function(e,t,n){void 0===n&&(n={});var r=i().mergeOptions(i().options,n);return t.vhs=new ei(e,t,r),i().hasOwnProperty("hls")||Object.defineProperty(t,"hls",{get:function(){return i().log.warn("player.tech().hls is deprecated. Use player.tech().vhs instead."),t.vhs},configurable:!0}),t.vhs.xhr=Bt(),t.vhs.src(e.src,e.type),t.vhs},canPlayType:function(e,t){void 0===t&&(t={});var n=i().mergeOptions(i().options,t).vhs.overrideNative,r=void 0===n?!i().browser.IS_ANY_SAFARI:n,a=(0,se.t)(e);return a&&(!Xr.supportsTypeNatively(a)||r)?"maybe":""}};function ni(e,t,n){var r=["hls-request-manifest","hls-request-playlist","hls-request-segment-1"],i=r.length,a=0,s={uri:"",count:0};e.xhr.beforeRequest=e=>{var o,u,c,l="requester=oo",d=e.uri.match(/(m3u8?|ts)$/g);!!n.live_metadata&&d&&(o=e.uri,u=d[0],c=".ts"===u?8:3,o===s.uri?(s.count++,s.count===c&&(t.trigger("intent:pause"),t.error({code:0,message:"unable to fetch hls segment or playlist"}))):s={uri:o,count:0}),e.uri.endsWith(l)||(e.uri=e.uri.concat("?",l)),a<i&&(t.trigger(r[a]),a++)}}(0,it.p7)("avc1.4d400d,mp4a.40.2")&&i().getTech("Html5").registerSourceHandler(ti,0),i().VhsHandler=ei,Object.defineProperty(i(),"HlsHandler",{get:function(){return i().log.warn("videojs.HlsHandler is deprecated. Use videojs.VhsHandler instead."),ei},configurable:!0}),i().VhsSourceHandler=ti,Object.defineProperty(i(),"HlsSourceHandler",{get:function(){return i().log.warn("videojs.HlsSourceHandler is deprecated. Use videojs.VhsSourceHandler instead."),ti},configurable:!0}),i().Vhs=Xr,Object.defineProperty(i(),"Hls",{get:function(){return i().log.warn("videojs.Hls is deprecated. Use videojs.Vhs instead."),Xr},configurable:!0}),i().use||(i().registerComponent("Hls",Xr),i().registerComponent("Vhs",Xr)),i().options.vhs=i().options.vhs||{},i().options.hls=i().options.hls||{},i().registerPlugin?i().registerPlugin("reloadSourceOnError",Gr):i().plugin("reloadSourceOnError",Gr);var ri=n(8314),ii=n(7376);class ai extends ri.AnonymousSubject{constructor(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;super(e,t.do((e=>{this._value=e}))),this._value=n}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new ii.ObjectUnsubscribedError;return this._value}unsubscribe(){super.unsubscribe(),this._value=void 0}}const si=ai;var oi=n(5100);n(2761),n(3810),n(7492),n(4115),n(496),n(3705),n(6651),n(6514),n(757),n(4005),n(8713),n(8678),n(7049),n(3538),n(7701),n(242),n(2433),n(1354),n(9794),n(2743),n(2276),n(1639),n(6165),n(7775),n(5285),n(5251),n(6771),n(6261),n(7537),n(8788),n(3449),n(6593),n(8321),n(60),n(1082),n(6679),n(2417),n(6873),n(3502),n(4507),n(5532),n(2285),n(6095),n(2821),n(3187),n(8316),n(1544),n(7619),n(1498),n(8409),n(600),n(9739),n(279),n(8391);var ui=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t};const ci=(li={filterByLatestFrom:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t.pop();return this.withLatestFrom(...t).filter((e=>r(...e))).map((e=>{var[t]=e;return t}))},bufferedWith:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ui;return oi.Observable.create((n=>{var r,i=!1,a=[],s={next:e=>{i=!0,r=e,a.forEach((e=>{n.next(t(e,r))})),a.splice(0)},error:e=>n.error(e),complete:()=>{}},o={next:e=>{if(!i)return a.push(e);n.next(t(e,r))},error:e=>n.error(e),complete:()=>n.complete()},u=this.subscribe(o),c=e.subscribe(s);return()=>{u.unsubscribe(),c.unsubscribe()}}))},withType:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(n.length){var i=new Set(n.concat(e));return this.filter((e=>i.has(e.type)))}return this.filter((t=>t.type===e))}},e=>Object.keys(li).forEach((t=>e.prototype[t]=li[t])));var li;ci(oi.Observable);const di=oi.Observable;var hi=n(7317).Z,pi={functional:!0,performance:!0,socialMedia:!0,strictlyNecessary:!0,targeting:!0},fi="functional",mi="performance",gi="socialMedia",vi="targeting";function yi(e){var{cneBeaconLibrary$:t,cneError$:n,canRunBasedOnConsent$:r}=e,i=["http://blinkinglights.cnevids.com/livestream"];return{library$:t,events$:n.filter((e=>{var{video:t}=e;return!!t.live_metadata})).throttleTime(1e3).map((e=>{var{video:t,error:n}=e;return{endpoints:i,video:t,error:n}})).withLatestFrom(r.pluck(mi),((e,t)=>({eventData:e,canRunBasedOnConsent:t}))).filter((e=>e.canRunBasedOnConsent)).map((e=>e.eventData))}}var bi=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=t.withType("loadedmetadata","dfp-ads-manager-loaded");return e.distinctUntilChanged().skip(n).switchMap((e=>r.take(1).mapTo(e)))},_i=new Map([["dfp-ad-complete","cne:videoad:end"],["dfp-ad-firstquartile","cne:ad:quartile-1"],["dfp-ad-metadata","cne:videoad:fetchsuccess"],["dfp-ad-midpoint","cne:ad:quartile-2"],["dfp-ad-requested","cne:videoad:fetch"],["dfp-ad-started","cne:ad:start"],["dfp-ad-thirdquartile","cne:ad:quartile-3"],["ended","cne:video:end"],["pause","cne:pause"],["play","cne:play"]]),Ti=new Map([["ADS_REQUEST_NETWORK_ERROR","cne:videoad:fetchexited"],["UNKNOWN_AD_RESPONSE","cne:videoad:emptyresponse"]]),wi=e=>({eventString:e}),Si=e=>t=>({data:t,eventString:e});function Ci(e){var{analyticsMute$:t,cneEventLibrary$:n,currentVideo$:r,isPlaying$:i,loadVideoId$:a,playerEvent$:s,quartile$:o,videoStart$:u,viewportStatus$:c}=e,l=t.distinctUntilChanged().map((e=>({eventName:e?"Mute Video":"Unmute Video"}))),d=s.withType("dfp-ad-error").map((e=>{var{adError:t}=e;return Ti.get(t&&t.code)})).filter(Boolean),h=bi(r,s),p=bi(r,s,1),f=s.map((e=>{var{type:t}=e;return _i.get(t)})).filter(Boolean),m=di.merge(c.map(Si("cne:viewport")),c.skip(1).map((e=>{switch(e){case"FULLY_IN_VIEWPORT":return"viewport-enter";case"OUT_OF_VIEWPORT":return"viewport-exit"}return null})).filter(Boolean).map(wi));return{library$:n,events$:di.merge(m,i.map(Si("cne:is-playing")),f.map(wi),d.map(wi),l.map(Si("cne:mute-change")),p.map(Si("cne:video:change")),h.map(Si("cne:video:current")),o.map((e=>wi("cne:quartile-".concat(e)))),u.mapTo(wi("cne:video:start")),a.mapTo(wi("cne:load-video-id")))}}function Ei(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ki(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ei(Object(n),!0).forEach((function(t){Oi(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ei(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Oi(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var xi={type:"stop"},Ai={type:"playContent"};function Pi(e){var{comscoreLibrary$:t,currentVideo$:n,canRunBasedOnConsent$:r,isPlaying$:i,isSeeking$:a,loadVideoId$:s,playerEvent$:o,replay$:u}=e,c=e=>e.filterByLatestFrom(a,((e,t)=>!t)),l=o.withType("dfp-ad-started").map((e=>(e=>({type:"playAd",adDuration:e}))(e.ad?e.ad.duration:0))),d=o.withType("dfp-content-resume").map((()=>Ai)),h=s.filterByLatestFrom(i,((e,t)=>!0===t)).mapTo(xi),p=c(o.withType("play")).mapTo(Ai),f=c(o.withType("pause")).mapTo(xi),m=u.mapTo(Ai);return{library$:t,events$:di.merge(h,p,m,f,l,d).withLatestFrom(n,((e,t)=>{var{comscore_config:n}=t;return ki(ki({},e),{},{config:n})})).withLatestFrom(r.pluck(mi),((e,t)=>({eventData:e,canRunBasedOnConsent:t}))).filter((e=>e.canRunBasedOnConsent)).map((e=>e.eventData))}}function Ii(e){var{config$:t,currentVideo$:n,canRunBasedOnConsent$:r,facebookLibrary$:i,playerEvent$:a,quartile$:s,videoStart$:o}=e,u=o.mapTo("Start"),c=s.map((e=>"".concat(25*e,"% Quartile"))),l=a.withType("ended").mapTo("Ended");return{library$:i,events$:u.merge(c,l).map((e=>({type:e,custom:!0}))).withLatestFrom(n,t,r.pluck(gi),((e,t,n,r)=>{var{type:i,custom:a}=e,{brand:s}=t,{location:o}=n;return{eventData:{type:i,params:{brand:s,url:o,category:"Video View"},custom:a},canRunBasedOnConsent:r}})).filter((e=>e.canRunBasedOnConsent)).map((e=>e.eventData))}}function Li(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Mi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Li(Object(n),!0).forEach((function(t){Di(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Li(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Di(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ri(e){var{brand:t,cne_produced:n,duration:r,id:i,location:a,partner:s,playerConfig:o,series_title:u,season_title:c,title:l,videoView:d}=e,{analyticsUrl:h,playlist:p,embedLocation:f,playerType:m,playlistId:g,iu:v,isRightRail:y}=o,b="".concat(u||"null","_").concat(c||"null"),_=function(e){var{brand:t,partner:n,embedLocation:r,playerType:i,playlistId:a,isRightRail:s,iu:o}=e,u="".concat(a?"_playlist":"").concat("interlude"===i?"_interlude":"").concat(s?"_rightRail":""),c="".concat(t,"_").concat(o);return"".concat(r||n||c).concat(u)}({brand:t,partner:s,embedLocation:f,playerType:m,playlistId:g,isRightRail:y,iu:v});return{pageLocation:h||a,videoBrand:t,videoId:i,videoLength:r,videoOandOFlag:!!f,videoPlayerName:_,videoPlaylist:p&&p.title||void 0,videoProducer:n,videoSeason:b,videoTitle:l,videoViewsInVisit:d}}function Ni(e){var{config$:t,currentVideo$:n,canRunBasedOnConsent$:r,seekEnd$:i,googleAnalyticsLibrary$:a,playerEvent$:s,quartile$:o,shareIntent$:u,videoStart$:c,videoStartType$:l,videoView$:d}=e,h=o.startWith(0),p=s.withType("dfp-ad-requested").mapTo({event:"video-ad-call"}),f=s.withType("dfp-ad-started").map((e=>{var t=e&&e.ad?e.ad.duration:void 0,n=function(e){switch(e){case-1:return"postroll";case 0:return"preroll";case void 0:return"undefined";default:return"midroll"}}(e&&e.ad&&e.ad.podInfo?e.ad.podInfo.getPodIndex():void 0);return{event:"video-ad-view",videoAdLength:t,videoAdPosition:n}})),m=c.withLatestFrom(l,((e,t)=>t)).map((e=>({event:"video-start",videoPlayMethod:e}))),g=s.withType("ended").withLatestFrom(n,((e,t)=>{var{duration:n}=t;return{event:"video-complete",videoSecondsWatched:n}})),v=s.withType("fullscreenchange").mapTo({event:"video-full-screen"}),y=o.withLatestFrom(n,((e,t)=>{var{duration:n}=t;return{event:"video-progress",videoPercent:25*e,videoSecondsWatched:Math.floor(n/4*e)}})),b=n.mapTo({event:"video-loaded"}),_=i.withLatestFrom(h,((e,t)=>({event:"video-scrub",videoPercent:25*t}))),T=u.withLatestFrom(h,((e,t)=>({event:"video-share",videoPercent:25*t,videoShareType:e}))),w=di.merge(t,n,d.map((e=>({videoView:e})))).scan(((e,t)=>Mi(Mi({},e),t))).map(Ri);return{library$:a,events$:di.merge(p,f,m,g,v,b,y,T,_).withLatestFrom(w,r.pluck(vi),((e,t,n)=>({eventData:Mi(Mi({},e),t),canRunBasedOnConsent:n}))).filter((e=>e.canRunBasedOnConsent)).map((e=>e.eventData))}}function ji(e){var{moatLibrary$:t}=e;return{library$:t,events$:di.never()}}var Ui={1:"AdVideoFirstQuartile",2:"AdVideoMidpoint",3:"AdVideoThirdQuartile"};function Fi(e){var{analyticsVolume$:t,canRunBasedOnConsent$:n,moatContentLibrary$:r,playerEvent$:i,quartile$:a,videoStart$:s,volume$:o}=e;return{library$:r,events$:di.merge(i.withType("ended").mapTo("AdVideoComplete"),i.withType("pause").mapTo("AdVideoPaused"),i.withType("play").mapTo("AdVideoPlaying"),a.map((e=>Ui[e])),s.mapTo("AdVideoStart"),o.mapTo("AdVideoVolumeChange")).withLatestFrom(t,n.pluck(vi),((e,t,n)=>({eventData:{type:e,adVolume:t},canRunBasedOnConsent:n}))).filter((e=>e.canRunBasedOnConsent)).map((e=>e.eventData))}}function $i(e){var t=e.sources&&e.sources.filter((e=>{var{type:t}=e;return"video/mp4"===t}))[0],n=t?t.src:"";return{adLoadType:"2",airdate:e.premiere_date,assetid:e.id,isfullepisode:"y",length:e.duration,mediaUrl:n,program:e.series_title||e.title,title:e.title,type:"content"}}function Bi(e){if(e)return{assetId:e.adId,type:"preroll"}}function Vi(e){var{ad$:t,analyticsPause$:n,currentVideo$:r,canRunBasedOnConsent$:i,loadVideoId$:a,nielsenLibrary$:s,playerEvent$:o}=e,u=r.map($i),c=t.map(Bi),l=o.withType("currentTime").map((e=>{var{value:t}=e;return Math.floor(t)})).distinctUntilChanged().filter((e=>e>0)).share(),d=n.merge(o.withType("dfp-ad-paused"),a).withLatestFrom(l,((e,t)=>({type:"stop",data:t}))),h=o.withType("ended").withLatestFrom(l,((e,t)=>({type:"end",data:t}))),p=l.map((e=>({type:"setPlayheadPosition",data:e}))),f=r.switchMapTo(o.withType("playing").take(1)).withLatestFrom(u,((e,t)=>({type:"loadMetadata",data:t}))),m=o.withType("dfp-ad-loaded").withLatestFrom(c,((e,t)=>({type:"loadMetadata",data:t})));return{library$:s,events$:di.merge(h,m,f,p,d).withLatestFrom(i.pluck(mi),((e,t)=>({eventData:e,canRunBasedOnConsent:t}))).filter((e=>e.canRunBasedOnConsent)).map((e=>e.eventData))}}function qi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Hi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qi(Object(n),!0).forEach((function(t){Wi(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Wi(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var zi=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:di.of({});return n=>n.withLatestFrom(t,((t,n)=>({event:t,category:e,meta:Hi(Hi({},n),t.meta||{})})))},Gi=e=>{var{cneError$:t,currentVideo$:n,playerEvent$:r,quartile$:i,videoView$:a,videoStart$:s}=e,o=r.withType("ended").mapTo({type:"Content End"}),u=i.map((e=>({type:"".concat(25*e,"% Quartile")}))),c=s.mapTo({type:"Content Start"}),l=function(e){var{currentVideo$:t,videoStart$:n,playerEvent$:r}=e,i=r.withType("dfp-ad-started");return t.switchMapTo(di.merge(n,i).take(1)).mapTo({type:"Any Start"})}({currentVideo$:n,playerEvent$:r,videoStart$:s}),d=t.mapTo({type:"Video Error"}),h=a.map((e=>({videoViews:e}))),p=zi("Video View",h);return di.merge(c,o,d,u,l).let(p)},Ki=e=>{var{cneOverlay$:t,playerEvent$:n}=e,r=n.withType("fullscreenchange").mapTo({type:"Full Screen"}),i=t.filter((e=>"share"===e.type)).mapTo({type:"Share Panel"}),a=zi("Player Chrome Event");return di.merge(r,i).let(a)},Xi=e=>{var{analyticsPause$:t,analyticsResume$:n,adDisplaying$:r,currentVideo$:i,documentHidden$:a,mute$:s,muteToggle$:o,playerEvent$:u,seekEnd$:c,videoStart$:l,viewportPercentage$:d,viewportStatus$:h}=e,p=o.withLatestFrom(s,r,((e,t,n)=>({type:(t?"Mute ":"Unmute ")+(n?"Ad":"Video")}))),f=u.withType("ready").take(1).mapTo({type:"Player Loaded"}),m=h.filter((e=>"FULLY_IN_VIEWPORT"===e)).mapTo({type:"Player In Viewport"}),g=function(e){var{currentVideo$:t,documentHidden$:n,videoStart$:r,viewportPercentage$:i}=e,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:di.timer(2e3);return t.switchMap((e=>{var{id:t}=e;return r.mapTo(t)})).switchMap((e=>i.filter((e=>e>.5)).startWith(!0).mergeMapTo(a).mapTo(e))).filterByLatestFrom(i,n,((e,t,n)=>!n&&t>.5)).distinctUntilChanged().mapTo({type:"2 Sec In-View Moat"})}({currentVideo$:i,documentHidden$:a,videoStart$:l,viewportPercentage$:d}),v=zi("Player Event");return di.merge(t.mapTo({type:"Pause Video"}),n.mapTo({type:"Resume Video"}),m,p,f,c.mapTo({type:"Scrub"}),g).let(v)},Yi=(e,t)=>{var{playerEvent$:n,videoView$:r,documentHidden$:i,viewportPercentage$:a}=e,{adViewableTimerOverride:s}=t,o=n.withType("dfp-ad-requested").mapTo({type:"Ad Call Made"}),u=n.withType("dfp-ad-complete").mapTo({type:"Ad Complete"}),c=n.withType("dfp-ad-started"),l=c.mapTo({type:"Ad Start"}),d=s||2e3,h=di.timer(d),p=c.switchMap((()=>a.filter((e=>e>.5)).startWith(!0).take(1).mergeMapTo(h))).filterByLatestFrom(a,i,((e,t,n)=>!n&&t>.5)).mapTo({type:"Ad Viewable"}),f=n.withType("dfp-ad-metadata").mapTo({type:"Ad Metadata"}),m=n.withType("dfp-ad-loaded").mapTo({type:"Ad Loaded"}),g=n.withType("dfp-ad-error").filter((e=>e.adError)).map((e=>({type:"DFP Ad Error ".concat(e.adError.type,", ").concat(e.adError.code,", ").concat(e.adError.message,", ").concat(e.adError.innerError)}))),v=di.merge(n.withType("dfp-ad-firstquartile").mapTo({type:"Ad 1st Quartile"}),n.withType("dfp-ad-midpoint").mapTo({type:"Ad 2nd Quartile"}),n.withType("dfp-ad-thirdquartile").mapTo({type:"Ad 3rd Quartile"})),y=di.merge(n.withType("dfp-ad-paused").mapTo({type:"Ad Paused"}),n.withType("dfp-ad-resume").mapTo({type:"Ad Resumed"})),b=n.withType("dfp-ad-skipped").mapTo({type:"Ad Skipped"}),_=r.map((e=>({videoViews:e}))),T=zi("Video Ad",_);return di.merge(o,u,g,m,f,y,v,b,l,p).let(T)},Qi=(e,t)=>{var{playerEvent$:n,isLiveVideo$:r,contentResuming$:i,adDisplaying$:a,timer$:s=di.timer(0,1e3)}=e,{heartbeatTimeIntervalOverride:o}=t,u=di.merge(n.withType("play").mapTo(!0),i.mapTo(!0),n.withType("pause").mapTo(!1),a.mapTo(!1)),c=r.switchMap((e=>{var t=o||(e?1e4:3e4);return s.takeUntil(n.withType("ended")).filterByLatestFrom(u,((e,t)=>t)).scan((e=>e+1),0).filter((n=>(e&&30===n&&(t=3e4),n%(t/1e3)==0))).map((e=>({type:e})))})),l=zi("Video Heartbeat");return di.merge(c).let(l)};function Ji(e){var{heartbeatTimeIntervalOverride:t,adViewableTimerOverride:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{ad$:r,adBlocked$:i,adUnitPath$:a,config$:s,currentVideo$:o,canRunBasedOnConsent$:u,documentHidden$:c,infinityId$:l,mute$:d,playsOnPage$:h,prerollPlayed$:p,sparrowLibrary$:f,trackSparrowIntent$:m,videoStartType$:g,viewportStatus$:v,videoView$:y,widthHeight$:b}=e;return{library$:f,events$:di.merge(Ki(e),Xi(e),m,Yi(e,{adViewableTimerOverride:n}),Gi(e),Qi(e,{heartbeatTimeIntervalOverride:t})).withLatestFrom(r,i,a,s,o,c,l.startWith(null),d,h,p,g,y,v.startWith(null),b,((e,t,n,r,i,a,s,o,u,c,l,d,h,p,f)=>{var{category:m,event:g,meta:v}=e;return{ad:t,adBlocked:n,adUnitPath:r,category:m,config:i,dimensions:f,documentHidden:s,infinityId:o,meta:v,mute:u,playsOnPage:c,prerollPlayed:l,type:g.type,video:a,videoStartType:d,videoView:h,viewportStatus:p}})).withLatestFrom(u.pluck(vi),((e,t)=>({eventData:e,canRunBasedOnConsent:t}))).filter((e=>e.canRunBasedOnConsent)).map((e=>e.eventData))}}function Zi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ea(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Zi(Object(n),!0).forEach((function(t){ta(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Zi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ta(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function na(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.ad||{};return{creative_id:t.creativeId?+t.creativeId:null,line_item_id:t.dfpLineItem?+t.dfpLineItem:null,is_empty:!1,slot:{ad_unit_path:e.adUnitPath}}}function ra(e){var{canRunBasedOnConsent$:t,permutiveLibrary$:n,playerEvent$:r,widthHeight$:i}=e,a=r.withType("dfp-ad-started").map((e=>ea(ea({},na(e)),{},{type:"VideoAdRender"}))),s=r.withType("dfp-ad-complete").map((e=>ea(ea({},na(e)),{},{type:"VideoAdView"}))),o=r.withType("dfp-ad-click").map((e=>ea(ea({},na(e)),{},{type:"VideoAdClick"})));return{library$:n,events$:di.merge(a,s,o).withLatestFrom(i,t.pluck(vi),((e,t,n)=>({eventData:ea(ea({},e),{},{slot:ea(ea({},e.slot),{},{slot_element_id:t.targetDiv.id}),height:Math.round(t.height),width:Math.round(t.width)}),canRunBasedOnConsent:n}))).filter((e=>e.canRunBasedOnConsent)).map((e=>e.eventData))}}var ia=e=>null!=e&&void 0!==e,aa=(e,t)=>{if(e instanceof Array&&t instanceof Array){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(!aa(e[n],t[n]))return!1;return!0}return e===t};function sa(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function oa(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?sa(Object(n),!0).forEach((function(t){ua(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sa(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ua(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ca=e=>e,la=(e,t)=>e.distinctUntilChanged().map((e=>{var t="$"===e.slice(-1)?e.slice(0,-1):e;return e=>n=>oa(oa({},n),{},{[t]:e})})(t)),da=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ca,n=n=>t(e[n],n,e);return Object.keys(e).map(n)},ha=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=da(e,la);return di.merge(...n).scan(((e,t)=>t(e)),t)},pa=e=>t=>function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];r.every(e)&&t(...r)},fa=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var a=r;return n=>{var r=t.map((e=>n[e]));aa(r,a)||(a=r,e(...r))}}};function ma(e,t){return e.withLatestFrom(t,((e,t)=>{var{share_links:n,title:r,branded:i,branded_caption:a}=e,{playerConfig:s}=t,{hideHoverTitle:o,hidePosterTitle:u}=s;return{hideHoverTitle:o,hidePosterTitle:u,title:r,url:n?n.url:null,branded:i,branded_caption:a}}))}var ga=e=>t=>t.withType("volumechange").map((()=>e.volume())).startWith(e.volume()),va=e=>e.pluck("isContinuousPlay"),ya=(e,t)=>di.merge(t.mapTo(!0),e.mapTo(!1)),ba=e=>di.merge(e.withType("dfp-ad-loaded").map((e=>{var{ad:t,adUnitPath:n}=e;return{ad:t,adUnitPath:n}})),e.withType("dfp-ad-complete").mapTo(void 0));function _a(e,t){var{adDisplaying$:n,adFinished$:r,adBlocked$:i,adBlockedUnique$:a,adSkippable$:s,videoIfAdsNotDisabled$:o,analyticsVolume$:u,animatedClipDisplaying$:c,captionsDisplayMode$:l,config$:d,contentResuming$:h,cne360AnimationInterval$:p,cne360CanvasSource$:f,cne360LatLong$:m,cne360MouseActive$:g,cne360MouseDrag$:v,currentTimeInMs$:y,currentVideo$:b,inSyncWithLiveStream$:_,seekLatestAfterPrerollForLive$:T,isCurrentlySticky$:w,isLiveVideo$:S,isPlaying$:C,loading$:E,mute$:k,playerEvent$:O,playlist$:x,showLiveEndCard$:A,showShareDropdown$:P,showPersistentMute$:I,smallLayout$:L,updateMessageOverlay$:M,videoView$:D,videoOrAdStart$:R,videoEndedOrSwitched$:N,widthHeight$:j}=e;return{viewModel$:ha({adDisplaying$:n,adFinished$:r,adBlocked$:i,adBlockedUnique$:a,videoIfAdsNotDisabled$:o,adSkippable$:s,adUnit$:ba(O),animatedClipDisplaying$:c,captionsDisplayMode$:l,cne360AnimationInterval$:p,cne360CanvasSource$:f,cne360LatLong$:m,cne360MouseActive$:g,cne360ShowCompass$:ya(b,v),cneVideoTitle$:ma(b,d),contentResuming$:h,currentTime$:y,currentVideo$:b,isContinuousPlay$:va(d),isFullscreen$:O.withType("fullscreen").pluck("value"),isInSyncWithLiveStream$:_,seekLatestAfterPrerollForLive$:T,isCurrentlySticky$:w,isLiveVideo$:S,isPlaying$:C,loading$:E,messageOverlay$:M,mute$:k,playerType$:d.pluck("playerConfig","playerType"),playlist$:x,showLiveEndCard$:A,showPersistentMute$:I,showShareDropdown$:P,smallLayout$:L,userVolume$:u,videoOrAdStart$:R,videoEndedOrSwitched$:N,viewCount$:D,volume$:ga(t)(O),widthHeight$:j}).publishBehavior({}).refCount()}}var Ta=(e,t,n)=>{var r=((e,t)=>[e._cne&&e._cne[t],e[t]])(e,t);return n?e===e.top?r:[...r,...Ta(e.parent,t,n)]:r};var wa=(e,t,n)=>e.mapTo(!0).merge(t.withType("ended").withLatestFrom(n,((e,t)=>t))).distinctUntilChanged().publishReplay(1).refCount(),Sa=(e,t)=>e.filterByLatestFrom(t,((e,t)=>!t));function Ca(e){var{toggleUserActive$:t,adRestart$:n,captionsDisplayMode$:r,captionsUpdateTextTrackDisplay$:i,closeMessage$:a,cneOverlay$:s,config$:o,currentVideo$:u,enterFullScreen$:c,exitFullScreen$:l,facadeReady$:d,focusChanged$:h,initializeInBandCaptions$:p,infinityId$:f,isLiveVideo$:m,liveLoadingState$:g,loadVideoId$:v,loadCaptions$:y,mouseLeavePlayer$:b,mute$:_,playerEvent$:T,saveSettings$:w,scrub$:S,seekLatest$:C,posterFrame$:E,setTime$:k,settingsMenu$:O,reportUserActivity$:x,settingsSubMenu$:A,shouldPause$:P,mergedPlay$:I,shouldShareVideo$:L,volume$:M,widthHeight$:D}=e,R=function(e){var{config$:t,facadeReady$:n,ready$:r}=e,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window,a=t.map((e=>{var{canAccessParent:t,playerConfig:n}=e;return[n.onReady,t]})).filter((e=>{var[t]=e;return"string"==typeof t})).switchMap((e=>di.from(Ta(i,...e)))).distinct().filter((e=>"function"==typeof e));return r.withLatestFrom(n).switchMap((e=>{var[,t]=e;return a.map((e=>({callback:e,facade:t})))}))}({config$:o,facadeReady$:d,ready$:T.withType("ready")});return{adRestart$:n,autoplay$:wa(v,T,o.pluck("isContinuousPlay")),captionsDisplayMode$:r,captionsUpdateTextTrackDisplay$:i,closeMessage$:a,cneOverlay$:s,currentVideo$:u,enterFullScreen$:c,exitFullScreen$:l,focusChanged$:h,initializeInBandCaptions$:p,infinityId$:f,isLiveVideo$:m,liveLoadingState$:g,loadCaptions$:y,mouseLeavePlayer$:b,mute$:_,onReadyCallback$:R,saveSettings$:w,scrub$:S,seekLatest$:C,posterFrame$:E,setTime$:k,settingsMenu$:O,reportUserActivity$:x,settingsSubMenu$:A,shouldPause$:P,mergedPlay$:I,shouldShareVideo$:L,toggleUserActive$:t,updateScrubVideo$:Sa(u,o.pluck("isMobile")),volume$:M,widthHeight$:D}}function Ea(e,t){return{cneBeacon:yi(e),cneEvents:Ci(e),cookies:e,comscore:Pi(e),facebook:Ii(e),googleAnalytics:Ni(e),moat:ji(e),moatContent:Fi(e),nielsen:Vi(e),permutive:ra(e),sparrow:Ji(e),view:_a(e,t),vjs:Ca(e)}}function ka(e){var{library$:t,events$:n}=e;return n.bufferedWith(t,((e,t)=>({event:e,library:t}))).do((e=>{var{event:t,library:n}=e;return n(t)}))}var Oa=n(4401),xa=491;function Aa(e){var{targetDiv:t,width:n}=e,r=(e=>{switch(!0){case e<171:return"small-mini";case e>=171&&e<320:return"extra-small";case e>=320&&e<xa:return"small";case e>=xa&&e<800:return"medium";case e>=800&&e<1024:return"large";default:return"extra-large"}})(n);t.setAttribute("data-size",r)}var Pa=n(7317).Z,Ia={},La=e=>e in Ia?Ia[e]:(Pa("could not find localized message for key: "+e),""),Ma="cne-360",Da="cne-360-has-dragged",Ra="cne-360-dragging",Na="cne-skippable",ja="cne-fullscreen",Ua="cne-insync-live",Fa="cne-is-live",$a="cne-live-hide-indicator",Ba="cne-live-ended",Va="cne-loading",qa="cne-resuming",Ha="cne-scrubbed",Wa="cne-scrubbing",za="cne-paused",Ga="cne-playing",Ka=e=>{var{cnePlaylistContainer:t}=e;return(e,n)=>{t&&t.update(e,n)}},Xa=e=>t=>{var n=e.el().parentNode;t?n.classList.add(ja):n.classList.remove(ja)},Ya=e=>t=>t?e.addClass(Ua):e.removeClass(Ua),Qa=e=>()=>{e.trigger("intent:seek-latest")},Ja=e=>(t,n)=>{var{cneMessage:r}=e;t.projection_type_360&&!n?r.showMessage({message:La("cne-support-360-message"),buttonText:La("cne-support-360-button-text"),buttonIntent:"intent:show-360-message-overlay"}):r.hideMessage()},Za=e=>t=>{e.el_&&(t?e.addClass(Fa):e.removeClass(Fa))},es=e=>t=>{var{controlBar:{cneLiveIndicator:n}}=e;!t.live_metadata||(t.live_metadata.is_currently_broadcasting?(n.enable(),e.removeClass($a)):(n.disable(),e.addClass($a)))},ts=e=>t=>{e.el_&&(t?(e.addClass(Ga),e.removeClass(za)):(e.addClass(za),e.removeClass(Ga)))},ns=e=>t=>{e.el_&&e.el_.parentNode.classList[t?"add":"remove"]("cne-sticky")},rs=e=>t=>{e.el_&&[Va,Wa,Ha].forEach((n=>{t.indexOf(n)>-1?e.addClass(n):e.removeClass(n)}))},is=e=>t=>{e.update(t)},as=e=>t=>{t?e.addClass(Ra):e.removeClass(Ra)},ss=e=>t=>{Aa(t),e.cne360Container.updateSize(t)},os=e=>t=>{ia(t)&&(t?e.addClass(Ba):e.removeClass(Ba))},us=e=>t=>{var{persistentShare:{shareDropdown:n}}=e;n.update(t)},cs=e=>t=>{t.share_links?e.show():e.hide()},ls=e=>t=>{t||e.addClass("cne-non-continuous")},ds=e=>()=>e.render(),hs=e=>t=>{e.updateSrc(t)},ps=e=>{var{cne360Compass:t,cne360Container:n}=e;return e=>{var{long:r,phi:i,theta:a}=e;ia(t)&&ia(n)&&(t.updateRotation(r),n.updatePhiTheta(i,a))}},fs=e=>t=>{e.setAdUnit(t.adUnitPath)},ms=e=>t=>{t.share_links&&e.setVideo(t)},gs=e=>t=>{var{url:n}=t;n&&e.setVideo(t)},vs=e=>t=>{var n=!!t.live_metadata;e&&n&&e.update(t)},ys=e=>t=>{var{parentNode:n}=e.el()||{};t.projection_type_360?n.classList.add(Ma):n.classList.remove(Ma)},bs=e=>t=>e.update(t),_s=e=>t=>{var{adBlocked:n}=t;return!1!==n&&e.removeCueContainer()},Ts=e=>t=>t.cue_points&&t.cue_points.length&&e.addCueIndicators(t),ws=e=>t=>t&&e.updateCuePostMidroll(t),Ss=e=>t=>t?e.addClass(Da):e.removeClass(Da),Cs=e=>t=>e.update(t),Es=e=>t=>e.update(t),ks=e=>t=>{var{adContainer:n,controlBar:{progressControl:{seekBar:r}}}=e;r.allowTabFocus(!t),n.updateFocusable(t)},Os=e=>t=>t?e.addClass(Na):e.removeClass(Na),xs=e=>t=>e.update(t),As=e=>()=>e.addClass("cne-has-started"),Ps=e=>t=>{var{controlBar:{cneVolumeAlert:n}}=e;n.update(t)},Is=e=>t=>{e.controlBar.updateTabOrder(t)},Ls=e=>t=>{t?e.addClass(qa):e.removeClass(qa)};const Ms=function(e,t){var{viewModel$:n}=e,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Oa.r,{cneAnimatedClip:i,cneBigPlayTitle:a,cneVideoTitle:s,controlBar:o,cneOverlay:u,cne360Container:c,persistentMute:l,persistentShare:d}=t,{cneMessageOverlay:h,cneLiveOverlay:p,shareOverlay:{shareEmbed:f,shareUrl:m}}=u,{progressControl:{seekBar:g}}=o;return n.sampleTime(0,r).do(fa("adDisplaying")(pa(ia)(ks(t)))).do(fa("adSkippable")(pa(ia)(Os(t)))).do(fa("animatedClipDisplaying")(pa(ia)(Cs(i)))).do(fa("adUnit")(pa(ia)(fs(f)))).do(fa("cne360AnimationInterval")(ds(c))).do(fa("cne360CanvasSource")(hs(c))).do(fa("cne360LatLong")(pa(ia)(ps(t)))).do(fa("cne360MouseActive")(pa(ia)(as(t)))).do(fa("cne360ShowCompass")(pa(ia)(Ss(t)))).do(fa("cneVideoTitle")(pa(ia)(Es(a)))).do(fa("cneVideoTitle")(pa(ia)(bs(s)))).do(fa("videoIfAdsNotDisabled")(pa(ia)(Ts(g)))).do(fa("adFinished")(pa(ia)(ws(g)))).do(fa("adBlockedUnique")(pa(ia)(_s(g)))).do(fa("videoEndedOrSwitched")(pa(ia)(_s(g)))).do(fa("currentVideo","is360Supported")(pa(ia)(Ja(t)))).do(fa("currentVideo")(pa(ia)(ys(t)))).do(fa("currentVideo")(pa(ia)(vs(p)))).do(fa("currentVideo")(pa(ia)(es(t)))).do(fa("currentVideo")(pa(ia)(ms(f)))).do(fa("currentVideo")(pa(ia)(gs(m)))).do(fa("currentVideo")(pa(ia)(cs(d)))).do(fa("loading")(pa(ia)(rs(t)))).do(fa("isContinuousPlay")(ls(t))).do(fa("isFullscreen")(Xa(t),!1)).do(fa("isInSyncWithLiveStream")(Ya(t))).do(fa("seekLatestAfterPrerollForLive")(Qa(t))).do(fa("isLiveVideo")(Za(t))).do(fa("isPlaying")(pa(ia)(ts(t)))).do(fa("isCurrentlySticky")(pa(ia)(ns(t)))).do(fa("messageOverlay")(pa(ia)(is(h)))).do(fa("currentVideo","playlist")(Ka(t))).do(fa("showLiveEndCard")(os(t))).do(fa("showPersistentMute")(xs(l))).do(fa("showShareDropdown")(us(t))).do(fa("videoOrAdStart")(pa(ia)(As(t)))).do(fa("userVolume")(pa(ia)(Ps(t)))).do(fa("widthHeight")(pa(ia)(ss(t)))).do(fa("contentResuming")(pa(ia)(Ls(t)))).do(fa("smallLayout")(pa(ia)(Is(t))))};var Ds,Rs=window.navigator&&window.navigator.userAgent||"",Ns=/Android/i.test(Rs),js=(/Edge/i.test(Rs),/iPad/i.test(Rs)),Us=/iPhone/i.test(Rs)&&!js,Fs=/iPod/i.test(Rs),$s=Us||js||Fs,Bs=(Ds=Rs.match(/OS (\d+)_/i))&&Ds[1]?Ds[1]:null,Vs="";function qs(){return Vs.length>0?Vs:Vs=Rs}function Hs(){return $s||Ns}function Ws(){var e=qs();return/safari\//i.test(e)&&!/chrom/i.test(e)}var zs=function(){var e=0;if("Microsoft Internet Explorer"==navigator.appName){var t=navigator.userAgent;null!=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})").exec(t)&&(e=parseFloat(RegExp.$1))}else if("Netscape"==navigator.appName){var n=navigator.userAgent;null!=new RegExp("Trident/.*rv:([0-9]{1,}[.0-9]{0,})").exec(n)&&(e=parseFloat(RegExp.$1))}return e}();function Gs(e){var t=e.map((e=>e?parseInt(e):0));return 1e4*t[0]+100*t[1]+t[2]}var Ks,Xs=!(zs||function(e){var t=/android[^\d]*(\d*)\.(\d*)\.?(\d*)?/i.exec(qs());if(!t||!t[1])return!1;var n=Gs(e.split("."));return Gs(t.splice([1]))<n}("4.4.4")||(Ks=qs(),/android/i.test(Ks)&&/aft[a-z]?\sbuild/i.test(Ks)));const Ys=Xs;var Qs=new Set(["application/x-mpegURL","application/vnd.apple.mpegURL","audio/x-mpegURL"]);function Js(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ys;if(!t){var n=e.filter((e=>{var{type:t}=e;return!Qs.has(t)}));return n}return e}var Zs=n(90);function eo(e){var{escape:t=!0,removeNull:n=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t?encodeURIComponent:e=>e;return Object.keys(e).map((t=>n&&null==e[t]?null:"".concat(r(t),"=").concat(r(e[t])))).filter(Boolean).join("&")}function to(e){var t,{live_metadata:n}=e;return n&&(t=(0,Zs.Z)(n.url)),!(!t||!t.searchParams.get("start"))}function no(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ro(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?no(Object(n),!0).forEach((function(t){io(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):no(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function io(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ao(e){return t=>{var n=eo({videoIndex:e,requester:"oo"});return e++,t.map((e=>ro(ro({},e),{},{src:e.src.includes("?")?e.src.concat("&",n):e.src.concat("?",n)})))}}function so(e){for(var t=document.activeElement;e&&t&&"BODY"!==t.tagName;){if(t.id===e)return!0;t=t.parentNode}return!1}var oo={facebook:"height=400,width=640,scrollbars=no",twitter:"height=450,width=550"},uo="height=400,width=600";function co(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{_openLink:r=lo,_openEmail:i=ho}=n,{share_links:a}=e,s=a[t];if("email"===t)i(s);else{var o=oo[t]||uo;r(s,"share",o)}}function lo(e,t,n){window.open(e,t,n)}function ho(e){window.open(e)}var po=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return["subtitles","captions"].includes(e.kind)&&void 0===e.track};function fo(e){var t=(e.remoteTextTracks().tracks_||[]).find((e=>po(e)));t&&e.trigger("cne-texttrackadded",t),e.remoteTextTracks().on("addtrack",(t=>{var{track:n}=t;po(n)&&e.trigger("cne-texttrackadded",n)})),e.textTracks().on("addtrack",(t=>{var{track:n}=t;e.tech_.featuresNativeTextTracks&&po(n)&&(e.cneTextTrackDisplay.show(),e.tech_.emulateTextTracks(),e.trigger("cne-texttrackadded",n))}))}var mo={disabled:"cne-captions-disabled",hidden:"cne-captions-off",showing:"cne-captions-on"};function go(e,t){e.remoteTextTracks()&&e.remoteTextTracks().tracks_.forEach((t=>{po(t)||e.removeRemoteTextTrack(t)}));var n=e.remoteTextTracks().tracks_.length||!!e.textTracks().tracks_.find((e=>po(e)));if(t&&t.vtt){var r=e.addRemoteTextTrack({id:"player-captions",src:t.vtt.src,kind:"captions",srclang:"en",label:La("cne-player-caption-label"),default:!0},!1);e.trigger("cne-texttrackadded",r)}else n||e.trigger("cne-texttrackadded",null)}function vo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function yo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vo(Object(n),!0).forEach((function(t){bo(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function bo(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var _o=e=>{var{callback:t,facade:n}=e;return t(n)},To=e=>t=>{var{action:n,video:r}=t;return e(r,n)},wo=e=>()=>e.dfp.restartAd(),So=e=>t=>e.autoplay(t),Co=e=>t=>e.dfp.video(t),Eo=e=>t=>{var{width:n,height:r,fullscreen:i}=t,a=i?"fullscreen":"normal";e.dfp.resize(n,r,a)},ko=e=>t=>{e.trigger("player-set-src"),e.src(t)},Oo=e=>t=>{e.muted(t),e.dfp.mutedConfig(t)},xo=e=>t=>{var{level:n}=t;return e.volume(n)},Ao=e=>t=>e.currentTime(t),Po=e=>t=>!!e.el_&&e.poster(t),Io=e=>t=>{var{isPlaying:n,hasReplayParams:r}=t,i=e.seekable();i.length&&(e.currentTime()<i.end(0)&&!r&&e.currentTime(i.end(0)),n||e.play())},Lo=e=>()=>e.requestFullscreen(),Mo=e=>()=>e.exitFullscreen(),Do=e=>()=>{e.paused()&&(e.play(),e.trigger("_coordinator:play"))},Ro=e=>()=>{e.paused()||(e.pause(),e.trigger("_coordinator:pause"))},No=e=>t=>{var{captions:n,displayMode:r}=t;n&&(n.mode=r),e.controlBar.cneCaptionsButton.update(r),e.cneTextTrackDisplay.updateCaptionsVisibility(r)},jo=(e,t)=>n=>{e.updateVideo(n),t.updateVideo(n)},Uo=(e,t)=>n=>{e.updatePosition(n),t.updatePosition(n)},Fo=e=>t=>{e.setVideoData&&e.setVideoData({isLive:t})},$o=e=>t=>e.update(t),Bo=e=>()=>e.hideMessage(),Vo=e=>()=>e.updateDisplay(),qo=e=>t=>e.dfp.infinityId(t),Ho=e=>t=>e.saveSettings(t),Wo=e=>t=>{e.toggleMenu(t)},zo=e=>t=>{var{menu:n,display:r}=t;e.cneSettingsMenu.toggleSubMenu(n,r)},Go=e=>t=>{t&&e.reportUserActivity()},Ko=e=>()=>e.userActive(!e.userActive()),Xo=e=>()=>e.userActive(!1),Yo=e=>()=>{var{controlBar:{cneSettings:t}}=e,n=function(e){for(var t,n=0;n<e.length;n++)if(so(e[n].el().id)){t=e[n].name();break}return t}([t]);e.trigger("focusedComponent",n)},Qo=e=>t=>{var{loading:n,video:r}=t;n?e.trigger("intent:show-live-waiting-message-overlay",{image:r.brand_image}):e.trigger("intent:close-overlay")};function Jo(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:co,{adRestart$:r,autoplay$:i,captionsDisplayMode$:a,captionsUpdateTextTrackDisplay$:s,closeMessage$:o,cneOverlay$:u,currentVideo$:c,enterFullScreen$:l,exitFullScreen$:d,focusChanged$:h,initializeInBandCaptions$:p,infinityId$:f,isLiveVideo$:m,liveLoadingState$:g,loadCaptions$:v,mouseLeavePlayer$:y,mute$:b,onReadyCallback$:_,saveSettings$:T,scrub$:w,seekLatest$:S,posterFrame$:C,setTime$:E,settingsMenu$:k,reportUserActivity$:O,settingsSubMenu$:x,shouldPause$:A,mergedPlay$:P,shouldShareVideo$:I,toggleUserActive$:L,updateScrubVideo$:M,volume$:D,widthHeight$:R}=e,{cneOverlay:N,cneMessage:j,controlBar:{cneSettings:U,progressControl:{seekBar:{cneScrubberThumb:F}}},cneTextTrackDisplay:$,cneScrubPoster:B}=t;return di.merge(r.do(wo(t)),I.do(To(n)),y.do(Xo(t)),b.do(Oo(t)),D.do(xo(t)),i.do(So(t)),s.do(Vo($)),c.do(Co(t)).map((e=>{var{sources:t}=e;return t})).map((e=>Js(e))).map(ao(0)).do(ko(t)).withLatestFrom(b,((e,t)=>t)).do(Oo(t)),l.do(Lo(t)),d.do(Mo(t)),f.do(qo(t)),_.do(_o),P.do(Do(t)),A.do(Ro(t)),w.do(Uo(F,B)),S.withLatestFrom(c,((e,t)=>{var{live_metadata:n}=t;return{isPlaying:e,live_metadata:n}})).map((e=>yo(yo({},e),{},{hasReplayParams:to(e)}))).do(Io(t)),E.do(Ao(t)),C.do(Po(t)),L.do(Ko(t)),u.do($o(N)),o.do(Bo(j)),R.do(Eo(t)),g.do(Qo(t)),m.do(Fo($)),v.do((e=>go(t,e))),p.do((()=>fo(t))),a.do(No(t)),T.do(Ho(U)),k.do(Wo(U)),x.do(zo(U)),O.do(Go(t)),M.do(jo(F,B)),h.do(Yo(t))).mapTo(t).distinctUntilChanged()}var Zo="cneplayer";function eu(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100,r="";if(n){var i=new Date;i.setTime(i.getTime()+24*n*60*60*1e3),r="; expires="+i.toGMTString()}document.cookie=encodeURIComponent(Zo+e)+"="+encodeURIComponent(t)+r+"; path=/"}function tu(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Zo,n=encodeURIComponent(t+e)+"=",r=document.cookie.split(";"),i=0;i<r.length;i++){for(var a=r[i];" "===a.charAt(0);)a=a.substring(1,a.length);if(0===a.indexOf(n))return decodeURIComponent(a.substring(n.length,a.length))}return null}var nu="count";function ru(){var e=tu(nu),t=parseInt(e)||0;return eu(nu,t+1)}var iu=e=>t=>{var{level:n}=t;e("volume",n)},au=e=>t=>{e("muted",t?1:0)},su=e=>t=>{"disabled"!==t.displayMode&&e("captions",t.displayMode||"hidden")};const ou=function(e){var{mute$:t,volume$:n,videoView$:r,captionsDisplayMode$:i,playerEvent$:a}=e,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:eu,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ru,u=a.withType("playing").take(1);return di.merge(t.skipUntil(u).do(au(s)),n.skipUntil(u).do(iu(s)),r.do(o),i.skipUntil(u).do(su(s)))};function uu(e,t){var{cneBeacon:n,cneEvents:r,cookies:i,comscore:a,facebook:s,googleAnalytics:o,moat:u,moatContent:c,permutive:l,sparrow:d,view:h,vjs:p}=e;return{cneBeacon$:ka(n),cneEventDriver$:ka(r),comscore$:ka(a),cookies$:ou(i),facebookPixel$:ka(s),gooleAnalytics$:ka(o),moat$:ka(u),moatContent$:ka(c),sparrow$:ka(d),permutive$:ka(l),videojs$:Jo(p,t),view$:Ms(h,t)}}function cu(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document;return di.fromEvent(e,"visibilitychange").share().map((()=>e.hidden)).startWith(e.hidden)}function lu(e,t){return di.from(t).mergeMap((t=>di.fromEvent(e,t))).share()}function du(e,t){return di.fromEventPattern((n=>{e.on(t,n)}),(n=>{e.off(t,n)})).share()}function hu(e){var t;return{documentHidden$:cu(),windowEvent$:di.merge((t=lu(window.top,["scroll","resize"]),e.switchMap((e=>{var{canAccessParent:n}=e;return n?t:di.never()}))),lu(window,["error","mousemove","mouseup"])).share()}}function pu(e,t){return e.map((e=>{var n=t.duration();return{type:"percentComplete",value:n?e/n:0}})).startWith({type:"percentComplete",value:0})}const fu={100:"VAST_MALFORMED_RESPONSE",101:"VAST_SCHEMA_VALIDATION_ERROR",102:"VAST_UNSUPPORTED_VERSION",200:"VAST_TRAFFICKING_ERROR",201:"VAST_UNEXPECTED_LINEARITY",202:"VAST_UNEXPECTED_DURATION_ERROR",300:"VAST_WRAPPER_ERROR",301:"VAST_LOAD_TIMEOUT",302:"VAST_TOO_MANY_REDIRECTS",303:"VAST_NO_ADS_AFTER_WRAPPER",400:"VIDEO_PLAY_ERROR",402:"VAST_MEDIA_LOAD_TIMEOUT",403:"VAST_LINEAR_ASSET_MISMATCH",405:"VAST_PROBLEM_DISPLAYING_MEDIA_FILE",500:"OVERLAY_AD_PLAYING_FAILED",501:"NONLINEAR_DIMENSIONS_ERROR",502:"OVERLAY_AD_LOADING_FAILED",503:"VAST_NONLINEAR_ASSET_MISMATCH",602:"COMPANION_REQUIRED_ERROR",603:"COMPANION_AD_LOADING_FAILED",900:"UNKNOWN_ERROR",901:"VPAID_ERROR",1e3:"IMA_SDK_ERROR_CODE",1005:"FAILED_TO_REQUEST_ADS",1007:"VAST_ASSET_NOT_FOUND",1009:"VAST_EMPTY_RESPONSE",1010:"UNKNOWN_AD_RESPONSE",1011:"UNSUPPORTED_LOCALE",1012:"ADS_REQUEST_NETWORK_ERROR",1013:"INVALID_AD_TAG",1020:"STREAM_INITIALIZATION_FAILED",1021:"ASSET_FALLBACK_FAILED",1101:"INVALID_ARGUMENTS",1105:"INVALID_ADX_EXTENSION",120:"NATIVE_MESSAGE_ERROR"};function mu(e,t,n){if(!t||0==t.length||!n||0==n.length||t.length!==n.length)return e;var r=t.indexOf("GDFP");return r>=0?n[r]:e}var gu=new Map([["AD_BREAK_READY","dfp-ad-adbreakready"],["AD_CAN_PLAY","dfp-ad-canplay"],["AD_ERROR","dfp-ad-error"],["AD_METADATA","dfp-ad-metadata"],["ALL_ADS_COMPLETED","dfp-ad-alladscompleted"],["CLICK","dfp-ad-click"],["COMPLETE","dfp-ad-complete"],["CONTENT_PAUSE_REQUESTED","dfp-content-pause"],["CONTENT_RESUME_REQUESTED","dfp-content-resume"],["DURATION_CHANGE","dfp-ad-durationchange"],["FIRST_QUARTILE","dfp-ad-firstquartile"],["IMPRESSION","dfp-ad-impression"],["LOADED","dfp-ad-loaded"],["ADS_MANAGER_LOADED","dfp-ads-manager-loaded"],["MIDPOINT","dfp-ad-midpoint"],["PAUSED","dfp-ad-paused"],["RESUMED","dfp-ad-resume"],["SKIPPED","dfp-ad-skipped"],["SKIPPABLE_STATE_CHANGED","dfp-ad-skippablestatechanged"],["STARTED","dfp-ad-started"],["THIRD_QUARTILE","dfp-ad-thirdquartile"],["VOLUME_CHANGED","dfp-ad-volumechange"],["VOLUME_MUTED","dfp-ad-muted"]]),vu={type:"dfp-ad-requested"},yu={type:"dfp-ad-timeout"};function bu(e){var{adsManager$:t,dfpAdEvent$:n,dfpEventTypes$:r,requestAds$:i,adRequestData$:a,timeoutAds$:s,map:o=gu}=e;return r.switchMap((e=>di.from(o).mergeMap((t=>{var[r,i]=t;return n.withType(e[r]).map((e=>({originalEvent:e,type:i})))})).merge(i.mapTo(vu)).merge(s.mapTo(yu)).withLatestFrom(a.pluck("adUnitPath").startWith(null),Tu).withLatestFrom(t.startWith(null),_u).map(wu).map(Su)))}function _u(e,t){return Object.assign(e,{adsManager:t})}function Tu(e,t){return Object.assign(e,{adUnitPath:t})}function wu(e){if(!e.originalEvent||"function"!=typeof e.originalEvent.getAd)return e;var t=e.originalEvent.getAd();if(!t||!t.getAdId())return e;var n=t.getAdId(),r=t.getWrapperAdSystems(),i=t.getWrapperAdIds();return Object.assign(e,{ad:{adId:t.getAdId(),advertiser:t.getAdvertiserName(),apiFramework:t.getApiFramework(),contentType:t.getContentType(),creativeadId:t.getCreativeAdId(),creativeId:t.getCreativeId(),description:t.getDescription(),duration:t.getDuration(),isLinear:t.isLinear(),mediaUrl:t.getMediaUrl(),podInfo:t.getAdPodInfo(),wrapperAdIds:t.getWrapperAdIds(),wrapperAdSystems:t.getWrapperAdSystems(),dfpLineItem:mu(n,r,i)}})}function Su(e){if(!e.originalEvent||"function"!=typeof e.originalEvent.getError)return e;var t=e.originalEvent.getError();return t?Object.assign(e,{adError:{type:t.getType(),code:fu[t.getErrorCode()],message:t.getMessage(),innerError:t.getInnerError()}}):e}function Cu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Eu(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Cu(Object(n),!0).forEach((function(t){ku(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Cu(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ku(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ou=["dispose","ended","error","keyup","fullscreenchange","loadeddata","loadedmetadata","pause","play","playing","useractive","userinactive","emptied","ended","ready","seeked","seeking","timeupdate","volumechange","click","drag","stalled","resize","player-set-src","hls-request-manifest","hls-request-playlist","hls-request-segment-1","adtimeupdate"],xu=function(e){var t=[];if(!e.next)return t;for(var n=e.next();!1===n.done;n=e.next())t.push(n.value);return t}(gu.values()).concat(vu.type).concat(yu.type);function Au(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ou,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:xu,r=du(e,t),i=du(e,n);e.on("contentcanplay",(()=>{e.currentTime(e.ads.snapshot.currentTime)}));var a=Iu(e,r),s=Lu(e,r.withType("ready")),o=r.withType("error").map((()=>{var t=e.error();return{type:"errorCode",value:t?t.code:0}})),u=pu(a.pluck("value"),e),c=r.withType("fullscreenchange").map((()=>({type:"fullscreen",value:e.isFullscreen()}))).startWith({type:"fullscreen",value:!1}),l=di.fromEvent(e,"cne-texttrackadded",((e,t)=>({type:"cne-texttrackadded",value:t})));return r.merge(i,a,o,c,u,s,l).map(Pu(e)).distinctUntilChanged(((e,t)=>e.type===t.type&&"ended"===t.type))}function Pu(e){return t=>{if(t.state)return t;var{state:n}=e.ads||{};return Eu(Eu({},t),{},{state:n})}}function Iu(e,t){return t.withType("timeupdate","adtimeupdate").map((()=>({type:"currentTime",value:e.currentTime()}))).share()}function Lu(e,t){return t.map((()=>e.tech?{type:"tech",value:e.tech({IWillNotUseThisInPlugins:!0})}:""))}class Mu{constructor(e){this.getValue=()=>e.getValue()}get view(){return(this.getValue()||{}).view}get player(){return(this.getValue()||{}).videojs}}function Du(e,t){var n=new Mu(e);function r(e){var{[e]:t}=n.view||{};return t}var i={currentTime(t){if(void 0===t)return r("currentTime")||0;e.next({type:"setTime",time:t})},currentVideo:()=>r("currentVideo")||null,dispose(t){t&&n.player.off(),e.next({type:"dispose"})},duration:()=>n.player.duration(),getCuePoints:()=>[],getPlayCount(){return e=tu(nu),parseInt(e)||1;var e},isInterlude:()=>"interlude"===r("playerType"),isLoading:()=>r("loading")||false,isPlaying:()=>r("isPlaying")||false,isPlaylist:()=>"playlist"===r("playerType"),isMuted:()=>r("mute"),load(t){if(arguments.length>1&&void 0!==arguments[1]&&arguments[1]){var{player:r}=n;return r.trigger("intent:load-video",{video:{id:t}})}e.next({type:"load",videoId:t})},off(e,t){var{player:r}=n;r.el_&&r.off(e,t)},on(e,t){n.player.on(e,(function(e,n){t(n,e)}))},pause(){e.next({type:"pause"})},play(){e.next({type:"play"})},setAdKeyValues(){},setNextVideo(t){var n="string"==typeof t?{id:t}:t;e.next({type:"nextVideo",video:n})},volume(t){if(void 0===t){var n=r("volume");return parseFloat(n)?n:1}e.next({type:"volume",level:t})},_overrideAutoplay(n,r){((e,t,n)=>{if(!t||t!==e)throw new Error("CNE Player: ".concat(n," is a private method"))})(t,r,"_overrideAutoplay"),e.next({type:"autoplayOverride",data:n})},_onConsentUpdated(t){e.next({type:"consentUpdated",data:t})},_markPersistent(t){e.next({type:"persistent",persistent:t})},_markCurrentlySticky(t){e.next({type:"sticky",isCurrentlySticky:t})},_requestCancelPersist(){n.player.trigger("_coordinator:cancel-persistent")},_trackPlayOnPage(){e.next({type:"play-on-page"})},_trackCNESparrow(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};e.next({type:"track",data:{category:n,event:{type:t},meta:r}})}};return e.next({type:"ready",facade:i}),i}function Ru(e,t,n){var r=di.fromEvent(e,"intent:show-share").map((()=>({action:"show",type:"share",source:"click"}))),i=di.fromEvent(e,"intent:show-share-keyboard").map((()=>({action:"show",type:"share",source:"keyboard"}))),a=di.fromEvent(e,"intent:show-share-embed").map((()=>({action:"show",type:"embed"}))),s=di.fromEvent(e,"intent:show-share-url").map((()=>({action:"show",type:"url"}))),o=di.fromEvent(e,"intent:show-message-overlay").merge(t,n).map((()=>({action:"show",type:"message"}))),u=[],c=r.merge(i,a,s,o).do((e=>u.push(e)));return di.fromEvent(e,"intent:close-overlay").map((()=>{var e=u.pop();if(e)return{action:"hide",type:e.type}})).filter((e=>!!e)).merge(c).share()}function Nu(e){return di.fromEvent(e,"intent:share",((e,t)=>t.action))}function ju(e,t){var n=e.withType("dispose"),r=e.withType("ready").pluck("facade"),i=di.fromEvent(t,"intent:enter-fullscreen"),a=di.fromEvent(t,"intent:exit-fullscreen"),s=di.fromEvent(t,"intent:progress-mouse",((e,t)=>t)),o=di.fromEvent(t,"intent:seek-latest"),u=di.fromEvent(t,"intent:seek-start"),c=di.fromEvent(t,"intent:seek-end"),l=e.withType("nextVideo").pluck("video").startWith(!1),d=e.withType("consentUpdated").pluck("data").map((e=>e||{})).startWith({}),h=di.fromEvent(t,"intent:load-video",((e,t)=>t)).map((e=>e.video.id)),p=e.withType("load").pluck("videoId").merge(h),f=e=>{var t=e.target&&e.target.classList;return t&&(t.contains("vjs-tech")||t.contains("click-mask"))},m=di.fromEvent(t.el_,"touchend").filter((e=>f(e)&&"touchend"===e.type)).share(),g=di.fromEvent(t.el_,"mousedown").filter((e=>{var t=1===e.which||e.buttons&&e.buttons<2;return f(e)&&t})).share(),v=g.filter((e=>e.currentTarget.classList.contains("cne-playing"))),y=g.filter((e=>e.currentTarget.classList.contains("cne-paused"))),b=di.fromEvent(t.el_,"mouseleave"),_=t.$(".persistent-share"),T=di.fromEvent(_,"mouseenter"),w=di.fromEvent(_,"mouseleave"),S=e.withType("volume"),C=di.fromEvent(t,"intent:volume-change",((e,t)=>t)),E=S.merge(C).map((e=>{var{level:t=null}=e;return{type:"intent",level:t}})).filter((e=>null!==e)),k=di.fromEvent(t,"intent:mute-toggle",((e,t)=>t)),O=e.withType("setTime").pluck("time"),x=di.fromEvent(t,"keydown").filter((e=>32===e.keyCode&&e.preventDefault())),A=di.fromEvent(t,"keyup").filter((e=>32===e.keyCode)).map((()=>t.paused()?"play":"pause")).merge(x).share(),P=di.fromEvent(t,"keyup").filter((e=>27===e.keyCode)).share(),I=e.withType("play").merge(du(t,"intent:play")).merge(y).merge(A.filter((e=>"play"===e))),L=e.withType("pause").merge(du(t,["dfp-ad-click","dfp-ad-paused","intent:pause","intent:show-message-overlay"])).merge(v).merge(A.filter((e=>"pause"===e))),M=di.fromEvent(t,"intent:close-message"),D=di.fromEvent(t,"intent:show-360-message-overlay"),R=di.fromEvent(t,"intent:show-live-waiting-message-overlay",((e,t)=>t)).publishReplay(1).refCount(),N=di.fromEvent(t,"intent:toggle-captions"),j=e.withType("autoplayOverride").pluck("data").startWith({override:!1}),U=e.withType("sticky").pluck("isCurrentlySticky").startWith(!1),F=di.fromEvent(t,"intent:save-settings",((e,t)=>t)),$=di.fromEvent(t,"intent:close-settings").mapTo(!1).merge(di.fromEvent(t,"intent:show-settings").mapTo(!0)).merge(P.mapTo(!1)),B=di.fromEvent(t,"intent:hide-settings-submenu",((e,t)=>({menu:t,display:"hide"}))).merge(di.fromEvent(t,"intent:show-settings-submenu",((e,t)=>({menu:t,display:"show"})))),V=di.fromEvent(t,"click").merge(di.fromEvent(t,"keyup").filter((e=>"Tab"===e.key)),di.fromEvent(t,"intent:mute-toggle"),u),q=e.withType("track").map((e=>{var{data:t}=e;return t})),H=e.withType("play-on-page");return{autoplayOverride$:j,closeMessage$:M,cneOverlayIntent$:Ru(t,D,R),dispose$:n,enterFullScreen$:i,exitFullScreen$:a,facadeReady$:r,focusChanged$:V,focusedComponent$:di.fromEvent(t,"focusedComponent",((e,t)=>t)),intentSubject:e,isCurrentlySticky$:U,keepPlaying$:di.fromEvent(t,"intent:keep-playing"),loadVideoId$:p,mouseLeavePlayer$:b,muteToggle$:k,nextVideo$:l,persistentShareEnter$:T,persistentShareLeave$:w,playOnPage$:H,progressMouse$:s,saveSettings$:F,seekStart$:u,seekEnd$:c,seekLatestIntent$:o,setTimeIntent$:O,settingsSubMenuIntent$:B,shareIntent$:Nu(t),shouldPause$:L,shouldPlay$:I,show360MessageOverlayIntent$:D,showLiveWaitingOverlayIntent$:R,toggleCaptionsIntent$:N,touchVideo$:m,toggleSettings$:$,trackSparrowIntent$:q,volumeIntent$:E,consentUpdateIntent$:d}}var Uu=e=>{var{adsManager:t}=e;return!!t&&"function"==typeof t.getAdSkippableState&&t.getAdSkippableState()};var Fu=250;const $u=Number.isFinite||(e=>"number"==typeof e&&window.isFinite(e));function Bu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Vu(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function qu(e,t){var{animated_clip_url_mp4:n,animated_clip_url_webm:r,animated_clip_url_high_mp4:i,animated_clip_url_high_webm:a,animated_clip_still:s}=e,{width:o}=t;return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Bu(Object(n),!0).forEach((function(t){Vu(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Bu(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({action:"show",animated_clip_still:s},o>480?{animated_clip_url_mp4:i,animated_clip_url_webm:a}:{animated_clip_url_mp4:n,animated_clip_url_webm:r})}function Hu(e,t){var{animated_clip_url_mp4:n,animated_clip_url_webm:r,animated_clip_still:i,live_metadata:a,projection_type_360:s}=e,{autoplayEnabled:o,isMobile:u,playerConfig:c}=t,{hasAnimatedThumb:l}=c;return n&&r&&i&&l&&!a&&!s&&!o&&!u}const Wu=e=>{if(!/\d+x\d+/i.test(e))return 16/9;var[t,n]=e.split(/x/i),r=parseInt(t)/parseInt(n);return r<3&&r>0?r:16/9};function zu(e){return di.fromEvent(e,"load")}function Gu(e){var{responseType:t=null,timeout:n=0,withCredentials:r=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return di.create((i=>{var a=new XMLHttpRequest;a.open("GET",e),a.withCredentials=r,a.responseType=t||"",a.timeout=n,a.onload=function(){this.status>=200&&this.status<300?(i.next({body:this.response,message:this.statusText,status:this.status,success:!0}),i.complete()):i.error(Ku(e,this.status,this.statusText))},a.onerror=function(){i.error(Ku(e))},a.ontimeout=function(){i.error(Ku(e))},a.send()}))}var Ku=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"ajax error";return{message:"".concat(n,". Trying to GET ").concat(e,"."),status:t,success:!1}};var Xu,Yu=()=>"".concat("//capture.condenastdigital.com/track","?_o=").concat("cne"),Qu=/http[s]?:/g,Ju=/http[s]?/,Zu=/&(?:redirect|cr)=http[s]?/,ec=/http[^s]/;function tc(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document;if(e){if(!nc(t))return e;if(Zu.test(e)){var n=e.match(Zu)[0],r=n.replace(Ju,"https");e=e.replace(n,r)}return e.replace(Qu,"https:")}}function nc(e){return!!(e&&e.location&&e.location.protocol)&&!ec.test(e.location.protocol)}function rc(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("string"==typeof e)return t&&(e=tc(e)),ic(e)}function ic(e){var t=document.createElement("img");return t.id="cne_"+Math.floor(1e4*Math.random()+1),t.src=e,t}function ac(){if(void 0===Xu)try{Xu=!!window.top.location.href&&"function"==typeof window.top.addEventListener}catch(e){Xu=!1}return Xu}function sc(){return ac()?window.top:window}function oc(){return ac()?window.top.location.href:document.referrer}function uc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function cc(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function lc(e){var{environment:t}=e;pc.init(t)}function dc(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n="".concat(e,": ").concat(t);n=n.substring(0,350),pc.track("error",n)}function hc(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0;pc.track(e,t,n)}var pc={init(e){this.baseUrl=Yu(),this.ssl=e.ssl,this.location=oc(),this.sessionId=tu("sID",""),this.pageId=tu("pID","")},track(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:rc,i=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?uc(Object(n),!0).forEach((function(t){cc(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):uc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({_ts:(new Date).toISOString(),_c:t,_t:e,sID:this.sessionId,pID:this.pageId,pHr:this.location},n);r([this.baseUrl,eo(i)].join("&"),this.ssl)}};var fc=e=>e?decodeURIComponent(e.replace(/%(?![0-9][0-9a-fA-F]+)/g,"%25")):e,mc=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document.cookie;return e.split(/;\s*/).reduce(((e,t)=>{var[n,r]=t.split("=");try{return Object.assign(e,{[n]:decodeURIComponent(r)})}catch(t){return Object.assign(e,{[n]:fc(r)})}}),{})},gc=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:mc(),{pID:t="",sID:n="",CN_sp:r="",CN_xid:i=""}=e,a={baseUrl:Yu(),params:{app:"playerservice",cCh:"videos/show",pHr:window.location.href,pID:t,sID:n,uId:r,xid:i}};return()=>a}(),vc=e=>{var t;try{t=JSON.stringify(e)}catch(e){t=""}return t},yc=e=>{var{guid:t,canAutoplay:n,interludeFailure:r,pageTemplate:i,url:a,errorData:s}=e,{videoId:o,iu:u,playerType:c}=e.initialPlayerConfig||{};return[o,{canAutoplay:n,guid:t,iu:u,playerType:c,interludeFailure:r,pageTemplate:i,url:a,errorData:s}]};function bc(e){var{type:t,category:n,message:r}=e,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},[a,s]=yc(i);return{_ts:(new Date).toISOString(),_c:n,_t:t,cId:a,dim1:vc(s),dim3:r}}var _c=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Image;return(new t).src=e},Tc=function(e){var{type:t,category:n,message:r=""}=e,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{baseUrl:a,params:s}=gc();return _c([a,eo(s),eo(bc({type:t,category:n,message:r},i))].join("&"))};class wc{constructor(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.status=void 0===t.status?200:t.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.url=t.url||"",this._bodyText=e}text(){return Promise.resolve(this._bodyText)}json(){return this.text().then(JSON.parse)}}function Sc(e){if(!e.ok)throw new Error("API responsed with status code ".concat(e.status));return e}function Cc(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{timeout:n,onTimeout:r}=t;return new Promise(((t,i)=>{var a=new XMLHttpRequest,s=()=>i(new TypeError("Network request failed"));a.timeout=n||0,a.onload=()=>{var e={status:a.status,statusText:a.statusText,url:a.responseURL},n="response"in a?a.response:a.responseText;t(new wc(n,e))},a.onerror=s,a.ontimeout=r?r(i):s,a.open("GET",e),a.send()}))}var Ec=n(7317).Z;var kc=n(7317).Z;function Oc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function xc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Oc(Object(n),!0).forEach((function(t){Ac(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Oc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ac(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Pc(e){var{environment:t,playerConfig:n,referenceWindow:r}=e,{playlist:i}=n;return di.create((e=>{!function(e,t,n){var{fetch:r=window.fetch||Cc,_track:i=Tc}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.cnsInfo=e.cnsInfo||[],e.cnsInfo.push=a=>{a&&a.sponsoredVideoId&&(e.cnsInfo[0]=a,r("".concat(t,"/next_video/").concat(a.sponsoredVideoId)).then(Sc).then((e=>e.json())).then(n).catch((e=>{var{message:t}=e;Ec("error fetching cnsInfo:",t),i({type:"Fetch Error (Push)",category:"Video Injection",message:t})})))}}(r._cne,t.base_url,(t=>{var{video:n}=t;kc("late sponsored vid injection:",i),hc("Push Received (Player)","Video Injection");var r=i.videos.slice();r.splice(1,0,n);var a=xc(xc({},i),{},{videos:r});e.next(a)}))}))}var Ic=.95,Lc=.5,Mc=.2;function Dc(e){return di.interval(e)}function Rc(e){return{x:void 0!==e.clientX?e.clientX:e.touches[0].clientX,y:void 0!==e.clientY?e.clientY:e.touches[0].clientY,time:Date.now()}}var Nc=300;function jc(e,t){var n=t?"ad":"video";switch(e){case 1:return"player_".concat(n,"_error_aborted");case 2:return"player_".concat(n,"_error_network");case 3:return"player_".concat(n,"_error_decode");case 4:return"player_".concat(n,"_error_src_not_supported");case 5:return"player_".concat(n,"_error_encrypted");default:return"player_".concat(n,"_error")}}function Uc(e){return[/InvalidStateError\: Failed to execute 'endOfStream' on 'MediaSource'/].some((t=>t.test(e)))}function Fc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Fc(Object(n),!0).forEach((function(t){Bc(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Fc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Bc(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Vc=e=>{var{playerConfig:t,environment:n}=e,r=n.base_url,i={playlistId:t.playlist?t.playlist.id:null,adUnitPath:e.adUnitPath,shareToScene:t.shareToScene};return $c($c({},e),{},{fetchVideo:e=>Gu((e=>"".concat(r,"/next_video/").concat(e,"?").concat(eo(i)))(e)).map((e=>JSON.parse(e.body))).map((e=>{var{video:t}=e;return t}))})},qc=e=>{var{loopVideo:t,playlistId:n}=e.playerConfig;return $c($c({},e),{},{shouldLoop:t&&!n})};function Hc(e){return e.config$.switchMap((e=>{var{playerEvent$:t}=e;return e=>t.withType("dfp-ad-requested").pluck("adUnitPath").startWith(null).map((t=>$c($c({},e),{},{adUnitPath:t})))})(e)).switchMap((e=>{var{playerEvent$:t,intentStreams:n}=e;return e=>n.nextVideo$.merge(t.withType("loadedmetadata").mapTo(!1)).map((t=>$c($c({},e),{},{nextVideoOverride:t})))})(e)).switchMap((e=>{var{playlist$:t}=e;return e=>t.map((t=>$c($c({},e),{},{playlist:t})))})(e)).map(qc).map(Vc)}var Wc=e=>t=>e.playlist?((e,t)=>{var n=e.playlist.videos.map((e=>e.id)),r=n.indexOf(t.id),i=n[(r+1)%n.length];return e.fetchVideo(i)})(e,t):e.nextVideoOverride?e.fetchVideo(e.nextVideoOverride.id):e.shouldLoop?t.live_metadata?e.fetchVideo(t.id):di.of(t):e.fetchVideo(t.next_video.id);function zc(e,t){return di.merge((e=>e.take(1).filter((e=>{var{video:t}=e;return t})).map((e=>{var{video:t}=e;return()=>di.of(t)})))(e),((e,t)=>{var{intentStreams:n,playerEvent$:r,userIdle$:i}=e,a=r.withType("ended").filterByLatestFrom(i,((e,t)=>!t)).merge(n.keepPlaying$).withLatestFrom(t,((e,t)=>t)).filter((e=>e.isContinuousPlay));return a.map(Wc)})(t,e),((e,t)=>t.switchMap((t=>e.intentStreams.loadVideoId$.map((e=>()=>t.fetchVideo(e))))))(t,e))}var Gc=()=>{var e=document.createElement("script");return e.async=!0,e.type="text/javascript",document.head.appendChild(e),e},Kc=(e,t)=>{e.onload=t};const Xc=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Gc,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Kc;return di.create((r=>{var i=t();n(i,(e=>{r.next(e),r.complete()})),i.src=e}))};function Yc(e,t){var n,r=function(e,t){return e.withLatestFrom(t,((e,t)=>{var{is360Supported:n,environment:r}=t,i=r.threejs_path,{projection_type_360:a=null}=e;return{needs360:n&&null!==a,threeJsPath:i,video:e}}))}(e,t),i=r.switchMap((e=>{var{needs360:t,threeJsPath:n,video:r}=e;return t&&void 0===window.THREE?Xc(n).map((()=>({needs360:t,video:r}))):di.of({needs360:t,video:r})})).publishReplay(1).refCount(),[a,s]=i.partition((e=>{var{needs360:t}=e;return t})),o=(n=s,a.switchMap((()=>di.interval(30).takeUntil(n)))),u=function(e,t){return e.skipUntil(t).map((e=>{var{video:{projection_type_360:t}}=e;return t}))}(i,a);return{cne360AnimationInterval$:o,currentVideo$:i.map((e=>{var{video:t}=e;return t})),cne360CanvasSource$:u}}function Qc(e){var{isCurrentlySticky$:t,isFullscreen$:n}=e;return t.combineLatest(n,((e,t)=>e&&!t)).distinctUntilChanged()}function Jc(e,t){return new Date(Zc(t)-e)}function Zc(e){return e&&e.getTime?e.getTime():(new Date).getTime()}var el=1e4,tl=18e5;function nl(e,t){var n=function(e,t){var n={videoId:e};return"".concat(t,"/").concat("player/live_video_metadata","?").concat(eo(n))}(e,t);return Gu(n).map((e=>JSON.parse(e.body)))}function rl(e){var{interval:t=el,buffer:n=tl,config$:r,fetchLiveSource:i=nl,scheduler:a}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=il(e,n)||0;return di.timer(s,t,a).withLatestFrom(r.pluck("environment","base_url")).switchMap((t=>{var[,n]=t;return i(e.id,n)})).filter((t=>{var{video:n}=t;return n.id===e.id&&n.sources.length})).map((t=>{var{video:n}=t;return Object.assign(e,n)})).first()}function il(e,t){var{live_metadata:n={}}=e,{start_date:r}=n;if(!r)return null;var i=new Date(r),a=new Date,s=Jc(t,i);return s>a?s-a:null}function al(e,t,n){var r=e.switchMapTo(n.withType("dfp-content-resume"));return di.merge(e,r).withLatestFrom(t.pluck("captions"),((e,t)=>t))}var sl=["playing","pause","dfp-ad-started","dfp-ad-resume"],ol={spinnerWithBgPoster:[Va,Ha],bgPoster:[Va,Wa],spinner:[Va],none:[]};var ul="MUTED",cl="NEVER";function ll(e,t,n){var{environment:r,playerConfig:i}=n,a=r.canAutoplay===ul,s=i.autoplay&&a;return i.muted||"1"==e||"0"==t||s}var dl=e=>di.create((t=>{var n=new Image;n.onload=()=>{t.next(e),t.complete()},n.onerror=e=>t.error(e),n.src=e}));function hl(e,t,n){var r=e=>e;return e.switchMapTo(t.switchMapTo(n.take(1),r),r)}var pl=di.timer(0,1500);function fl(e){var{currentVideo$:t,shareIntent$:n}=e;return n.filter((e=>"url"!==e&&"embed"!==e)).withLatestFrom(t,((e,t)=>({action:e,video:t})))}function ml(e){var{isLiveVideo$:t,playerEvent$:n,proposedLiveStreamEnd$:r,buffer$:i=di.of(tl),scheduler:a,videoStart$:s}=e;return s.withLatestFrom(t,r,i).switchMap((e=>{var[,t,r,i]=e;return t&&r?di.timer(function(e,t){var n=(new Date).getTime(),r=new Date(e).getTime()+t-n,i=2147483647;if(r>0)return r>i?i:r;return 0}(r,i),a).merge(n.withType("ended")).mapTo(!0):di.of(!1)})).distinctUntilChanged()}var gl=()=>({closeable:!1,message:"cne-support-live-overlay-message",title:"cne-support-live-overlay-title"}),vl=e=>{var{image:t}=e;return{closeable:!1,message:"cne-player-live-available-soon-overlay-message",image:t}},yl=()=>({closeable:!0,message:"cne-support-360-overlay-message"}),bl=e=>{var{video:t}=e;return{buttonIntents:[{type:"intent:load-video",data:{video:t}}],buttonText:"cne-support-error-overlay-button",closeable:!1,iconType:"warning",message:"cne-support-error-overlay-message"}},_l=()=>({buttonIntents:[{type:"intent:keep-playing"},{type:"intent:close-overlay"}],buttonText:"cne-support-idle-overlay-button",closeable:!1,title:"cne-support-idle-overlay-title"});function Tl(e){var{documentHidden$:t,keepPlaying$:n,playerEvent$:r,viewportStatus$:i}=e,a=function(e,t,n){return t.combineLatest(n,((e,t)=>!t&&"FULLY_IN_VIEWPORT"===e)).distinctUntilChanged().switchMap((t=>t?di.of(0):e.withType("ended").scan((e=>e+1),0))).share()}(r,i,t);return{userIdle$:a.map((e=>e>=4)).merge(n.mapTo(!1)).share().startWith(!1).distinctUntilChanged(),showUserIdleMessageOverlay$:a.filter((e=>5===e)).share()}}var wl=/(?:http[s]?:)?(?:\/\/)?[a-z]+\.(?:[a-z]+\.)?[^\/]+\/?|^\/|\/$|\/?\?.*$/;function Sl(e){var[t,n]=e.split(wl);return n||t}function Cl(e,t,n,r){return r.top>0?n-e:n-t}function El(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:document,{top:r,height:i}=t.getBoundingClientRect(),a=n.querySelector("html").clientHeight,s=a-(r+i);return e.map((e=>{var{intersectionRatio:t,intersectionRect:n}=e;return{intersectionRatio:Cl(r,s,t*a,n)/i}}))}function kl(e){return e.IntersectionObserver&&e.IntersectionObserver.toString().length<100}function Ol(){return di.create((e=>{window.parent.postMessage({sentinel:"amp",type:"send-intersections"},"*");var t=t=>{t.source==window.parent&&t.origin!=window.location.origin&&t.data&&"amp"==t.data.sentinel&&"intersection"==t.data.type&&t.data.changes.forEach((t=>e.next(t)))};return window.addEventListener("message",t),()=>window.removeEventListener("message",t)}))}function xl(e,t){return di.create((n=>{var r,i,a=new t((e=>{var[t]=e;n.next(t)}),{root:null,threshold:(r=.1,i=Math.floor(1/r),[...Array(i)].map(((e,t)=>t/i)))});return a.observe(e),()=>a.disconnect()}))}function Al(e){var{ampIO:t=Ol,applyIntersectionTransform:n=El,win:r=window}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{canAccessParent:i,playerConfig:{pageType:a},videoEl:s}=e,o=i&&r.top.IntersectionObserver;switch(!0){case kl(r):return xl(s,r.IntersectionObserver);case"amp-article"===a:return n(t(),s);case o&&!!r.frameElement:var u=xl(r.frameElement,o);return n(u,s);case!!o:return xl(s,o);default:return di.never()}}function Pl(e,t){var n,r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1.7778;return e?(n=screen.width,r=screen.height):r=(n=t.offsetWidth)/i,{height:r,width:n}}var Il=di.interval(50).startWith(0);function Ll(e){return e.map((e=>e/1e3))}function Ml(e,t,n,r){var i,a,{documentHidden$:s,windowEvent$:o}=t,{autoplayOverride$:u,closeMessage$:c,cneOverlayIntent$:l,enterFullScreen$:d,exitFullScreen$:h,facadeReady$:p,focusChanged$:f,focusedComponent$:m,keepPlaying$:g,loadVideoId$:v,mouseLeavePlayer$:y,muteToggle$:b,isCurrentlySticky$:_,persistentShareEnter$:T,persistentShareLeave$:w,playOnPage$:S,progressMouse$:C,saveSettings$:E,seekEnd$:k,seekStart$:O,seekLatestIntent$:x,setTimeIntent$:A,settingsSubMenuIntent$:P,shareIntent$:I,shouldPause$:L,shouldPlay$:M,show360MessageOverlayIntent$:D,showLiveWaitingOverlayIntent$:R,toggleCaptionsIntent$:N,touchVideo$:j,toggleSettings$:U,trackSparrowIntent$:F,volumeIntent$:$,consentUpdateIntent$:B}=r,V=function(e,t){return t.withLatestFrom(e.pluck("playerConfig"),e.pluck("video","disable_consent_check"),((e,t,n)=>{var{isIframeEmbed:r,pageType:i="",ampTargeting:a,gdprApplies:s}=t,o=r||i.match(/^amp\-/)||a||!s||n?pi:e;return hi("canRunBasedOnConsent > consentObj:",o),o}))}(n,B),q=function(e){var{ajaxObservable:t=Gu,readCookie:n=tu}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n("CN_xid","");if(r)return di.of(r).share();var i=t("//infinityid.condenastdigital.com/infinityid",{withCredentials:!0}).map((e=>e.body)).catch((e=>(dc("infinity id",e),di.of(""))));return e.pluck(fi).filter(Boolean).take(1).switchMap((()=>i)).publishReplay(1).refCount()}(V),H=function(e){var{intersectionObservable:t=Al}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e=>{var n=t(e),r=(e.playerConfig.playerType,.2);return n.map((e=>{var{intersectionRatio:t}=e;return{percent:t.toFixed(1),status:t>r?"FULLY_IN_VIEWPORT":"OUT_OF_VIEWPORT"}}))};return e.switchMap((e=>n(e))).share()}(n),W=H.pluck("status"),z=H.pluck("percent"),{userIdle$:G,showUserIdleMessageOverlay$:K}=Tl({documentHidden$:s,keepPlaying$:g,playerEvent$:e,viewportStatus$:W}),X=function(e){return e.switchMap((e=>{var t,{playerConfig:n}=e,{playlist:r}=n;if(!r)return di.of(null);try{t=e.sponsoredVideo||window.top._cne.sponsoredVideo}catch(e){kc(e)}var i=r.videos.slice();r&&t&&i.splice(1,0,t);var a=xc(xc({},r),{},{videos:i});return di.of(a).merge(Pc(e))})).publishReplay(1).refCount()}(n),{cne360AnimationInterval$:Y,currentVideo$:Q,cne360CanvasSource$:J}=function(e){return Yc(zc((arguments.length>1&&void 0!==arguments[1]?arguments[1]:Hc)(e),e).mergeScan(((e,t)=>t(e))),e.config$)}({config$:n,intentStreams:r,playerEvent$:e,playlist$:X,userIdle$:G}),{currentVideo$:Z,isLiveVideo$:ee,liveLoadingState$:te,proposedLiveStreamEnd$:ne,mobileLiveReadyPosterURL$:re}=function(e){var{currentVideo$:t,config$:n,pollForLiveSource:r=rl}=e,i=t.pluck("live_metadata").map((e=>e||{})),a=t.map((e=>!!e.live_metadata)),s=i.pluck("end_date"),o=t.switchMap((e=>{var{live_metadata:t,sources:i=[]}=e,a=t&&0===i.length?r(e,{config$:n}):di.never();return di.of(e).merge(a)})).publishReplay(1).refCount(),u=o.filter((e=>{var{sources:t}=e;return t.length>0})),c=o.filter((e=>{var{live_metadata:t}=e;return!!t})).map((e=>({loading:0===e.sources.length,video:e}))),l=u.filterByLatestFrom(n,a,((e,t,n)=>t.isMobile&&n)).map((e=>e.live_ready_poster));return{currentVideo$:u,isLiveVideo$:a,liveLoadingState$:c,mobileLiveReadyPosterURL$:l,proposedLiveStreamEnd$:s}}({currentVideo$:Q,config$:n}),ie=function(e){return e.withType("dfp-ad-started","dfp-content-pause").mapTo(!0).merge(e.withType("dfp-ad-timeout","dfp-content-resume").mapTo(!1)).startWith(!1).distinctUntilChanged()}(e),ae=function(e){var{adDisplaying$:t,playerEvent$:n}=e,r=n.withType("dfp-ad-skippablestatechanged").map(Uu);return t.switchMap((e=>e?r:di.of(e))).startWith(!1).distinctUntilChanged()}({adDisplaying$:ie,playerEvent$:e}),se=v.withLatestFrom(ie,((e,t)=>t)).filter((e=>e)),oe=e.withType("tech").pluck("value"),ue=function(e){var{aspectRatio$:t,targetDiv$:n,fullscreen$:r,poll$:i=Il,getWidthHeightFn:a=Pl}=e;return i.withLatestFrom(n,r,t).map((e=>{var[,t,n,r]=e,{width:i,height:s}=a(n,t,r);return{targetDiv:t,width:i,height:s,fullscreen:n}})).distinctUntilChanged((function(e,t){return e.width===t.width&&e.height===t.height&&e.fullscreen===t.fullscreen})).publishReplay(1).refCount()}({aspectRatio$:n.pluck("aspectRatio").map((e=>Wu(e))),targetDiv$:n.pluck("playerContainer"),fullscreen$:e.withType("fullscreen").pluck("value"),tech$:oe}),ce=function(e,t,n){return di.combineLatest(t.map((e=>({type:"cookie",level:e}))).takeUntil(e).merge(e),n,(e=>e)).filter((e=>{var{level:t}=e;return $u(t)})).distinctUntilChanged()}($,n.pluck("volumeCookie"),Z),le=function(e){var{config$:t,muteToggle$:n,volume$:r}=e;return t.pluck("mutedConfig").concat(di.merge(n,r.filter((e=>{var{type:t}=e;return"cookie"!==t})).map((e=>{var{level:t}=e;return 0===t})))).distinctUntilChanged()}({config$:n,muteToggle$:b,volume$:ce}),de=function(e){var{autoplayOverride$:t,config$:n,viewportStatus$:r}=e,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:sc();return r.filterByLatestFrom(t,n,((e,t,n)=>{var{override:r,url:a}=t,{autoplayEnabled:s}=n;return!(r&&a===Sl(i.location.href))&&"FULLY_IN_VIEWPORT"===e&&s})).share().take(1)}({autoplayOverride$:u,config$:n,viewportStatus$:W}),he=function(e){var{loadVideoId$:t,videoEnded$:n}=e,r=0;return t.merge(n).map((()=>r++))}({videoEnded$:e.withType("ended"),loadVideoId$:v}),pe=e.withType("currentTime").pluck("value"),fe=M.merge(de),me=function(e,t){return e.switchMap((()=>t.first()))}(Z,e.withType("playing")),ge=function(e,t){return t.withType("dfp-ad-started").merge(e).take(1).mapTo(!0)}(me,e),ve=function(e){var{config$:t,mute$:n,touchVideo$:r,viewportAutoplay$:i}=e,a=i.mapTo(!0).filterByLatestFrom(t,n,((e,t,n)=>{var{isMobile:r}=t;return r&&n})).take(1);return di.of(!1).merge(a).merge(n.filter((e=>!e))).merge(r.mapTo(!1)).distinctUntilChanged()}({config$:n,mute$:le,playerEvent$:e,shouldPlay$:M,viewportAutoplay$:de,touchVideo$:j}),ye=ml({currentVideo$:Z,isLiveVideo$:ee,playerEvent$:e,proposedLiveStreamEnd$:ne,videoStart$:me}),be=function(e,t){return e.mapTo(!0).merge(t.mapTo(!1)).startWith(!1)}(O,k),_e=function(e){var{config$:t,playerEvent$:n,shouldPause$:r}=e,i=n.withType("playing","dfp-ad-started","dfp-ad-resume").mapTo(!0),a=r.mapTo(!1),s=t.pluck("isContinuousPlay"),o=n.withType("ended").withLatestFrom(s,((e,t)=>t));return a.merge(i).merge(o).startWith(!1).distinctUntilChanged()}({config$:n,playerEvent$:e,shouldPause$:L}),Te=j.filterByLatestFrom(ie,((e,t)=>!t)),we=di.of(Ys),Se=ee.withLatestFrom(we,((e,t)=>e&&!t)).filter((e=>e)),Ce=ee.filter((e=>e)),Ee=function(e){var{adDisplaying$:t,currentVideo$:n,errorCode$:r,isPlaying$:i,windowError$:a,scheduler:s,checkIsPlayingDelay:o=Nc}=e;return r.withLatestFrom(t,jc).merge(a.map((e=>{var{message:t}=e;return t})).filter(Uc)).delay(o,s).filterByLatestFrom(i,((e,t)=>!t)).withLatestFrom(n,((e,t)=>({error:e,video:t})))}({adDisplaying$:ie,currentVideo$:Z,errorCode$:e.withType("errorCode").pluck("value"),isPlaying$:_e,windowError$:o.withType("error")}),ke=function(e){var{cneError$:t,currentVideo$:n,mergedPlay$:r,continuousPlay$:i,playerEvent$:a,isPlaying$:s,seekEnd$:o,shouldPlay$:u,userIdle$:c,videoStart$:l,_isMobile:d=Hs(),spinnerDelay$:h=di.timer(500)}=e,p=e=>t=>t.switchMapTo(e.takeUntil(g)).publishReplay().refCount(),f=l.switchMapTo(u.takeUntil(a.withType("ended"))),m=d?a.withType(...sl):a.withType(...sl,"timeupdate"),g=di.merge(t,m),v=o.filter((e=>e.elapsed>100&&!d)).filterByLatestFrom(s,((e,t)=>!!t)),[y,b]=o.switchMapTo(h.takeUntil(g)).filterByLatestFrom(s,((e,t)=>!!t)).mapTo(d).partition((e=>e)),_=f.let(p(h)).filter((()=>!d)),[T,w]=f.let(p(a.withType("stalled"))).mapTo(d).partition((e=>e)),S=a.withType(...sl),C=a.withType("timeupdate").filterByLatestFrom(l,((e,t)=>!!t)),E=r.take(1).filterByLatestFrom(t.startWith(null),((e,t)=>!t)).takeUntil(a.withType("playing")),k=a.withType("dfp-ad-complete","ended").filterByLatestFrom(i,c,((e,t,n)=>t&&!n)),O=di.merge(v.mapTo(ol.bgPoster),b.mapTo(ol.spinnerWithBgPoster),y.mapTo(ol.spinner),_.mapTo(ol.bgPoster),w.mapTo(ol.spinnerWithBgPoster),T.mapTo(ol.spinner),k.mapTo(ol.spinner),E.mapTo(ol.spinner)).takeUntil(t),x=di.merge(t.mapTo(ol.none),C.mapTo(ol.none),S.mapTo(ol.none)),A=di.merge(O,x);return n.take(1).switchMapTo(A).distinctUntilChanged()}({cneError$:Ee,currentVideo$:Z,mergedPlay$:fe,continuousPlay$:n.pluck("isContinuousPlay"),playerEvent$:e,isPlaying$:_e,seekEnd$:k,shouldPlay$:M,userIdle$:G,videoStart$:me}),Oe=function(e){var{config$:t,progressMouse$:n,windowEvent$:r}=e,i=t.pluck("isMobile"),a=n.withType("down").pluck("event"),s=n.withType("move").pluck("event"),o=r.withType("mousemove"),u=r.withType("mouseup"),c=a.switchMap((()=>o.takeUntil(u)));return s.merge(c).filterByLatestFrom(i,((e,t)=>!t))}({config$:n,progressMouse$:C,windowEvent$:o}),xe=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:zu;return e.withType("cne-texttrackadded").pluck("value").publishReplay().refCount().switchMap((e=>e&&e.track?t(e).mapTo(e.track).startWith(null):e&&po(e)?di.of(e).startWith(null):di.of(null)))}(e),Ae=function(e){var{config$:t,mute$:n,toggleCaptionsIntent$:r,captionsTrack$:i}=e,a=t.withLatestFrom(n,((e,t)=>{var{autoplayEnabled:n,captionsCookie:r}=e;return n&&t?"showing":r||"hidden"})).switchMap((e=>r.scan((e=>"hidden"==e?"showing":"hidden"),e).startWith(e)));return di.combineLatest(a,i,((e,t)=>t?{captions:t,displayMode:e}:{captions:t,displayMode:"disabled"}))}({config$:n,mute$:le,toggleCaptionsIntent$:N,captionsTrack$:xe}),Pe=e.withType("useractive").merge(e.withType("userinactive")),Ie=function(e,t,n){var r=e.map((e=>{var{volumeCookie:t}=e;return $u(t)?t:1})).takeUntil(n).merge(n.pluck("level")).distinctUntilChanged();return t.withLatestFrom(r,((e,t)=>e?0:e||t?t:1))}(n,le,$),Le=function(e){return e.distinctUntilChanged((function(e,t){return 0!==e&&0!==t})).map((e=>0===e))}(Ie),Me=function(e){var{buffer:t=Fu,playerEvent$:n,scheduler:r}=e,i=n.withType("pause","ended","seeked","play");return i.throttleTime(t,r).switchMap((e=>di.race(di.timer(t,null,r).map((()=>e)),i.mapTo(!1)))).filter(Boolean).filter((e=>{var{state:t,type:n}=e;return("content-playback"===t||!t)&&"pause"===n})).mapTo(!0)}({playerEvent$:e}),De=function(e){var{analyticsPause$:t,playerEvent$:n}=e;return t.switchMapTo(n.withType("play").take(1))}({analyticsPause$:Me,playerEvent$:e}),Re=function(e){return e.scan((e=>e+1),0)}(Z),Ne=function(e){var{loadVideoId$:t,videoEnded$:n,viewportAutoplay$:r}=e,i=t.mapTo("manual"),a=n.mapTo("continuous"),s=r.mapTo("autoplay");return i.merge(a,s).startWith("manual")}({videoEnded$:e.withType("ended"),loadVideoId$:v,viewportAutoplay$:de}),je=function(e,t){return e.withType("dfp-ad-complete").withLatestFrom(t,((e,t)=>{var{id:n}=t;return{finishedAdIndex:e.ad.podInfo.getPodIndex(),videoId:n}}))}(e,Z),Ue=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:di.of(!1);return e.filterByLatestFrom(n,((e,t)=>t)).withLatestFrom(t,((e,t)=>t))}(x,_e,ee),Fe=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:di.of(!1),i=t.filter((e=>!e)).mapTo(!1);return di.merge(e.mapTo(!0),i,n.mapTo(!0)).filterByLatestFrom(r,((e,t)=>t)).distinctUntilChanged()}(me,_e,Ue,ee),$e=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:di.of(!1);return e.switchMapTo(t.take(1).mapTo(!0)).filterByLatestFrom(n,((e,t)=>t))}(je,me,ee),Be=function(e){var{cneError$:t,show360MessageOverlayIntent$:n,showLiveWaitingOverlayIntent$:r,showLiveMessageOverlay$:i,showUserIdleMessageOverlay$:a}=e;return di.merge(n.map(yl),i.map(gl),t.map(bl),a.map(_l),r.map(vl))}({cneError$:Ee,show360MessageOverlayIntent$:D,showLiveMessageOverlay$:Se,showLiveWaitingOverlayIntent$:R,showUserIdleMessageOverlay$:K}),Ve=function(e){var{adDisplaying$:t,cneError$:n,cneOverlayIntent$:r,loadVideoId$:i,showLiveMessageOverlay$:a}=e,s=r.filterByLatestFrom(t,((e,t)=>"hide"===e.action||!t)).merge(n.mapTo({type:"message",action:"show"}),i.mapTo({type:"message",action:"hide"}),i.mapTo({type:"play",action:"hide"}),a.mapTo({type:"message",action:"show"})),o=s.filter((e=>"message"===e.type)).map((e=>"hide"===e.action)).startWith(!0);return s.filterByLatestFrom(o,((e,t)=>{var{type:n}=e;return t||"message"===n}))}({adDisplaying$:ie,cneError$:Ee,cneOverlayIntent$:l,loadVideoId$:v,showLiveMessageOverlay$:Se}),{mouseDown$:qe,mouseUp$:He,mouseMove$:We}=(i=document.getElementById("cne-360-container"),{mouseDown$:di.fromEvent(i,"mousedown").merge(di.fromEvent(i,"touchstart")).map((e=>Rc(e))),mouseUp$:di.fromEvent(document,"mouseup").merge(di.fromEvent(i,"touchend")),mouseMove$:di.fromEvent(i,"mousemove").merge(di.fromEvent(i,"touchmove")).map((e=>Rc(e)))}),ze=function(e,t){return e.mapTo(!0).merge(t.mapTo(!1)).startWith(!1)}(qe,He),Ge=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Dc,i=e.switchMapTo(n.pairwise().takeUntil(t).map((e=>{var[t,n]=e;return{x:n.x-t.x,y:n.y-t.y,time:n.time-t.time,now:n.time}}))),a=t.withLatestFrom(i,((e,t)=>t)).distinctUntilChanged(((e,t)=>e.now===t.now)).switchMap((t=>r(t.time).scan((e=>({x:e.x*Ic,y:e.y*Ic})),t).takeWhile((e=>e.x>Lc||e.x<-.5||e.y>Lc||e.y<-.5)).concat(di.of({x:0,y:0})).takeUntil(e)));return i.merge(a).map((e=>({x:e.x*Mc,y:e.y*Mc})))}(qe,He,We),Ke=function(e,t){return e.switchMapTo(t.scan(((e,t)=>{var n=e.long-t.x,r=e.lat+t.y,i=Math.max(-85,Math.min(85,r)),a=(n+360)%360,s=Math.PI/180;return{lat:i,long:a,phi:(90-i)*s,theta:a*s}}),{lat:0,long:180}))}(Z,Ge),Xe=function(e){var{config$:t,currentVideo$:n,loading$:r,widthHeight$:i}=e,a={action:"hide"};return di.of(a).concat(n.take(1).filterByLatestFrom(t,Hu).withLatestFrom(i,qu)).merge(r.mapTo(a))}({config$:n,currentVideo$:Z,loading$:ke,widthHeight$:ue}),Ye=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:dl;return t.map((e=>{var{poster_frame:t}=e;return t})).merge(n).filterByLatestFrom(e,((e,t)=>e&&"hide"===t.action)).switchMap((e=>r(e).catch((()=>di.of("")))))}(Xe,Z,re),Qe=e.withType("tech").pluck("value").map((e=>"Html5"===e.name()?"html5vpaid":e.name())),Je=e.filter((e=>e.type.match(/dfp-ad/))),Ze=Je.pluck("ad").filter((e=>e)).startWith(null),et=Je.pluck("adUnitPath").filter((e=>e)).startWith(null),tt=Je.pluck("adsManager").filter((e=>e)).startWith(null),nt=function(e){var{mouseLeavePlayer$:t,persistentShareEnter$:n,persistentShareLeave$:r,showShareOverlay$:i,scheduler:a}=e,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:250,o=n.mapTo(!0),u=r.switchMap((()=>{var e=di.timer(s,null,a).mapTo("left"),t=n.mapTo("re-enter");return di.race(e,t)})).filter((e=>"left"===e)).mapTo(!1),c=t.merge(i).mapTo(!1);return o.merge(c,u)}({mouseLeavePlayer$:y,persistentShareEnter$:T,persistentShareLeave$:w,showShareOverlay$:l.withType("share")}),rt=function(e){var{captionsDisplayMode$:t,config$:n,isPlaying$:r,playerEvent$:i,settingsMenuHasFocus$:a,toggleSettings$:s,widthHeight$:o}=e,u=a.map((e=>!e)),c=o.map((e=>{var{width:t}=e;return t<500})).combineLatest(n,t.map((e=>{var{displayMode:t}=e;return"disabled"===t})),((e,t,n)=>{var{isMobile:r}=t;return e||r||n})),l=r.combineLatest(i.withType("userinactive").mapTo(!0),((e,t)=>e&&t)).merge(u).filter(Boolean);return s.merge(l.mapTo(!1)).map((e=>e?"show":"hide")).combineLatest(c,((e,t)=>t?"disable":e)).share()}({captionsDisplayMode$:Ae,config$:n,isPlaying$:_e,settingsMenuHasFocus$:m.map((e=>"CneSettings"===e)),playerEvent$:e,toggleSettings$:U,widthHeight$:ue}),it=function(e,t){return e.switchMap((()=>t.pluck("displayMode").map((e=>({menu:"cneCaptionOptions",display:"disabled"===e?"disable":"enable"})))))}(P,Ae),at=function(e){var{playerEvent$:t,settingsMenu$:n}=e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:pl,i=n.filter((e=>"show"===e)),a=n.filter((e=>"show"!==e)).merge(t.withType("userinactive"));return i.switchMap((()=>r.mapTo(!0).takeUntil(a)))}({playerEvent$:e,settingsMenu$:rt}),st=e.withType("percentComplete").pluck("value"),ot=function(e){var{videoStart$:t,percentComplete$:n}=e,r=di.merge(n.filter((e=>e>=.25)).take(1).mapTo(1),n.filter((e=>e>=.5)).take(1).mapTo(2),n.filter((e=>e>=.75)).take(1).mapTo(3));return t.switchMapTo(r)}({percentComplete$:st,videoStart$:me}),ut=e.withType("fullscreen").pluck("value"),ct=ue.pluck("width").map((e=>e<xa)).distinctUntilChanged(),lt=function(e){var{currentVideo$:t,config$:n,windowGoogle:r=window.google}=e,i=n.pluck("playerConfig","adsDisabled");return t.filterByLatestFrom(i,((e,t)=>!(t||r&&r.ima))).mapTo(!0)}({config$:n,currentVideo$:Z}),dt=function(e){var{playerEvent$:t,analyticsAdBlocked$:n}=e;return t.withType("dfp-ad-error").filter((e=>e.adError&&"ADS_REQUEST_NETWORK_ERROR"===e.adError.code)).merge(n).mapTo(!0).startWith(!1)}({playerEvent$:e,analyticsAdBlocked$:lt}),ht=function(e,t){return e.withLatestFrom(t,((e,t)=>{var{id:n}=t;return{videoId:n,adBlocked:e}}))}(dt,Z),pt=function(e){var{currentVideo$:t,playerEvent$:n}=e,r=n.withType("dfp-ad-started").mapTo(!0),i=t.mapTo(!1);return di.merge(r,i)}({currentVideo$:Z,playerEvent$:e}),ft=function(e){return e.withType("dfp-content-pause").switchMapTo(e.withType("dfp-content-resume").mapTo(!0).take(1)).merge(e.withType("playing").mapTo(!1)).distinctUntilChanged()}(e),mt=function(e){return e.scan((e=>e+1),0).startWith(0)}(S),gt=function(e,t){return e.withLatestFrom(t,((e,t)=>{var{playerConfig:n}=t;return n.adsDisabled?null:e}))}(Z,n);return{ad$:Ze,adDisplaying$:ie,adFinished$:je,adBlocked$:dt,adBlockedUnique$:ht,videoIfAdsNotDisabled$:gt,adUnitPath$:et,adSkippable$:ae,adsManager$:tt,analyticsAdBlocked$:lt,analyticsVolume$:Ie,animatedClipDisplaying$:Xe,captionsDisplayMode$:Ae,cne360MouseActive$:ze,cne360CanvasSource$:J,cne360LatLong$:Ke,cneOverlay$:Ve,config$:n,contentResuming$:ft,currentTimeInMs$:(a=pe,a.map((e=>Math.floor(1e3*e)))),currentVideo$:Z,documentHidden$:s,facadeReady$:p,liveLoadingState$:te,loading$:ke,initializeInBandCaptions$:Ce,infinityId$:q,inSyncWithLiveStream$:Fe,seekLatestAfterPrerollForLive$:$e,isLiveVideo$:ee,isPlaying$:_e,isSeeking$:be,mute$:le,posterFrame$:Ye,percentComplete$:st,playlist$:X,isCurrentlySticky$:Qc({isCurrentlySticky$:_,isFullscreen$:ut}),prerollPlayed$:pt,showPersistentMute$:ve,setTime$:Ll(A),settingsMenu$:rt,smallLayout$:ct,reportUserActivity$:at,settingsSubMenu$:it,showLiveEndCard$:ye,showShareDropdown$:nt,techName$:Qe,viewportPercentage$:z,viewportStatus$:W,updateMessageOverlay$:Be,videoStartType$:Ne,viewportAutoplay$:de,volume$:ce,videoEndedOrSwitched$:he,widthHeight$:ue,analyticsMute$:Le,analyticsPause$:Me,analyticsResume$:De,adRestart$:se,captionsUpdateTextTrackDisplay$:Pe,closeMessage$:c,cne360MouseDrag$:Ge,cne360AnimationInterval$:Y,cneError$:Ee,enterFullScreen$:d,exitFullScreen$:h,focusChanged$:f,loadCaptions$:al(me,Z,e),loadVideoId$:v,mouseLeavePlayer$:y,muteToggle$:b,playerEvent$:e,playsOnPage$:mt,quartile$:ot,replay$:hl(Z,e.withType("ended"),e.withType("play")),saveSettings$:E,scrub$:Oe,seekLatest$:Ue,seekEnd$:k,shareIntent$:I,shouldPause$:L,mergedPlay$:fe,shouldShareVideo$:fl({currentVideo$:Z,shareIntent$:I}),toggleUserActive$:Te,trackSparrowIntent$:F,videoStart$:me,videoOrAdStart$:ge,videoView$:Re,volumeIntent$:$,canRunBasedOnConsent$:V}}function Dl(e){return di.of((t=>{var{eventString:n,data:r}=t;return e.trigger({type:n,data:r},r)}))}var Rl=e=>t=>{var{config:n,type:r,adDuration:i}=t,a=1e3*i;switch(r){case"playContent":e.playVideoContentPart(n);break;case"playAd":e.playVideoAdvertisement({ns_st_cl:a});break;case"stop":e.stop()}},Nl=e=>t=>e.switchMap((e=>e.comscore_config?di.of(new t.StreamingTag({customerC2:"".concat(e.comscore_config.c2)})):di.never()));function jl(e){var{config$:t,currentVideo$:n,canRunBasedOnConsent$:r}=e,{tagAction:i=Rl,toScript$:a=Xc,win:s=window}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return r.pluck(mi).filter(Boolean).take(1).switchMap((()=>t)).filter((e=>e.video&&e.video.comscore_config)).pluck("environment","comscore_library_path").switchMap((e=>a(e).map((()=>s.ns_)))).filter((e=>e&&e.StreamingTag)).switchMap(Nl(n)).map(i)}var Ul=((e,t,n,r,i,a,s)=>{e.fbq||(e.fbq=function(){i.callMethod?i.callMethod.apply(i,arguments):i.queue.push(arguments)},i=e.fbq,e._fbq||(e._fbq=i),i.push=i,i.loaded=!0,i.version="2.0",i.queue=[],(a=t.createElement(n)).async=!0,a.src=r,(s=t.getElementsByTagName(n)[0]).parentNode.insertBefore(a,s))}).bind(null,window,document,"script","https://connect.facebook.net/en_US/fbevents.js"),Fl=(e,t)=>t("init",e),$l=e=>t=>{var{type:n,params:r,custom:i}=t;e(i?"trackCustom":"track",n,r)};function Bl(e){var{currentVideo$:t,canRunBasedOnConsent$:n}=e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ul,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:window;r();var{fbq:a}=i;return n.pluck(gi).filter(Boolean).take(1).switchMap((()=>t)).pluck("facebook_pixel_id").switchMap((e=>e?di.of(e):di.never())).distinctUntilChanged().do((e=>Fl(e,a))).mapTo($l(a))}var Vl={allure:"GTM-WPC9DS6",arstechnica:"GTM-NLXNPCQ",brides:"GTM-5HMN9N3",architecturaldigest:"GTM-MRVDKNL",architecturaldigestindia:"GTM-W4C53LN",architecturaldigestitaly:"GTM-WTNTX26",architecturaldigestfrance:"GTM-TNLG3KG",architecturaldigestgermany:"GTM-56SZBMB",architecturaldigestspain:"GTM-5W83PTH",architecturaldigestrussia:"GTM-5WZKZ74",architecturaldigestmexico:"GTM-K3M29ST",bonappetit:"GTM-TLPN5X9",cntraveler:"GTM-5RDFB8G",epicurious:"GTM-PCTXLQR",glamour:"GTM-TXVJXJD",golfdigest:"GTM-M94KNML",gq:"GTM-PC9B6Z6",heyiris:"GTM-K5S77MT",newyorker:"GTM-NX5LSK3",nonconde:"GTM-M3LWXF2",pitchfork:"GTM-MMFBX2W",self:"GTM-KSHC4S5",teenvogue:"GTM-5WV8CLP",them:"GTM-NP9DWF8",thescene:"GTM-5JDFFGT",vanityfair:"GTM-KSG89LT",vanityfairfrance:"GTM-K8TFQ7T",vanityfairspain:"GTM-MP9L7FM",vanityfairitalia:"GTM-T9LN2QS",wired:"GTM-5HBJC2K",wmagazine:"GTM-TXW6R9J",vogue:"GTM-MC44X36",vogueindia:"GTM-M3SG2X6",gqindia:"GTM-P223J33",cntravelerindia:"GTM-5ZWM7R",cntraveleruk:"GTM-KJMKBQ5",cntravelerspain:"GTM-K5Q7ST6",vogueuk:"GTM-KG7M3XB",wireditalia:"GTM-PTX8W8W",wireduk:"GTM-5MLKVKC",wiredjapan:"GTM-WDGQM7Q",tatlerrussia:"GTM-KSMT82T",tatleruk:"GTM-TRLZ9GV",voguefrance:"GTM-N5PNP2L",voguespain:"GTM-KQ8LPCC",vogueitaly:"GTM-TL59GFJ",voguegermany:"GTM-5P7NXHK",voguemexico:"GTM-57C6XM8",voguejapan:"GTM-MHBCRTH",voguetaiwan:"GTM-TPWMSWZ",voguerussia:"GTM-WQMFMCM",glamouruk:"GTM-MQK3BWT",glamourspain:"GTM-NNCNB3T",glamourgermany:"GTM-MTVMWWX",glamourrussia:"GTM-PNXVDX3",gqfrance:"GTM-K42BJLV",gquk:"GTM-W2K49QH",gqspain:"GTM-5M2Z395",gqitaly:"GTM-NRLM5D4",gqgermany:"GTM-NQPFNCC",gqjapan:"GTM-K8MFHJW",gqmexico:"GTM-TGJJPT5",gqtaiwan:"GTM-PC2V8K9",gqrussia:"GTM-MQH9V6R",lacucinaitaliana:"GTM-M6ZJ85Q"};function ql(e,t,n){var{referenceWindow:r,playerConfig:i}=e,a=i.embedLocation.split("-")[0]||"nonconde";"amp-article"===i.pageType&&(a="nonconde",r._cne.ampDomain=i.analyticsUrl||r.location.host);var s=Vl[a],o=function(e){for(var t=[],n=e.document.querySelectorAll('script[src*="googletagmanager.com/gtm.js"]'),r=0;r<n.length;r++){var i=(0,Zs.Z)(n[r].src).searchParams,a=i.get("id"),s=i.get("l")||"dataLayer";e[s]&&t.push({gtmId:a,dataLayerName:s})}return t}(r),u=o.filter((e=>e.gtmId===s))[0];return u?di.of({referenceWindow:r,dataLayerName:u.dataLayerName}):o.length>0?(n("GAConflict",i.analyticsUrl||r.location),di.never()):t("https://www.googletagmanager.com/gtm.js?id=".concat(s,"&l=cneDataLayer"),function(e){return()=>{var t=e.document;e.cneDataLayer=[{"gtm.start":(new Date).getTime(),event:"gtm.js"}];var n=t.getElementsByTagName("script")[0],r=t.createElement("script");return r.async=!0,n.parentNode.insertBefore(r,n),r}}(r),function(e){var t={referenceWindow:e,dataLayerName:"cneDataLayer"};return(e,n)=>n(t)}(r))}function Hl(e){return function(t){var{referenceWindow:n,dataLayerName:r}=e;n[r].push(t)}}function Wl(e){var{config$:t,canRunBasedOnConsent$:n}=e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Xc,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:hc;return n.pluck(vi).filter(Boolean).switchMap((()=>t)).take(1).switchMap((e=>ql(e,r,i))).map((e=>Hl(e)))}function zl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Gl(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Kl(e){var{target:t,moatApiSpecifics:n,moatPartnerCode:r,isAdTracking:i}=e,{protocol:a}=window.location,s="https:"===a?"z":"js",o="_moatApi"+Math.floor(1e8*Math.random()),u="".concat(a,"//").concat(s,".").concat("moatads.com","/").concat(r,"/moatvideo.js#").concat(o),c=Xl(t,i),l=[],d=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?zl(Object(n),!0).forEach((function(t){Gl(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({dispatchEvent(e){this.sendEvent?(l&&(l.push(e),e=l,l=!1),this.sendEvent(e)):l.push(e)}},n);return window[o]=d,Xc(u,c).mapTo(d.dispatchEvent.bind(d))}var Xl=(e,t)=>()=>{var n=document.getElementById(e),r="js-cne-moat-script-".concat(t?"ad":"content"),i=n.querySelector("#".concat(r));if(i){i.parentNode.removeChild(i);var a=i.src;if(a&&a.length>0){var s=a.split("#");if(s.length>1){var o=s[s.length-1];delete window[o]}}}var u=document.createElement("script");return u.type="text/javascript",u.id=r,u.async=!0,n&&n.insertBefore(u,n.childNodes[0]||null),u};function Yl(e){var{adUnitPath$:t,config$:n,currentVideo$:r,canRunBasedOnConsent$:i}=e,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Kl;return i.pluck(vi).filter(Boolean).take(1).switchMap((()=>di.combineLatest(t,n,r))).map((e=>{var[t,n,r]=e;return{adUnitPath:t,config:n,currentVideo:r}})).filter((e=>{var{adUnitPath:t,config:n,currentVideo:r}=e;return t&&r&&n})).distinctUntilChanged(((e,t)=>e.currentVideo.id===t.currentVideo.id)).switchMap((e=>{var{adUnitPath:t,currentVideo:n,config:r}=e;if(!n.moat_content_partner_code)return di.never();var i={adData:{ids:{level1:n.title,level2:t,slicer1:r.location,zMoatAP:r.autoplayEnabled,zMoatVideoId:n.id},duration:n.duration,url:n.url}};return a({isAdTracking:!1,moatApiSpecifics:i,moatPartnerCode:n.moat_content_partner_code,target:r.playerConfig.target})}))}var Ql="condenastinlineint626489506216";function Jl(e){var{adsManager$:t,adUnitPath$:n,config$:r,currentVideo$:i,canRunBasedOnConsent$:a,playerEvent$:s}=e,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Kl,u=s.withType("fullscreen").pluck("value");return a.pluck(vi).filter(Boolean).take(1).switchMap((()=>t)).withLatestFrom(n,r,i,u).map((e=>{var[t,n,r,i,a]=e;return{adsManager:t,adUnitPath:n,config:r,currentVideo:i,fullscreen:a}})).filter((e=>{var{config:t,currentVideo:n,adsManager:r,adUnitPath:i}=e;return t&&n&&r&&i})).distinctUntilChanged(((e,t)=>e.adsManager===t.adsManager)).switchMap((e=>{var{adsManager:t,adUnitPath:n,config:r,currentVideo:i,fullscreen:a}=e,{playerType:s,target:u}=r.playerConfig,c="interlude"===s?Ql:i.moat_ad_partner_code;if(!c)return di.never();var[,l="",d="",h="",p=""]=n.split("/").filter(Boolean),f={adsManager:t,ids:{partnerCode:c,viewMode:a?"fullscreen":"normal",slicer1:r.location,slicer2:n,zMoatBrand:l,zMoatPlayer:d,zMoatSiteSection:h,zMoatTemplate:p},imaSDK:!0};return o({isAdTracking:!0,moatApiSpecifics:f,moatPartnerCode:c,target:u})}))}function Zl(e){var{protocol:t}=window.location,n="".concat(t,"//cdn-gl.imrworldwide.com/conf/").concat(e,".js#name=nlsnInstance&ns=NOLBUNDLE"),r=function(){var e={g:{},ggPM(e,t){window.NOLBUNDLE.nlsnInstance.q=window.NOLBUNDLE.nlsnInstance.q||[],window.NOLBUNDLE.nlsnInstance.q.push([e,t])}};return window.NOLBUNDLE=window.NOLBUNDLE||{},window.NOLBUNDLE.nlsnInstance=window.NOLBUNDLE.nlsnInstance||e,e}();return Xc(n).mapTo((e=>t=>{var{type:n,data:r}=t;e.ggPM(n,r)})(r))}function ed(e){var{currentVideo$:t,canRunBasedOnConsent$:n}=e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Zl;return n.pluck(mi).filter(Boolean).take(1).switchMap((()=>t)).pluck("nielsen_api_id").switchMap((e=>e?di.of(e):di.never())).distinctUntilChanged().switchMap(r)}var td=n(7317).Z;function nd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function rd(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var id=3e3,ad=e=>{var t,n=di.create((e=>t=e)),r=di.interval(100).startWith(0).takeUntil(di.timer(id)).filter((()=>!!e.permutive)).take(1).do((()=>{td("permutiveChecker: using permutive from parent window"),t.next({permutive:e.permutive}),t.complete()}));return di.merge(n,r)},sd=(e,t)=>{var{permutiveKeys:n}=t.environment||{};if(n){((e,t)=>{!function(t,n,r){if(!t){t=t||{},e.permutive=t,window.permutive=t,t.q=[],t.config={}||{},t.config.apiKey=n,t.config.environment=t.config.environment||"production";for(var i=["addon","identify","track","trigger","query","segment","segments","ready","on","once","user","consent"],a=0;a<i.length;a++){var s=i[a];t[s]=function(e){return function(){var n=Array.prototype.slice.call(arguments,0);t.q.push({functionName:e,arguments:n})}}(s)}}}(e.permutive,t),e.googletag=e.googletag||{},e.googletag.cmd=e.googletag.cmd||[]})(e,n.apiKey);var r="https://cdn.permutive.app/".concat(n.workspaceId,"-web.js");return Xc(r).map((()=>({permutive:e.permutive})))}return di.never()},od=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:di.timer(id);if(!ac())return sd(window,e);var n=ad(window.top),r=t.switchMap((()=>sd(window,e))).do((()=>{td("permutive check timed out")}));return di.race(n,r)};function ud(e){return function(t){var n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nd(Object(n),!0).forEach((function(t){rd(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nd(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t);delete n.type,td("Permutive tracking event",t.type,n,e),e.permutive.track(t.type,n)}}function cd(e){var{config$:t,canRunBasedOnConsent$:n}=e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:od,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ud;return n.pluck(vi).filter(Boolean).take(1).switchMap((()=>t)).filter((e=>e.environment&&e.environment.permutiveKeys)).take(1).switchMap((e=>r(e))).filter((e=>!!e)).map((e=>i(e)))}function ld(e){var{pageType:t,embedLocation:n}=e;return"instant-article"===t?"fbia":"amp-article"===t?"amp":n&&n.length?"oo":"non-oo"}function dd(e){var{referenceWindow:t}=e,[{site:n,content:r}={}]=t.dataLayer||[],{orgId:i,orgAppId:a}=n||{},{contentType:s}=r||{};return{org_id:i,org_app_id:a,contentType:s}}var hd=e=>({adAssetsUrl:e.ad_assets_url,baseUrl:Yu(),ssl:e.ssl}),pd=e=>{var{adAssetsUrl:t,baseUrl:n,ssl:r}=e;return function(e){var{ad:i,adBlocked:a,adUnitPath:s,category:o,config:u,dimensions:c,documentHidden:l,infinityId:d,meta:h={},mute:p,playsOnPage:f,prerollPlayed:m,type:g,video:v,videoStartType:y,videoView:b,viewportStatus:_}=e,{beacon:T=rc,date:w=(new Date).toISOString(),win:S=window}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{analyticsUrl:C,playerType:E,recAlgorithm:k="",recStrategy:O="",isRightRail:x}=u.playerConfig,A=i&&i.mediaUrl&&i.mediaUrl.indexOf(t)>=0?"site_served":null,P=u.autoplayEnabled?"autoplay":"manual",I=dd(u),L={_ts:w,_c:o,_t:g,app:"playerservice",cBr:v.brand,cCh:"videos/show",cCu:v.url,cId:v.id,cKe:v.tags?v.tags.toString():"",cPd:v.premiere_date,cTi:v.title,cTy:s,mDu:v.duration,pHr:C||u.location,pID:u.pageId,pWw:c.width,pWh:c.height,sID:u.sessionId,uId:u.uId,xid:d,dim1:JSON.stringify({contentStartType:y,doNotTrackSetting:u.doNotTrackSetting,environment:ld(u.playerConfig),gitBranch:u.playerConfig.gitBranch,gitSha:u.playerConfig.gitSha,guid:u.guid,isMobile:u.isMobile,isVerso:!!I.org_app_id,initialPlayerStartType:P,playerDepth:u.videoPagePosition,playerType:E,playsOnPage:f,prerollPlayed:m,recAlgorithm:k,recStrategy:O,sticky:u.playerConfig.isStickyType||!1,stickyPosition:u.playerConfig.stickyPosition||"",disableVastPrefetch:u.playerConfig.disableVastPrefetch||!1,disableVideoPrebid:u.playerConfig.disableVideoPrebid||!1,isRightRail:x,tabStatus:l?"hidden":"active",muted:p,versoContentType:I.contentType,videoEmbedPosition:u.playerConfig.videoEmbedPosition||"",videoViews:b,viewportStatus:_}),dim2:JSON.stringify({adBlocked:a,adId:i?i.adId:"",adType:i?i.apiFramework||A||"unknown":"",creativeId:i?i.creativeId:"",wrapperAdIds:i?i.wrapperAdIds:"",wrapperAdSystems:i?i.wrapperAdSystems:"",dfpLineItem:i?mu(i.adId,i.wrapperAdSystems,i.wrapperAdIds):"",publicaEnabled:u.publicaEnabled,podIndex:i&&i.podInfo?i.podInfo.getPodIndex():""})};h.adId=i?i.adId:"","GoogleTag"===o&&(L._v=S.performance.now()-h.pollStart);var M=[n,eo(L),eo(h),eo(I)].filter((e=>e.length)).join("&");T(M,r)}};function fd(e){var{config$:t,canRunBasedOnConsent$:n}=e,{track:r=pd}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n.pluck(vi).filter(Boolean).take(1).switchMap((()=>t)).map((e=>{var{environment:t}=e;return r(hd(t))}))}var md=["endpoints","video"];function gd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function vd(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?gd(Object(n),!0).forEach((function(t){yd(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gd(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function yd(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function bd(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function _d(e){var{canRunBasedOnConsent$:t}=e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.fetch||Cc,r=di.of((e=>{var{endpoints:t,video:r}=e,i=bd(e,md);return t.forEach((e=>{var t=eo(vd({id:r.id,brand:r.brand,title:r.title,expiration:r.live_metadata.end_date},i));n("".concat(e,"?").concat(t))}))}));return t.pluck(mi).filter(Boolean).take(1).switchMap((()=>r))}function Td(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function wd(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Td(Object(n),!0).forEach((function(t){Sd(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Td(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Sd(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Cd(e){return function(t){return wd(wd({},t),{},{cneBeaconLibrary$:_d(t),cneEventLibrary$:Dl(e),comscoreLibrary$:jl(t),facebookLibrary$:Bl(t),googleAnalyticsLibrary$:Wl(t),moatContentLibrary$:Yl(t),moatLibrary$:Jl(t),nielsenLibrary$:ed(t),permutiveLibrary$:cd(t),sparrowLibrary$:fd(t)})}}var Ed=()=>Math.floor(65536*Math.random()).toString(16);function kd(e){var t=new Map,[,n]=e.split("?");return(n?n.split("&"):[]).forEach((e=>{var[n,r]=e.split("=");t.set(n,decodeURIComponent(r))})),t}var Od,xd="aam_uuid",Ad="aam_fw";function Pd(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:tu,t=e(xd,""),n=e(Ad,""),r=Id(n);return{userId:t,segmentKeyValues:r}}function Id(e){return e?e.split(";"):[]}function Ld(e,t){var n=e?window.top:window,r=e&&window.frameElement||t,{top:i}=r.getBoundingClientRect();return n.pageYOffset+i}function Md(){if(!Od)try{var e=document.createElement("canvas");Od=!!window.WebGLRenderingContext&&(e.getContext("webgl")||e.getContext("experimental-webgl"))}catch(e){Od=!1}return Od}function Dd(e){var{sponsoredVideo:t,environment:n,playerConfig:r,video:i}=e,a=ac(),s=function(e){var{target:t}=e,n=document.getElementById(t);if(!n)throw new Error("Could not find playerContainer with id '#".concat(t,"'"));return n}(r),o=function(e){var t=document.createElement("video"),n=La("cne-support-enable-javascript"),r='<a href="http://videojs.com/html5-video-support/" target="_blank">'.concat(La("cne-support-html5-video"),"</a>");return t.className="vjs-default-skin",t.removeAttribute("controls"),t.setAttribute("webkit-playsinline",""),t.setAttribute("playsinline",""),t.setAttribute("crossorigin","anonymous"),t.innerHTML='<p class="vjs-no-js">'.concat(n," ").concat(r,"</p>"),e.appendChild(t),t}(s),u=oc(),c=parseFloat(tu("volume")),l=a?window.top:window;return{aspectRatio:r.aspectRatio,audienceManagerConfig:Pd(),autoplayEnabled:n.canAutoplay!==cl&&r.autoplay,canAccessParent:a,canAutoplay:n.canAutoplay!==cl,captionsCookie:tu("captions"),doNotTrackSetting:l.navigator?l.navigator.doNotTrack:null,environment:n,guid:n.guid||Ed()+Ed()+"-"+Ed()+"-"+Ed()+"-"+Ed()+"-"+Ed()+Ed()+Ed(),is360Supported:Md()&&!Ws(),isContinuousPlay:r.continuousPlay||r.loopVideo,isMobile:Hs(),isScriptEmbed:r.isScriptEmbed,location:u,mutedConfig:ll(tu("muted"),c,e),pageId:tu("pID",""),playerConfig:r,playerContainer:s,publicaEnabled:!!e.publicaEnabled,referenceWindow:l,sessionId:tu("sID",""),sponsoredVideo:t,uId:tu("CN_sp",""),urlVars:kd(u),video:i,videoEl:o,videoPagePosition:Ld(a,o),volumeCookie:c}}var Rd="#222",Nd="#ccc",jd=()=>({colors:{white:"#fff",black:"#fff"},fonts:{families:{ArialMT:"ArialMT",casual:'"Comic Sans MS", Impact, fantasy',default:"ArialMT",monospace:"monospace",monospaceSansSerif:'"Andale Mono", "Lucida Console", monospace',monospaceSerif:'"Courier New", monospace',proportionalSansSerif:"sans-serif",proportionalSerif:"serif",sansSerif:"sans-serif",script:'"Monotype Corsiva", cursive',serif:"serif",smallcaps:'"Andale Mono", "Lucida Console", monospace, sans-serif',SUFIText:"SFUIText, sans-serif"},sizes:{small:"16px",medium:"20px",large:"24px"},variants:{smallcaps:"small-caps"}},languages:{english:La("cne-caption-language-english")},textShadows:{dropshadow:"2px 2px 3px ".concat(Rd,",\n      2px 2px 4px ").concat(Rd,",\n      2px 2px 5px ").concat(Rd),raised:"1px 1px ".concat(Rd,",\n      2px 2px ").concat(Rd,",\n      3px 3px ").concat(Rd),depressed:"1px 1px ".concat(Nd,",\n      0 1px ").concat(Nd,",\n      -1px -1px ").concat(Rd,",\n      0 -1px ").concat(Rd),uniform:"0 0 4px ".concat(Rd,",\n      0 0 4px ").concat(Rd,",\n      0 0 4px ").concat(Rd,",\n      0 0 4px ").concat(Rd)},positions:{top:{top:"2px",bottom:"auto"},bottom:{top:"auto",bottom:"2px"},auto:null},defaultValues:{backgroundColor:"#000",backgroundOpacity:"0.5",color:"#fff",edgeStyle:"dropshadow",fontSize:"14px",fontFamily:"SUFIText",language:"English",position:"auto",videoQuality:"auto"}}),Ud={auto:"auto",UHD4K:"4k",HD1080:"1080",HD720:"720",SD360:"360"},Fd={videoQuality:"auto"},$d=()=>{var e=La("cne-player-font-small"),t=La("cne-player-font-medium"),n=La("cne-player-font-large"),r=La("cne-player-position-auto"),i=La("cne-player-position-bottom"),a=La("cne-player-position-top"),s=La("cne-player-quality-auto");return{fontSize:[[e,jd().fonts.sizes.small],[t,jd().fonts.sizes.medium],[n,jd().fonts.sizes.large]],language:[[La("cne-caption-language-english"),jd().languages.english]],position:[[r,"auto"],[i,"bottom"],[a,"top"]],videoQuality:[[s,Ud.auto],['2160<span class="resolution">4k<span>',Ud.UHD4K],['1080<span class="resolution">HD<span>',Ud.HD1080],["720",Ud.HD720],["360",Ud.SD360]]}};function Bd(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(Object.keys(e.share_links||{})||[]).map((e=>({name:"ShareActionButton",action:e,ariaLabel:La("cne-aria-share-".concat(e))})));return{cneSvgDefs:!0,mediaLoader:!0,cne360Container:!0,adClickMask:!0,adContainer:!0,posterImage:!0,cneAnimatedClip:!0,cneScrubPoster:!0,cneBigPlayTitle:!0,loadingSpinner:!0,cneTextTrackDisplay:!0,persistentShare:{children:{shareWidget:!0,shareDropdown:{children:[...t.slice(0,2).map((e=>({name:"ShareDropdownItem",action:e.action}))),{name:"ShareDropdownItem",action:"email"},{name:"ShareDropdownItem",action:"more"}]}}},cneOverlay:{children:{shareOverlay:{children:{shareActions:{children:t},shareEmbed:!0,shareUrl:!0}},cneMessageOverlay:!0,cneLiveOverlay:!0,cneClose:!0}},cneLiveIndicatorActive:!0,cneLiveIndicatorAd:!0,controlBar:{children:Vd()},cneMessage:!0,cne360Compass:!0,cneVideoTitle:!0,persistentMute:!0}}var Vd=()=>{var e={progressControl:{children:{seekBar:{children:{loadProgressBar:!0,playProgressBar:{timeTooltip:!0},cneScrubberThumb:!0}}}},cneFullscreenToggle:!0,playToggle:!0,cneLiveIndicator:!0,cneVolumeToggle:{children:{muteToggle:!0,volumeControl:{vertical:!0,children:{volumeBar:{children:{volumeLevel:!0}}}}}},cneVolumeAlert:!0,cneCaptionsButton:!0,cneSettings:{children:{cneSettingsToggle:!0,cneSettingsMenu:{children:{settingsHeader:!0,settingsBody:{children:{cnePlayerSettings:{title:La("cne-player-settings-title"),children:[{name:"cneOptionGroup",className:"cne-settings-option-group cne-video-quality",defaultValue:Fd.videoQuality,label:La("cne-player-video-quality"),listItems:$d().videoQuality,settingKey:"videoQuality",title:"player settings"},{name:"cneButton",className:"cne-settings-button",text:La("cne-player-caption-options"),intents:[{type:"intent:show-settings-submenu",data:"CnePlayerSettings"}]}]},cneCaptionOptions:{title:La("cne-player-caption-title"),children:[{name:"cneDropdown",className:"cne-captions-language",defaultValue:jd().defaultValues.language,label:La("cne-player-language"),listItems:$d().language,settingKey:"language",title:"closed captions language"},{name:"cneDropdown",className:"cne-captions-font-size",defaultValue:jd().defaultValues.fontSize,label:La("cne-player-font-size"),listItems:$d().fontSize,settingKey:"fontSize",title:"closed captions font size"},{name:"cneOptionGroup",className:"cne-captions-position",defaultValue:jd().defaultValues.position,label:La("cne-player-position"),listItems:$d().position,settingKey:"position",title:"closed captions position"},{name:"cneButton",className:"cne-settings-button cne-style-options-button",text:La("cne-player-style-options"),intents:[{type:"intent:show-settings-submenu",data:"CneCaptionStyles"}]}]}}},settingsFooter:!0}}}},currentTimeDisplay:!0,durationDisplay:!0,remainingTimeDisplay:!0,fullscreenToggle:!0};return e};function qd(e,t){var n=document.createElement("style");n.innerHTML=e,n.setAttribute("type","text/css"),t.appendChild(n)}function Hd(e,t){var n=document.createElement("style"),r=":root { --aspect-ratio: ".concat(Wu(e),"; }");n.innerHTML=r,n.setAttribute("type","text/css"),t.appendChild(n)}var Wd=i().getComponent("Component");class zd extends Wd{createEl(){var e=document.createElement("div");e.id="awesome-container";var t=super.createEl("div",{className:"awesome-wrapper"});return t.appendChild(e),this.adEl_=e,t}adEl(){return this.adEl_}updateFocusable(e){this.toggleClass("cne-invisible",!e)}}i().registerComponent("AdContainer",zd);var Gd=i().getComponent("Component");class Kd extends Gd{createEl(){return super.createEl("div",{className:"click-mask"})}}i().registerComponent("AdClickMask",Kd);var Xd=i().getComponent("Component"),Yd=500;class Qd extends Xd{createEl(){var e,t=this.options_.projection_type_360,n=this.player_.tech({IWillNotUseThisInPlugins:!0}).el(),r=this.options_.width,i=this.options_.height;this.scene=new window.THREE.Scene,this.camera=new window.THREE.PerspectiveCamera(75,r/i,1,2e3),this.camera.target=new window.THREE.Vector3(0,0,0),this.renderer=new window.THREE.WebGLRenderer,this.renderer.setPixelRatio(window.devicePixelRatio),this.setRendererSize(r,i),this.renderer.autoClear=!1,this.renderer.setClearColor(0,1),this.texture=new window.THREE.Texture(n),this.texture.generateMipmaps=!1,this.texture.minFilter=window.THREE.LinearFilter,this.texture.maxFilter=window.THREE.LinearFilter,this.texture.format=window.THREE.RGBFormat,(e="equirectangular"===t?new window.THREE.SphereGeometry(Yd,60,40):new window.THREE.SphereBufferGeometry(Yd,60,40).toNonIndexed()).scale(-1,1,1);var a=new window.THREE.Mesh(e,new window.THREE.MeshBasicMaterial({map:this.texture}));return this.scene.add(a),this.time=(new Date).getTime(),this.renderer.domElement}render(){4===this.player_.readyState()&&(this.texture.needsUpdate=!0),this.renderer.render(this.scene,this.camera),this.camera.lookAt(this.camera.target)}updateCamera(e,t){this.camera.target.x=Yd*Math.sin(e)*Math.cos(t),this.camera.target.y=Yd*Math.cos(e),this.camera.target.z=Yd*Math.sin(e)*Math.sin(t)}updateSize(e){var{width:t,height:n}=e;this.camera.aspect=t/n,this.camera.updateProjectionMatrix(),this.setRendererSize(t,n)}setRendererSize(e,t){e>3840&&(t=t/e*3840,e=3840),this.renderer.setSize(e,t,!1)}}i().registerComponent("Cne360Canvas",Qd);var Jd='width="100%" height="100%"',Zd='viewBox="0 0 30 30"',eh="\n<svg ".concat(Jd,' viewBox="0 0 56 56" focusable="false">\n  <rect transform="translate(4 4)" fill="#000" width="48" height="48" rx="24" fill-opacity=".6"/>\n  <circle cx="28" cy="28" r="25" stroke="#FFF" stroke-width="3" fill="none" stroke-opacity=".6" />\n  <use xlink:href="#svg-big-play-icon" />\n</svg>'),th='\n<svg height="100%" viewBox="0 0 33.48 24" focusable="false">\n  <use xlink:href="#svg-email" />\n</svg>',nh='\n<svg height="100%" '.concat(Zd,' focusable="false">\n  <use xlink:href="#svg-facebook" />\n</svg>'),rh="\n<svg ".concat(Jd,' viewBox="0 0 38.2999992 30" focusable="false">\n  <use xlink:href="#svg-full-screen" class="svg-full-screen" />\n  <use xlink:href="#svg-full-screen" class="svg-full-screen shadow" />\n\n  <use xlink:href="#svg-full-screen-exit" class="svg-full-screen-exit" />\n  <use xlink:href="#svg-full-screen-exit" class="svg-full-screen-exit shadow" />\n</svg>'),ih="\n<svg ".concat(Jd,' viewBox="-3 0 30 24"xmlns="http://www.w3.org/2000/svg" fill-rule="evenodd" clip-rule="evenodd">\n     <use xlink:href="#svg-line" />\n</svg>'),ah="\n<svg ".concat(Jd,' viewBox="0 0 37.5 30" focusable="false">\n  <use xlink:href="#svg-muted" class="svg-muted" />\n  <use xlink:href="#svg-muted" class="svg-muted shadow" />\n  <use xlink:href="#svg-speaker" class="svg-speaker" />\n  <use xlink:href="#svg-speaker" class="svg-speaker shadow" />\n  <use xlink:href="#svg-volume-high" class="svg-volume-high" />\n  <use xlink:href="#svg-volume-high" class="svg-volume-high shadow" />\n  <use xlink:href="#svg-volume-low" class="svg-volume-low" />\n  <use xlink:href="#svg-volume-low" class="svg-volume-low shadow" />\n</svg>'),sh="\n<svg ".concat(Jd,' viewBox="0 0 37.5 30" focusable="false">\n  <use xlink:href="#svg-muted" class="svg-muted" />\n  <use xlink:href="#svg-muted" class="svg-muted shadow" />\n  <use xlink:href="#svg-speaker" class="svg-speaker" />\n  <use xlink:href="#svg-speaker" class="svg-speaker shadow" />\n</svg>'),oh='\n<svg height="100%" '.concat(Zd,' focusable="false">\n  <use xlink:href="#svg-pinterest" />\n</svg>'),uh="\n<svg ".concat(Jd,' viewBox="0 0 26.1000004 30" focusable="false">\n  <use xlink:href="#svg-play" />\n  <use xlink:href="#svg-play" class="shadow" />\n</svg>'),ch="\n<svg ".concat(Jd,' viewBox="0 0 26.1000004 30" focusable="false">\n  <use xlink:href="#svg-pause" class="svg-pause" />\n  <use xlink:href="#svg-pause" class="svg-pause shadow" />\n\n  <use xlink:href="#svg-play" class="svg-play" />\n  <use xlink:href="#svg-play" class="svg-play shadow" />\n</svg>'),lh="\n<svg ".concat(Jd,' viewBox="0 0 28 30" focusable="false">\n  <use xlink:href="#svg-share" />\n  <use xlink:href="#svg-share" class="shadow" />\n</svg>'),dh="\n<svg ".concat(Jd,' viewBox="0 0 40 30" focusable="false">\n  <use xlink:href="#svg-360-dial" />\n</svg>'),hh="\n<svg ".concat(Jd,' viewBox="0 0 75 30" focusable="false">\n  <use xlink:href="#svg-360-icon" />\n</svg>'),ph='\n<svg height="100%" '.concat(Zd,' focusable="false">\n  <use xlink:href="#svg-tumblr" />\n</svg>'),fh='\n<svg height="100%" '.concat(Zd,' focusable="false">\n  <use xlink:href="#svg-twitter" />\n</svg>'),mh='\n<svg height="100%" '.concat(Zd,' focusable="false">\n  <use xlink:href="#svg-url" />\n</svg>'),gh='\n<svg height="9" viewBox="0 0 12 9" focusable="false">\n  <use xlink:href="#svg-check" />\n</svg>',vh=i().getComponent("Component");class yh extends vh{createEl(){return super.createEl("div",{className:"cne-360-compass",innerHTML:hh})}updateRotation(e){this.el().innerHTML='\n      <div class="cne-360-icon">'.concat(hh,'</div>\n      <div class="cne-360-compass-dial" style="transform:rotate(').concat(e,'deg);">\n        ').concat(dh,"\n      </div>")}}i().registerComponent("Cne360Compass",yh);var bh;function _h(){if(void 0===bh)try{bh=!!window.AudioContext}catch(e){bh=!1}return bh}var Th=i().getComponent("Component"),wh=Math.PI/2,Sh=Math.PI;class Ch extends Th{createEl(){return super.createEl("div",{className:"cne-360-container",id:"cne-360-container"})}updateSrc(e){this.removeChild("Cne360Canvas"),this.removeClass("active"),e&&window.THREE&&(this.initializeAudio(),this.addClass("active"),this.addChild("Cne360Canvas",{projection_type_360:e,width:this.width,height:this.height}),this.updatePhiTheta(wh,Sh))}render(){var e=this.getChild("Cne360Canvas");e&&e.render()}updateSize(e){var{width:t,height:n}=e;this.width=t,this.height=n;var r=this.getChild("Cne360Canvas");r&&r.updateSize({width:t,height:n})}updatePhiTheta(e,t){var n=this.getChild("Cne360Canvas");n&&(n.updateCamera(e,t),this.updateAudio(e,t))}initializeAudio(){if(!this.foaDecoder&&_h()){var{Euler:e,Matrix3:t,Matrix4:n,Omnitone:r,Quaternion:i}=window.THREE,a=this.player_.tech({IWillNotUseThisInPlugins:!0}).el();this.euler_=new e,this.orientation_=new i,this.rotationQuarternion_=new i,this.rotationMatrix4_=new n,this.rotationMatrix_=new t;var s=new AudioContext,o=r.createFOADecoder(s,a,{postGainDB:2,channelMap:[0,1,2,3]});o.initialize().then((()=>{o.setMode("ambisonic")})),this.foaDecoder=o}}updateAudio(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.foaDecoder&&_h()&&(this.euler_.set(e,t,0,"YXZ"),this.orientation_.setFromEuler(this.euler_),this.rotationQuarternion_=this.orientation_.inverse(),this.rotationMatrix4_.makeRotationFromQuaternion(this.rotationQuarternion_),this.rotationMatrix_.setFromMatrix4(this.rotationMatrix4_),this.rotationMatrix_.getNormalMatrix(this.rotationMatrix4_),this.foaDecoder.setRotationMatrix(this.rotationMatrix_.elements))}}i().registerComponent("Cne360Container",Ch);var Eh=i().getComponent("ClickableComponent");class kh extends Eh{constructor(e,t){super(e,t),this.el_.removeAttribute("role")}createEl(){return super.createEl("div",{className:"cne-animated-clip",tabIndex:"-1"},{"aria-live":"off"})}update(e){var{action:t,animated_clip_url_mp4:n,animated_clip_url_webm:r,animated_clip_still:i}=e;"show"===t?this.el().innerHTML='<video loop muted autoplay webkit-playsinline playsinline\n                                poster="'.concat(i,'" >\n                                <source src="').concat(n,"\" type='video/mp4'>\n                                <source src=\"").concat(r,"\" type='video/webm'>\n                             </video>"):"hide"===t&&(this.el().innerHTML="")}handleClick(){this.player_.trigger("intent:play")}}i().registerComponent("CneAnimatedClip",kh);var Oh=i().getComponent("ClickableComponent");const xh=class extends Oh{createControlTextEl(){}controlText(){}handleKeyUp(e){32===e.keyCode&&e.stopPropagation()}};class Ah extends xh{constructor(e,t){super(e,t),this.on("keyup",this.handleKeyUp)}createEl(){return super.createEl("div",{className:"cne-big-play-title"})}handleClick(){this.player_.trigger("intent:play")}update(e){var{title:t,hidePosterTitle:n}=e;this.el_.innerHTML=this.getInnerHTML(t),n?this.addClass("hide-title"):this.removeClass("hide-title")}getInnerHTML(e){return"<div class='vjs-big-play-button' tabindex='-1'>".concat(eh,"</div>\n            <div class='cne-big-play-title-section'>\n              <div class='cne-big-play-title-watch'>").concat(La("cne-player-big-play-title-watch"),"</div>\n              <div class='cne-big-play-title-text'>").concat(e,"</div>\n            </div>")}}i().registerComponent("CneBigPlayTitle",Ah);class Ph extends xh{createEl(){var e=this.options_.text;return this.intents=this.options_.intents,super.createEl("div",{className:this.options_.className||"cne-button"},{"data-msg":e})}handleClick(){for(var e of this.intents)e.data?this.player_.trigger(e.type,e.data):this.player_.trigger(e)}}i().registerComponent("CneButton",Ph);var Ih='\n<span class="custom-control-focus" tabindex="-1">\n  '.concat('\n<svg width="20" height="16" viewBox="0 0 20 16" focusable="false">\n  <use xlink:href="#svg-cc-on" class="svg-cc-on" />\n  <use xlink:href="#svg-cc-on" class="svg-cc-on shadow" />\n  <use xlink:href="#svg-cc-off" class="svg-cc-off" />\n  <use xlink:href="#svg-cc-off" class="svg-cc-off shadow" />\n  <use xlink:href="#svg-cc-disabled" class="svg-cc-disabled" />\n  <use xlink:href="#svg-cc-disabled" class="svg-cc-disabled shadow" />\n</svg>',"\n</span>");class Lh extends xh{constructor(e,t){super(e,t),this.on("keyup",this.handleKeyUp)}createEl(){var e={"aria-label":La("cne-aria-closed-captions"),"aria-pressed":"false"};return super.createEl("div",{innerHTML:Ih,className:"vjs-captions-button "+super.buildCSSClass()},e)}update(e){this.resetStyle(),this.addClass(mo[e]),"disabled"===e?this.player_.trigger("intent:disable-settings-submenu","cneCaptionOptions"):"showing"==e?(this.setAttribute("aria-pressed","true"),this.player_.trigger("intent:enable-settings-submenu","cneCaptionOptions")):"hidden"===e&&this.setAttribute("aria-pressed","false")}resetStyle(){[mo.disabled,mo.showing,mo.hidden].map((e=>this.removeClass(e)))}handleClick(){this.player_.trigger("intent:toggle-captions")}}i().registerComponent("CneCaptionsButton",Lh);var Mh={TAB:9,RETURN:13,SHIFT:16,ESC:27,SPACE:32,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40},Dh=[Mh.UP,Mh.DOWN,Mh.LEFT,Mh.RIGHT];class Rh extends xh{constructor(e,t){super(e,t),this.on("keydown",this.handleKeyDown),this.on("keyup",this.handleKeyUp)}createEl(){this.intent=this.options_.intent,this.callback=this.options_.callback,this.className=this.options_.className||"";var e={"aria-label":La("cne-aria-close-share")};return super.createEl("div",{innerHTML:'<span class="custom-control-focus" tabindex="-1"></span>',className:this.buildCSSClass()},e)}buildCSSClass(){return"cne-close ".concat(this.className)}handleKeyUp(e){e.keyCode===Mh.SPACE?e.stopPropagation():e.keyCode===Mh.ESC&&this.player_.trigger("intent:close-overlay")}handleKeyDown(e){e.keyCode!==Mh.TAB||e.shiftKey||this.player_.hasClass("overlay-active")&&(this.player_.trigger("intent:close-overlay"),this.player_.focus())}handleClick(e){e&&e.stopPropagation(),this.callback&&this.callback(),this.intent?this.player_.trigger(this.intent):this.player_.trigger("intent:close-overlay")}}i().registerComponent("CneClose",Rh);var Nh=i().getComponent("Component");class jh extends Nh{createEl(){return super.createEl("div",{className:"vjs-control-bar",dir:"ltr"},{"aria-label":La("cne-aria-player-control-bar"),role:"group"})}updateTabOrder(){this.player_.el_.clientWidth<xa?(this.player_.persistentShare.shareWidget.el_.tabIndex="1",this.playToggle.el_.tabIndex="2",this.cneVolumeToggle.muteToggle.el_.tabIndex="3",this.progressControl.seekBar.el_.tabIndex="4"):(this.player_.persistentShare.shareWidget.el_.tabIndex="0",this.playToggle.el_.tabIndex="0",this.cneVolumeToggle.muteToggle.el_.tabIndex="0",this.progressControl.seekBar.el_.tabIndex="0")}}i().registerComponent("ControlBar",jh);var Uh=i().getComponent("Component");class Fh extends Uh{constructor(e,t){super(e,t),this.id=t.id}getId(){var e=this.options_.settingKey||"";return"".concat(this.player_.id_,"-settings-").concat(e.toLowerCase())}selectionChanged(){this.player_.trigger("intent:save-settings",{source:this,key:this.key(),val:this.getValue()})}buildCSSClass(){return"cne-option-control"}key(){return this.options_.settingKey}listElement(){return this.$("ul")}optionElements(){var e=this.listElement();return[].slice.call(e.children)}getValue(){return this.value||this.options_.default}selectedOption(){return this.el().querySelector(".cne-option-selected")}selectedText(){var e=this.selectedOption()||this.optionElements()[0];return e?e.innerText.trim():""}selectedId(){var e=this.selectedOption()||this.optionElements[0];return e?e.id:""}setValue(e){this.optionElements().map((t=>{t.getAttribute("value")===e?t.className="cne-option-selected":t.className=""})),this.value=e,this.updateAriaAttributes&&this.updateAriaAttributes()}}i().registerComponent("CneOptionControl",Fh);const $h=Fh;class Bh extends $h{constructor(e,t){super(e,t),this.init(),this.on(this.comboBox,"click",this.comboBoxClick),this.on(this.comboBox,"keydown",this.comboBoxKeyDown),this.on(this.listBox,"click",this.optionClick),this.on(this.comboBox,"keyup",(e=>e.stopPropagation())),this.on(this.listBox,"keyup",(e=>e.stopPropagation())),this.optionElements().map((e=>{this.on(e,"blur",this.optionLostFocus),this.on(e,"keydown",this.optionsKeyDown)}))}createEl(){return super.createEl("div",{id:this.getId(),className:super.buildCSSClass()+" cne-dropdown",innerHTML:'\n<svg width="6" height="10" viewBox="0 0 6 10" focusable="false">\n  <use xlink:href="#svg-chevron-down" />\n</svg>'})}init(){var e=this.getId(),{listItems:t,defaultValue:n,label:r}=this.options_;this.dropDownLabel=this.addChild("CneLabel",{label:r,id:"".concat(e,"-label")}),this.dropDownLabel.el_.setAttribute("for","".concat(e,"-textbox")),this.comboBox=this.addChild("CneDropdownOptions",{label:r,listItems:t,defaultValue:n,id:e}),this.listBox=this.$(".cne-dropdown-listbox"),this.textBox=this.$(".cne-dropdown-textbox"),this.setValue(n),this.updateAriaAttributes(),this.searchString=""}setValue(e){super.setValue(e),this.textBox.value=this.selectedText()}updateAriaAttributes(){var e=this.selectedId();this.comboBox.setAttribute("aria-expanded",this.expanded()),this.comboBox.setAttribute("aria-activedescendant",this.selectedId()),e&&(this.selectedOption().setAttribute("aria-selected","true"),this.optionElements().map((t=>{e!==t.id&&t.setAttribute("aria-selected","false")})))}hideList(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.comboBox.removeClass("expanded"),this.updateAriaAttributes(),this.searchString="",e||this.textBox.focus()}showList(){this.comboBox.addClass("expanded"),this.updateAriaAttributes(),this.listBox.children[0].focus()}expanded(){return this.comboBox.hasClass("expanded")}findOption(){var e=this.optionElements().filter((e=>0===e.innerText.trim().toLowerCase().indexOf(this.searchString)));e.length>0&&e[0].focus(),this.clearSearchString()}clearSearchString(){clearTimeout(this.searchTimeout),this.searchTimeout=setTimeout((()=>{this.searchString=""}),1500)}comboBoxClick(){this.expanded()||this.showList()}comboBoxKeyDown(e){switch(e.keyCode){case Mh.RETURN:case Mh.SPACE:this.showList();break;case Mh.ESC:this.expanded()?this.hideList():this.player_.trigger("intent:close-settings");break;case Mh.DOWN:e.preventDefault(),this.expanded()||this.showList();break;case Mh.UP:e.preventDefault();break;default:if(!/^[a-zA-Z0-9-_ ]$/.test(e.key))return;this.expanded()||this.showList(),this.searchString+=e.key,this.findOption()}}optionsKeyDown(e){switch(e.keyCode){case Mh.RETURN:case Mh.SPACE:this.optionClick(e);break;case Mh.TAB:var t=e.target.parentNode;t&&t.nextElementSibling&&t.nextElementSibling.focus();break;case Mh.DOWN:if(e.preventDefault(),this.expanded()){var n=e.target.nextElementSibling||e.target.parentNode.firstElementChild;n&&n.focus()}else this.showList();break;case Mh.UP:e.preventDefault();var r=e.target.previousElementSibling||e.target.parentNode.lastElementChild;r&&r.focus()}}optionLostFocus(e){clearTimeout(this.listTimeout),this.listTimeout=setTimeout((()=>{document.activeElement.parentNode!==e.target.parentNode&&this.hideList(!0)}),100)}optionClick(e){e.stopPropagation(),this.setValue(e.target.getAttribute("value")),this.hideList(),super.selectionChanged()}}i().registerComponent("CneDropdown",Bh);const Vh=e=>{return"<input type='text' id=\"".concat(e.id,'-textbox" \n    class="cne-dropdown-textbox" \n    tabIndex="-1" />\n  <ul id="').concat(e.id,'-listbox" class="cne-dropdown-listbox" role="listbox">\n    ').concat((t=e.id,n=e.listItems,r=e.defaultOption,n.reduce((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1?arguments[1]:void 0,i=n[0]===r?'class="cne-option-selected"':"",a=t+"-"+n[0].replace(" ","").toLowerCase();return"".concat(e,"\n      <li id=").concat(a," ").concat(i,' value="').concat(n[1],'" role="option" tabindex="-1">\n        ').concat(gh,"\n        ").concat(n[0],"\n      </li>")}),"")),"\n  </ul>");var t,n,r};var qh=i().getComponent("Component");class Hh extends qh{createEl(){var{label:e,listItems:t,defaultOption:n}=this.options_,r="".concat(this.options_.id,"-combobox"),i={"aria-activedescendant":"","aria-expanded":"false","aria-labelledby":"".concat(this.options_.id,"-label"),"aria-owns":"".concat(this.options_.id,"-listbox"),readonly:"true",role:"combobox",tabindex:"0"};return super.createEl("div",{id:r,className:"cne-dropdown-combobox",innerHTML:Vh({id:this.options_.id,label:e,listItems:t,defaultOption:n})},i)}}i().registerComponent("CneDropdownOptions",Hh);var Wh=i().getComponent("Component");class zh extends Wh{createEl(){return super.createEl("label",{id:this.options_.id,className:"cne-label",innerHTML:this.options_.label})}}i().registerComponent("CneLabel",zh);var Gh=i().getComponent("Component");class Kh extends Gh{createEl(){return super.createEl("div",{className:"cne-message"})}showMessage(e){var{message:t,buttonText:n,buttonIntent:r}=e;this.el_.innerHTML="<h4>".concat(t,"</h4>"),this.el_.className=this.getCSSClass(!0),this.addChild("CneClose",{intent:"intent:close-message"}),this.addChild("CneButton",{text:n,intents:["intent:close-message","intent:pause",r]})}hideMessage(){this.el_.innerHTML.length>0&&(this.removeChild("CneClose"),this.removeChild("CneButton"),this.el_.className=this.getCSSClass(!1),this.el_.innerHTML="")}getCSSClass(e){return"cne-message".concat(e?" active":" inactive")}}i().registerComponent("CneMessage",Kh);var Xh=i().getComponent("Component");class Yh extends Xh{createEl(){return super.createEl("div",{className:"cne-overlay-content message-overlay"})}update(e){var{title:t,message:n,buttonText:r,buttonIntents:i,iconType:a,closeable:s,image:o}=e,u="";o&&(u+="<img class='image' src=\"".concat(o,'" height="50px" alt="logo" />')),a&&(u+="<div class='icon-".concat(a,"'></div>")),t&&(u+="<h3>".concat(La(t),"</h3>")),n&&(u+="<h4>".concat(La(n),"</h4>")),s||this.player_.cneOverlay.cneClose.hide(),this.el().innerHTML=u,r&&i&&this.addChild("CneButton",{intents:i,text:"▶     "+La(r)},3),this.player_.trigger("intent:show-message-overlay")}}i().registerComponent("CneMessageOverlay",Yh);const Qh=(e,t,n,r,i)=>'<label id="'.concat(e,'-label" class="cne-label" for="').concat(e,'-radiogroup">').concat(n,'</label>\n  <ul id="').concat(e,'-radiogroup" \n    role="radiogroup"\n    class="').concat(t,'"\n    tabindex="-1"\n    aria-labelledby="').concat(e,'-label">\n    ').concat(function(e,t,n){return t.reduce((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1?arguments[1]:void 0,i=r[0]===n?'class="cne-option-selected" aria-checked="true"':'aria-checked="false"',a=e+"-"+r[0].replace(" ","").toLowerCase();return"".concat(t,'\n      <li role="radio" id=').concat(a,' tabindex="0" ').concat(i,' value="').concat(r[1],'">\n        <span class="custom-control-focus" tabindex="-1" value="').concat(r[1],'">\n          ').concat(r[0],"\n        </span>\n      </li>")}),"")}(e,r,i),"\n  </ul>");class Jh extends $h{constructor(e,t){super(e,t),this.focusedIndex=-1,this.setValue(this.options_.defaultValue),this.on(this.$("ul"),"click",this.handleOptionClick),this.optionElements().map((e=>{this.on(e,"keyup",this.handleKeyUp)}))}createEl(){var e=this.getId(),t=Qh(e,this.options_.className,this.options_.label,this.options_.listItems,this.options_.defaultValue);return super.createEl("div",{className:super.buildCSSClass()+" cne-option-group",innerHTML:t})}updateAriaAttributes(){var e=this.selectedId();e&&(this.selectedOption().setAttribute("aria-checked","true"),this.optionElements().map((t=>{e!==t.id&&t.setAttribute("aria-checked","false")})))}handleKeyUp(e){switch(e.keyCode){case Mh.RETURN:case Mh.SPACE:this.handleOptionClick(e),e.stopPropagation();break;case Mh.LEFT:var t=e.target.previousElementSibling||e.target.parentNode.lastElementChild;t&&t.focus();break;case Mh.RIGHT:var n=e.target.nextElementSibling||e.target.parentNode.firstElementChild;n&&n.focus()}}handleOptionClick(e){this.setValue(e.target.getAttribute("value")),super.selectionChanged(),this.updateAriaAttributes()}}i().registerComponent("CneOptionGroup",Jh);var Zh=i().getComponent("Component"),ep="cne-overlay",tp={embed:"share",url:"share"},np={embed:"share",url:"share"};class rp extends Zh{constructor(e,t){super(e,t),this.on("webkitAnimationEnd",this.handleAnimationEnd)}createEl(){return super.createEl("div",{className:ep})}update(e){var{type:t,action:n,source:r}=e;this[n](t,r)}hide(e){var t=np[e],n=this.buildStateClass(t);this.el_.className=n,this.player_&&this.player_.removeClass&&n===ep?(this.el_.className="".concat(n," inactive"),this.player_.removeClass("overlay-active")):this.el_.className=n,this.updateFocus(t)}show(e,t){this.el_.className=this.buildStateClass(e),this.player_&&this.player_.removeClass&&this.player_.addClass("overlay-active"),this.activeOverlay=e,this.openedBy=t}handleAnimationEnd(e){switch(e.animationName){case"displayIn":case"shiftInLeft":this.updateFocus(this.activeOverlay)}}updateFocus(e){if(e){var t;switch(e){case"share":t="keyboard"===this.openedBy?document.querySelector(".share-facebook-trigger"):document.querySelector(".share-facebook-trigger .custom-control-focus");break;case"embed":t=document.querySelector("#share-content-embed");break;case"url":t=document.querySelector("#share-content-url")}t&&t.focus()}}buildStateClass(e){if(!e)return ep;var t=tp[e],n=t?"".concat(t,"-active "):"";return"".concat(ep," active ").concat(n).concat(e,"-active")}}i().registerComponent("CneOverlay",rp);var{getPointerPosition:ip}=i().dom,ap=i().getComponent("Component");class sp extends ap{createEl(){return super.createEl("div",{innerHTML:'<video class="cne-scrub-poster__video" playsinline webkit-playsinline preload="metadata"></video>',className:this.buildCSSClass()})}buildCSSClass(){return"cne-scrub-poster"}updateVideo(e){var{thumb_encode:t,duration:n}=e,r=this.video();r.addEventListener("loadedmetadata",(()=>r.currentTime=1)),this.duration=n,r.currentSrc!==t&&r.setAttribute("src",t)}updatePosition(e){var t=this.getSeekBarEl(),n=ip(t,e).x*this.duration||0;this.video().currentTime=n+1.5}video(){return this.el().querySelector("video")}getSeekBarEl(){return this.player().getChild("controlBar").getChild("progressControl").getChild("seekBar").el()}}i().registerComponent("cneScrubPoster",sp);var{findPosition:op,getPointerPosition:up}=i().dom,cp=i().getComponent("Component");class lp extends cp{createEl(){return super.createEl("div",{innerHTML:'\n  <div class="cne-scrubber-thumb__container">\n    <video class="cne-scrubber-thumb__video"></video>\n    <div class="cne-scrubber-thumb__time js-scrubber-time"></div>\n  </div>',className:this.buildCSSClass()})}buildCSSClass(){return"cne-scrubber-thumb"}updateVideo(e){var{thumb_encode:t,duration:n}=e,r=this.video();this.duration=n,r.currentSrc!==t&&r.setAttribute("src",t)}updatePosition(e){var t=this.getSeekBarEl(),n=up(t,e).x*this.duration||0,r=i().formatTime(n),a=this.el();a.querySelector(".js-scrubber-time").innerHTML=r,this.video().currentTime=n+1.5;var s=e.pageX-op(t).left,o=t.clientWidth,u=a.clientWidth,c=Math.max(s-u/2,0);a.style.left=Math.min(c,o-u)+"px"}video(){return this.el().querySelector("video")}getSeekBarEl(){return this.player().getChild("controlBar").getChild("progressControl").getChild("seekBar").el()}}i().registerComponent("CneScrubberThumb",lp);var dp=n(7317).Z;function hp(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function pp(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?hp(Object(n),!0).forEach((function(t){fp(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hp(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function fp(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var mp=i().getComponent("Component"),gp="cne-player-settings";class vp extends mp{constructor(e,t,n){super(e,t);var r=n||this.cneSettingsMenu;this.playerSubMenus={CnePlayerSettings:r.settingsBody.cnePlayerSettings},this.captionSubMenus={CneCaptionOptions:r.settingsBody.cneCaptionOptions},this.subMenus=pp(pp({},this.playerSubMenus),this.captionSubMenus),e.options_.persistTextTrackSettings&&this.loadSavedSettings(),r.showSubMenu(this.subMenus.CneCaptionOptions),this.on(this.player_,"caption-settings-disabled",this.disable)}createEl(){var e={id:"".concat(this.player_.id_,"-settings"),tabindex:"-1"};return super.createEl("div",{className:"cne-settings vjs-control"},e)}toggleMenu(e){"disable"===e?this.disable():"enable"===e?this.enable():(this.isDisabled()&&this.enable(),"show"===e?this.cneSettingsMenu.show():"hide"===e&&this.cneSettingsMenu.hide()),this.cneSettingsToggle.setAttribute("aria-expanded","show"===e)}disable(){this.addClass("vjs-hidden"),this.addClass("cne-settings-disabled")}enable(){this.removeClass("vjs-hidden"),this.removeClass("cne-settings-disabled")}isDisabled(){return this.el().className.indexOf("cne-settings-disabled")>=0}getSavedSettings(){return function(e){try{return JSON.parse(window.localStorage.getItem(e))}catch(e){dp(e)}}(gp)}saveSettings(){var e=this.getCurrentSettings(!0);!function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;try{if(t){var n=t;"object"==typeof t&&(n=JSON.stringify(t)),window.localStorage.setItem(e,n)}else window.localStorage.removeItem(e)}catch(e){dp(e)}}(gp,e),this.showCaptions(),this.updateCaptionPreview()}getCurrentSettings(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return(e||null==this.currentSettings)&&(this.currentSettings=pp(pp({},this.getPlayerSettings(e)),this.getCaptionSettings(e))),this.currentSettings}getCaptionSettings(){return(arguments.length>0&&void 0!==arguments[0]&&arguments[0]||null==this.captionSettings)&&(this.captionSettings=pp(pp({},jd().defaultValues),this.buildSettingsObject(this.captionSubMenus))),this.captionSettings}getPlayerSettings(){return(arguments.length>0&&void 0!==arguments[0]&&arguments[0]||null==this.playerSettings)&&(this.playerSettings=this.buildSettingsObject(this.playerSubMenus)),this.playerSettings}buildSettingsObject(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.subMenus,t=this.getSavedSettings()||{};return Object.keys(e).map((e=>{[...this.subMenus[e].children()].map((e=>{e.options_.settingKey&&(t[e.options_.settingKey]=e.getValue())}))})),t}updateCaptionPreview(){var e=this.activeCaptions();e&&(this.el().querySelector(".cne-captions-sample-text").style.cssText="font-size: "+this.captionSettings.fontSize,this.updateCaptionsDisplay(),e.mode="showing")}updateCaptionsDisplay(){var e=this.player_.getChild("cneTextTrackDisplay");e&&e.updateDisplay()}loadSavedSettings(){var e=this.getSavedSettings();e&&this.applySettings(e)}applySettings(e){Object.keys(this.subMenus).map((t=>{[...this.subMenus[t].children()].map((t=>{t.options_.settingKey&&t.setValue(e[t.key()])}))}))}showCaptions(){var e=this.activeCaptions();e&&"hidden"===e.mode&&this.player_.trigger("intent:toggle-captions")}activeCaptions(){return this.player_.textTracks().tracks_.find((e=>"captions"===e.kind))}}i().registerComponent("CneSettings",vp);var yp=i().getComponent("Component");class bp extends yp{createEl(){return super.createEl("div",{innerHTML:'\n<svg class="svg-defs" focusable="false">\n  <defs>\n    <filter height="130%" id="icon-shadow">\n      <feGaussianBlur in="SourceGraphic" stdDeviation="1" result="blur"/>\n      <feOffset in="blur" dx="0" dy="0" result="offsetBlur"/>\n      <feMerge>\n        <feMergeNode in="offsetBlur"/>\n        <feMergeNode in="SourceGraphic"/>\n      </feMerge>\n    </filter>\n\n    <path id="svg-360-dial" d="M39.9333344 8.8072824C34.8318254 3.396724 27.7832164.05 19.9982777.05c-7.7837925 0-14.830103 3.3455062-19.93161 8.7548447l19.93161 21.145157L39.9333344 8.8072823z" />\n    <path id="svg-360-icon" d="M60.35 15.122v1.215c5.105.608 8.994 1.459 8.994 2.917 0 2.796-18.718 2.917-21.635 2.917v3.889s27.104-.608 27.104-6.685c-.12-2.43-6.805-3.646-14.463-4.253zM.186 19.376c0 5.956 26.861 6.685 34.033 6.685v3.889l9.359-5.713-9.359-5.713v3.889s-28.563.608-28.563-3.16c0-1.337 3.889-2.309 8.994-2.917v-1.215C6.871 15.729.186 16.945.186 19.376zm18.596-5.835l1.459-.365c.122-.122.243 0 .365.122.365 1.094 1.215 2.188 3.039 2.188 1.823 0 2.917-1.215 2.917-2.917 0-1.945-1.215-3.16-3.039-3.16 0 0-.972-.122-.972-.243V7.829c-.122-.122.851-.243.851-.243 1.702 0 2.796-1.094 2.796-2.796 0-1.58-.972-2.674-2.674-2.674-1.58 0-2.431.851-2.674 2.066-.122.122-2.066-.365-1.945-.608.365-1.823 2.066-3.403 4.74-3.403 3.039 0 4.862 1.945 4.862 4.497 0 1.702-.851 2.917-2.066 3.646v.122c1.094.365 2.431 1.945 2.431 4.133 0 2.917-2.066 4.983-5.105 4.983-2.674 0-4.497-1.459-5.105-3.525-.123-.364-.001-.486.12-.486zm14.829-5.104l4.254-7.9c.122-.122.122-.122.365-.122h1.702c.122 0 .243.122.122.243l-3.768 6.928.122.122c.365-.243.972-.365 1.702-.365 2.674 0 4.862 1.945 4.862 4.983 0 3.282-2.188 5.226-5.226 5.226-3.039 0-5.105-1.945-5.105-5.105-.124-1.58.362-2.917.97-4.01zm4.132 6.928c1.823 0 3.039-1.337 3.039-3.16s-1.215-3.16-3.039-3.16c-1.823 0-3.039 1.337-3.039 3.16s1.216 3.16 3.039 3.16zM46.13 8.68c0-3.889.122-4.862.365-5.47.608-1.945 2.188-3.16 4.619-3.16 2.309 0 4.011 1.094 4.619 3.16.122.608.365 1.58.365 5.47s-.122 4.862-.365 5.47c-.608 2.066-2.309 3.16-4.619 3.16-2.309 0-4.011-1.094-4.619-3.16-.244-.609-.365-1.581-.365-5.47zm5.105 6.685c1.215 0 2.188-.608 2.552-1.702.122-.486.243-1.215.243-4.983 0-3.889-.122-4.497-.243-5.105-.365-1.094-1.337-1.702-2.552-1.702s-2.188.608-2.552 1.702c-.122.486-.243 1.215-.243 5.105 0 3.768.122 4.497.243 4.983.242 1.215 1.215 1.702 2.552 1.702zM62.66 4.79c-1.337 0-2.431-1.094-2.431-2.431S61.323.05 62.66.05s2.309 1.094 2.309 2.309c0 1.337-.972 2.431-2.309 2.431zm0-3.525c-.608 0-1.215.486-1.215 1.094s.486 1.094 1.215 1.094c.608 0 1.094-.486 1.094-1.094 0-.607-.487-1.094-1.094-1.094z" />\n    <path id="svg-big-play-icon" fill="#FFF" d="M38 27.019l-16 9.068V18.039z" />\n    <path id="svg-email" d="M4,3v17h24V3H4L4,3z M23.9,5.2L16,11.6L8.1,5.2H23.9L23.9,5.2z M6.1,17.9V6.4l9.9,8l9.9-8v11.5H6.1 L6.1,17.9z" />\n    <path id="svg-embed" d="M10.967 25.884L.053 14.969 11.061 4.055l2.352 2.352-8.656 8.562 8.562 8.562-2.352 2.353zm36.13-10.915L36.183 4.055l-2.352 2.352 8.562 8.562-8.656 8.562 2.352 2.352 11.008-10.914zM17.581 28.921l3.128 1.029 9.494-28.871L27.075.05l-9.494 28.871z" />\n    <path id="svg-facebook" d="M22.724.34v4.72h-2.807c-1.025 0-1.716.215-2.074.644-.358.429-.536 1.073-.536 1.931v3.379h5.238l-.697 5.292h-4.541v13.57h-5.471v-13.57h-4.56v-5.292h4.559V7.116c0-2.217.62-3.936 1.859-5.158S16.584.125 18.646.125c1.753 0 3.112.072 4.078.215z" />\n    <path id="svg-full-screen" d="M3.5644 9.8778H.05V.0222h10.4667997v3.5144003H3.5644V9.8778zM38.253399 9.184h-3.514397V3.5304003h-5.6536026V.016h9.1679993v9.168zM38.253399 29.9477997H27.7866V26.433401h6.9524022v-6.3412017h3.5143967v9.8556004zM9.2180176 26.4384155v3.5143433H.0499878V20.78479H3.564392v5.6536255h5.6536256z" />\n    <path id="svg-full-screen-exit" d="M11.061904 29.9500008H7.3433752v-7.361168H.0580964v-3.642639h11.003808v11.003807zM30.9766235 29.9500008h-3.7185268v-11.003807H38.261902v3.642639h-7.2852784v7.361168zM38.261902 11.0319033H27.2580966V.028097h3.7185268v7.3611673h7.2852783v3.642639zM11.061904 11.0319033H.0580964V7.389264h7.2852788V.028097h3.7185287v11.0038063z" />\n    <path id="svg-line" d="M24 10.304c0-5.369-5.383-9.738-12-9.738-6.616 0-12 4.369-12 9.738 0 4.814 4.269 8.846 10.036 9.608.391.084.922.258 1.057.592.121.303.079.778.039 1.085l-.171 1.027c-.053.303-.242 1.186 1.039.647 1.281-.54 6.911-4.069 9.428-6.967 1.739-1.907 2.572-3.843 2.572-5.992zm-18.988-2.595c.129 0 .234.105.234.234v4.153h2.287c.129 0 .233.104.233.233v.842c0 .129-.104.234-.233.234h-3.363c-.063 0-.119-.025-.161-.065l-.001-.001-.002-.002-.001-.001-.003-.003c-.04-.042-.065-.099-.065-.161v-5.229c0-.129.104-.234.233-.234h.842zm14.992 0c.129 0 .233.105.233.234v.842c0 .129-.104.234-.233.234h-2.287v.883h2.287c.129 0 .233.105.233.234v.842c0 .129-.104.234-.233.234h-2.287v.884h2.287c.129 0 .233.105.233.233v.842c0 .129-.104.234-.233.234h-3.363c-.063 0-.12-.025-.162-.065l-.003-.004-.003-.003c-.04-.042-.066-.099-.066-.161v-5.229c0-.062.025-.119.065-.161l.004-.004.003-.003c.042-.04.099-.066.162-.066h3.363zm-10.442.001c.129 0 .234.104.234.233v5.229c0 .128-.105.233-.234.233h-.842c-.129 0-.234-.105-.234-.233v-5.229c0-.129.105-.233.234-.233h.842zm2.127 0h.008l.012.001.013.001.01.001.013.003.008.003.014.004.008.003.013.006.007.003.013.007.007.004.012.009.006.004.013.011.004.004.014.014.002.002.018.023 2.396 3.236v-3.106c0-.129.105-.233.234-.233h.841c.13 0 .234.104.234.233v5.229c0 .128-.104.233-.234.233h-.841l-.06-.008-.004-.001-.015-.005-.007-.003-.012-.004-.011-.006-.007-.003-.014-.009-.002-.002-.06-.058-2.399-3.24v3.106c0 .128-.104.233-.234.233h-.841c-.129 0-.234-.105-.234-.233v-5.229c0-.129.105-.233.234-.233h.841z"/>\n    <path id="svg-muted" d="M31.8312 13.1313l-3.7375-3.7375-1.8687 1.8687L29.9625 15l-3.7375 3.7375 1.8687 1.8688 3.7375-3.7375 3.7375 3.7375 1.8688-1.8688L33.7 15l3.7375-3.7375-1.8688-1.8687-3.7375 3.7375z" />\n    <path id="svg-pause" d="M.4850805.02h4.13172v29.9399986h-4.13172V.02zm20.8981192 29.939999h4.1317215V.02h-4.1317215v29.939999z" />\n    <path id="svg-pinterest" d="M15 .073C6.742.073.075 6.74.075 14.999c0 6.369 3.98 11.742 9.452 13.931-.1-1.195-.199-2.985.1-4.279.298-1.195 1.791-7.463 1.791-7.463s-.497-.897-.497-2.189c0-2.09 1.194-3.582 2.687-3.582 1.294 0 1.891.995 1.891 2.091 0 1.293-.796 3.184-1.195 4.975-.398 1.493.796 2.688 2.19 2.688 2.687 0 4.677-2.786 4.677-6.867 0-3.582-2.588-6.069-6.269-6.069-4.278 0-6.766 3.183-6.766 6.468 0 1.293.497 2.687 1.094 3.382.099.199.099.298.099.398 0 .497-.298 1.493-.298 1.791-.099.298-.199.298-.497.2-1.89-.896-2.985-3.582-2.985-5.771 0-4.678 3.383-9.056 9.851-9.056 5.174 0 9.154 3.682 9.154 8.657 0 5.175-3.284 9.255-7.761 9.255-1.493 0-2.886-.797-3.383-1.691l-.896 3.58c-.298 1.294-1.294 2.887-1.89 3.883 1.393.397 2.886.596 4.378.596 8.258 0 14.925-6.667 14.925-14.926S23.258.073 15 .073z" />\n    <path id="svg-play" d="M0 0l26.1 15l-26.1 15z" />\n    <path id="svg-share" d="M6.1531944 12.656022l-2.386861-2.373024L14.0298356.078994l10.2038317 10.144678-2.3868618 2.373024-6.1461678-6.1698623v14.1194935h-3.4012766V6.5454845L6.1531944 12.656022zm18.080473 4.2403174v9.3033333H3.7663334v-9.3033333H.045v13.0246658h27.9099998V16.8963394h-3.7213324z" />\n    <path id="svg-speaker" d="M20.6187 29.95L8.649 22.475H.0625V7.525h7.475L20.6187.05v29.9zM3.8 18.7375h3.7375v-7.475H3.8v7.475zM16.8813 7.525l-5.6063 3.3222v8.3056l5.6063 3.3222V7.525z" />\n    <path id="svg-tumblr" d="M18.346 29.95c-6.69 0-9.199-4.685-9.199-7.973V12.21H6.01V8.322C10.819 6.728 11.864 2.64 12.177.25c0-.199.105-.199.209-.199h4.601v7.575h6.272v4.485h-6.272v9.269c0 1.295.523 2.99 2.926 2.99h.104c.836 0 1.986-.299 2.509-.498l1.464 4.285c-.523.798-3.137 1.694-5.437 1.793h-.207z" />\n    <path id="svg-twitter" d="M29.95 5.742c-.847 1.24-1.872 2.296-3.073 3.168.013.177.019.443.019.797 0 1.644-.24 3.285-.721 4.923s-1.211 3.209-2.191 4.715c-.98 1.505-2.147 2.836-3.5 3.994s-2.985 2.081-4.895 2.77-3.953 1.034-6.128 1.034c-3.428 0-6.564-.917-9.41-2.751.443.051.936.076 1.48.076 2.846 0 5.382-.873 7.608-2.618-1.328-.025-2.517-.433-3.567-1.224s-1.772-1.8-2.164-3.027c.417.063.803.095 1.157.095.544 0 1.081-.07 1.613-.209-1.417-.291-2.59-.996-3.519-2.115s-1.394-2.419-1.394-3.899v-.076c.86.481 1.783.74 2.77.778-.835-.557-1.499-1.284-1.992-2.182-.493-.898-.74-1.872-.74-2.922 0-1.113.278-2.144.835-3.092C3.667 5.862 5.53 7.37 7.724 8.502c2.194 1.132 4.544 1.761 7.048 1.888-.101-.481-.152-.949-.152-1.404 0-1.695.598-3.14 1.793-4.335s2.64-1.793 4.335-1.793c1.771 0 3.263.645 4.477 1.935 1.379-.266 2.675-.759 3.889-1.48-.468 1.455-1.366 2.58-2.694 3.377 1.177-.126 2.354-.442 3.53-.948z" />\n    <path id="svg-url" d="M24.942 5.371l-4.126-4.126C20.038.469 19.08.05 18.004.05s-2.033.419-2.751 1.136L7.121 9.319c-1.555 1.555-1.555 4.008 0 5.562l4.127 4.126c.778.777 1.795 1.136 2.751 1.136 1.017 0 2.032-.359 2.751-1.136l1.495-1.495-2.154-2.153-1.494 1.494c-.358.36-.957.36-1.256 0l-4.127-4.125c-.358-.358-.358-.957 0-1.256l8.134-8.133c.18-.179.418-.299.657-.299s.479.119.657.239l4.127 4.126c.179.18.24.419.24.658 0 .239-.12.478-.24.657l-2.033 2.094 2.153 2.153 2.033-2.033c.718-.718 1.136-1.734 1.136-2.751s-.419-2.094-1.136-2.812zm-6.161 5.622c-1.555-1.555-4.007-1.555-5.561 0l-1.495 1.495 2.153 2.153 1.494-1.495c.359-.358.957-.358 1.257 0l4.126 4.127c.18.179.24.418.24.657 0 .24-.12.479-.24.657l-8.072 8.073c-.359.358-.957.358-1.256 0L7.24 22.534c-.358-.358-.358-.957 0-1.256l2.033-2.033-2.153-2.153-2.033 2.033c-1.555 1.555-1.555 4.007 0 5.562l4.126 4.126c.778.778 1.795 1.136 2.751 1.136 1.017 0 2.033-.358 2.751-1.136l8.133-8.133c.719-.719 1.136-1.735 1.136-2.751 0-1.017-.418-2.033-1.136-2.751l-4.067-4.185z" />\n    <path id="svg-volume-high" d="M33.0288 26.2125c2.8487-3.0481 4.4087-7.0396 4.4087-11.2488s-1.56-8.2007-4.3409-11.1762l-2.0348 2.1772c2.2383 2.4675 3.4591 5.7333 3.4591 9.0716s-1.2209 6.5316-3.527 8.999l2.0349 2.1772z" />\n    <path id="svg-volume-low" d="M28.2598 21.2277l-2.0348-2.1772c1.0174-1.0886 1.56-2.4675 1.56-3.9915s-.5426-2.9029-1.56-3.9915l2.0348-2.1772c1.56 1.6692 2.3739 3.8464 2.3739 6.0961 0 2.3949-.8817 4.5721-2.3739 6.2413z" />\n    <path id="svg-cc-off" fill="#FFF" fill-rule="evenodd" d="M0 0h20v16H0V0zm1 1h18v14H1V1zm6.226 10.171c1.626 0 2.804-1.024 2.857-2.474H8.536c-.093.681-.611 1.13-1.306 1.13-.887 0-1.428-.765-1.428-2.004 0-1.235.54-1.991 1.424-1.991.694 0 1.217.466 1.3 1.156h1.552c-.048-1.437-1.257-2.5-2.852-2.5-1.903 0-3.067 1.27-3.067 3.34 0 2.069 1.169 3.343 3.067 3.343zm6.79 0c1.626 0 2.803-1.024 2.856-2.474h-1.547c-.092.681-.61 1.13-1.305 1.13-.888 0-1.428-.765-1.428-2.004 0-1.235.54-1.991 1.424-1.991.694 0 1.217.466 1.3 1.156h1.552c-.049-1.437-1.257-2.5-2.852-2.5-1.903 0-3.068 1.27-3.068 3.34 0 2.069 1.17 3.343 3.068 3.343z"/>\n    <path id="svg-cc-on" d="M0 0h20v16H0V0zm7.226 11.171c1.626 0 2.804-1.024 2.857-2.474H8.536c-.093.681-.611 1.13-1.306 1.13-.887 0-1.428-.765-1.428-2.004 0-1.235.54-1.991 1.424-1.991.694 0 1.217.466 1.3 1.156h1.552c-.048-1.437-1.257-2.5-2.852-2.5-1.903 0-3.067 1.27-3.067 3.34 0 2.069 1.169 3.343 3.067 3.343zm6.79 0c1.626 0 2.803-1.024 2.856-2.474h-1.547c-.092.681-.61 1.13-1.305 1.13-.888 0-1.428-.765-1.428-2.004 0-1.235.54-1.991 1.424-1.991.694 0 1.217.466 1.3 1.156h1.552c-.049-1.437-1.257-2.5-2.852-2.5-1.903 0-3.068 1.27-3.068 3.34 0 2.069 1.17 3.343 3.068 3.343z"/>\n    <path id="svg-cc-disabled"  opacity=".4" fill="#FFF" fill-rule="evenodd" d="M0 0h20v16H0V0zm1 1h18v14H1V1zm6.226 10.171c1.626 0 2.804-1.024 2.857-2.474H8.536c-.093.681-.611 1.13-1.306 1.13-.887 0-1.428-.765-1.428-2.004 0-1.235.54-1.991 1.424-1.991.694 0 1.217.466 1.3 1.156h1.552c-.048-1.437-1.257-2.5-2.852-2.5-1.903 0-3.067 1.27-3.067 3.34 0 2.069 1.169 3.343 3.067 3.343zm6.79 0c1.626 0 2.803-1.024 2.856-2.474h-1.547c-.092.681-.61 1.13-1.305 1.13-.888 0-1.428-.765-1.428-2.004 0-1.235.54-1.991 1.424-1.991.694 0 1.217.466 1.3 1.156h1.552c-.049-1.437-1.257-2.5-2.852-2.5-1.903 0-3.068 1.27-3.068 3.34 0 2.069 1.17 3.343 3.068 3.343z"/>\n    <path id="svg-settings" fill="#FFF" fill-rule="evenodd" d="M8 11.36a3.361 3.361 0 1 1 0-6.722 3.361 3.361 0 0 1 0 6.723zm8-2.026V6.666h-2.796c-.128-.499-.325-.97-.582-1.403L14.6 3.286 12.714 1.4l-1.977 1.978a5.343 5.343 0 0 0-1.403-.582V0H6.666v2.796c-.499.128-.97.325-1.403.582L3.286 1.4 1.4 3.286l1.978 1.977a5.343 5.343 0 0 0-.582 1.403H0v2.668h2.796c.128.499.325.97.582 1.403L1.4 12.714 3.286 14.6l1.977-1.978c.433.257.904.454 1.403.582V16h2.668v-2.796c.499-.128.97-.325 1.403-.582l1.977 1.978 1.886-1.886-1.978-1.977c.257-.433.454-.904.582-1.403H16z"/>\n    <path id="svg-tooltip-caret" transform="rotate(-180 6,2) " fill="#000" fill-opacity=".9" fill-rule="evenodd" d="M6 0l6 6H0z"/>\n    <path id="svg-chevron-down" fill="#FFF" fill-rule="evenodd" d="M0 1l1-1 4 4 4-4 1 1-5 5z"/>\n    <path id="svg-chevron-back" fill="#FFF" fill-rule="evenodd" d="M5 10l1-1-4-4 4-4-1-1-5 5z"/>\n    <path id="svg-check" fill="#FFF" fill-rule="evenodd" d="M4.222 9L0 4.829l1.33-1.315L4.223 6.37 10.669 0 12 1.315z"/>\n    <path id="svg-close" fill="#FFF" fill-opacity=".5" fill-rule="evenodd" d="M5.95 4.536L1.707.293.293 1.707 4.536 5.95.293 10.192l1.414 1.415L5.95 7.364l4.242 4.243 1.415-1.415L7.364 5.95l4.243-4.243L10.192.293 5.95 4.536z"/>\n  </defs>\n</svg>',className:"svg-definitions"})}}i().registerComponent("CneSvgDefs",bp);var _p=i().getComponent("Component");class Tp extends _p{createEl(){return super.createEl("div",{innerHTML:'\n<div class="live-overlay--msg">\n  <img src="" height="50px" class="live-overlay--msg--image" />\n  <h4>'.concat(La("cne-player-live-overlay-header"),"</h4>\n</div>"),className:"cne-overlay-content live-overlay"})}update(e){var{brand_image:t}=e;this.el_&&(this.$("img").src=t)}}i().registerComponent("CneLiveOverlay",Tp);class wp extends xh{constructor(e,t){super(e,t),this.on("keyup",this.handleKeyUp)}createEl(){var e=La("cne-player-live-data-label");return super.createEl("div",{innerHTML:'<span class="custom-control-focus" tabindex="-1" data-label='.concat(e,"></span>"),className:"vjs-control live-indicator"})}handleClick(){this.player_.trigger("intent:seek-latest")}}i().registerComponent("CneLiveIndicator",wp);class Sp extends xh{constructor(e,t){super(e,t),this.on("keyup",this.handleKeyUp)}createEl(){var e=La("cne-player-live-data-label");return super.createEl("div",{innerHTML:'<span class="custom-control-focus" tabindex="-1">'.concat(e,"</span>"),className:"vjs-control live-indicator-active"})}handleClick(){this.player_.trigger("intent:seek-latest")}}i().registerComponent("CneLiveIndicatorActive",Sp);class Cp extends xh{constructor(e,t){super(e,t),this.on("keyup",this.handleKeyUp)}createEl(){var e=La("cne-player-live-ad-label");return super.createEl("div",{innerHTML:'<span class="custom-control-focus" tabindex="-1">'.concat(e,"</span>"),className:"vjs-control live-indicator-ad"})}}i().registerComponent("CneLiveIndicatorAd",Cp);var Ep=i().getComponent("TextTrackDisplay"),kp={small:.0356,medium:.0445,large:.0533};function Op(e,t){return"rgba("+parseInt(e[1]+e[1],16)+","+parseInt(e[2]+e[2],16)+","+parseInt(e[3]+e[3],16)+","+t+")"}class xp extends Ep{buildCSSClass(){return"cne-text-track-display ".concat(super.buildCSSClass)}setVideoData(e){this.videoData=e}originalPlayerHeight(){return this.originalHeight||(this.originalHeight=this.player_.el().clientHeight),this.originalHeight}updateForTrack(e){if("function"==typeof window.WebVTT&&e.activeCues){var t=this.player_.controlBar.cneSettings.getCaptionSettings()||{},n=Array.from(this.player_.remoteTextTracks().tracks_).filter((e=>{var{id:t=""}=e;return t.includes("CC")})).sort(((e,t)=>e.id<t.id?-1:1))[0],r=n?Array.from(n.activeCues):Array.from(e.activeCues);window.WebVTT.processCues(window,r,this.el_),r.map(((e,n)=>{this.updateCueStyles(e,t,n,r.length)}))}}updateCaptionsVisibility(e){"hidden"===e||"disabled"===e?this.el_.classList.add("hide-captions"):"showing"===e&&this.el_.classList.remove("hide-captions")}updateCueStyles(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(e){var{fonts:i,textShadows:a,positions:s}=jd(),o=e.displayState,u=t.fontVariant||t.fontFamily,c=Op(t.backgroundColor||"#000",t.backgroundOpacity||1),l=null;if(t.fontFamily&&(o.firstChild.style.fontFamily=i.families[u]),t.fontSize&&(o.style.fontSize=t.fontSize,Object.keys(i.sizes).map((e=>{var n="captions-".concat(e);t.fontSize===i.sizes[e]?(this.addClass(n),l=kp[e]):this.removeClass(n)}))),l){var d=Math.round(l*this.player_.el_.clientHeight);o.style.fontSize=Math.max(12,d)+"px",o.style.height="auto"}var h=t.position;if("auto"===h&&this.videoData&&this.videoData.isLive&&(h="bottom"),s[h]){var p=s[h].top,f=s[h].bottom,m=o.offsetHeight,g=Math.max(r-n-1,0);o.style.top="auto"!==p?"".concat(parseInt(p)+m*g,"px"):p,o.style.bottom="auto"!==f?"".concat(parseInt(f)+m*g,"px"):f}if(t.color&&(o.firstChild.style.color=t.color),t.textOpacity){var v=Op(t.color||"#fff",t.textOpacity);o.firstChild.style.color=v}t.backgroundColor&&(o.firstChild.style.backgroundColor=c),t.edgeStyle&&(o.firstChild.style.textShadow=a[t.edgeStyle])}}}i().registerComponent("CneTextTrackDisplay",xp);var Ap=i().getComponent("Component");class Pp extends Ap{createEl(){var e={id:"cne-volume-alert","aria-live":"assertive","aria-label":La("cne-aria-volume-alert")};return super.createEl("div",{className:"hidden-accessible"},e)}update(e){var t=La("cne-aria-volume-update");this.el_.innerText="".concat(t," ").concat(Math.round(100*e),"%")}}i().registerComponent("CneVolumeAlert",Pp);var Ip=i().getComponent("Component");class Lp extends Ip{createEl(){return super.createEl("div",{className:"cne-volume-toggle vjs-control"},{tabindex:"-1"})}}i().registerComponent("CneVolumeToggle",Lp);var Mp=i().getComponent("Component");class Dp extends Mp{createEl(){return super.createEl("div",{className:this.buildCSSClass()})}update(e){var{hideHoverTitle:t,title:n,url:r,branded:i,branded_caption:a}=e;if(!t){Array.from(this.el_.childNodes).forEach((e=>{this.el_.removeChild(e)}));var s=document.createElement("h2");if(s.innerHTML=n,s.className="video-title-text",!r)return this.el_.appendChild(s),void(i&&this.el_.appendChild(this.buildBrandedContent(a)));var o=document.createElement("a");o.href=r,o.target="_blank",o.className="video-title-link",o.appendChild(s),i&&o.appendChild(this.buildBrandedContent(a)),this.el_.appendChild(o)}}buildCSSClass(){return"cne-video-title"}buildBrandedContent(e){var t=document.createElement("p");return t.className="branded-content",t.innerHTML=e||"Sponsored",t}}i().registerComponent("CneVideoTitle",Dp);var Rp='\n<span class="custom-control-focus" tabindex="-1">\n  '.concat(rh,"\n</span>");class Np extends xh{constructor(e,t){super(e,t),this.on("keyup",this.handleKeyUp)}createEl(){var e={"aria-label":La("cne-aria-fullscreen")};return super.createEl("div",{innerHTML:Rp,className:"vjs-fullscreen-control ".concat(super.buildCSSClass())},e)}handleClick(){this.player_.isFullscreen()?(this.player_.trigger("intent:exit-fullscreen"),this.setAttribute("aria-label",La("cne-aria-fullscreen"))):(this.player_.trigger("intent:enter-fullscreen"),this.setAttribute("aria-label",La("cne-aria-exit-fullscreen")))}}i().registerComponent("FullscreenToggle",Np);var jp=i().getComponent("Component");class Up extends jp{createEl(){return super.createEl("div",{innerHTML:'<div class="cne-loading-spinner-circle"></div>',className:"cne-loading-spinner"})}}i().registerComponent("LoadingSpinner",Up);var Fp=i().getComponent("Button");class $p extends Fp{constructor(e,t){super(e,t),this.checkVolumeSupport(),this.on(e,"volumechange",this.update),this.on(e,"loadstart",this.update),this.on("keydown",this.handleKeyDown),this.on("keyup",this.handleKeyUp),this.on("focus",(()=>this.handleFocus(!0))),this.on("focusout",(()=>this.handleFocus(!1)))}createEl(){return super.createEl("button",{innerHTML:'\n<div class="mute-toggle-container">\n  <span class="custom-control-focus" tabindex="-1">\n    '.concat(ah,'\n  </span>\n</div>\n<span style="display:none;" id="cne-volume-instructions">\n  ').concat(La("cne-player-volume-instructions"),"\n</span>")},{id:"cne-mute-toggle","aria-controls":"".concat(this.player_.id_,"-cne-volume-control"),"aria-describedby":"cne-volume-instructions","aria-haspopup":"true","aria-live":"polite","aria-roledescription":"Mute Button",role:"application",tabindex:"0"})}buildCSSClass(){return"vjs-mute-control ".concat(super.buildCSSClass())}checkVolumeSupport(){$s&&"9"===Bs&&this.addClass("vjs-hidden")}update(){var e=this.player_.volume(),t=3;0===e||this.player_.muted()?t=0:e<.33?t=1:e<.67&&(t=2);var n=this.player_.muted()?La("cne-player-volume-unmute"):La("cne-player-volume-mute");this.controlText()!==n&&this.controlText(n);for(var r=0;r<4;r++)this.removeClass("vjs-vol-".concat(r));this.addClass("vjs-vol-".concat(t))}handleKeyDown(e){var t,n;switch(e.stopPropagation(),e.keyCode){case Mh.UP:case Mh.DOWN:e.preventDefault(),t=this.player_.volume(),n=e.keyCode==Mh.UP?Math.min(t+.1,1):Math.max(t-.1,0),this.player_.trigger("intent:volume-change",{level:n})}}handleKeyUp(e){32===e.keyCode&&e.stopPropagation()}handleClick(e){e.stopPropagation(),this.player_.trigger("intent:mute-toggle",!this.player_.muted())}handleFocus(e){this.player_.trigger("intent:mute-focus",e)}}$p.prototype.controlText_="Mute",i().registerComponent("MuteToggle",$p);class Bp extends xh{createEl(){return super.createEl("div",{innerHTML:this.options_.content,className:"share-content js-share-content",id:"share-content-".concat(this.options_.type)})}handleClick(){!function(e){var t=document.getElementById(e);if(document.body.createTextRange)document.body.createTextRange().moveToElementText(t).select();else if(window.getSelection){var n=window.getSelection(),r=document.createRange();r.selectNodeContents(t),n.removeAllRanges(),n.addRange(r)}}("share-content-".concat(this.options_.type))}}i().registerComponent("OverlayTextBox",Bp);var Vp=i().getComponent("Component");class qp extends Vp{createEl(){return super.createEl("div",{className:"persistent-share"})}}i().registerComponent("PersistentShare",qp);var Hp=i().getComponent("ClickableComponent");class Wp extends Hp{constructor(e,t){var n=Object.assign(t);n.reportTouchActivity=!1,super(e,n),this.on(["mousedown","touchstart"],(e=>{e.stopPropagation()})),this.on(["mouseup","touchend"],(e=>{e.stopPropagation(),this.unmute()}))}createEl(){return super.createEl("div",{innerHTML:"<div class='persistent-mute-icon'>".concat(sh,"</div>"),className:"persistent-mute"})}update(e){e?this.show():this.hide()}unmute(){this.player_.trigger("intent:mute-toggle",!1)}}i().registerComponent("PersistentMute",Wp);var zp=i().getComponent("PlayToggle"),Gp='\n<div class="play-toggle-container">\n  <span class="custom-control-focus" tabindex="-1">\n    '.concat(ch,"\n  </span>\n</div>");class Kp extends zp{createEl(){return super.createEl("button",{innerHTML:Gp},{tabindex:"0"})}createControlTextEl(){}controlText(){}handleClick(){this.player_.paused()?this.player_.trigger("intent:play"):this.player_.trigger("intent:pause")}handlePlay(e){var t=La("cne-aria-pause");this.setAttribute("aria-label",t),super.handlePlay(e)}handlePause(e){var t=La("cne-aria-play");this.setAttribute("aria-label",t),super.handlePause(e)}}i().registerComponent("PlayToggle",Kp);var Xp=i().getComponent("ClickableComponent");class Yp extends Xp{createEl(){var e=La("cne-aria-playlist-next"),t=La("cne-aria-playlist-previous"),n="right"===this.options_.direction?e:t;return super.createEl("div",{innerHTML:'<span class="playlist-caret" aria-label="'.concat(n,'"></span>'),className:"playlist-arrow ".concat(this.options_.direction)})}handleClick(){this.clickCallback(this.options_.direction)}updatePage(e,t){var n=this.options_.direction;"left"===n&&0===e||"right"===n&&e===t?this.addClass("disabled"):this.removeClass("disabled")}clickCallback(){}}i().registerComponent("PlaylistArrow",Yp);var Qp=i().getComponent("Component");class Jp extends Qp{createEl(){return this.playlist={},super.createEl("div",{className:"playlist-body"})}update(e,t){var[n,r,i]=this.children();if(r.update(e,t),t&&t.videos&&t.id!=this.playlist.id){this.playlist=t,n.clickCallback=this.movePage.bind(this),i.clickCallback=this.movePage.bind(this),r.updatePageFromIndex=this.updatePageFromIndex.bind(this);var a=t.videos.length,s=r.el().getBoundingClientRect().width;this.pageSize=Math.floor(s/156),this.maxPage=Math.ceil(a/this.pageSize)-1,this.curPage=0,this.updateChildPages()}}movePage(e){"left"===e?this.curPage=Math.max(this.curPage-1,0):"right"===e&&(this.curPage=Math.min(this.curPage+1,this.maxPage)),this.updateChildPages()}updatePageFromIndex(e){this.curPage=Math.floor(e/this.pageSize),this.updateChildPages()}updateChildPages(){for(var e of this.children())e.updatePage(this.curPage,this.maxPage,this.pageSize)}}i().registerComponent("PlaylistBody",Jp);var Zp=i().getComponent("Component");class ef extends Zp{createEl(){return super.createEl("div",{className:"playlist-container"})}update(e,t){for(var n of this.children())n.update(e,t)}}i().registerComponent("PlaylistContainer",ef);var tf=i().getComponent("Component");class nf extends tf{createEl(){return super.createEl("div",{className:"playlist-header"})}update(e,t){t&&t.videos&&(this.playlist=t,e?this.playlist.videos.forEach(((t,n)=>{e.id===t.id&&this.renderWithIndex(n+1)})):this.renderWithIndex(1))}renderWithIndex(e){var t;this.el().setAttribute("data-title",this.playlist.title),this.el().innerHTML=(t={length:this.playlist.videos.length,index:e},'<div class="playlist-index"><span>'.concat(t.index,"</span><span>/ ").concat(t.length,"</span></div>"))}}i().registerComponent("PlaylistHeader",nf);var rf=i().getComponent("Component");class af extends rf{createEl(){return this.playlist={},this.video={},super.createEl("div",{className:"playlist-items"})}update(e,t){t&&t.videos&&this.playlist.id!==t.id&&(this.playlist=t,t.videos.forEach(((e,t)=>{this.addChild("PlaylistItem",{video:e,index:t})})));e&&this.video.id!==e.id&&(this.video=e,this.children().forEach(((t,n)=>{t.video.id===e.id?(t.makeSelected(),this.updatePageFromIndex(n)):t.makeUnselected()})))}moveTo(e){this.el().style.transform="translateX(".concat(-e,"px)")}updatePageFromIndex(){}}i().registerComponent("PlaylistItems",af);var sf=i().getComponent("Component");class of extends sf{createEl(){return super.createEl("div",{className:"playlist-items-container"})}update(e,t){t!==this.playlist&&(this.playlist=t,this.removeChild("PlaylistItems"),this.addChild("PlaylistItems"));var n=this.childNameIndex_.PlaylistItems;n.updatePageFromIndex=this.updatePageFromIndex,n.update(e,t)}updatePage(e,t,n){var r=this.childNameIndex_.PlaylistItems;if(e===t){var i=this.el().getBoundingClientRect().width,a=r.el().getBoundingClientRect().width;r.moveTo(a-i)}else r.moveTo(e*n*156)}updatePageFromIndex(){}}i().registerComponent("PlaylistItemsContainer",of);const uf=(e,t,n,r)=>'<div class="poster-thumb-container">\n    <div class="poster-thumb" style="background-image:url('.concat(t,');"></div>\n    <div class="little-play-btn">').concat(e,"</div>\n  </div>\n  <h5>").concat(function(e){return e?'<span class="poster-thumb-title-sponsored">'.concat(La("cne-player-sponsored"),": </span>"):""}(r)).concat(n,"</h5>");var cf=i().getComponent("ClickableComponent");class lf extends cf{constructor(e,t){super(e,t),this.video=t.video,this.index=t.index}createEl(){var e=this.options().video,t=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return e.length<t&&(n=""),e.slice(0,t)+n}(e.title,43,"...");return super.createEl("div",{className:"playlist-item",innerHTML:uf(uh,e.poster_frame,t,e.paid_content)})}handleClick(){this.player().trigger("intent:load-video",{video:this.video,index:this.index})}makeSelected(){this.addClass("selected")}makeUnselected(){this.removeClass("selected")}}i().registerComponent("PlaylistItem",lf);var df=i().getComponent("PosterImage");class hf extends df{handleClick(){this.player_.trigger("intent:play")}}i().registerComponent("PosterImage",hf);var pf=i().getComponent("ProgressControl");class ff extends pf{constructor(e,t){super(e,t),e.ready((()=>{this.on(this.el(),"mousemove",this.triggerMouseMoveIntent),this.on(this.el(),"touchmove",this.triggerMouseMoveIntent),this.on(this.el(),"mousedown",this.triggerMouseDownIntent),this.on(this.el(),"touchstart",this.triggerMouseDownIntent)}))}triggerMouseDownIntent(e){this.player_.trigger("intent:progress-mouse",{event:e,type:"down"})}triggerMouseMoveIntent(e){this.player_.trigger("intent:progress-mouse",{event:e,type:"move"})}}i().registerComponent("ProgressControl",ff);var mf=i().getComponent("SeekBar");class gf extends mf{handleMouseDown(e){super.handleMouseDown(e),this.player().trigger("intent:seek-start"),this.start=Date.now()}handleMouseUp(e){super.handleMouseUp(e),this.player().trigger({type:"intent:seek-end",elapsed:Date.now()-this.start})}allowTabFocus(e){this.el().setAttribute("tabindex",e?"0":"-1")}updateCuePostMidroll(e){var{finishedAdIndex:t}=e,n=this.cues&&this.cues.filter((e=>e.idx===t))[0];n&&(n.node.parentNode.removeChild(n.node),n.node=null),!this.el_.querySelectorAll(".cne-cue-marker").length&&this.removeCueContainer()}removeCueContainer(){var e=this.el_.querySelectorAll(".cne-cue-container");e.length&&e.forEach((e=>e.parentNode.removeChild(e)))}addCueIndicators(e){var{cue_points:t,duration:n}=e;this.cues=[];var r=1e3*n,i=document.createElement("div");i.className="cne-cue-container",t.forEach(((e,t)=>{var n=document.createElement("div"),a=e/r*100;n.className="cne-cue-marker",n.style.left="calc(".concat(a,"% - 4px)"),i.append(n),this.cues&&this.cues.push({idx:t+1,node:n})})),this.el_.appendChild(i)}}i().registerComponent("SeekBar",gf);var vf=i().getComponent("Component");class yf extends vf{createEl(){return super.createEl("div",{className:"cne-settings-body"})}}i().registerComponent("SettingsBody",yf);var bf=i().getComponent("Component");class _f extends bf{createEl(){return super.createEl("div",{className:"cne-settings-submenu cne-caption-options"},{title:this.options_.title})}}i().registerComponent("CneCaptionOptions",_f);var Tf=i().getComponent("Component");class wf extends Tf{createEl(){return super.createEl("div",{className:"cne-settings-footer",innerHTML:'<span class="cne-captions-sample-text" style="">'.concat(La("cne-player-caption-sample-text"),"</span>")})}}i().registerComponent("SettingsFooter",wf);var Sf=i().getComponent("Component");class Cf extends Sf{constructor(e,t){super(e,t),this.on(this.$(".cne-settings-close"),"click",this.closeMenu),this.on(this.$(".cne-settings-close"),"keyup",this.closeButtonKeyUp)}createEl(){return super.createEl("div",{innerHTML:'<div class="cne-settings-back">\n    <span class="cne-settings-back-arrow">'.concat('\n<svg width="6" height="10" viewBox="0 0 6 10" focusable="false">\n  <use xlink:href="#svg-chevron-back" />\n</svg>','&nbsp;</span>\n    <span class="cne-settings-back-text">').concat(La("cne-player-settings-back"),'</span>\n  </div>\n  <h3 class="cne-settings-title">').concat(La("cne-player-settings-title"),'</h3>\n  <div class="cne-settings-close" tabindex="0" aria-label="').concat(La("cne-aria-exit-settings"),'" role="button">\n    <span class="custom-control-focus" tabindex="-1">\n      ').concat('\n<svg width="12" height="12" viewBox="0 0 12 12" focusable="false">\n  <use xlink:href="#svg-close" />\n</svg>','\n    </span>\n    <span class="vjs-hidden">').concat(La("cne-player-settings-close"),"</span>\n  </div>"),className:"cne-settings-header"})}closeButtonKeyUp(e){e.keyCode!==Mh.SPACE&&e.keyCode!==Mh.RETURN||this.closeMenu(),e.stopPropagation()}closeMenu(){this.player_.trigger("intent:close-settings")}title(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(!e)return this.el_.querySelector(".cne-settings-title").innerHTML;this.el_.querySelector(".cne-settings-title").innerHTML=e}}i().registerComponent("SettingsHeader",Cf);var Ef=i().getComponent("Component");class kf extends Ef{constructor(e,t){super(e,t),this.hide()}createEl(){return super.createEl("div",{id:"".concat(this.player_.id_,"-settings-menu"),className:"cne-settings-menu",innerHTML:'\n<svg class="cne-tooltip-caret" width="12" height="6" viewBox="0 0 12 6" focusable="false">\n  <use xlink:href="#svg-tooltip-caret" />\n</svg>'})}disableCaptionSettings(){this.player_.trigger("caption-settings-disabled")}enableCaptionSettings(){this.player_.trigger("caption-settings-enabled")}hideSubMenu(e){e.el_.style.display="none"}showSubMenu(e){var t=this.getSubMenus(),n=e||t[0];t.map((e=>{e.name()===n.name()?(e.el_.style.display="block",this.settingsHeader.title(n.getAttribute("title"))):e.el_.style.display="none"}))}toggleSubMenu(e,t){var n=this.settingsBody[e];n&&("show"==t?this.showSubMenu(n):"hide"===t?this.hideSubMenu(n):"disable"===t?this.disableCaptionSettings():"enable"===t&&this.enableCaptionSettings())}getSubMenus(e){return this.settingsBody.children().filter((t=>t.el_.className&&t.el_.className.indexOf("cne-settings-submenu")>=0&&(!e||t.el_.className.indexOf(e)>=0)))||[]}getDisabledSubMenus(){return this.getSubMenus("cne-menu-disabled")}visible(){return!this.hasClass("vjs-hidden")}}i().registerComponent("CneSettingsMenu",kf);var Of=i().getComponent("Component");class xf extends Of{createEl(){return super.createEl("div",{className:"cne-settings-submenu cne-player-settings"},{title:this.options_.title})}}i().registerComponent("CnePlayerSettings",xf);var Af='\n<span class="custom-control-focus" tabindex="-1">\n  '.concat('\n<svg width="16" height="16" viewbox="0 0 16 16" focusable="false">\n  <use xLink:href="#svg-settings" class="svg-settings" />\n  <use xLink:href="#svg-settings" class="svg-settings shadow" />\n</svg>',"\n</span>");class Pf extends xh{constructor(e,t){super(e,t),this.on("keyup",this.handleKeyUp),this.on("keydown",this.handleKeyDown),this.el_.removeAttribute("aria-live")}createEl(){var e={"aria-label":La("cne-aria-settings-label"),"aria-controls":"".concat(this.player_.id_,"_settings"),"aria-expanded":"false",tabindex:"0",role:"button"};return super.createEl("div",{innerHTML:Af,className:"cne-settings-toggle ".concat(super.buildCSSClass())},e)}handleKeyDown(e){Dh.indexOf(e.keyCode)>-1&&e.preventDefault()}handleKeyUp(e){switch(e.stopPropagation(),e.keyCode){case Mh.UP:case Mh.DOWN:e.preventDefault(),this.handleClick(e);break;case Mh.ESC:this.player_.controlBar.cneSettings.cneSettingsMenu.visible()&&this.player_.trigger("intent:close-settings")}}handleClick(){this.player_.controlBar.cneSettings.cneSettingsMenu.visible()?this.player_.trigger("intent:close-settings"):this.player_.trigger("intent:show-settings")}}i().registerComponent("CneSettingsToggle",Pf);var If={facebook:nh,twitter:fh,tumblr:ph,line:ih,pinterest:oh,embed:'\n<svg height="100%" viewBox="0 0 47.15 30" focusable="false">\n  <use xlink:href="#svg-embed" />\n</svg>',url:mh,email:th};class Lf extends xh{constructor(e,t){super(e,t),this.on("keyup",(e=>e.stopPropagation()))}createEl(){var{action:e}=this.options_,{ariaLabel:t}=this.options_,n={"aria-label":t},r=If[e]||"",i=super.createEl("div",{innerHTML:'<span class="custom-control-focus" tabindex="-1">\n                      '.concat(r,"\n                    </span>"),className:"share-".concat(e,"-trigger")},n);return i.removeAttribute("aria-live"),i}handleClick(e){e.stopPropagation();var{action:t}=this.options_;switch(t){case"embed":this.player_.trigger("intent:show-share-embed"),this.player_.trigger("intent:share",{action:"embed"});break;case"url":this.player_.trigger("intent:show-share-url"),this.player_.trigger("intent:share",{action:"url"});break;default:this.player_.trigger("intent:share",{action:t})}}}i().registerComponent("ShareActionButton",Lf);var Mf=i().getComponent("Component");class Df extends Mf{createEl(){return super.createEl("div",{className:"share-overlay--container share-actions"})}}i().registerComponent("ShareActions",Df);var Rf=i().getComponent("Component");class Nf extends Rf{constructor(e,t){super(e,t),this.contentEl_=document.createElement("div"),this.contentEl_.className="share-content--container",this.stopPropagationFn_=function(e){e.stopPropagation()},this.contentEl_.addEventListener("click",this.stopPropagationFn_),this.el_.appendChild(this.contentEl_),this.header=document.createElement("h4"),this.header.innerHTML=t.headerText,this.type=t.type}createEl(){return super.createEl("div",{className:this.buildCSSClass()})}dispose(){this.contentEl_.removeEventListener("click",this.stopPropagationFn_),super.dispose()}render(){this.removeChild("OverlayTextBox"),this.addChild("OverlayTextBox",{content:this.getContent(),type:this.options_.type}),this.contentEl().insertBefore(this.header,this.contentEl().firstChild)}buildCSSClass(){return"share-overlay--container share-".concat(this.options_.type)}}i().registerComponent("ShareLink",Nf);const jf=Nf;var Uf={allure:"/3379/allure.dart/share",architecturaldigest:"/3379/arch.dart/share",arstechnica:"/3379/ars.dart/share",bonappetit:"/3379/bonapp.dart/share",brides:"/479/brides.dart/share",cntraveler:"/3379/cntraveler.dart/share",epicurious:"/3379/epi.dart/share",glamour:"/3379/glamour.dart/share",iris:"/3379/thescene.dart/watch/share",pitchfork:"/3379/pitchfork.dart/share",self:"/3379/self.dart/share",teenvogue:"/3379/teenvogue.dart/share",thenewyorker:"/3379/newyorker.dart/share",vanityfair:"/3379/vanityfair.dart/share",vogue:"/3379/vogue.dart/share",w:"/3379/wmagazine.dart/share",golfdigest:"/3379/conde.golfdigest/partner",gq:"/3379/conde.gq/partner",wired:"/3379/conde.wired/partner",architecturaldigestindia:"/5574/in.archdigest",architecturaldigestitaly:"/5574/it.ad",architecturaldigestmexico:"/5574/mx.ad",architecturaldigestfrance:"/5574/fr.archdigest",architecturaldigestgermany:"/5574/de.archdigest",architecturaldigestspain:"/5574/es.archdigest",architecturaldigestrussia:"/45577845/ru.archdigest",cntravelerindia:"/5574/in.cntraveller",cntraveleruk:"/5574/uk.cntraveller",cntravelerspain:"/5574/es.cntraveller",vogueindia:"/5574/in.vogue",vogueuk:"/5574/uk.vogue",voguefrance:"/5574/fr.vogue",voguespain:"/5574/es.vogue",vogueitaly:"/5574/it.vogue",voguegermany:"/5574/de.vogue",voguemexico:"/5574/mx.vogue",voguejapan:"/5574/jp.vogue",voguetaiwan:"/5574/tw.vogue",voguerussia:"/45577845/ru.vogue",wireditalia:"/5574/it.wired",wireduk:"/5574/uk.wired",wiredjapan:"/5574/jp.wired",tatlerrussia:"/45577845/ru.tatler",tatleruk:"/5574/uk.tatler",glamouruk:"/5574/uk.glamour",glamourspain:"/5574/es.glamour",glamourmexico:"/5574/mx.glamour",glamourgermany:"/5574/de.glamour",glamourrussia:"/45577845/ru.glamour",gqindia:"/5574/in.gq",gqfrance:"/5574/fr.gq",gquk:"/5574/uk.gq",gqspain:"/5574/es.gq",gqitaly:"/5574/it.gq",gqgermany:"/5574/de.gq",gqjapan:"/5574/jp.gq",gqmexico:"/5574/mx.gq",gqtaiwan:"/5574/tw.gq",gqrussia:"/45577845/mx.gq",houseandgardenuk:"/5574/uk.houseandgarden",vanityfairfrance:"/5574/fr.vanityfair",vanityfairspain:"/5574/es.vanityfair",vanityfairitalia:"/5574/it.vanityfair",lacucinaitaliana:"/5574/it.lacucinaitaliana"};function Ff(e,t,n){var r=function(e,t){return e.match(/thescene/)?Uf.iris:Uf[t]||e||""}(t,n);return e.replace("[SHARE_AD_UNIT]",r)}class $f extends jf{constructor(e){super(e,{type:"embed",headerText:"EMBED URL"})}getContent(){var{embed:e}=this.video_&&this.video_.share_links||{};return e?Ff(e,this.adUnit_,this.video_.brand):""}setVideo(e){if(!this.adUnit_){var t=this.player().dfp.options();this.adUnit_=t.adUnitPath||t.fallbackAdUnitPath}this.video_=e,this.render()}setAdUnit(e){this.adUnit_=e,this.render()}}i().registerComponent("ShareEmbed",$f);var Bf=i().getComponent("Component");class Vf extends Bf{constructor(e,t){super(e,t),this.on("click",(function(){this.player_.trigger("intent:close-overlay")})),this.on("keydown",this.handleKeyDown)}createEl(){return super.createEl("div",{className:this.buildCSSClass()},{role:"presentation"})}buildCSSClass(){return"cne-overlay-content share-overlay"}handleKeyDown(e){e.keyCode===Mh.ESC&&this.player_.trigger("intent:close-overlay")}}i().registerComponent("ShareOverlay",Vf);class qf extends jf{constructor(e){super(e,{type:"url",headerText:La("cne-player-share-url-header")})}getContent(){return this.video_.url}setVideo(e){this.video_=e,this.render()}}i().registerComponent("ShareUrl",qf);class Hf extends xh{constructor(e,t){super(e,t),this.on("keypress",this.handleKeyPress)}createEl(){var e='\n      <span class="custom-control-focus" tabindex="-1">\n        '.concat(lh,"\n      </span>"),t={"aria-label":La("cne-aria-share-options")};return super.createEl("div",{innerHTML:e,className:"share-widget"},t)}handleClick(){this.player_.trigger("intent:show-share")}handleKeyPress(e){[Mh.RETURN,Mh.SPACE].indexOf(e.keyCode)>=0&&this.player_.trigger("intent:show-share-keyboard")}}i().registerComponent("ShareWidget",Hf);var Wf=i().getComponent("Component");class zf extends Wf{createEl(){return super.createEl("div",{className:"share-dropdown"})}update(e){!0===e?this.addClass("show"):this.removeClass("show")}}i().registerComponent("ShareDropdown",zf);var Gf={email:th,facebook:nh,twitter:fh},Kf={facebook:"cne-player-share",twitter:"cne-player-tweet",email:"cne-player-email",more:"cne-player-more"};class Xf extends xh{createEl(){var e,{action:t}=this.options_,n='\n      <div class="share-'.concat(t,'-text">\n      ').concat(La(Kf[t]),"\n      </div>\n    ");"more"===t?e=n:e='\n      <div class="share-dropdown-item-icon share-dropdown-item-icon--'.concat(t,'">\n        ').concat(Gf[t],"\n      </div>\n      ")+n;return super.createEl("div",{innerHTML:e||"",className:"share-dropdown-item"},{"data-label":t})}handleClick(e){e.stopPropagation();var{action:t}=this.options_;if("more"===t)this.player_.trigger("intent:show-share");else this.player_.trigger("intent:share",{action:t})}}i().registerComponent("ShareDropdownItem",Xf);var Yf=i().getComponent("VolumeBar");class Qf extends Yf{constructor(e,t){super(e,t),this.el_.setAttribute("tabindex","-1")}handleMouseMove(e){var t=this.calculateDistance(e);this.player_.trigger("intent:volume-change",{level:t})}}i().registerComponent("VolumeBar",Qf);var Jf={useStyledNonLinearAds:!0,loadVideoTimeout:Hs()?4e3:2e3};var Zf=Hs()?9e3:5e3;function em(e){return du(e,["play","adplay"])}var tm=di.interval(250);function nm(e){var{adComplete$:t,adPaused$:n,adResumed$:r,startMidroll$:i,startPreroll$:a,updateInterval$:s=tm}=e,o=di.merge(r.mapTo(!0),n.mapTo(!1)).startWith(!0);return di.merge(a,i).switchMapTo(s.filterByLatestFrom(o,((e,t)=>t)).takeUntil(t))}function rm(e,t){return e.withType("start").filter((()=>t.hasCompanion)).map((e=>{var{companion:n,companionSize:{width:r,height:i},target:a}=t,s=function(e,t,n){var r=e.getAd();if(!r)return"";try{var i=r.getCompanionAds(t,n);return i&&i[0]&&i[0].getContent()?i[0].getContent():""}catch(e){return dc("DFP Ad Error. Companion Ad Error",e),""}}(e,r,i);return{companionDivId:n||"cne-auto-companion",html:s,parentDivId:a,width:r,height:i}})).skipWhile((e=>{var{html:t}=e;return""===t}))}var im=["AD_ERROR","CONTENT_RESUME_REQUESTED","CONTENT_PAUSE_REQUESTED","CLICK","DURATION_CHANGE","EXPANDED_CHANGED","STARTED","IMPRESSION","PAUSED","RESUMED","FIRST_QUARTILE","MIDPOINT","THIRD_QUARTILE","COMPLETE","USER_CLOSE","LINEAR_CHANGED","LOADED","AD_CAN_PLAY","AD_METADATA","AD_BREAK_READY","ALL_ADS_COMPLETED","SKIPPED","SKIPPABLE_STATE_CHANGED","LOG","VOLUME_CHANGED","VOLUME_MUTED"],am=e=>{var{eventTarget$:t,dfpEventTypes$:n,events:r,fromAdEvent:i}=e;return t.withLatestFrom(n).switchMap((e=>{var[t,n]=e;return di.from(r).mergeMap((e=>i(t,n,e)))}))};function sm(e,t,n){return di.fromEvent(e,t[n])}function om(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function um(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?om(Object(n),!0).forEach((function(t){cm(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):om(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function cm(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var lm=n(7317).Z;const dm=(e,t)=>e?()=>{try{var n=e.pubads(),r=n.getSlots()||[],i=n.getCorrelator(),a=(e=>(e.getTargetingKeys()||[]).reduce(((t,n)=>(t[n]=e.getTargeting(n),t)),{}))(n),s=a.ctx_line_items||[],o=((e,t)=>window.parent.cnBus&&window.parent.cnBus.history(t).length?(lm("Ad render check passed via cnBus"),!0):e.map((e=>e.getSlotElementId())).filter((e=>window.parent.document.querySelectorAll("#".concat(e," ").concat("div[id^='google_ads_iframe']")).length>0)).length>0?(lm("Ad render check passed via DOM Iframes"),!0):(lm("Ad render check failed"),!1))(r,t),u=(e=>e.filter((e=>e.getOutOfPage())).map((e=>{var t=e.getResponseInformation();return t&&t.lineItemId})).filter(Boolean))(r),c=window.top.cne_failsafe_lineitem||[],l=(h=window.top._cne&&window.top._cne.cnsInfo&&window.top._cne.cnsInfo[0])?h.sopLineItem:null,d=[...s,...u,...c,l].filter(Boolean).map((e=>e.toString()));return a.ctx_line_items=[...new Set(d)],lm("found lineItems:",a.ctx_line_items),{adsRendered:o,adUnits:r.map((e=>e.getAdUnitPath())),correlator:i,slots:r,targeting:a}}catch(e){return{error:e.message}}var h}:(lm("GPT Not Present"),null);var hm=n(7317).Z;function pm(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function fm(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pm(Object(n),!0).forEach((function(t){mm(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pm(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function mm(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var gm=3e3,vm="ads.refreshing.#",ym="ads.moat.yield-ready",bm=(e,t)=>function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{adUnits:r,error:i="",targeting:a={}}=n,{embedLocation:s,publicaEnabled:o,videoId:u}=t;hc("gptData",e,{dim1:JSON.stringify({adBlocked:!(window.google&&window.google.ima),adUnits:r,embedLocation:s,error:i,lineItems:a.ctx_line_items,publicaEnabled:o,videoId:u})})},_m=()=>ac()?(window.parent.googletag=window.parent.googletag||{},window.parent.googletag.cmd=window.parent.googletag.cmd||[],window.parent.googletag):null,Tm=()=>ac()?window.parent.cnBus:null,wm=(e,t)=>()=>{var{gptQueue:n=!1,gpt:r}=t;return di.create((i=>{var a=()=>{var n=e();return n.adsRendered?(i.next(n),i.complete()):(hm("GPT Ads Not Loaded"),void(n.error&&(hm("GPT Error",n.error),bm("gptError",t)(n))))};n?r.cmd.push(a):a()}))},Sm=e=>di.create((t=>{e.cmd.push((()=>{e.pubads().addEventListener("slotRenderEnded",(()=>{t.next(),t.complete()}))}))})),Cm=e=>e?di.create((t=>{e.on(ym,(()=>{t.next(),t.complete()}))})):di.never();var Em={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",Æ:"AE",Ç:"C",È:"E",É:"E",Ê:"E",Ë:"E",Ì:"I",Í:"I",Î:"I",Ï:"I",Ð:"D",Ñ:"N",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ő:"O",Ø:"O",Ù:"U",Ú:"U",Û:"U",Ü:"U",Ű:"U",Ý:"Y",Þ:"TH",ß:"ss",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",æ:"ae",ç:"c",è:"e",é:"e",ê:"e",ë:"e",ì:"i",í:"i",î:"i",ï:"i",ð:"d",ñ:"n",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ő:"o",ø:"o",ù:"u",ú:"u",û:"u",ü:"u",ű:"u",ý:"y",þ:"th",ÿ:"y",ẞ:"SS",α:"a",β:"b",γ:"g",δ:"d",ε:"e",ζ:"z",η:"h",θ:"8",ι:"i",κ:"k",λ:"l",μ:"m",ν:"n",ξ:"3",ο:"o",π:"p",ρ:"r",σ:"s",τ:"t",υ:"y",φ:"f",χ:"x",ψ:"ps",ω:"w",ά:"a",έ:"e",ί:"i",ό:"o",ύ:"y",ή:"h",ώ:"w",ς:"s",ϊ:"i",ΰ:"y",ϋ:"y",ΐ:"i",Α:"A",Β:"B",Γ:"G",Δ:"D",Ε:"E",Ζ:"Z",Η:"H",Θ:"8",Ι:"I",Κ:"K",Λ:"L",Μ:"M",Ν:"N",Ξ:"3",Ο:"O",Π:"P",Ρ:"R",Σ:"S",Τ:"T",Υ:"Y",Φ:"F",Χ:"X",Ψ:"PS",Ω:"W",Ά:"A",Έ:"E",Ί:"I",Ό:"O",Ύ:"Y",Ή:"H",Ώ:"W",Ϊ:"I",Ϋ:"Y",ş:"s",Ş:"S",ı:"i",İ:"I",ğ:"g",Ğ:"G",а:"a",б:"b",в:"v",г:"g",д:"d",е:"e",ё:"yo",ж:"zh",з:"z",и:"i",й:"j",к:"k",л:"l",м:"m",н:"n",о:"o",п:"p",р:"r",с:"s",т:"t",у:"u",ф:"f",х:"h",ц:"c",ч:"ch",ш:"sh",щ:"sh",ъ:"u",ы:"y",ь:"",э:"e",ю:"yu",я:"ya",А:"A",Б:"B",В:"V",Г:"G",Д:"D",Е:"E",Ё:"Yo",Ж:"Zh",З:"Z",И:"I",Й:"J",К:"K",Л:"L",М:"M",Н:"N",О:"O",П:"P",Р:"R",С:"S",Т:"T",У:"U",Ф:"F",Х:"H",Ц:"C",Ч:"Ch",Ш:"Sh",Щ:"Sh",Ъ:"U",Ы:"Y",Ь:"",Э:"E",Ю:"Yu",Я:"Ya",Є:"Ye",І:"I",Ї:"Yi",Ґ:"G",є:"ye",і:"i",ї:"yi",ґ:"g",č:"c",ď:"d",ě:"e",ň:"n",ř:"r",š:"s",ť:"t",ů:"u",ž:"z",Č:"C",Ď:"D",Ě:"E",Ň:"N",Ř:"R",Š:"S",Ť:"T",Ů:"U",Ž:"Z",ą:"a",ć:"c",ę:"e",ł:"l",ń:"n",ś:"s",ź:"z",ż:"z",Ą:"A",Ć:"C",Ę:"e",Ł:"L",Ń:"N",Ś:"S",Ź:"Z",Ż:"Z",ā:"a",ē:"e",ģ:"g",ī:"i",ķ:"k",ļ:"l",ņ:"n",ū:"u",Ā:"A",Ē:"E",Ģ:"G",Ī:"i",Ķ:"k",Ļ:"L",Ņ:"N",Ū:"u","€":"euro","₢":"cruzeiro","₣":"french franc","£":"pound","₤":"lira","₥":"mill","₦":"naira","₧":"peseta","₨":"rupee","₩":"won","₪":"new shequel","₫":"dong","₭":"kip","₮":"tugrik","₯":"drachma","₰":"penny","₱":"peso","₲":"guarani","₳":"austral","₴":"hryvnia","₵":"cedi","¢":"cent","¥":"yen",元:"yuan",円:"yen","﷼":"rial","₠":"ecu","¤":"currency","฿":"baht",$:"dollar","&":"and","|":"or"};function km(e){for(var t="",n=0;n<e.length;n++){var r=e[n];Em[r]&&(r=Em[r]),t+=r=(r=r.replace(/_/gi,"-")).replace(/[^\sA-Za-z0-9\-]/g,"")}return t=(t=(t=(t=(t=t.replace(/^\s+|\s+$/g,"")).replace(/^-+|-+$/g,"")).replace(/[-\s]+/g,"-")).replace(/-{2,}/g,"-")).toLowerCase()}function Om(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function xm(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Om(Object(n),!0).forEach((function(t){Am(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Om(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Am(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Pm=["golfdigest"],Im=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t?"rail-player":"interlude"===e?"inline-player":"player"},Lm=e=>{var{adUnitPath:t,brand:n,position:r,brandMap:i}=e;if(!ac())return t;var a=((e,t,n)=>{var{adUnit:r}=window.top.cns||{},{category:i,contentType:a}=r||{};return i&&a?"".concat(n[e],"/").concat(t,"/").concat(i,"/").concat(a):null})(n,r,i);if(a)return a;var s=(()=>{var e=window.top.copilot||{},{categories:{channels:t=[]}={}}=e;return t.map((e=>{var{slug:t}=e;return t}))[0]})()||(window.top.digitalData?window.top.digitalData.section:null)||(()=>{var e=window.top.cns||{},{pageContext:{channel:t}={}}=e;return t})(),o=s?km(s):null,u=(()=>{var[e]=window.dataLayer||window.top.dataLayer||[],{content:t={}}=e||{};return t.contentType})(),c=[i[n],r,o,u].filter(Boolean);return"".concat(c.join("/")).toLowerCase()},Mm=e=>{var{adUnitPath:t,brand:n,isRightRail:r,pageType:i,playerType:a,section:s,brandMap:o,iu:u}=e;if(u)return u;if(!((e,t)=>t[e])(n,o))return t;if("amp-article"===i)return(e=>{var{brand:t,section:n,position:r,brandMap:i}=e,a="string"==typeof n?n.toLowerCase():"misc";return"".concat(i[t],"/").concat(r,"/").concat(km(a),"/amp/1")})({brand:n,section:s,position:Im(a),brandMap:o});if("videoportals"===i&&!Pm.includes(n))return((e,t)=>"".concat(t[e],"/player/video/watch-page/1"))(n,o);return Lm({adUnitPath:t,brand:n,position:Im(a,r),brandMap:o})};function Dm(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Rm(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Dm(Object(n),!0).forEach((function(t){Nm(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Dm(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Nm(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var jm=e=>t=>{var n=(e=>t=>()=>e.logEvent('{"type": "'.concat(t,'"}')))(e);return{[t.IMPRESSION]:n("IMPRESSION"),[t.STARTED]:n("START"),[t.SKIPPED]:n("SKIP"),[t.CLICK]:n("CLICK"),[t.FIRST_QUARTILE]:n("QUARTILE1"),[t.MIDPOINT]:n("QUARTILE2"),[t.THIRD_QUARTILE]:n("QUARTILE3"),[t.COMPLETE]:n("COMPLETE"),[t.MUTED]:n("MUTE"),[t.ALL_ADS_COMPLETED]:()=>e("ima3_reset")}},Um=function(){var{dfpAdEvent$:e,dfpEventTypes$:t,publicaEnabled:n,pApi:r=window.pAPI}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!n)return di.never();var i=t.map(jm(r));return e.withLatestFrom(i).map((e=>{var[{type:t},n]=e;return n[t]})).filter((e=>e))};function Fm(e,t){var n,r=e.options(),i=function(e){var{gpt:t=_m(),cnBus:n=Tm(),timeout$:r=di.timer(gm)}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{embedLocation:i=""}=e;if(!i.length)return hm("Not checking for ad targeting data: not on O&O"),bm("notOnOO",e)(),di.of({});if(!t)return hm("Not checking ad targeting data: no GPT library found"),bm("gptNotFound",e)(),di.of({});var a=i.endsWith("videoportal"),s=dm(t,a?ym:vm),o=wm(s,e),u=wm(s,fm({gptQueue:!0,gpt:t},e))().do((t=>{hm("Initial gpt check successful"),bm("initial",e)(t)})),c=Sm(t).switchMap(o).do((t=>{hm("slotRenderEnded gpt check successful"),bm("slotRenderEnded",e)(t)})),l=Cm(n).switchMap(o).do((t=>{hm("moatYieldReady check successful"),bm("moatYieldReady",e)(t)})),d=r.map(s).do((t=>{hm("gpt check timed out"),bm("timedOut",e)(t)})),h=a?l:c;return di.race(u,h,d)}(r).map((e=>t=>{var{slots:n=[],correlator:r,targeting:i}=t,a=n.map((e=>e.getAdUnitPath())).filter((e=>e&&!e.match(/\.cm/)))[0],s=e.adUnitPath,o=e.fallbackAdUnitPath;return{adUnitPath:(s||a||o).replace(/\/$/,""),correlator:r,targeting:i}})(r)),a=function(e){var{deferredTagData$:t,currentVideo$:n,options:r}=e,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{allure:"/3379/conde.allure",architecturaldigest:"/3379/conde.arch",arstechnica:"/3379/conde.ars",bonappetit:"/3379/conde.bonapp",brides:"/479/conde.brides",cntraveler:"/3379/conde.cntraveler",epicurious:"/3379/conde.epi",glamour:"/3379/conde.glamour",golfdigest:"/21849421099/golfdigest",gq:"/3379/conde.gq",pitchfork:"/3379/conde.pitchfork",self:"/3379/conde.self",teenvogue:"/3379/conde.teenvogue",them:"/3379/conde.them",thenewyorker:"/3379/conde.newyorker",vanityfair:"/3379/conde.vanityfair",vogue:"/3379/conde.vogue",w:"/3379/conde.w",wired:"/3379/conde.wired",architecturaldigestindia:"/5574/in.archdigest",architecturaldigestfrance:"/5574/fr.archdigest",architecturaldigestgermany:"/5574/de.archdigest",architecturaldigestspain:"/5574/es.archdigest",architecturaldigestitaly:"/5574/it.ad",architecturaldigestmexico:"/5574/mx.ad",architecturaldigestrussia:"/45577845/ru.archdigest",vogueindia:"/5574/in.vogue",voguefrance:"/5574/fr.vogue",vogueuk:"/5574/uk.vogue",voguespain:"/5574/es.vogue",vogueitaly:"/5574/it.vogue",voguegermany:"/5574/de.vogue",voguemexico:"/5574/mx.vogue",voguejapan:"/5574/jp.vogue",voguetaiwan:"/5574/tw.vogue",voguerussia:"/45577845/ru.vogue",cntravelerindia:"/5574/in.cntraveller",cntraveleruk:"/5574/uk.cntraveller",cntravelerspain:"/5574/es.cntraveller",wireditalia:"/5574/it.wired",wireduk:"/5574/uk.wired",wiredjapan:"/5574/jp.wired",tatlerrussia:"/45577845/ru.tatler",tatleruk:"/5574/uk.tatler",glamouruk:"/5574/uk.glamour",glamourspain:"/5574/es.glamour",glamourmexico:"/5574/mx.glamour",glamourgermany:"/5574/de.glamour",glamourrussia:"/45577845/ru.glamour",gqindia:"/5574/in.gq",gqfrance:"/5574/fr.gq",gquk:"/5574/uk.gq",gqspain:"/5574/es.gq",gqitaly:"/5574/it.gq",gqgermany:"/5574/de.gq",gqjapan:"/5574/jp.gq",gqmexico:"/5574/mx.gq",gqtaiwan:"/5574/tw.gq",gqrussia:"/45577845/ru.gq",houseandgardenuk:"/5574/uk.houseandgarden",vanityfairfrance:"/5574/fr.vanityfair",vanityfairspain:"/5574/es.vanityfair",vanityfairitalia:"/5574/it.vanityfair",lacucinaitaliana:"/5574/it.lacucinaitaliana"};return n.bufferedWith(t,((e,t)=>{var{brand:n}=e,{adUnitPath:a}=t,s=Mm(xm(xm({},r),{},{adUnitPath:a,brand:n,brandMap:i}));return xm(xm({},t),{},{adUnitPath:s,video:e})})).share()}({deferredTagData$:i,currentVideo$:t.withType("dfp-currentvideo").map((e=>{var{value:t}=e;return t})),options:r});return a.map((n=e.options().publicaEnabled,e=>{if(!n)return e;var t=e.adUnitPath.split("/").filter((e=>e.length)),r=t[1].indexOf("conde")>-1?(e=>{var[t,n,r]=e;return"".concat(t,"/").concat(n,"/").concat(r,"/ab-inventory")})(t):(e=>{var[t,n]=e;return"".concat(t,"/").concat(n,"/swish")})(t);return Rm(Rm({},e),{},{adUnitPath:r})}))}var $m=n(7317).Z;function Bm(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Vm(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Bm(Object(n),!0).forEach((function(t){qm(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Bm(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function qm(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Hm=/^https?:\/\/|^\/\//;function Wm(e){var{aoTest:t,companionSize:n,embedLocation:r,height:i,infinityId:a,muted:s,adRequestData:o,playerSizeForAdRequest:u,isRightRail:c,isStickyType:l,stickyPosition:d,hasTeaser:h,urlVars:p,width:f,ampTargeting:m,cntPlatform:g,prebidData:v,autoplay:y,isSitewideOverride:b}=e,{adUnitPath:_,correlator:T,targeting:w,video:S}=o,C=((e,t)=>{if(e)return e;try{var n=JSON.parse(t);if(n)return n}catch(e){$m("Error Parsing ampTargeting")}return $m("No Valid Ad Targeting Data Found"),{}})(w,m),E=(e=>e?null:"player_embed")(r),k=Vm(Vm(Vm({},C),v),{},{ao_test:t||p.get("ao_test"),excl_cat:E,height:Math.round(i),mbid:p.get("mbid"),muted:s?1:0,right_rail:c?1:0,sensitive:S.sensitive,series:S.series_id,width:Math.round(f),cnt_platform:g});"2549131"===S.dfp_cms_id&&["height","muted","sensitive","width"].forEach((e=>{k["cne_".concat(e)]=k[e],delete k[e]})),S.live_metadata&&(k.traffic_type="live");var O=[];l?"hero"===d?O.push("sticky-player-hero"):"footer"===d?O.push("sticky-player-footer"):O.push("sticky-player"):c&&O.push("sticky-player-rail"),!1===y&&O.push("click-to-play"),b&&O.push("interlude-takeover"),h&&O.push("teaser-player"),O&&O.length&&(k.feature_flags=O);var x=encodeURIComponent(eo(k));$m("CUST_PARAMS: ",x);var A=_,P=S.dfp_cms_id||"1495";"true"===(0,Zs.Z)(window.location.href).searchParams.get("llpvTest")&&(A=_.replace("3379","21729330630").replace("5574","21729330630"),P="2614559");var I=eo({sz:"".concat(u,"|").concat("480x70"),iu:A,ciu_szs:"".concat(n.width,"x").concat(n.height),gdfp_req:"1",env:"vp",output:"vmap",unviewed_position_start:"1",cust_params:x,correlator:T,description_url:encodeURIComponent(S.url||""),vid:S.id,cmsid:P,ppid:a?a.replace(/-/g,""):""},{escape:!1,removeNull:!1}),L="".concat("https://pubads.g.doubleclick.net/gampad/ads","?").concat(I);return(()=>{var{_CNE_AD_FIXTURE_:e}=window;return e&&Hm.test(e)?e:(delete window._CNE_AD_FIXTURE_,null)})()||L}var zm=n(7317).Z,Gm=(()=>{var e;try{e=window.top.performance}catch(t){e=window.performance}return e})();function Km(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Gm;if(null!=r&&"function"==typeof r.mark)try{r.mark(n),r.measure(e,t,n)}catch(e){zm(e)}}const Xm={js:{evaluatedJSMark:"js_evaluatedJS",startedJSExecutionMark:"js_player_js_start_execution",jsStartedInlineMeasure:"js_jsStarted_inline",jsStartedScriptMeasure:"js_jsStarted_script",evaluateMainJSMeasure:"js_timeToEvaluate_main",evaluateMobileJSMeasure:"js_timeToEvaluate_mobile"},ads:{requestAdsMark:"ads_dfp_plugin_requestAds",requestAdsMeasure:"ads_requestAds",requestAdsManagerMark:"ads_dfp_plugin_requestAdsManager",requestAdsManagerMeasure:"ads_requestAdsManager",requestAdsLoaderMark:"ads_dfp_plugin_requestAdsLoader",requestAdsLoaderMeasure:"ads_requestAdsLoader",vastAdFetchStartedMark:"ads_fetchVASTAd_started",vastAdFetchCompleteMark:"ads_fetchVASTAd_complete",vastAdFetchMeasure:"ads_vastAdDuration",adStartingMark:"ads_AD_IS_STARTING",adStartingMeasure:"ads_startedAd"},misc:{loadEmbedPiecesMark:"promise_resolution_loadEmbedPieces",buildEmbedPiecesMark:"promise_resolution_buildEmbedPieces",buildScriptPlayerStarted:"loaderjs_assets_loaded",embedPiecesMeasure:"buildEmbedPiecesToLoadEmbedPieces",scriptEmbedCompleteMark:"scriptEmbedPromises_complete",scriptEmbedStartedMark:"scriptEmbedPromises_started",scriptEmbedCompleteMeasure:"scriptEmbedPromises_complete",createPlayerStartedMark:"createPlayer_started",createPlayerStartedMeasure:"createPlayer_started",fetchConfigStartedMark:"fetchConfig_started",fetchConfigCompletedMark:"fetchConfig_complete",fetchConfigCompletedMeasure:"fetchConfig_complete",fetchPrebidStartedMark:"fetchPrebid_started",fetchPrebidCompletedMark:"fetchPrebid_complete"}};var Ym=n(7317).Z,{ads:{vastAdFetchStartedMark:Qm,vastAdFetchCompleteMark:Jm,vastAdFetchMeasure:Zm}}=Xm,eg=e=>{var t=function(e){var t=(new DOMParser).parseFromString(e,"application/xml"),n=t.getElementsByTagNameNS("*","AdBreak");if(1!==n.length)return null;var r=n[0],i=r.getAttributeNode("timeOffset").textContent;if("start"!==i)return null;var a=t.getElementsByTagNameNS("*","AdSource")[0],s=t.getElementsByTagNameNS("*","AdTagURI")[0];return s&&r&&a?{adBreak:{timeOffset:i,breakType:r.getAttributeNode("breakType").textContent,breakId:r.getAttributeNode("breakId").textContent},adSource:{id:a.getAttributeNode("id").textContent,allowMultipleAds:a.getAttributeNode("allowMultipleAds").textContent,followRedirects:a.getAttributeNode("followRedirects").textContent},adTagURI:s.textContent}:null}(e);if(!t)return null;var{adTagURI:n}=t;return n},tg=(e,t)=>n=>{var{urlVars:r,disableVastPrefetch:i}=t.options();return!0===(!0===i||"true"===r.get("disableVastPrefetch"))?(Ym("vastPrefetch disabled"),di.of(e)):(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Gm;null!=t&&"function"==typeof t.mark&&t.mark(e)}(Qm),Gu(n).map((t=>{Km(Zm,Qm,Jm);var n=eg(t.body);return n?Object.assign(e,{adTagUrl:n}):e})))},ng=(e,t)=>function(){var{adTagUrl:e,pApi:t=window.pAPI,timeout$:n=di.timer(1e3)}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.mapTo(e),i=di.create((n=>{if(!t||!t.ready)return n.next(e),void n.complete();t.ready((r=>{r&&r.adblock_detected?n.next(t.proxyResource(e,{filter:"ima3"})):n.next(e),n.complete()}))}));return di.race(i,r)}(e).switchMap(tg(e,t));function rg(e,t){return di.fromEvent(e,t)}var ig=e=>"FULLY_IN_VIEWPORT"!==e;function ag(e,t,n){var{adsDisabled:r,autoplay:i,disableOutOfViewportAds:a,publicaEnabled:s}=t.options(),o=di.of(function(e){if(!e&&window.google&&window.google.ima){var t=window.google.ima;return t.settings.setVpaidMode(t.ImaSdkSettings.VpaidMode.ENABLED),{ima:t}}return{}}(r)),u=o.pluck("ima").filter(Boolean),c=n.withType("adsLoader").pluck("value"),l=n.withType("adsManager").pluck("value"),d=e.$("video.vjs-tech"),h=function(e){var{adContainer:t,googleIMA$:n,videoElement:r}=e;return n.map((e=>new e.AdDisplayContainer(t,r))).publishReplay(1).refCount()}({adContainer:e.getChild("adContainer").adEl(),googleIMA$:u,videoElement:d}),p=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Jf;return e.pluck("AdsRenderingSettings").map((e=>{var n=new e;return Object.assign(n,t)})).publishReplay(1).refCount()}(u),f=function(e){return di.of(e)}(d),m=function(e){return e.map((e=>um(um(um({},e.AdEvent.Type),e.AdErrorEvent.Type),e.AdsManagerLoadedEvent.Type))).publishReplay().refCount()}(u),g=function(e){var{adsManager$:t,adsLoader$:n,dfpEventTypes$:r,events:i=im,loaderEvents:a=["AD_ERROR","ADS_MANAGER_LOADED"],fromAdEvent:s=sm}=e,o=am({eventTarget$:t,dfpEventTypes$:r,events:i,fromAdEvent:s}),u=am({eventTarget$:n,dfpEventTypes$:r,events:a,fromAdEvent:s});return di.merge(o,u).share()}({adsManager$:l,adsLoader$:c,dfpEventTypes$:m}),v=du(e,["cne:load-video-id","cne:viewport","contentupdate","dfp-currentvideo","dfp-resize","ended","play","readyforpreroll","volumechange"]),y=Fm(t,v),b=v.withType("dfp-currentvideo","volumechange").map((()=>e.muted()?0:e.volume())).startWith(e.muted()?0:e.volume()),_=function(e,t){var n=t.take(1).withLatestFrom(e,((e,t)=>ig(t))),r=e.skipUntil(t).map(ig);return n.merge(r).startWith(!1)}(v.withType("cne:viewport").map((e=>{var{data:t}=e;return t})),v.withType("play")),T=function(e){var{disableOutOfViewportAds:t,documentHidden$:n,skipAdRequestOutsideViewport$:r}=e;return r.combineLatest(n,((e,n)=>n||e&&t))}({disableOutOfViewportAds:a,documentHidden$:cu(),skipAdRequestOutsideViewport$:_}),w=function(e){var{adsLoader$:t,selectPlayerEvents$:n,googleIMA$:r,adRequestData$:i,skipAdRequest$:a,dfp:s,adTag:o=Wm,tryExtractVASTAdRequest:u=ng}=e,c=n.withType("dfp-resize").take(1),l=di.combineLatest(t,r,a,c);return i.zip(n.withType("contentupdate")).bufferedWith(l,((e,t)=>{var[n]=e,[r,i,a]=t;return(e=>{var{adsLoader:t,adTag:n,adRequestData:r,dfp:i,ima:a,skipAdRequest:s}=e,{aoTest:o,companionSize:u,embedLocation:c,urlVars:l,isRightRail:d,isStickyType:h,stickyPosition:p,hasTeaser:f,ampTargeting:m,cntPlatform:g,prebidData:v,autoplay:y,interludeOverride:b,recAlgorithm:_,videoId:T}=i.options(),w=i.width(),S=i.height(),C=i.infinityId(),E=i.mutedConfig(),k=i.playerSizeForAdRequest(),O=!(!b||"sitewideInterludeVideoOverride"!==_||T!==i.video().id);return{adsLoader:t,AdsRequest:a.AdsRequest,adTagUrl:n({aoTest:o,companionSize:u,embedLocation:c,height:S,infinityId:C,muted:E,adRequestData:r,playerSizeForAdRequest:k,isRightRail:d,isStickyType:h,stickyPosition:p,hasTeaser:f,urlVars:l,width:w,ampTargeting:m,cntPlatform:g,prebidData:v,autoplay:y,isSitewideOverride:O}),height:S,width:w,skipAdRequest:s}})({adsLoader:r,adTag:o,adRequestData:n,dfp:s,ima:i,skipAdRequest:a})})).switchMap((e=>e.skipAdRequest||s.video().disableAds?di.of(e):u(e,s))).publishReplay().refCount()}({adsLoader$:c,selectPlayerEvents$:v,adRequestData$:y,dfp:t,skipAdRequest$:T,googleIMA$:u}),S=function(e,t){return e.switchMap((e=>t.withType("ended","cne:load-video-id").mapTo(e)))}(c,v),C=function(e){var{dfpAdEvent$:t,dfpEventTypes$:n}=e;return n.pluck("LOADED").switchMap((e=>t.withType(e))).map((e=>e.getAd())).publishReplay(1).refCount()}({dfpAdEvent$:g,dfpEventTypes$:m}),E=e=>m.pluck(e).switchMap((e=>g.withType(e))),k=E("AD_ERROR"),O=E("STARTED"),x=E("LOADED").withLatestFrom(b,((e,t)=>t)),A=E("PAUSED"),P=E("RESUMED"),I=E("CONTENT_PAUSE_REQUESTED"),L=E("CONTENT_RESUME_REQUESTED"),M=rm(g,t.options()),D=M.map((e=>{var{html:t}=e;return""!==t})).distinctUntilChanged(),R=function(e){var{autoplay:t,adDisplayContainer$:n,playIntent$:r}=e;return t?n.mapTo(!0).take(1):di.combineLatest(r,n).mapTo(!0).take(1)}({autoplay:i,adDisplayContainer$:h,playIntent$:v.withType("play")}),N=function(e){var{adStarted$:t,contentResumeRequested$:n,requestAds$:r,vjsPlayForTimeout$:i,timer$:a=di.timer(Zf)}=e,s=t.merge(n);return r.switchMapTo(i.take(1)).switchMapTo(a.takeUntil(s)).share()}({adStarted$:O,contentResumeRequested$:L,requestAds$:w,vjsPlayForTimeout$:em(e)}),j=v.withType("readyforpreroll").withLatestFrom(b,((e,t)=>t)),U=L.merge(N),F=function(e){var{adComplete$:t,allAdsCompleted$:n,cachedVolume$:r,contentPauseRequested$:i,startPreroll$:a}=e;return a.switchMapTo(t).switchMapTo(i.withLatestFrom(r,((e,t)=>t)).takeUntil(n))}({adComplete$:U,allAdsCompleted$:E("ALL_ADS_COMPLETED"),cachedVolume$:b,contentPauseRequested$:I,startPreroll$:j}),$=function(e){var{adDisplayContainer$:t,googleIMA$:n}=e;return n.zip(t).publishReplay().refCount()}({adDisplayContainer$:h,googleIMA$:u}),B=function(e){var{adsLoader$:t,adsRenderingSettings$:n,contentPlayback$:r,dfpEventTypes$:i,adsManagerLoaded:a=rg}=e;return t.withLatestFrom(i.pluck("ADS_MANAGER_LOADED")).switchMap((e=>{var[t,n]=e;return a(t,n)})).withLatestFrom(r,n)}({adsLoader$:c,adsRenderingSettings$:p,contentPlayback$:f,dfpEventTypes$:m}),V=$.switchMap((e=>N.withLatestFrom(c,b,((t,n,r)=>({timeout:t,adsLoader:n,initialData:e,cachedVolume:r}))))),q=B.switchMapTo(N.withLatestFrom(l,b,((e,t,n)=>({adsManager:t,cachedVolume:n}))));return{adDisplayContainer$:h,adError$:k,adsManager$:l,adsRenderingSettings$:p,adStarted$:O,adTimeUpdate$:nm({startPreroll$:j,startMidroll$:F,adComplete$:U,adPaused$:A,adResumed$:P}),companionAd$:M,companionAdShowing$:D,contentComplete$:S,contentResumeRequested$:L,currentAd$:C,initDfpAdContainer$:R,initializeContribAds$:u.mapTo(!0),notifyPublica$:Um({dfpAdEvent$:g,dfpEventTypes$:m,publicaEnabled:s}),requestAds$:w,requestAdsLoader$:$,requestAdsManager$:B,retriggerOnPlayer$:bu({adsManager$:l,adRequestData$:y,dfpAdEvent$:g,dfpEventTypes$:m,requestAds$:w,timeoutAds$:V.merge(q)}),setAdVolume$:x,startMidroll$:F,startPreroll$:j,timeoutAdsLoader$:V,timeoutAdsManager$:q}}var sg={liveCuePoints:!1};function og(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:sg;e.ads(n)}function ug(e){var{bodyContent:t="",headContent:n="",target:r,options:i={}}=e,a=document.createElement("iframe");Object.assign(a,{frameBorder:0,marginWidth:0,marginHeight:0},i);var s="<html><head>".concat(n,"</head><body>").concat(t,"</body></html>");r.appendChild(a),a.contentDocument.open(),a.contentDocument.write(s),a.contentDocument.close()}var cg="dfp",lg={canHandleSource(e){var{type:t}=e;return t===cg},canPlayType:e=>e===cg?"maybe":"",handleSource(e,t){var{dfp:n}=e;return new dg(n,t)}};class dg{constructor(e,t){this.tech_=t,t.setupAdMode(e)}dispose(){this.tech_.disposeAdMode()}}function hg(){try{return window.frameElement}catch(e){return null}}var{ads:{requestAdsMark:pg,requestAdsMeasure:fg,requestAdsLoaderMark:mg,requestAdsLoaderMeasure:gg,requestAdsManagerMark:vg,requestAdsManagerMeasure:yg,adStartingMark:bg,adStartingMeasure:_g},js:{evaluatedJSMark:Tg}}=Xm;function wg(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:hg(),{adDisplayContainer$:a,adError$:s,adsManager$:o,adsRenderingSettings$:u,adStarted$:c,adTimeUpdate$:l,companionAd$:d,companionAdShowing$:h,contentComplete$:p,currentAd$:f,contentResumeRequested$:m,initDfpAdContainer$:g,initializeContribAds$:v,notifyPublica$:y,requestAds$:b,requestAdsLoader$:_,requestAdsManager$:T,retriggerOnPlayer$:w,setAdVolume$:S,startMidroll$:C,startPreroll$:E,timeoutAdsLoader$:k,timeoutAdsManager$:O}=n,x=e.$("video.vjs-tech"),A=og.bind(null,e),P=n=>{var{adsLoader:r,AdsRequest:i,adTagUrl:a,height:s,skipAdRequest:o,width:u}=n;if(o||t.video().disableAds)e.ads.skipLinearAdMode();else{var c=Object.assign(new i,{adTagUrl:a,linearAdSlotHeight:s,linearAdSlotWidth:u});Km(fg,mg,pg),r.requestAds(c)}},I=e=>{var[t,n]=e;Km(gg,Tg,mg);var i=new t.AdsLoader(n,x);r.next({type:"adsLoader",value:i})},L=t=>{var{adsLoader:n,initialData:r,cachedVolume:i}=t;n.destroy(),0==i&&e.muted(!0),e.ads.skipLinearAdMode(),hc("Ad Timeout (before adsManager was created)"),I(r)},M=e=>{var[t,n,i]=e;Km(yg,pg,vg);var a=t.getAdsManager(n,i);r.next({type:"adsManager",value:a})},D=t=>{var{adsManager:n,cachedVolume:r}=t;n.destroy(),0==r&&e.muted(!0),e.ads.endLinearAdMode(),hc("Ad Timeout (after adsManager was created)")},R=n=>{t.adsManager(n),e.trigger("adsready")},N=e=>{t.adDisplayContainer(e)},j=n=>{t.volume(n),Km(_g,void 0,bg),t.startAds(),e.ads.startLinearAdMode(),e.pause(),e.src({src:"dfp-placeholder",dfp:t,type:cg})},U=e=>{t.initAds(),j(e)},F=()=>{e.trigger("timeupdate")},$=()=>e.ads.endLinearAdMode(),B=()=>{t.startedAd(),e.trigger("ads-ad-started")},V=e=>{t.volume(e)},q=e=>e.contentComplete(),H=n=>{n.isLinear()?e.removeClass("cne-non-linear"):e.addClass("cne-non-linear"),t.currentAd(n)},W=t=>e.trigger(t),z=e=>{var{companionDivId:t,html:n,parentDivId:r,width:i,height:a}=e,s=document.getElementById(t);if(!s){var o=document.getElementById(r);(s=document.createElement("div")).id=t,o.appendChild(s)}s.innerHTML="",ug({bodyContent:n,headContent:"<style>body { overflow: hidden; }</style>",target:s,options:{width:i,height:a}})},G=e=>{if(i){var t=i.parentElement,n=parseInt(t.style.height)||0;t.style.height="".concat(e?75+n:n,"px")}},K=()=>e.trigger("adserror"),X=()=>t.initAdContainer(),Y=e=>e(),Q=di.merge(a.do(N),s.do(K),o.do(R),u,c.do(B),l.do(F),d.do(z),h.do(G),p.do(q),m.do($),f.do(H),g.do(X),v.do(A),y.do(Y),E.do(U),C.do(j),S.do(V),b.do(P),_.do(I),T.do(M),w.do(W),k.do(L),O.do(D));return Q}var Sg=n(9122),Cg=i().getTech("Html5"),Eg=i().getTech("Tech");class kg extends Cg{adMode(e){return"boolean"==typeof e&&(this.adMode_=e),this.adMode_||!1}setupAdMode(e){this.dfp=e,this.adMode(!0),this.trigger("durationchange"),this.dfp.on("dfp-currentad",(()=>this.trigger("durationchange")))}disposeAdMode(){this.adMode(!1),this.dfp.el()&&this.dfp.off("dfp-currentad"),delete this.dfp,delete this.adIsPaused_}pause(){if(this.adMode()){if(this.paused())return;this.adIsPaused_=!0,this.dfp.pause(),this.trigger({type:"pause",adMode:!0})}else super.pause()}play(){if(this.adMode()){if(!this.paused())return;this.adIsPaused_=!1,this.dfp.play(),this.trigger({type:"play",adMode:!0})}else super.play()}load(){this.adMode()||super.load()}paused(){return this.adMode()?void 0===this.adIsPaused_||!!this.adIsPaused_:super.paused()}volume(){return this.adMode()?this.dfp.volume():super.volume()}setVolume(e){this.adMode()&&(this.dfp.volume(e),this.trigger("volumechange")),super.setVolume(e)}muted(){return this.adMode()?0===this.volume():super.muted()}setMuted(e){this.adMode()?e?(this.preMutedVolume_=this.volume(),this.setVolume(0)):this.setVolume(this.preMutedVolume_||1):e||0!==super.volume()||this.setVolume(this.preMutedVolume_||1),super.setMuted(e),this.trigger("volumechange")}duration(){if(this.adMode()){var e=this.dfp.duration();return this._parseAdDuration(e)}return super.duration()}_parseAdDuration(e){var t=parseFloat(e);return t&&t>0?t:0}currentTime(){return this.adMode()?this._adCurrentTime():super.currentTime()}_adCurrentTime(){var e=this.dfp.remainingTime(),t=this.duration();return e<0?0:t?t-e:e}}Eg.withSourceHandlers(kg),kg.registerSourceHandler(lg),i().registerTech("Html5",kg);var Og=i().getComponent("Component");class xg extends Og{constructor(e,t){super(e,t),this.muted_=this.options_.muted,this.inViewportAutoplay_=!this.options_.isIframeEmbed&&this.options_.autoplay,this.autoplay_=this.options_.autoplay,this.startedAd_=!1}options(){return this.options_}dispose(e){if(e){var t=[e.adTimeoutTimeout,e.cancelPlayTimeout];for(var n of t)window.clearTimeout(n)}this.adDisplayContainerCall_("destroy"),this.adsManagerCall_("destroy"),super.dispose()}adsManager(e){if(!e)return this.adsManager_;this.adsManagerCall_("destroy"),this.adsManager_=e}adDisplayContainer(e){if(!e)return this.adDisplayContainer_;this.adDisplayContainerCall_("destroy"),this.adDisplayContainer_=e}currentAd(e){if(!e)return this.currentAd_;this.currentAd_=e,this.sendLineItemToGPT_(),this.trigger("dfp-currentad")}initAds(){this.adsManagerCall_("init",this.width(),this.height(),this.viewMode())}startAds(){this.startedAd_=!1,this.adsManagerCall_("start")}startedAd(){this.startedAd_=!0}initAdContainer(){this.adDisplayContainerCall_("initialize")}resize(e,t,n){this.width_=e,this.height_=t,this.viewMode_=n,this.adsManagerCall_("resize",e,t,n),this.player().trigger("dfp-resize")}viewMode(){return this.viewMode_||"normal"}height(){return this.height_}width(){return this.width_}playerSizeForAdRequest(){var{playerType:e}=this.options();return"interlude"===e?"640x360":"640x480"}play(){this.startedAd_&&this.adsManagerCall_("resume")}pause(){this.startedAd_&&this.adsManagerCall_("pause")}skip(){this.adsManagerCall_("skip")}volume(e){var t=this.adsManagerGet_("getVolume");if("number"!=typeof e||e===t)return t;this.adsManagerCall_("setVolume",e)}duration(){return this.currentAdGet_("getDuration")}remainingTime(){return this.adsManagerGet_("getRemainingTime")}video(e){if(!e)return this.video_||{};this.video_=e,this.player().trigger({type:"dfp-currentvideo",value:e})}infinityId(e){return e&&(this.infinityId_=e),this.infinityId_}mutedConfig(e){if(void 0===e)return this.muted_;this.muted_=e}sendLineItemToGPT_(){if(ac()&&window.top.googletag)try{var e=mu(this.currentAdGet_("adId"),this.currentAdGet_("getWrapperAdSystems"),this.currentAdGet_("getWrapperAdIds")),t=[...window.top.googletag.pubads().getTargeting("ctx_line_items")||[],e],n=[...new Set(t)];window.top.googletag.pubads().setTargeting("ctx_line_items",n)}catch(e){dc("Error thrown setting GPT targeting",e)}}restartAd(){var e=this.player();e.ads.endLinearAdMode(),e.trigger("contentresumed"),this.adsManagerCall_("destroy")}adsManagerCall_(e){var t=this.adsManager();if(t&&"function"==typeof t[e]){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];t[e](...r)}}adsManagerGet_(e){var t=this.adsManager();if(t&&"function"==typeof t[e]){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return t[e](...r)}}adDisplayContainerCall_(e){var t=this.adDisplayContainer();if(t&&"function"==typeof t[e]){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];t[e](...r)}}currentAdGet_(e){var t=this.currentAd();if(t&&"function"==typeof t[e])return t[e]()}}function Ag(e){var[t,n]=e?e.split(/x/i):[];return{width:t||"300",height:n||"60"}}i().registerPlugin("dfp",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ag,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:wg,r=this,i=new xg(r,e),a=new Sg.BehaviorSubject({}),s=t(r,i,a),o=n(r,i,s,a);o.subscribe(),this.dfp=i}));var Pg=n(7317).Z;function Ig(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Lg(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ig(Object(n),!0).forEach((function(t){Mg(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ig(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Mg(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var{misc:{loadEmbedPiecesMark:Dg,createPlayerStartedMark:Rg,createPlayerStartedMeasure:Ng}}=Xm,jg=(e,t,n)=>{var{autoplayEnabled:r,urlVars:a,playerConfig:s,publicaEnabled:o,video:u,videoEl:c}=e;n.addLanguage(t.language,t.videos_js_language_data);var l=n(c,t);return l.addClass("video-js"),l.dfp(Lg(Lg({},s),{},{autoplay:r,adsDisabled:s.adsDisabled,adUnitPath:s.iu,brand:u.brand,companionSize:Ag(s.companionSize),disableOutOfViewportAds:s.doova,urlVars:a,publicaEnabled:o,prebidData:u.prebidData})),s.has_playlist&&0!=s.showPlaylistBar&&function(e,t){var{playerConfig:n,playerContainer:r}=t;if(0!=n.hasRail){var a=i().getComponent("PlaylistContainer");e.cnePlaylistContainer=new a(e,{children:{playlistHeader:!0,playlistBody:{children:[{name:"playlistArrow",direction:"left"},{name:"playlistItemsContainer",children:{playlistItems:!0}},{name:"playlistArrow",direction:"right"}]}}});var s=e.cnePlaylistContainer.el();"light"===n.theme?s.className+=" playlist-light":"vogueworld"===n.theme&&(s.className+=" playlist-vw"),r.appendChild(s)}}(l,e),l};function Ug(e,t){var n=e.el().parentNode;n&&n.classList.remove("player-container");var{cnePlaylistContainer:r}=e;r&&r.dispose(),t.complete(),e.dfp.dispose(e.ads),setTimeout((()=>{e.dispose()}))}const Fg=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};lc(t),hc("Player Requested");var r=Dd(t),i=r.playerContainer;i.classList.add("player-container");var a=t.playerConfig.play_btn_styles;a&&qd(a,i);var{playerConfig:{aspectRatio:s}}=t;"16x9"!==s&&Hd(s,i);var o=jg(r,n,e),u=Au(o),c=di.of(Lg(Lg({},r),{},{videoEl:o.$("video.vjs-tech")})),l=hu(c),d=new ri.Subject,h=ju(d,o),p=Cd(o)(Ml(u,l,c,h)),f=Ea(p,o),m=ha(uu(f,o)),g=new si(d,m,{}),v=d.withType("dispose");return Km(Ng,Dg,Rg),g.takeUntil(v).subscribe((()=>{}),(e=>Pg(e)),(()=>Ug(o,d))),{facade:Du(g,t.environment.secret),player:o}};var{js:{evaluatedJSMark:$g,startedJSExecutionMark:Bg,evaluateMainJSMeasure:Vg}}=Xm;Km(Vg,Bg,$g),(window._cne=window._cne||{},window._cne).createPlayer=function(e){var t;t=e.video.localized_messages,Ia=t||{};var n=!!e.video.live_metadata,r={fluid:!0,autoplay:!1,preload:"metadata",children:Bd(e.video),html5:{nativeTextTracks:n&&Ws()||$s,vhs:{bandwidth:2097152,overrideNative:!i().browser.IS_SAFARI},nativeAudioTracks:i().browser.IS_SAFARI,nativeVideoTracks:i().browser.IS_SAFARI},persistTextTrackSettings:!0,language:e.video.locale,videos_js_language_data:e.video.videos_js_language_data},{facade:a,player:s}=Fg(i(),e,r);return ni(i(),s,e.video),a}},7317:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n(90),i=null;function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window,t=(0,r.Z)(e.location.href),n=t.searchParams.get("cneDebug");return i="true"===n||e._CNE_DEV_MODE_}function s(){null===i&&a();for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];i&&console.warn("cneLog: ",...t)}},90:(e,t,n)=>{"use strict";function r(e){try{return new URL(e)}catch(c){var t=document.createElement("a");t.href=e;var{host:n="",hostname:r="",pathname:i="",port:a="",protocol:s="",search:o=""}=t,u={};return(0===t.search.indexOf("?")?t.search.substring(1):t.search).split("&").forEach((e=>{var t=e.split("=");2===t.length&&(u[t[0]]=t[1])})),{host:n,hostname:r,pathname:i,port:a,protocol:s,search:o,searchParams:{get:e=>u[e]}}}}n.d(t,{Z:()=>r})},7878:(e,t,n)=>{n(6253),n(9115),n(1181),n(8416),n(5645).Map},7657:(e,t,n)=>{n(5767),n(8132),n(8388),n(7470),n(4882),n(1520),n(7476),n(9622),n(9375),n(3533),n(4672),n(4157),n(5095),n(9892),n(5115),n(9176),n(8838),n(6253),n(5645).Object},9074:(e,t,n)=>{n(6253),n(9115),n(1181),n(851),n(5645).Promise},2298:(e,t,n)=>{n(6253),n(9115),n(1181),n(8184),n(5645).Set},4244:(e,t,n)=>{n(5767),n(6253),n(5645).Symbol},8938:(e,t,n)=>{n(2310),n(5645).Array.find},4963:e=>{e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},7722:(e,t,n)=>{var r=n(6314)("unscopables"),i=Array.prototype;null==i[r]&&n(7728)(i,r,{}),e.exports=function(e){i[r][e]=!0}},3328:e=>{e.exports=function(e,t,n,r){if(!(e instanceof t)||void 0!==r&&r in e)throw TypeError(n+": incorrect invocation!");return e}},7007:(e,t,n)=>{var r=n(5286);e.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},9315:(e,t,n)=>{var r=n(2110),i=n(875),a=n(2337);e.exports=function(e){return function(t,n,s){var o,u=r(t),c=i(u.length),l=a(s,c);if(e&&n!=n){for(;c>l;)if((o=u[l++])!=o)return!0}else for(;c>l;l++)if((e||l in u)&&u[l]===n)return e||l||0;return!e&&-1}}},50:(e,t,n)=>{var r=n(741),i=n(9797),a=n(508),s=n(875),o=n(6886);e.exports=function(e,t){var n=1==e,u=2==e,c=3==e,l=4==e,d=6==e,h=5==e||d,p=t||o;return function(t,o,f){for(var m,g,v=a(t),y=i(v),b=r(o,f,3),_=s(y.length),T=0,w=n?p(t,_):u?p(t,0):void 0;_>T;T++)if((h||T in y)&&(g=b(m=y[T],T,v),e))if(n)w[T]=g;else if(g)switch(e){case 3:return!0;case 5:return m;case 6:return T;case 2:w.push(m)}else if(l)return!1;return d?-1:c||l?l:w}}},2736:(e,t,n)=>{var r=n(5286),i=n(4302),a=n(6314)("species");e.exports=function(e){var t;return i(e)&&("function"!=typeof(t=e.constructor)||t!==Array&&!i(t.prototype)||(t=void 0),r(t)&&null===(t=t[a])&&(t=void 0)),void 0===t?Array:t}},6886:(e,t,n)=>{var r=n(2736);e.exports=function(e,t){return new(r(e))(t)}},1488:(e,t,n)=>{var r=n(2032),i=n(6314)("toStringTag"),a="Arguments"==r(function(){return arguments}());e.exports=function(e){var t,n,s;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),i))?n:a?r(t):"Object"==(s=r(t))&&"function"==typeof t.callee?"Arguments":s}},2032:e=>{var t={}.toString;e.exports=function(e){return t.call(e).slice(8,-1)}},9824:(e,t,n)=>{"use strict";var r=n(9275).f,i=n(2503),a=n(4408),s=n(741),o=n(3328),u=n(3531),c=n(2923),l=n(5436),d=n(2974),h=n(7057),p=n(4728).fastKey,f=n(1616),m=h?"_s":"size",g=function(e,t){var n,r=p(t);if("F"!==r)return e._i[r];for(n=e._f;n;n=n.n)if(n.k==t)return n};e.exports={getConstructor:function(e,t,n,c){var l=e((function(e,r){o(e,l,t,"_i"),e._t=t,e._i=i(null),e._f=void 0,e._l=void 0,e[m]=0,null!=r&&u(r,n,e[c],e)}));return a(l.prototype,{clear:function(){for(var e=f(this,t),n=e._i,r=e._f;r;r=r.n)r.r=!0,r.p&&(r.p=r.p.n=void 0),delete n[r.i];e._f=e._l=void 0,e[m]=0},delete:function(e){var n=f(this,t),r=g(n,e);if(r){var i=r.n,a=r.p;delete n._i[r.i],r.r=!0,a&&(a.n=i),i&&(i.p=a),n._f==r&&(n._f=i),n._l==r&&(n._l=a),n[m]--}return!!r},forEach:function(e){f(this,t);for(var n,r=s(e,arguments.length>1?arguments[1]:void 0,3);n=n?n.n:this._f;)for(r(n.v,n.k,this);n&&n.r;)n=n.p},has:function(e){return!!g(f(this,t),e)}}),h&&r(l.prototype,"size",{get:function(){return f(this,t)[m]}}),l},def:function(e,t,n){var r,i,a=g(e,t);return a?a.v=n:(e._l=a={i:i=p(t,!0),k:t,v:n,p:r=e._l,n:void 0,r:!1},e._f||(e._f=a),r&&(r.n=a),e[m]++,"F"!==i&&(e._i[i]=a)),e},getEntry:g,setStrong:function(e,t,n){c(e,t,(function(e,n){this._t=f(e,t),this._k=n,this._l=void 0}),(function(){for(var e=this,t=e._k,n=e._l;n&&n.r;)n=n.p;return e._t&&(e._l=n=n?n.n:e._t._f)?l(0,"keys"==t?n.k:"values"==t?n.v:[n.k,n.v]):(e._t=void 0,l(1))}),n?"entries":"values",!n,!0),d(t)}}},5795:(e,t,n)=>{"use strict";var r=n(3816),i=n(2985),a=n(7234),s=n(4408),o=n(4728),u=n(3531),c=n(3328),l=n(5286),d=n(4253),h=n(7462),p=n(2943),f=n(266);e.exports=function(e,t,n,m,g,v){var y=r[e],b=y,_=g?"set":"add",T=b&&b.prototype,w={},S=function(e){var t=T[e];a(T,e,"delete"==e||"has"==e?function(e){return!(v&&!l(e))&&t.call(this,0===e?0:e)}:"get"==e?function(e){return v&&!l(e)?void 0:t.call(this,0===e?0:e)}:"add"==e?function(e){return t.call(this,0===e?0:e),this}:function(e,n){return t.call(this,0===e?0:e,n),this})};if("function"==typeof b&&(v||T.forEach&&!d((function(){(new b).entries().next()})))){var C=new b,E=C[_](v?{}:-0,1)!=C,k=d((function(){C.has(1)})),O=h((function(e){new b(e)})),x=!v&&d((function(){for(var e=new b,t=5;t--;)e[_](t,t);return!e.has(-0)}));O||((b=t((function(t,n){c(t,b,e);var r=f(new y,t,b);return null!=n&&u(n,g,r[_],r),r}))).prototype=T,T.constructor=b),(k||x)&&(S("delete"),S("has"),g&&S("get")),(x||E)&&S(_),v&&T.clear&&delete T.clear}else b=m.getConstructor(t,e,g,_),s(b.prototype,n),o.NEED=!0;return p(b,e),w[e]=b,i(i.G+i.W+i.F*(b!=y),w),v||m.setStrong(b,e,g),b}},5645:e=>{var t=e.exports={version:"2.6.12"};"number"==typeof __e&&(__e=t)},741:(e,t,n)=>{var r=n(4963);e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)}}return function(){return e.apply(t,arguments)}}},1355:e=>{e.exports=function(e){if(null==e)throw TypeError("Can't call method on  "+e);return e}},7057:(e,t,n)=>{e.exports=!n(4253)((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},2457:(e,t,n)=>{var r=n(5286),i=n(3816).document,a=r(i)&&r(i.createElement);e.exports=function(e){return a?i.createElement(e):{}}},4430:e=>{e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},5541:(e,t,n)=>{var r=n(7184),i=n(4548),a=n(4682);e.exports=function(e){var t=r(e),n=i.f;if(n)for(var s,o=n(e),u=a.f,c=0;o.length>c;)u.call(e,s=o[c++])&&t.push(s);return t}},2985:(e,t,n)=>{var r=n(3816),i=n(5645),a=n(7728),s=n(7234),o=n(741),u=function(e,t,n){var c,l,d,h,p=e&u.F,f=e&u.G,m=e&u.S,g=e&u.P,v=e&u.B,y=f?r:m?r[t]||(r[t]={}):(r[t]||{}).prototype,b=f?i:i[t]||(i[t]={}),_=b.prototype||(b.prototype={});for(c in f&&(n=t),n)d=((l=!p&&y&&void 0!==y[c])?y:n)[c],h=v&&l?o(d,r):g&&"function"==typeof d?o(Function.call,d):d,y&&s(y,c,d,e&u.U),b[c]!=d&&a(b,c,h),g&&_[c]!=d&&(_[c]=d)};r.core=i,u.F=1,u.G=2,u.S=4,u.P=8,u.B=16,u.W=32,u.U=64,u.R=128,e.exports=u},4253:e=>{e.exports=function(e){try{return!!e()}catch(e){return!0}}},3531:(e,t,n)=>{var r=n(741),i=n(8851),a=n(6555),s=n(7007),o=n(875),u=n(9002),c={},l={},d=e.exports=function(e,t,n,d,h){var p,f,m,g,v=h?function(){return e}:u(e),y=r(n,d,t?2:1),b=0;if("function"!=typeof v)throw TypeError(e+" is not iterable!");if(a(v)){for(p=o(e.length);p>b;b++)if((g=t?y(s(f=e[b])[0],f[1]):y(e[b]))===c||g===l)return g}else for(m=v.call(e);!(f=m.next()).done;)if((g=i(m,y,f.value,t))===c||g===l)return g};d.BREAK=c,d.RETURN=l},18:(e,t,n)=>{e.exports=n(3825)("native-function-to-string",Function.toString)},3816:e=>{var t=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=t)},9181:e=>{var t={}.hasOwnProperty;e.exports=function(e,n){return t.call(e,n)}},7728:(e,t,n)=>{var r=n(9275),i=n(681);e.exports=n(7057)?function(e,t,n){return r.f(e,t,i(1,n))}:function(e,t,n){return e[t]=n,e}},639:(e,t,n)=>{var r=n(3816).document;e.exports=r&&r.documentElement},1734:(e,t,n)=>{e.exports=!n(7057)&&!n(4253)((function(){return 7!=Object.defineProperty(n(2457)("div"),"a",{get:function(){return 7}}).a}))},266:(e,t,n)=>{var r=n(5286),i=n(7375).set;e.exports=function(e,t,n){var a,s=t.constructor;return s!==n&&"function"==typeof s&&(a=s.prototype)!==n.prototype&&r(a)&&i&&i(e,a),e}},7242:e=>{e.exports=function(e,t,n){var r=void 0===n;switch(t.length){case 0:return r?e():e.call(n);case 1:return r?e(t[0]):e.call(n,t[0]);case 2:return r?e(t[0],t[1]):e.call(n,t[0],t[1]);case 3:return r?e(t[0],t[1],t[2]):e.call(n,t[0],t[1],t[2]);case 4:return r?e(t[0],t[1],t[2],t[3]):e.call(n,t[0],t[1],t[2],t[3])}return e.apply(n,t)}},9797:(e,t,n)=>{var r=n(2032);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==r(e)?e.split(""):Object(e)}},6555:(e,t,n)=>{var r=n(2803),i=n(6314)("iterator"),a=Array.prototype;e.exports=function(e){return void 0!==e&&(r.Array===e||a[i]===e)}},4302:(e,t,n)=>{var r=n(2032);e.exports=Array.isArray||function(e){return"Array"==r(e)}},5286:e=>{e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},8851:(e,t,n)=>{var r=n(7007);e.exports=function(e,t,n,i){try{return i?t(r(n)[0],n[1]):t(n)}catch(t){var a=e.return;throw void 0!==a&&r(a.call(e)),t}}},9988:(e,t,n)=>{"use strict";var r=n(2503),i=n(681),a=n(2943),s={};n(7728)(s,n(6314)("iterator"),(function(){return this})),e.exports=function(e,t,n){e.prototype=r(s,{next:i(1,n)}),a(e,t+" Iterator")}},2923:(e,t,n)=>{"use strict";var r=n(4461),i=n(2985),a=n(7234),s=n(7728),o=n(2803),u=n(9988),c=n(2943),l=n(468),d=n(6314)("iterator"),h=!([].keys&&"next"in[].keys()),p="keys",f="values",m=function(){return this};e.exports=function(e,t,n,g,v,y,b){u(n,t,g);var _,T,w,S=function(e){if(!h&&e in O)return O[e];switch(e){case p:case f:return function(){return new n(this,e)}}return function(){return new n(this,e)}},C=t+" Iterator",E=v==f,k=!1,O=e.prototype,x=O[d]||O["@@iterator"]||v&&O[v],A=x||S(v),P=v?E?S("entries"):A:void 0,I="Array"==t&&O.entries||x;if(I&&(w=l(I.call(new e)))!==Object.prototype&&w.next&&(c(w,C,!0),r||"function"==typeof w[d]||s(w,d,m)),E&&x&&x.name!==f&&(k=!0,A=function(){return x.call(this)}),r&&!b||!h&&!k&&O[d]||s(O,d,A),o[t]=A,o[C]=m,v)if(_={values:E?A:S(f),keys:y?A:S(p),entries:P},b)for(T in _)T in O||a(O,T,_[T]);else i(i.P+i.F*(h||k),t,_);return _}},7462:(e,t,n)=>{var r=n(6314)("iterator"),i=!1;try{var a=[7][r]();a.return=function(){i=!0},Array.from(a,(function(){throw 2}))}catch(e){}e.exports=function(e,t){if(!t&&!i)return!1;var n=!1;try{var a=[7],s=a[r]();s.next=function(){return{done:n=!0}},a[r]=function(){return s},e(a)}catch(e){}return n}},5436:e=>{e.exports=function(e,t){return{value:t,done:!!e}}},2803:e=>{e.exports={}},4461:e=>{e.exports=!1},4728:(e,t,n)=>{var r=n(3953)("meta"),i=n(5286),a=n(9181),s=n(9275).f,o=0,u=Object.isExtensible||function(){return!0},c=!n(4253)((function(){return u(Object.preventExtensions({}))})),l=function(e){s(e,r,{value:{i:"O"+ ++o,w:{}}})},d=e.exports={KEY:r,NEED:!1,fastKey:function(e,t){if(!i(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!a(e,r)){if(!u(e))return"F";if(!t)return"E";l(e)}return e[r].i},getWeak:function(e,t){if(!a(e,r)){if(!u(e))return!0;if(!t)return!1;l(e)}return e[r].w},onFreeze:function(e){return c&&d.NEED&&u(e)&&!a(e,r)&&l(e),e}}},4351:(e,t,n)=>{var r=n(3816),i=n(4193).set,a=r.MutationObserver||r.WebKitMutationObserver,s=r.process,o=r.Promise,u="process"==n(2032)(s);e.exports=function(){var e,t,n,c=function(){var r,i;for(u&&(r=s.domain)&&r.exit();e;){i=e.fn,e=e.next;try{i()}catch(r){throw e?n():t=void 0,r}}t=void 0,r&&r.enter()};if(u)n=function(){s.nextTick(c)};else if(!a||r.navigator&&r.navigator.standalone)if(o&&o.resolve){var l=o.resolve(void 0);n=function(){l.then(c)}}else n=function(){i.call(r,c)};else{var d=!0,h=document.createTextNode("");new a(c).observe(h,{characterData:!0}),n=function(){h.data=d=!d}}return function(r){var i={fn:r,next:void 0};t&&(t.next=i),e||(e=i,n()),t=i}}},3499:(e,t,n)=>{"use strict";var r=n(4963);function i(e){var t,n;this.promise=new e((function(e,r){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=r})),this.resolve=r(t),this.reject=r(n)}e.exports.f=function(e){return new i(e)}},5345:(e,t,n)=>{"use strict";var r=n(7057),i=n(7184),a=n(4548),s=n(4682),o=n(508),u=n(9797),c=Object.assign;e.exports=!c||n(4253)((function(){var e={},t={},n=Symbol(),r="abcdefghijklmnopqrst";return e[n]=7,r.split("").forEach((function(e){t[e]=e})),7!=c({},e)[n]||Object.keys(c({},t)).join("")!=r}))?function(e,t){for(var n=o(e),c=arguments.length,l=1,d=a.f,h=s.f;c>l;)for(var p,f=u(arguments[l++]),m=d?i(f).concat(d(f)):i(f),g=m.length,v=0;g>v;)p=m[v++],r&&!h.call(f,p)||(n[p]=f[p]);return n}:c},2503:(e,t,n)=>{var r=n(7007),i=n(5588),a=n(4430),s=n(9335)("IE_PROTO"),o=function(){},u=function(){var e,t=n(2457)("iframe"),r=a.length;for(t.style.display="none",n(639).appendChild(t),t.src="javascript:",(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),u=e.F;r--;)delete u.prototype[a[r]];return u()};e.exports=Object.create||function(e,t){var n;return null!==e?(o.prototype=r(e),n=new o,o.prototype=null,n[s]=e):n=u(),void 0===t?n:i(n,t)}},9275:(e,t,n)=>{var r=n(7007),i=n(1734),a=n(1689),s=Object.defineProperty;t.f=n(7057)?Object.defineProperty:function(e,t,n){if(r(e),t=a(t,!0),r(n),i)try{return s(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},5588:(e,t,n)=>{var r=n(9275),i=n(7007),a=n(7184);e.exports=n(7057)?Object.defineProperties:function(e,t){i(e);for(var n,s=a(t),o=s.length,u=0;o>u;)r.f(e,n=s[u++],t[n]);return e}},8693:(e,t,n)=>{var r=n(4682),i=n(681),a=n(2110),s=n(1689),o=n(9181),u=n(1734),c=Object.getOwnPropertyDescriptor;t.f=n(7057)?c:function(e,t){if(e=a(e),t=s(t,!0),u)try{return c(e,t)}catch(e){}if(o(e,t))return i(!r.f.call(e,t),e[t])}},9327:(e,t,n)=>{var r=n(2110),i=n(616).f,a={}.toString,s="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function(e){return s&&"[object Window]"==a.call(e)?function(e){try{return i(e)}catch(e){return s.slice()}}(e):i(r(e))}},616:(e,t,n)=>{var r=n(189),i=n(4430).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,i)}},4548:(e,t)=>{t.f=Object.getOwnPropertySymbols},468:(e,t,n)=>{var r=n(9181),i=n(508),a=n(9335)("IE_PROTO"),s=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=i(e),r(e,a)?e[a]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?s:null}},189:(e,t,n)=>{var r=n(9181),i=n(2110),a=n(9315)(!1),s=n(9335)("IE_PROTO");e.exports=function(e,t){var n,o=i(e),u=0,c=[];for(n in o)n!=s&&r(o,n)&&c.push(n);for(;t.length>u;)r(o,n=t[u++])&&(~a(c,n)||c.push(n));return c}},7184:(e,t,n)=>{var r=n(189),i=n(4430);e.exports=Object.keys||function(e){return r(e,i)}},4682:(e,t)=>{t.f={}.propertyIsEnumerable},3160:(e,t,n)=>{var r=n(2985),i=n(5645),a=n(4253);e.exports=function(e,t){var n=(i.Object||{})[e]||Object[e],s={};s[e]=t(n),r(r.S+r.F*a((function(){n(1)})),"Object",s)}},188:e=>{e.exports=function(e){try{return{e:!1,v:e()}}catch(e){return{e:!0,v:e}}}},94:(e,t,n)=>{var r=n(7007),i=n(5286),a=n(3499);e.exports=function(e,t){if(r(e),i(t)&&t.constructor===e)return t;var n=a.f(e);return(0,n.resolve)(t),n.promise}},681:e=>{e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},4408:(e,t,n)=>{var r=n(7234);e.exports=function(e,t,n){for(var i in t)r(e,i,t[i],n);return e}},7234:(e,t,n)=>{var r=n(3816),i=n(7728),a=n(9181),s=n(3953)("src"),o=n(18),u="toString",c=(""+o).split(u);n(5645).inspectSource=function(e){return o.call(e)},(e.exports=function(e,t,n,o){var u="function"==typeof n;u&&(a(n,"name")||i(n,"name",t)),e[t]!==n&&(u&&(a(n,s)||i(n,s,e[t]?""+e[t]:c.join(String(t)))),e===r?e[t]=n:o?e[t]?e[t]=n:i(e,t,n):(delete e[t],i(e,t,n)))})(Function.prototype,u,(function(){return"function"==typeof this&&this[s]||o.call(this)}))},7195:e=>{e.exports=Object.is||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}},7375:(e,t,n)=>{var r=n(5286),i=n(7007),a=function(e,t){if(i(e),!r(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,r){try{(r=n(741)(Function.call,n(8693).f(Object.prototype,"__proto__").set,2))(e,[]),t=!(e instanceof Array)}catch(e){t=!0}return function(e,n){return a(e,n),t?e.__proto__=n:r(e,n),e}}({},!1):void 0),check:a}},2974:(e,t,n)=>{"use strict";var r=n(3816),i=n(9275),a=n(7057),s=n(6314)("species");e.exports=function(e){var t=r[e];a&&t&&!t[s]&&i.f(t,s,{configurable:!0,get:function(){return this}})}},2943:(e,t,n)=>{var r=n(9275).f,i=n(9181),a=n(6314)("toStringTag");e.exports=function(e,t,n){e&&!i(e=n?e:e.prototype,a)&&r(e,a,{configurable:!0,value:t})}},9335:(e,t,n)=>{var r=n(3825)("keys"),i=n(3953);e.exports=function(e){return r[e]||(r[e]=i(e))}},3825:(e,t,n)=>{var r=n(5645),i=n(3816),a="__core-js_shared__",s=i[a]||(i[a]={});(e.exports=function(e,t){return s[e]||(s[e]=void 0!==t?t:{})})("versions",[]).push({version:r.version,mode:n(4461)?"pure":"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})},8364:(e,t,n)=>{var r=n(7007),i=n(4963),a=n(6314)("species");e.exports=function(e,t){var n,s=r(e).constructor;return void 0===s||null==(n=r(s)[a])?t:i(n)}},4496:(e,t,n)=>{var r=n(1467),i=n(1355);e.exports=function(e){return function(t,n){var a,s,o=String(i(t)),u=r(n),c=o.length;return u<0||u>=c?e?"":void 0:(a=o.charCodeAt(u))<55296||a>56319||u+1===c||(s=o.charCodeAt(u+1))<56320||s>57343?e?o.charAt(u):a:e?o.slice(u,u+2):s-56320+(a-55296<<10)+65536}}},4193:(e,t,n)=>{var r,i,a,s=n(741),o=n(7242),u=n(639),c=n(2457),l=n(3816),d=l.process,h=l.setImmediate,p=l.clearImmediate,f=l.MessageChannel,m=l.Dispatch,g=0,v={},y="onreadystatechange",b=function(){var e=+this;if(v.hasOwnProperty(e)){var t=v[e];delete v[e],t()}},_=function(e){b.call(e.data)};h&&p||(h=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return v[++g]=function(){o("function"==typeof e?e:Function(e),t)},r(g),g},p=function(e){delete v[e]},"process"==n(2032)(d)?r=function(e){d.nextTick(s(b,e,1))}:m&&m.now?r=function(e){m.now(s(b,e,1))}:f?(a=(i=new f).port2,i.port1.onmessage=_,r=s(a.postMessage,a,1)):l.addEventListener&&"function"==typeof postMessage&&!l.importScripts?(r=function(e){l.postMessage(e+"","*")},l.addEventListener("message",_,!1)):r=y in c("script")?function(e){u.appendChild(c("script")).onreadystatechange=function(){u.removeChild(this),b.call(e)}}:function(e){setTimeout(s(b,e,1),0)}),e.exports={set:h,clear:p}},2337:(e,t,n)=>{var r=n(1467),i=Math.max,a=Math.min;e.exports=function(e,t){return(e=r(e))<0?i(e+t,0):a(e,t)}},1467:e=>{var t=Math.ceil,n=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?n:t)(e)}},2110:(e,t,n)=>{var r=n(9797),i=n(1355);e.exports=function(e){return r(i(e))}},875:(e,t,n)=>{var r=n(1467),i=Math.min;e.exports=function(e){return e>0?i(r(e),9007199254740991):0}},508:(e,t,n)=>{var r=n(1355);e.exports=function(e){return Object(r(e))}},1689:(e,t,n)=>{var r=n(5286);e.exports=function(e,t){if(!r(e))return e;var n,i;if(t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;if("function"==typeof(n=e.valueOf)&&!r(i=n.call(e)))return i;if(!t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},3953:e=>{var t=0,n=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++t+n).toString(36))}},575:(e,t,n)=>{var r=n(3816).navigator;e.exports=r&&r.userAgent||""},1616:(e,t,n)=>{var r=n(5286);e.exports=function(e,t){if(!r(e)||e._t!==t)throw TypeError("Incompatible receiver, "+t+" required!");return e}},6074:(e,t,n)=>{var r=n(3816),i=n(5645),a=n(4461),s=n(8787),o=n(9275).f;e.exports=function(e){var t=i.Symbol||(i.Symbol=a?{}:r.Symbol||{});"_"==e.charAt(0)||e in t||o(t,e,{value:s.f(e)})}},8787:(e,t,n)=>{t.f=n(6314)},6314:(e,t,n)=>{var r=n(3825)("wks"),i=n(3953),a=n(3816).Symbol,s="function"==typeof a;(e.exports=function(e){return r[e]||(r[e]=s&&a[e]||(s?a:i)("Symbol."+e))}).store=r},9002:(e,t,n)=>{var r=n(1488),i=n(6314)("iterator"),a=n(2803);e.exports=n(5645).getIteratorMethod=function(e){if(null!=e)return e[i]||e["@@iterator"]||a[r(e)]}},2310:(e,t,n)=>{"use strict";var r=n(2985),i=n(50)(5),a="find",s=!0;a in[]&&Array(1).find((function(){s=!1})),r(r.P+r.F*s,"Array",{find:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),n(7722)(a)},6997:(e,t,n)=>{"use strict";var r=n(7722),i=n(5436),a=n(2803),s=n(2110);e.exports=n(2923)(Array,"Array",(function(e,t){this._t=s(e),this._i=0,this._k=t}),(function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,i(1)):i(0,"keys"==t?n:"values"==t?e[n]:[n,e[n]])}),"values"),a.Arguments=a.Array,r("keys"),r("values"),r("entries")},8416:(e,t,n)=>{"use strict";var r=n(9824),i=n(1616),a="Map";e.exports=n(5795)(a,(function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}}),{get:function(e){var t=r.getEntry(i(this,a),e);return t&&t.v},set:function(e,t){return r.def(i(this,a),0===e?0:e,t)}},r,!0)},5115:(e,t,n)=>{var r=n(2985);r(r.S+r.F,"Object",{assign:n(5345)})},8132:(e,t,n)=>{var r=n(2985);r(r.S,"Object",{create:n(2503)})},7470:(e,t,n)=>{var r=n(2985);r(r.S+r.F*!n(7057),"Object",{defineProperties:n(5588)})},8388:(e,t,n)=>{var r=n(2985);r(r.S+r.F*!n(7057),"Object",{defineProperty:n(9275).f})},9375:(e,t,n)=>{var r=n(5286),i=n(4728).onFreeze;n(3160)("freeze",(function(e){return function(t){return e&&r(t)?e(i(t)):t}}))},4882:(e,t,n)=>{var r=n(2110),i=n(8693).f;n(3160)("getOwnPropertyDescriptor",(function(){return function(e,t){return i(r(e),t)}}))},9622:(e,t,n)=>{n(3160)("getOwnPropertyNames",(function(){return n(9327).f}))},1520:(e,t,n)=>{var r=n(508),i=n(468);n(3160)("getPrototypeOf",(function(){return function(e){return i(r(e))}}))},9892:(e,t,n)=>{var r=n(5286);n(3160)("isExtensible",(function(e){return function(t){return!!r(t)&&(!e||e(t))}}))},4157:(e,t,n)=>{var r=n(5286);n(3160)("isFrozen",(function(e){return function(t){return!r(t)||!!e&&e(t)}}))},5095:(e,t,n)=>{var r=n(5286);n(3160)("isSealed",(function(e){return function(t){return!r(t)||!!e&&e(t)}}))},9176:(e,t,n)=>{var r=n(2985);r(r.S,"Object",{is:n(7195)})},7476:(e,t,n)=>{var r=n(508),i=n(7184);n(3160)("keys",(function(){return function(e){return i(r(e))}}))},4672:(e,t,n)=>{var r=n(5286),i=n(4728).onFreeze;n(3160)("preventExtensions",(function(e){return function(t){return e&&r(t)?e(i(t)):t}}))},3533:(e,t,n)=>{var r=n(5286),i=n(4728).onFreeze;n(3160)("seal",(function(e){return function(t){return e&&r(t)?e(i(t)):t}}))},8838:(e,t,n)=>{var r=n(2985);r(r.S,"Object",{setPrototypeOf:n(7375).set})},6253:(e,t,n)=>{"use strict";var r=n(1488),i={};i[n(6314)("toStringTag")]="z",i+""!="[object z]"&&n(7234)(Object.prototype,"toString",(function(){return"[object "+r(this)+"]"}),!0)},851:(e,t,n)=>{"use strict";var r,i,a,s,o=n(4461),u=n(3816),c=n(741),l=n(1488),d=n(2985),h=n(5286),p=n(4963),f=n(3328),m=n(3531),g=n(8364),v=n(4193).set,y=n(4351)(),b=n(3499),_=n(188),T=n(575),w=n(94),S="Promise",C=u.TypeError,E=u.process,k=E&&E.versions,O=k&&k.v8||"",x=u.Promise,A="process"==l(E),P=function(){},I=i=b.f,L=!!function(){try{var e=x.resolve(1),t=(e.constructor={})[n(6314)("species")]=function(e){e(P,P)};return(A||"function"==typeof PromiseRejectionEvent)&&e.then(P)instanceof t&&0!==O.indexOf("6.6")&&-1===T.indexOf("Chrome/66")}catch(e){}}(),M=function(e){var t;return!(!h(e)||"function"!=typeof(t=e.then))&&t},D=function(e,t){if(!e._n){e._n=!0;var n=e._c;y((function(){for(var r=e._v,i=1==e._s,a=0,s=function(t){var n,a,s,o=i?t.ok:t.fail,u=t.resolve,c=t.reject,l=t.domain;try{o?(i||(2==e._h&&j(e),e._h=1),!0===o?n=r:(l&&l.enter(),n=o(r),l&&(l.exit(),s=!0)),n===t.promise?c(C("Promise-chain cycle")):(a=M(n))?a.call(n,u,c):u(n)):c(r)}catch(e){l&&!s&&l.exit(),c(e)}};n.length>a;)s(n[a++]);e._c=[],e._n=!1,t&&!e._h&&R(e)}))}},R=function(e){v.call(u,(function(){var t,n,r,i=e._v,a=N(e);if(a&&(t=_((function(){A?E.emit("unhandledRejection",i,e):(n=u.onunhandledrejection)?n({promise:e,reason:i}):(r=u.console)&&r.error&&r.error("Unhandled promise rejection",i)})),e._h=A||N(e)?2:1),e._a=void 0,a&&t.e)throw t.v}))},N=function(e){return 1!==e._h&&0===(e._a||e._c).length},j=function(e){v.call(u,(function(){var t;A?E.emit("rejectionHandled",e):(t=u.onrejectionhandled)&&t({promise:e,reason:e._v})}))},U=function(e){var t=this;t._d||(t._d=!0,(t=t._w||t)._v=e,t._s=2,t._a||(t._a=t._c.slice()),D(t,!0))},F=function(e){var t,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===e)throw C("Promise can't be resolved itself");(t=M(e))?y((function(){var r={_w:n,_d:!1};try{t.call(e,c(F,r,1),c(U,r,1))}catch(e){U.call(r,e)}})):(n._v=e,n._s=1,D(n,!1))}catch(e){U.call({_w:n,_d:!1},e)}}};L||(x=function(e){f(this,x,S,"_h"),p(e),r.call(this);try{e(c(F,this,1),c(U,this,1))}catch(e){U.call(this,e)}},(r=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=n(4408)(x.prototype,{then:function(e,t){var n=I(g(this,x));return n.ok="function"!=typeof e||e,n.fail="function"==typeof t&&t,n.domain=A?E.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&D(this,!1),n.promise},catch:function(e){return this.then(void 0,e)}}),a=function(){var e=new r;this.promise=e,this.resolve=c(F,e,1),this.reject=c(U,e,1)},b.f=I=function(e){return e===x||e===s?new a(e):i(e)}),d(d.G+d.W+d.F*!L,{Promise:x}),n(2943)(x,S),n(2974)(S),s=n(5645).Promise,d(d.S+d.F*!L,S,{reject:function(e){var t=I(this);return(0,t.reject)(e),t.promise}}),d(d.S+d.F*(o||!L),S,{resolve:function(e){return w(o&&this===s?x:this,e)}}),d(d.S+d.F*!(L&&n(7462)((function(e){x.all(e).catch(P)}))),S,{all:function(e){var t=this,n=I(t),r=n.resolve,i=n.reject,a=_((function(){var n=[],a=0,s=1;m(e,!1,(function(e){var o=a++,u=!1;n.push(void 0),s++,t.resolve(e).then((function(e){u||(u=!0,n[o]=e,--s||r(n))}),i)})),--s||r(n)}));return a.e&&i(a.v),n.promise},race:function(e){var t=this,n=I(t),r=n.reject,i=_((function(){m(e,!1,(function(e){t.resolve(e).then(n.resolve,r)}))}));return i.e&&r(i.v),n.promise}})},8184:(e,t,n)=>{"use strict";var r=n(9824),i=n(1616);e.exports=n(5795)("Set",(function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}}),{add:function(e){return r.def(i(this,"Set"),e=0===e?0:e,e)}},r)},9115:(e,t,n)=>{"use strict";var r=n(4496)(!0);n(2923)(String,"String",(function(e){this._t=String(e),this._i=0}),(function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=r(t,n),this._i+=e.length,{value:e,done:!1})}))},5767:(e,t,n)=>{"use strict";var r=n(3816),i=n(9181),a=n(7057),s=n(2985),o=n(7234),u=n(4728).KEY,c=n(4253),l=n(3825),d=n(2943),h=n(3953),p=n(6314),f=n(8787),m=n(6074),g=n(5541),v=n(4302),y=n(7007),b=n(5286),_=n(508),T=n(2110),w=n(1689),S=n(681),C=n(2503),E=n(9327),k=n(8693),O=n(4548),x=n(9275),A=n(7184),P=k.f,I=x.f,L=E.f,M=r.Symbol,D=r.JSON,R=D&&D.stringify,N=p("_hidden"),j=p("toPrimitive"),U={}.propertyIsEnumerable,F=l("symbol-registry"),$=l("symbols"),B=l("op-symbols"),V=Object.prototype,q="function"==typeof M&&!!O.f,H=r.QObject,W=!H||!H.prototype||!H.prototype.findChild,z=a&&c((function(){return 7!=C(I({},"a",{get:function(){return I(this,"a",{value:7}).a}})).a}))?function(e,t,n){var r=P(V,t);r&&delete V[t],I(e,t,n),r&&e!==V&&I(V,t,r)}:I,G=function(e){var t=$[e]=C(M.prototype);return t._k=e,t},K=q&&"symbol"==typeof M.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof M},X=function(e,t,n){return e===V&&X(B,t,n),y(e),t=w(t,!0),y(n),i($,t)?(n.enumerable?(i(e,N)&&e[N][t]&&(e[N][t]=!1),n=C(n,{enumerable:S(0,!1)})):(i(e,N)||I(e,N,S(1,{})),e[N][t]=!0),z(e,t,n)):I(e,t,n)},Y=function(e,t){y(e);for(var n,r=g(t=T(t)),i=0,a=r.length;a>i;)X(e,n=r[i++],t[n]);return e},Q=function(e){var t=U.call(this,e=w(e,!0));return!(this===V&&i($,e)&&!i(B,e))&&(!(t||!i(this,e)||!i($,e)||i(this,N)&&this[N][e])||t)},J=function(e,t){if(e=T(e),t=w(t,!0),e!==V||!i($,t)||i(B,t)){var n=P(e,t);return!n||!i($,t)||i(e,N)&&e[N][t]||(n.enumerable=!0),n}},Z=function(e){for(var t,n=L(T(e)),r=[],a=0;n.length>a;)i($,t=n[a++])||t==N||t==u||r.push(t);return r},ee=function(e){for(var t,n=e===V,r=L(n?B:T(e)),a=[],s=0;r.length>s;)!i($,t=r[s++])||n&&!i(V,t)||a.push($[t]);return a};q||(o((M=function(){if(this instanceof M)throw TypeError("Symbol is not a constructor!");var e=h(arguments.length>0?arguments[0]:void 0),t=function(n){this===V&&t.call(B,n),i(this,N)&&i(this[N],e)&&(this[N][e]=!1),z(this,e,S(1,n))};return a&&W&&z(V,e,{configurable:!0,set:t}),G(e)}).prototype,"toString",(function(){return this._k})),k.f=J,x.f=X,n(616).f=E.f=Z,n(4682).f=Q,O.f=ee,a&&!n(4461)&&o(V,"propertyIsEnumerable",Q,!0),f.f=function(e){return G(p(e))}),s(s.G+s.W+s.F*!q,{Symbol:M});for(var te="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),ne=0;te.length>ne;)p(te[ne++]);for(var re=A(p.store),ie=0;re.length>ie;)m(re[ie++]);s(s.S+s.F*!q,"Symbol",{for:function(e){return i(F,e+="")?F[e]:F[e]=M(e)},keyFor:function(e){if(!K(e))throw TypeError(e+" is not a symbol!");for(var t in F)if(F[t]===e)return t},useSetter:function(){W=!0},useSimple:function(){W=!1}}),s(s.S+s.F*!q,"Object",{create:function(e,t){return void 0===t?C(e):Y(C(e),t)},defineProperty:X,defineProperties:Y,getOwnPropertyDescriptor:J,getOwnPropertyNames:Z,getOwnPropertySymbols:ee});var ae=c((function(){O.f(1)}));s(s.S+s.F*ae,"Object",{getOwnPropertySymbols:function(e){return O.f(_(e))}}),D&&s(s.S+s.F*(!q||c((function(){var e=M();return"[null]"!=R([e])||"{}"!=R({a:e})||"{}"!=R(Object(e))}))),"JSON",{stringify:function(e){for(var t,n,r=[e],i=1;arguments.length>i;)r.push(arguments[i++]);if(n=t=r[1],(b(t)||void 0!==e)&&!K(e))return v(t)||(t=function(e,t){if("function"==typeof n&&(t=n.call(this,e,t)),!K(t))return t}),r[1]=t,R.apply(D,r)}}),M.prototype[j]||n(7728)(M.prototype,j,M.prototype.valueOf),d(M,"Symbol"),d(Math,"Math",!0),d(r.JSON,"JSON",!0)},1181:(e,t,n)=>{for(var r=n(6997),i=n(7184),a=n(7234),s=n(3816),o=n(7728),u=n(2803),c=n(6314),l=c("iterator"),d=c("toStringTag"),h=u.Array,p={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},f=i(p),m=0;m<f.length;m++){var g,v=f[m],y=p[v],b=s[v],_=b&&b.prototype;if(_&&(_[l]||o(_,l,h),_[d]||o(_,d,v),u[v]=h,y))for(g in r)_[g]||a(_,g,r[g],!0)}},9144:(e,t,n)=>{var r,i="undefined"!=typeof window?window:{},a=n(5893);"undefined"!=typeof document?r=document:(r=i["__GLOBAL_DOCUMENT_CACHE@4"])||(r=i["__GLOBAL_DOCUMENT_CACHE@4"]=a),e.exports=r},8908:e=>{var t;t="undefined"!=typeof window?window:"undefined"!=typeof self?self:{},e.exports=t},5220:e=>{"use strict";var t=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],n=function(e,t){var n=e[t+6]<<21|e[t+7]<<14|e[t+8]<<7|e[t+9];return n=n>=0?n:0,(16&e[t+5])>>4?n+20:n+10},r=function(e,t){return e.length-t<10||e[t]!=="I".charCodeAt(0)||e[t+1]!=="D".charCodeAt(0)||e[t+2]!=="3".charCodeAt(0)?t:(t+=n(e,t),r(e,t))},i=function(e){return e[0]<<21|e[1]<<14|e[2]<<7|e[3]};e.exports={isLikelyAacData:function(e){var t=r(e,0);return e.length>=t+2&&255==(255&e[t])&&240==(240&e[t+1])&&16==(22&e[t+1])},parseId3TagSize:n,parseAdtsSize:function(e,t){var n=(224&e[t+5])>>5,r=e[t+4]<<3;return 6144&e[t+3]|r|n},parseType:function(e,t){return e[t]==="I".charCodeAt(0)&&e[t+1]==="D".charCodeAt(0)&&e[t+2]==="3".charCodeAt(0)?"timed-metadata":!0&e[t]&&240==(240&e[t+1])?"audio":null},parseSampleRate:function(e){for(var n=0;n+5<e.length;){if(255===e[n]&&240==(246&e[n+1]))return t[(60&e[n+2])>>>2];n++}return null},parseAacTimestamp:function(e){var t,n,r;t=10,64&e[5]&&(t+=4,t+=i(e.subarray(10,14)));do{if((n=i(e.subarray(t+4,t+8)))<1)return null;if("PRIV"===String.fromCharCode(e[t],e[t+1],e[t+2],e[t+3])){r=e.subarray(t+10,t+n+10);for(var a=0;a<r.byteLength;a++)if(0===r[a]){var s=unescape(function(e,t,n){var r,i="";for(r=t;r<n;r++)i+="%"+("00"+e[r].toString(16)).slice(-2);return i}(r,0,a));if("com.apple.streaming.transportStreamTimestamp"===s){var o=r.subarray(a+1),u=(1&o[3])<<30|o[4]<<22|o[5]<<14|o[6]<<6|o[7]>>>2;return u*=4,u+=3&o[7]}break}}t+=10,t+=n}while(t<e.byteLength);return null}}},4149:(e,t,n)=>{"use strict";var r=n(5215),i=function(e){var t=31&e[1];return t<<=8,t|=e[2]},a=function(e){return!!(64&e[1])},s=function(e){var t=0;return(48&e[3])>>>4>1&&(t+=e[4]+1),t},o=function(e){switch(e){case 5:return"slice_layer_without_partitioning_rbsp_idr";case 6:return"sei_rbsp";case 7:return"seq_parameter_set_rbsp";case 8:return"pic_parameter_set_rbsp";case 9:return"access_unit_delimiter_rbsp";default:return null}};e.exports={parseType:function(e,t){var n=i(e);return 0===n?"pat":n===t?"pmt":t?"pes":null},parsePat:function(e){var t=a(e),n=4+s(e);return t&&(n+=e[n]+1),(31&e[n+10])<<8|e[n+11]},parsePmt:function(e){var t={},n=a(e),r=4+s(e);if(n&&(r+=e[r]+1),1&e[r+5]){var i;i=3+((15&e[r+1])<<8|e[r+2])-4;for(var o=12+((15&e[r+10])<<8|e[r+11]);o<i;){var u=r+o;t[(31&e[u+1])<<8|e[u+2]]=e[u],o+=5+((15&e[u+3])<<8|e[u+4])}return t}},parsePayloadUnitStartIndicator:a,parsePesType:function(e,t){switch(t[i(e)]){case r.H264_STREAM_TYPE:return"video";case r.ADTS_STREAM_TYPE:return"audio";case r.METADATA_STREAM_TYPE:return"timed-metadata";default:return null}},parsePesTime:function(e){if(!a(e))return null;var t=4+s(e);if(t>=e.byteLength)return null;var n,r=null;return 192&(n=e[t+7])&&((r={}).pts=(14&e[t+9])<<27|(255&e[t+10])<<20|(254&e[t+11])<<12|(255&e[t+12])<<5|(254&e[t+13])>>>3,r.pts*=4,r.pts+=(6&e[t+13])>>>1,r.dts=r.pts,64&n&&(r.dts=(14&e[t+14])<<27|(255&e[t+15])<<20|(254&e[t+16])<<12|(255&e[t+17])<<5|(254&e[t+18])>>>3,r.dts*=4,r.dts+=(6&e[t+18])>>>1)),r},videoPacketContainsKeyFrame:function(e){for(var t=4+s(e),n=e.subarray(t),r=0,i=0,a=!1;i<n.byteLength-3;i++)if(1===n[i+2]){r=i+5;break}for(;r<n.byteLength;)switch(n[r]){case 0:if(0!==n[r-1]){r+=2;break}if(0!==n[r-2]){r++;break}i+3!==r-2&&"slice_layer_without_partitioning_rbsp_idr"===o(31&n[i+3])&&(a=!0);do{r++}while(1!==n[r]&&r<n.length);i=r-2,r+=3;break;case 1:if(0!==n[r-1]||0!==n[r-2]){r+=3;break}"slice_layer_without_partitioning_rbsp_idr"===o(31&n[i+3])&&(a=!0),i=r-2,r+=3;break;default:r+=3}return n=n.subarray(i),r-=i,i=0,n&&n.byteLength>3&&"slice_layer_without_partitioning_rbsp_idr"===o(31&n[i+3])&&(a=!0),a}}},5215:e=>{"use strict";e.exports={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21}},817:(e,t,n)=>{"use strict";var r=n(1961),i="shared",a=function(e,t){var n=1;for(e>t&&(n=-1);Math.abs(t-e)>4294967296;)e+=8589934592*n;return e},s=function(e){var t,n;s.prototype.init.call(this),this.type_=e||i,this.push=function(e){this.type_!==i&&e.type!==this.type_||(void 0===n&&(n=e.dts),e.dts=a(e.dts,n),e.pts=a(e.pts,n),t=e.dts,this.trigger("data",e))},this.flush=function(){n=t,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.discontinuity=function(){n=void 0,t=void 0},this.reset=function(){this.discontinuity(),this.trigger("reset")}};s.prototype=new r,e.exports={TimestampRolloverStream:s,handleRollover:a}},7088:(e,t,n)=>{var r=n(1976).toUnsigned,i=n(2),a=function(e,t){var n,s,o,u,c,l=[];if(!t.length)return null;for(n=0;n<e.byteLength;)s=r(e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3]),o=i(e.subarray(n+4,n+8)),u=s>1?n+s:e.byteLength,o===t[0]&&(1===t.length?l.push(e.subarray(n+8,u)):(c=a(e.subarray(n+8,u),t.slice(1))).length&&(l=l.concat(c))),n=u;return l};e.exports=a},2:e=>{e.exports=function(e){var t="";return t+=String.fromCharCode(e[0]),t+=String.fromCharCode(e[1]),t+=String.fromCharCode(e[2]),t+=String.fromCharCode(e[3])}},7661:(e,t,n)=>{"use strict";var r,i,a,s,o,u,c=n(1976).toUnsigned,l=n(1976).toHexString,d=n(7088),h=n(2),p=n(5654),f=n(2459),m=n(3389);r=function(e){return d(e,["moov","trak"]).reduce((function(e,t){var n,r,i,a,s;return(n=d(t,["tkhd"])[0])?(r=n[0],a=c(n[i=0===r?12:20]<<24|n[i+1]<<16|n[i+2]<<8|n[i+3]),(s=d(t,["mdia","mdhd"])[0])?(i=0===(r=s[0])?12:20,e[a]=c(s[i]<<24|s[i+1]<<16|s[i+2]<<8|s[i+3]),e):null):null}),{})},i=function(e,t){var n,r,i;return n=d(t,["moof","traf"]),r=[].concat.apply([],n.map((function(t){return d(t,["tfhd"]).map((function(n){var r,i,a;return r=c(n[4]<<24|n[5]<<16|n[6]<<8|n[7]),i=e[r]||9e4,a=d(t,["tfdt"]).map((function(e){var t,n;return t=e[0],n=c(e[4]<<24|e[5]<<16|e[6]<<8|e[7]),1===t&&(n*=Math.pow(2,32),n+=c(e[8]<<24|e[9]<<16|e[10]<<8|e[11])),n}))[0],(a=a||1/0)/i}))}))),i=Math.min.apply(null,r),isFinite(i)?i:0},a=function(e,t){var n,r=d(t,["moof","traf"]),i=0,a=0;if(r&&r.length){var s=d(r[0],["tfhd"])[0],o=d(r[0],["trun"])[0],u=d(r[0],["tfdt"])[0];if(s)n=p(s).trackId;if(u)i=m(u).baseMediaDecodeTime;if(o){var c=f(o);c.samples&&c.samples.length&&(a=c.samples[0].compositionTimeOffset||0)}}return(i+a)/(e[n]||9e4)},s=function(e){var t=d(e,["moov","trak"]),n=[];return t.forEach((function(e){var t=d(e,["mdia","hdlr"]),r=d(e,["tkhd"]);t.forEach((function(e,t){var i,a,s=h(e.subarray(8,12)),o=r[t];"vide"===s&&(a=0===(i=new DataView(o.buffer,o.byteOffset,o.byteLength)).getUint8(0)?i.getUint32(12):i.getUint32(20),n.push(a))}))})),n},u=function(e){var t=0===e[0]?12:20;return c(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])},o=function(e){var t=d(e,["moov","trak"]),n=[];return t.forEach((function(e){var t,r,i={},a=d(e,["tkhd"])[0];a&&(r=(t=new DataView(a.buffer,a.byteOffset,a.byteLength)).getUint8(0),i.id=0===r?t.getUint32(12):t.getUint32(20));var s=d(e,["mdia","hdlr"])[0];if(s){var o=h(s.subarray(8,12));i.type="vide"===o?"video":"soun"===o?"audio":o}var c=d(e,["mdia","minf","stbl","stsd"])[0];if(c){var p=c.subarray(8);i.codec=h(p.subarray(4,8));var f,m=d(p,[i.codec])[0];m&&(/^[a-z]vc[1-9]$/i.test(i.codec)?(f=m.subarray(78),"avcC"===h(f.subarray(4,8))&&f.length>11?(i.codec+=".",i.codec+=l(f[9]),i.codec+=l(f[10]),i.codec+=l(f[11])):i.codec="avc1.4d400d"):/^mp4[a,v]$/i.test(i.codec)&&(f=m.subarray(28),"esds"===h(f.subarray(4,8))&&f.length>20&&0!==f[19]?(i.codec+="."+l(f[19]),i.codec+="."+l(f[20]>>>2&63).replace(/^0/,"")):i.codec="mp4a.40.2"))}var g=d(e,["mdia","mdhd"])[0];g&&(i.timescale=u(g)),n.push(i)})),n},e.exports={findBox:d,parseType:h,timescale:r,startTime:i,compositionStartTime:a,videoTrackIds:s,tracks:o,getTimescaleFromMediaHeader:u}},4633:e=>{e.exports=function(e){return{isLeading:(12&e[0])>>>2,dependsOn:3&e[0],isDependedOn:(192&e[1])>>>6,hasRedundancy:(48&e[1])>>>4,paddingValue:(14&e[1])>>>1,isNonSyncSample:1&e[1],degradationPriority:e[2]<<8|e[3]}}},4221:e=>{e.exports=function(e){var t,n=new DataView(e.buffer,e.byteOffset,e.byteLength),r={version:e[0],flags:new Uint8Array(e.subarray(1,4)),references:[],referenceId:n.getUint32(4),timescale:n.getUint32(8),earliestPresentationTime:n.getUint32(12),firstOffset:n.getUint32(16)},i=n.getUint16(22);for(t=24;i;t+=12,i--)r.references.push({referenceType:(128&e[t])>>>7,referencedSize:2147483647&n.getUint32(t),subsegmentDuration:n.getUint32(t+4),startsWithSap:!!(128&e[t+8]),sapType:(112&e[t+8])>>>4,sapDeltaTime:268435455&n.getUint32(t+8)});return r}},3389:(e,t,n)=>{var r=n(1976).toUnsigned;e.exports=function(e){var t={version:e[0],flags:new Uint8Array(e.subarray(1,4)),baseMediaDecodeTime:r(e[4]<<24|e[5]<<16|e[6]<<8|e[7])};return 1===t.version&&(t.baseMediaDecodeTime*=Math.pow(2,32),t.baseMediaDecodeTime+=r(e[8]<<24|e[9]<<16|e[10]<<8|e[11])),t}},5654:e=>{e.exports=function(e){var t,n=new DataView(e.buffer,e.byteOffset,e.byteLength),r={version:e[0],flags:new Uint8Array(e.subarray(1,4)),trackId:n.getUint32(4)},i=1&r.flags[2],a=2&r.flags[2],s=8&r.flags[2],o=16&r.flags[2],u=32&r.flags[2],c=65536&r.flags[0],l=131072&r.flags[0];return t=8,i&&(t+=4,r.baseDataOffset=n.getUint32(12),t+=4),a&&(r.sampleDescriptionIndex=n.getUint32(t),t+=4),s&&(r.defaultSampleDuration=n.getUint32(t),t+=4),o&&(r.defaultSampleSize=n.getUint32(t),t+=4),u&&(r.defaultSampleFlags=n.getUint32(t)),c&&(r.durationIsEmpty=!0),!i&&l&&(r.baseDataOffsetIsMoof=!0),r}},2459:(e,t,n)=>{var r=n(4633);e.exports=function(e){var t,n={version:e[0],flags:new Uint8Array(e.subarray(1,4)),samples:[]},i=new DataView(e.buffer,e.byteOffset,e.byteLength),a=1&n.flags[2],s=4&n.flags[2],o=1&n.flags[1],u=2&n.flags[1],c=4&n.flags[1],l=8&n.flags[1],d=i.getUint32(4),h=8;for(a&&(n.dataOffset=i.getInt32(h),h+=4),s&&d&&(t={flags:r(e.subarray(h,h+4))},h+=4,o&&(t.duration=i.getUint32(h),h+=4),u&&(t.size=i.getUint32(h),h+=4),l&&(1===n.version?t.compositionTimeOffset=i.getInt32(h):t.compositionTimeOffset=i.getUint32(h),h+=4),n.samples.push(t),d--);d--;)t={},o&&(t.duration=i.getUint32(h),h+=4),u&&(t.size=i.getUint32(h),h+=4),c&&(t.flags=r(e.subarray(h,h+4)),h+=4),l&&(1===n.version?t.compositionTimeOffset=i.getInt32(h):t.compositionTimeOffset=i.getUint32(h),h+=4),n.samples.push(t);return n}},5547:(e,t,n)=>{"use strict";var r=n(5215),i=n(817).handleRollover,a={};a.ts=n(4149),a.aac=n(5220);var s=n(1489).ONE_SECOND_IN_TS,o=188,u=71,c=function(e,t,n){for(var r,i,s,c,l=0,d=o,h=!1;d<=e.byteLength;)if(e[l]!==u||e[d]!==u&&d!==e.byteLength)l++,d++;else{if(r=e.subarray(l,d),"pes"===a.ts.parseType(r,t.pid))i=a.ts.parsePesType(r,t.table),s=a.ts.parsePayloadUnitStartIndicator(r),"audio"===i&&s&&(c=a.ts.parsePesTime(r))&&(c.type="audio",n.audio.push(c),h=!0);if(h)break;l+=o,d+=o}for(l=(d=e.byteLength)-o,h=!1;l>=0;)if(e[l]!==u||e[d]!==u&&d!==e.byteLength)l--,d--;else{if(r=e.subarray(l,d),"pes"===a.ts.parseType(r,t.pid))i=a.ts.parsePesType(r,t.table),s=a.ts.parsePayloadUnitStartIndicator(r),"audio"===i&&s&&(c=a.ts.parsePesTime(r))&&(c.type="audio",n.audio.push(c),h=!0);if(h)break;l-=o,d-=o}},l=function(e,t,n){for(var r,i,s,c,l,d,h,p=0,f=o,m=!1,g={data:[],size:0};f<e.byteLength;)if(e[p]!==u||e[f]!==u)p++,f++;else{if(r=e.subarray(p,f),"pes"===a.ts.parseType(r,t.pid))if(i=a.ts.parsePesType(r,t.table),s=a.ts.parsePayloadUnitStartIndicator(r),"video"===i&&(s&&!m&&(c=a.ts.parsePesTime(r))&&(c.type="video",n.video.push(c),m=!0),!n.firstKeyFrame)){if(s&&0!==g.size){for(l=new Uint8Array(g.size),d=0;g.data.length;)h=g.data.shift(),l.set(h,d),d+=h.byteLength;if(a.ts.videoPacketContainsKeyFrame(l)){var v=a.ts.parsePesTime(l);v?(n.firstKeyFrame=v,n.firstKeyFrame.type="video"):console.warn("Failed to extract PTS/DTS from PES at first keyframe. This could be an unusual TS segment, or else mux.js did not parse your TS segment correctly. If you know your TS segments do contain PTS/DTS on keyframes please file a bug report! You can try ffprobe to double check for yourself.")}g.size=0}g.data.push(r),g.size+=r.byteLength}if(m&&n.firstKeyFrame)break;p+=o,f+=o}for(p=(f=e.byteLength)-o,m=!1;p>=0;)if(e[p]!==u||e[f]!==u)p--,f--;else{if(r=e.subarray(p,f),"pes"===a.ts.parseType(r,t.pid))i=a.ts.parsePesType(r,t.table),s=a.ts.parsePayloadUnitStartIndicator(r),"video"===i&&s&&(c=a.ts.parsePesTime(r))&&(c.type="video",n.video.push(c),m=!0);if(m)break;p-=o,f-=o}},d=function(e){var t={pid:null,table:null},n={};for(var i in function(e,t){for(var n,r=0,i=o;i<e.byteLength;)if(e[r]!==u||e[i]!==u)r++,i++;else{switch(n=e.subarray(r,i),a.ts.parseType(n,t.pid)){case"pat":t.pid||(t.pid=a.ts.parsePat(n));break;case"pmt":t.table||(t.table=a.ts.parsePmt(n))}if(t.pid&&t.table)return;r+=o,i+=o}}(e,t),t.table){if(t.table.hasOwnProperty(i))switch(t.table[i]){case r.H264_STREAM_TYPE:n.video=[],l(e,t,n),0===n.video.length&&delete n.video;break;case r.ADTS_STREAM_TYPE:n.audio=[],c(e,t,n),0===n.audio.length&&delete n.audio}}return n};e.exports={inspect:function(e,t){var n;return n=a.aac.isLikelyAacData(e)?function(e){for(var t,n=!1,r=0,i=null,o=null,u=0,c=0;e.length-c>=3;){switch(a.aac.parseType(e,c)){case"timed-metadata":if(e.length-c<10){n=!0;break}if((u=a.aac.parseId3TagSize(e,c))>e.length){n=!0;break}null===o&&(t=e.subarray(c,c+u),o=a.aac.parseAacTimestamp(t)),c+=u;break;case"audio":if(e.length-c<7){n=!0;break}if((u=a.aac.parseAdtsSize(e,c))>e.length){n=!0;break}null===i&&(t=e.subarray(c,c+u),i=a.aac.parseSampleRate(t)),r++,c+=u;break;default:c++}if(n)return null}if(null===i||null===o)return null;var l=s/i;return{audio:[{type:"audio",dts:o,pts:o},{type:"audio",dts:o+1024*r*l,pts:o+1024*r*l}]}}(e):d(e),n&&(n.audio||n.video)?(function(e,t){if(e.audio&&e.audio.length){var n=t;void 0===n&&(n=e.audio[0].dts),e.audio.forEach((function(e){e.dts=i(e.dts,n),e.pts=i(e.pts,n),e.dtsTime=e.dts/s,e.ptsTime=e.pts/s}))}if(e.video&&e.video.length){var r=t;if(void 0===r&&(r=e.video[0].dts),e.video.forEach((function(e){e.dts=i(e.dts,r),e.pts=i(e.pts,r),e.dtsTime=e.dts/s,e.ptsTime=e.pts/s})),e.firstKeyFrame){var a=e.firstKeyFrame;a.dts=i(a.dts,r),a.pts=i(a.pts,r),a.dtsTime=a.dts/s,a.ptsTime=a.dts/s}}}(n,t),n):null},parseAudioPes_:c}},1976:e=>{e.exports={toUnsigned:function(e){return e>>>0},toHexString:function(e){return("00"+e.toString(16)).slice(-2)}}},1489:e=>{var t,n,r,i,a,s,o,u=9e4;t=function(e){return e*u},n=function(e,t){return e*t},r=function(e){return e/u},i=function(e,t){return e/t},a=function(e,n){return t(i(e,n))},s=function(e,t){return n(r(e),t)},o=function(e,t,n){return r(n?e:e-t)},e.exports={ONE_SECOND_IN_TS:u,secondsToVideoTs:t,secondsToAudioTs:n,videoTsToSeconds:r,audioTsToSeconds:i,audioTsToVideoTs:a,videoTsToAudioTs:s,metadataTsToSeconds:o}},1961:e=>{"use strict";var t=function(){this.init=function(){var e={};this.on=function(t,n){e[t]||(e[t]=[]),e[t]=e[t].concat(n)},this.off=function(t,n){var r;return!!e[t]&&(r=e[t].indexOf(n),e[t]=e[t].slice(),e[t].splice(r,1),r>-1)},this.trigger=function(t){var n,r,i,a;if(n=e[t])if(2===arguments.length)for(i=n.length,r=0;r<i;++r)n[r].call(this,arguments[1]);else{for(a=[],r=arguments.length,r=1;r<arguments.length;++r)a.push(arguments[r]);for(i=n.length,r=0;r<i;++r)n[r].apply(this,a)}},this.dispose=function(){e={}}}};t.prototype.pipe=function(e){return this.on("data",(function(t){e.push(t)})),this.on("done",(function(t){e.flush(t)})),this.on("partialdone",(function(t){e.partialFlush(t)})),this.on("endedtimeline",(function(t){e.endTimeline(t)})),this.on("reset",(function(t){e.reset(t)})),e},t.prototype.push=function(e){this.trigger("data",e)},t.prototype.flush=function(e){this.trigger("done",e)},t.prototype.partialFlush=function(e){this.trigger("partialdone",e)},t.prototype.endTimeline=function(e){this.trigger("endedtimeline",e)},t.prototype.reset=function(e){this.trigger("reset",e)},e.exports=t},9122:function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function r(){this.constructor=e}e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=n(8314),a=n(7376),s=function(e){function t(t){e.call(this),this._value=t}return r(t,e),Object.defineProperty(t.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),t.prototype._subscribe=function(t){var n=e.prototype._subscribe.call(this,t);return n&&!n.closed&&t.next(this._value),n},t.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new a.ObjectUnsubscribedError;return this._value},t.prototype.next=function(t){e.prototype.next.call(this,this._value=t)},t}(i.Subject);t.BehaviorSubject=s},7056:function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function r(){this.constructor=e}e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=function(e){function t(t,n,r){e.call(this),this.parent=t,this.outerValue=n,this.outerIndex=r,this.index=0}return r(t,e),t.prototype._next=function(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)},t.prototype._error=function(e){this.parent.notifyError(e,this),this.unsubscribe()},t.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},t}(n(5239).Subscriber);t.InnerSubscriber=i},8270:(e,t,n)=>{"use strict";var r=n(5100),i=function(){function e(e,t,n){this.kind=e,this.value=t,this.error=n,this.hasValue="N"===e}return e.prototype.observe=function(e){switch(this.kind){case"N":return e.next&&e.next(this.value);case"E":return e.error&&e.error(this.error);case"C":return e.complete&&e.complete()}},e.prototype.do=function(e,t,n){switch(this.kind){case"N":return e&&e(this.value);case"E":return t&&t(this.error);case"C":return n&&n()}},e.prototype.accept=function(e,t,n){return e&&"function"==typeof e.next?this.observe(e):this.do(e,t,n)},e.prototype.toObservable=function(){switch(this.kind){case"N":return r.Observable.of(this.value);case"E":return r.Observable.throw(this.error);case"C":return r.Observable.empty()}throw new Error("unexpected notification kind value")},e.createNext=function(t){return void 0!==t?new e("N",t):this.undefinedValueNotification},e.createError=function(t){return new e("E",void 0,t)},e.createComplete=function(){return this.completeNotification},e.completeNotification=new e("C"),e.undefinedValueNotification=new e("N",void 0),e}();t.Notification=i},5100:(e,t,n)=>{"use strict";var r=n(7919),i=n(9510),a=n(683),s=function(){function e(e){this._isScalar=!1,e&&(this._subscribe=e)}return e.prototype.lift=function(t){var n=new e;return n.source=this,n.operator=t,n},e.prototype.subscribe=function(e,t,n){var r=this.operator,a=i.toSubscriber(e,t,n);if(r?r.call(a,this.source):a.add(this._trySubscribe(a)),a.syncErrorThrowable&&(a.syncErrorThrowable=!1,a.syncErrorThrown))throw a.syncErrorValue;return a},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){e.syncErrorThrown=!0,e.syncErrorValue=t,e.error(t)}},e.prototype.forEach=function(e,t){var n=this;if(t||(r.root.Rx&&r.root.Rx.config&&r.root.Rx.config.Promise?t=r.root.Rx.config.Promise:r.root.Promise&&(t=r.root.Promise)),!t)throw new Error("no Promise impl found");return new t((function(t,r){var i;i=n.subscribe((function(t){if(i)try{e(t)}catch(e){r(e),i.unsubscribe()}else e(t)}),r,t)}))},e.prototype._subscribe=function(e){return this.source.subscribe(e)},e.prototype[a.observable]=function(){return this},e.create=function(t){return new e(t)},e}();t.Observable=s},2320:(e,t)=>{"use strict";t.empty={closed:!0,next:function(e){},error:function(e){throw e},complete:function(){}}},3147:function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function r(){this.constructor=e}e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=function(e){function t(){e.apply(this,arguments)}return r(t,e),t.prototype.notifyNext=function(e,t,n,r,i){this.destination.next(t)},t.prototype.notifyError=function(e,t){this.destination.error(e)},t.prototype.notifyComplete=function(e){this.destination.complete()},t}(n(5239).Subscriber);t.OuterSubscriber=i},7875:function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function r(){this.constructor=e}e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=n(8314),a=n(9082),s=n(4859),o=n(1073),u=n(7376),c=n(3189),l=function(e){function t(t,n,r){void 0===t&&(t=Number.POSITIVE_INFINITY),void 0===n&&(n=Number.POSITIVE_INFINITY),e.call(this),this.scheduler=r,this._events=[],this._bufferSize=t<1?1:t,this._windowTime=n<1?1:n}return r(t,e),t.prototype.next=function(t){var n=this._getNow();this._events.push(new d(n,t)),this._trimBufferThenGetEvents(),e.prototype.next.call(this,t)},t.prototype._subscribe=function(e){var t,n=this._trimBufferThenGetEvents(),r=this.scheduler;if(this.closed)throw new u.ObjectUnsubscribedError;this.hasError||this.isStopped?t=s.Subscription.EMPTY:(this.observers.push(e),t=new c.SubjectSubscription(this,e)),r&&e.add(e=new o.ObserveOnSubscriber(e,r));for(var i=n.length,a=0;a<i&&!e.closed;a++)e.next(n[a].value);return this.hasError?e.error(this.thrownError):this.isStopped&&e.complete(),t},t.prototype._getNow=function(){return(this.scheduler||a.queue).now()},t.prototype._trimBufferThenGetEvents=function(){for(var e=this._getNow(),t=this._bufferSize,n=this._windowTime,r=this._events,i=r.length,a=0;a<i&&!(e-r[a].time<n);)a++;return i>t&&(a=Math.max(a,i-t)),a>0&&r.splice(0,a),r},t}(i.Subject);t.ReplaySubject=l;var d=function(e,t){this.time=e,this.value=t}},3422:(e,t)=>{"use strict";var n=function(){function e(t,n){void 0===n&&(n=e.now),this.SchedulerAction=t,this.now=n}return e.prototype.schedule=function(e,t,n){return void 0===t&&(t=0),new this.SchedulerAction(this,e).schedule(n,t)},e.now=Date.now?Date.now:function(){return+new Date},e}();t.Scheduler=n},8314:function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function r(){this.constructor=e}e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=n(5100),a=n(5239),s=n(4859),o=n(7376),u=n(3189),c=n(2992),l=function(e){function t(t){e.call(this,t),this.destination=t}return r(t,e),t}(a.Subscriber);t.SubjectSubscriber=l;var d=function(e){function t(){e.call(this),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}return r(t,e),t.prototype[c.rxSubscriber]=function(){return new l(this)},t.prototype.lift=function(e){var t=new h(this,this);return t.operator=e,t},t.prototype.next=function(e){if(this.closed)throw new o.ObjectUnsubscribedError;if(!this.isStopped)for(var t=this.observers,n=t.length,r=t.slice(),i=0;i<n;i++)r[i].next(e)},t.prototype.error=function(e){if(this.closed)throw new o.ObjectUnsubscribedError;this.hasError=!0,this.thrownError=e,this.isStopped=!0;for(var t=this.observers,n=t.length,r=t.slice(),i=0;i<n;i++)r[i].error(e);this.observers.length=0},t.prototype.complete=function(){if(this.closed)throw new o.ObjectUnsubscribedError;this.isStopped=!0;for(var e=this.observers,t=e.length,n=e.slice(),r=0;r<t;r++)n[r].complete();this.observers.length=0},t.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},t.prototype._trySubscribe=function(t){if(this.closed)throw new o.ObjectUnsubscribedError;return e.prototype._trySubscribe.call(this,t)},t.prototype._subscribe=function(e){if(this.closed)throw new o.ObjectUnsubscribedError;return this.hasError?(e.error(this.thrownError),s.Subscription.EMPTY):this.isStopped?(e.complete(),s.Subscription.EMPTY):(this.observers.push(e),new u.SubjectSubscription(this,e))},t.prototype.asObservable=function(){var e=new i.Observable;return e.source=this,e},t.create=function(e,t){return new h(e,t)},t}(i.Observable);t.Subject=d;var h=function(e){function t(t,n){e.call(this),this.destination=t,this.source=n}return r(t,e),t.prototype.next=function(e){var t=this.destination;t&&t.next&&t.next(e)},t.prototype.error=function(e){var t=this.destination;t&&t.error&&this.destination.error(e)},t.prototype.complete=function(){var e=this.destination;e&&e.complete&&this.destination.complete()},t.prototype._subscribe=function(e){return this.source?this.source.subscribe(e):s.Subscription.EMPTY},t}(d);t.AnonymousSubject=h},3189:function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function r(){this.constructor=e}e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=function(e){function t(t,n){e.call(this),this.subject=t,this.subscriber=n,this.closed=!1}return r(t,e),t.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var e=this.subject,t=e.observers;if(this.subject=null,t&&0!==t.length&&!e.isStopped&&!e.closed){var n=t.indexOf(this.subscriber);-1!==n&&t.splice(n,1)}}},t}(n(4859).Subscription);t.SubjectSubscription=i},5239:function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function r(){this.constructor=e}e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=n(1404),a=n(4859),s=n(2320),o=n(2992),u=function(e){function t(n,r,i){switch(e.call(this),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=s.empty;break;case 1:if(!n){this.destination=s.empty;break}if("object"==typeof n){n instanceof t?(this.destination=n,this.destination.add(this)):(this.syncErrorThrowable=!0,this.destination=new c(this,n));break}default:this.syncErrorThrowable=!0,this.destination=new c(this,n,r,i)}}return r(t,e),t.prototype[o.rxSubscriber]=function(){return this},t.create=function(e,n,r){var i=new t(e,n,r);return i.syncErrorThrowable=!1,i},t.prototype.next=function(e){this.isStopped||this._next(e)},t.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this))},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){this.destination.error(e),this.unsubscribe()},t.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},t.prototype._unsubscribeAndRecycle=function(){var e=this._parent,t=this._parents;return this._parent=null,this._parents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parent=e,this._parents=t,this},t}(a.Subscription);t.Subscriber=u;var c=function(e){function t(t,n,r,a){var o;e.call(this),this._parentSubscriber=t;var u=this;i.isFunction(n)?o=n:n&&(o=n.next,r=n.error,a=n.complete,n!==s.empty&&(u=Object.create(n),i.isFunction(u.unsubscribe)&&this.add(u.unsubscribe.bind(u)),u.unsubscribe=this.unsubscribe.bind(this))),this._context=u,this._next=o,this._error=r,this._complete=a}return r(t,e),t.prototype.next=function(e){if(!this.isStopped&&this._next){var t=this._parentSubscriber;t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}},t.prototype.error=function(e){if(!this.isStopped){var t=this._parentSubscriber;if(this._error)t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else{if(!t.syncErrorThrowable)throw this.unsubscribe(),e;t.syncErrorValue=e,t.syncErrorThrown=!0,this.unsubscribe()}}},t.prototype.complete=function(){if(!this.isStopped){var e=this._parentSubscriber;this._complete?e.syncErrorThrowable?(this.__tryOrSetError(e,this._complete),this.unsubscribe()):(this.__tryOrUnsub(this._complete),this.unsubscribe()):this.unsubscribe()}},t.prototype.__tryOrUnsub=function(e,t){try{e.call(this._context,t)}catch(e){throw this.unsubscribe(),e}},t.prototype.__tryOrSetError=function(e,t,n){try{t.call(this._context,n)}catch(t){return e.syncErrorValue=t,e.syncErrorThrown=!0,!0}return!1},t.prototype._unsubscribe=function(){var e=this._parentSubscriber;this._context=null,this._parentSubscriber=null,e.unsubscribe()},t}(u)},4859:(e,t,n)=>{"use strict";var r=n(5936),i=n(7620),a=n(1404),s=n(6447),o=n(4456),u=n(6288),c=function(){function e(e){this.closed=!1,this._parent=null,this._parents=null,this._subscriptions=null,e&&(this._unsubscribe=e)}var t;return e.prototype.unsubscribe=function(){var e,t=!1;if(!this.closed){var n=this,c=n._parent,d=n._parents,h=n._unsubscribe,p=n._subscriptions;this.closed=!0,this._parent=null,this._parents=null,this._subscriptions=null;for(var f=-1,m=d?d.length:0;c;)c.remove(this),c=++f<m&&d[f]||null;if(a.isFunction(h))s.tryCatch(h).call(this)===o.errorObject&&(t=!0,e=e||(o.errorObject.e instanceof u.UnsubscriptionError?l(o.errorObject.e.errors):[o.errorObject.e]));if(r.isArray(p))for(f=-1,m=p.length;++f<m;){var g=p[f];if(i.isObject(g))if(s.tryCatch(g.unsubscribe).call(g)===o.errorObject){t=!0,e=e||[];var v=o.errorObject.e;v instanceof u.UnsubscriptionError?e=e.concat(l(v.errors)):e.push(v)}}if(t)throw new u.UnsubscriptionError(e)}},e.prototype.add=function(t){if(!t||t===e.EMPTY)return e.EMPTY;if(t===this)return this;var n=t;switch(typeof t){case"function":n=new e(t);case"object":if(n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if("function"!=typeof n._addParent){var r=n;(n=new e)._subscriptions=[r]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}return(this._subscriptions||(this._subscriptions=[])).push(n),n._addParent(this),n},e.prototype.remove=function(e){var t=this._subscriptions;if(t){var n=t.indexOf(e);-1!==n&&t.splice(n,1)}},e.prototype._addParent=function(e){var t=this._parent,n=this._parents;t&&t!==e?n?-1===n.indexOf(e)&&n.push(e):this._parents=[e]:this._parent=e},e.EMPTY=((t=new e).closed=!0,t),e}();function l(e){return e.reduce((function(e,t){return e.concat(t instanceof u.UnsubscriptionError?t.errors:t)}),[])}t.Subscription=c},2761:(e,t,n)=>{"use strict";var r=n(5100),i=n(1071);r.Observable.combineLatest=i.combineLatest},3810:(e,t,n)=>{"use strict";var r=n(5100),i=n(5167);r.Observable.concat=i.concat},7492:(e,t,n)=>{"use strict";var r=n(5100),i=n(6256);r.Observable.empty=i.empty},4115:(e,t,n)=>{"use strict";var r=n(5100),i=n(7038);r.Observable.from=i.from},496:(e,t,n)=>{"use strict";var r=n(5100),i=n(9126);r.Observable.fromEvent=i.fromEvent},3705:(e,t,n)=>{"use strict";var r=n(5100),i=n(9535);r.Observable.fromEventPattern=i.fromEventPattern},6651:(e,t,n)=>{"use strict";var r=n(5100),i=n(8808);r.Observable.fromPromise=i.fromPromise},6514:(e,t,n)=>{"use strict";var r=n(5100),i=n(1775);r.Observable.interval=i.interval},757:(e,t,n)=>{"use strict";var r=n(5100),i=n(3943);r.Observable.merge=i.merge},4005:(e,t,n)=>{"use strict";var r=n(5100),i=n(4403);r.Observable.never=i.never},8713:(e,t,n)=>{"use strict";var r=n(5100),i=n(9325);r.Observable.of=i.of},8678:(e,t,n)=>{"use strict";var r=n(5100),i=n(1208);r.Observable.race=i.raceStatic},7049:(e,t,n)=>{"use strict";var r=n(5100),i=n(1344);r.Observable.throw=i._throw},3538:(e,t,n)=>{"use strict";var r=n(5100),i=n(4903);r.Observable.timer=i.timer},7701:(e,t,n)=>{"use strict";var r=n(5100),i=n(5545);r.Observable.zip=i.zip},242:(e,t,n)=>{"use strict";var r=n(5100),i=n(4402);r.Observable.prototype.buffer=i.buffer},2433:(e,t,n)=>{"use strict";var r=n(5100),i=n(4824);r.Observable.prototype.catch=i._catch,r.Observable.prototype._catch=i._catch},1354:(e,t,n)=>{"use strict";var r=n(5100),i=n(3339);r.Observable.prototype.combineLatest=i.combineLatest},9794:(e,t,n)=>{"use strict";var r=n(5100),i=n(8311);r.Observable.prototype.concat=i.concat},2743:(e,t,n)=>{"use strict";var r=n(5100),i=n(6358);r.Observable.prototype.delay=i.delay},2276:(e,t,n)=>{"use strict";var r=n(5100),i=n(2339);r.Observable.prototype.distinct=i.distinct},1639:(e,t,n)=>{"use strict";var r=n(5100),i=n(5275);r.Observable.prototype.distinctUntilChanged=i.distinctUntilChanged},6165:(e,t,n)=>{"use strict";var r=n(5100),i=n(1490);r.Observable.prototype.do=i._do,r.Observable.prototype._do=i._do},7775:(e,t,n)=>{"use strict";var r=n(5100),i=n(2044);r.Observable.prototype.filter=i.filter},5285:(e,t,n)=>{"use strict";var r=n(5100),i=n(8616);r.Observable.prototype.first=i.first},5251:(e,t,n)=>{"use strict";var r=n(5100),i=n(7774);r.Observable.prototype.let=i.letProto,r.Observable.prototype.letBind=i.letProto},6771:(e,t,n)=>{"use strict";var r=n(5100),i=n(9987);r.Observable.prototype.map=i.map},6261:(e,t,n)=>{"use strict";var r=n(5100),i=n(1727);r.Observable.prototype.mapTo=i.mapTo},7537:(e,t,n)=>{"use strict";var r=n(5100),i=n(4039);r.Observable.prototype.merge=i.merge},8788:(e,t,n)=>{"use strict";var r=n(5100),i=n(493);r.Observable.prototype.mergeMap=i.mergeMap,r.Observable.prototype.flatMap=i.mergeMap},3449:(e,t,n)=>{"use strict";var r=n(5100),i=n(5760);r.Observable.prototype.flatMapTo=i.mergeMapTo,r.Observable.prototype.mergeMapTo=i.mergeMapTo},6593:(e,t,n)=>{"use strict";var r=n(5100),i=n(6064);r.Observable.prototype.mergeScan=i.mergeScan},8321:(e,t,n)=>{"use strict";var r=n(5100),i=n(1786);r.Observable.prototype.pairwise=i.pairwise},60:(e,t,n)=>{"use strict";var r=n(5100),i=n(1686);r.Observable.prototype.partition=i.partition},1082:(e,t,n)=>{"use strict";var r=n(5100),i=n(5490);r.Observable.prototype.pluck=i.pluck},6679:(e,t,n)=>{"use strict";var r=n(5100),i=n(9916);r.Observable.prototype.publish=i.publish},2417:(e,t,n)=>{"use strict";var r=n(5100),i=n(7634);r.Observable.prototype.publishBehavior=i.publishBehavior},6873:(e,t,n)=>{"use strict";var r=n(5100),i=n(8563);r.Observable.prototype.publishReplay=i.publishReplay},3502:(e,t,n)=>{"use strict";var r=n(5100),i=n(7733);r.Observable.prototype.reduce=i.reduce},4507:(e,t,n)=>{"use strict";var r=n(5100),i=n(151);r.Observable.prototype.sampleTime=i.sampleTime},5532:(e,t,n)=>{"use strict";var r=n(5100),i=n(8076);r.Observable.prototype.scan=i.scan},2285:(e,t,n)=>{"use strict";var r=n(5100),i=n(5192);r.Observable.prototype.share=i.share},6095:(e,t,n)=>{"use strict";var r=n(5100),i=n(7232);r.Observable.prototype.skip=i.skip},2821:(e,t,n)=>{"use strict";var r=n(5100),i=n(8225);r.Observable.prototype.skipUntil=i.skipUntil},3187:(e,t,n)=>{"use strict";var r=n(5100),i=n(775);r.Observable.prototype.skipWhile=i.skipWhile},8316:(e,t,n)=>{"use strict";var r=n(5100),i=n(341);r.Observable.prototype.startWith=i.startWith},1544:(e,t,n)=>{"use strict";var r=n(5100),i=n(9318);r.Observable.prototype.switchMap=i.switchMap},7619:(e,t,n)=>{"use strict";var r=n(5100),i=n(9881);r.Observable.prototype.switchMapTo=i.switchMapTo},1498:(e,t,n)=>{"use strict";var r=n(5100),i=n(4545);r.Observable.prototype.take=i.take},8409:(e,t,n)=>{"use strict";var r=n(5100),i=n(1305);r.Observable.prototype.takeUntil=i.takeUntil},600:(e,t,n)=>{"use strict";var r=n(5100),i=n(4686);r.Observable.prototype.takeWhile=i.takeWhile},9739:(e,t,n)=>{"use strict";var r=n(5100),i=n(2508);r.Observable.prototype.throttleTime=i.throttleTime},279:(e,t,n)=>{"use strict";var r=n(5100),i=n(9090);r.Observable.prototype.withLatestFrom=i.withLatestFrom},8391:(e,t,n)=>{"use strict";var r=n(5100),i=n(8655);r.Observable.prototype.zip=i.zipProto},1235:function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function r(){this.constructor=e}e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=n(5100),a=n(4819),s=n(9735),o=function(e){function t(t,n){e.call(this),this.arrayLike=t,this.scheduler=n,n||1!==t.length||(this._isScalar=!0,this.value=t[0])}return r(t,e),t.create=function(e,n){var r=e.length;return 0===r?new s.EmptyObservable:1===r?new a.ScalarObservable(e[0],n):new t(e,n)},t.dispatch=function(e){var t=e.arrayLike,n=e.index,r=e.length,i=e.subscriber;i.closed||(n>=r?i.complete():(i.next(t[n]),e.index=n+1,this.schedule(e)))},t.prototype._subscribe=function(e){var n=this.arrayLike,r=this.scheduler,i=n.length;if(r)return r.schedule(t.dispatch,0,{arrayLike:n,index:0,length:i,subscriber:e});for(var a=0;a<i&&!e.closed;a++)e.next(n[a]);e.complete()},t}(i.Observable);t.ArrayLikeObservable=o},3418:function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function r(){this.constructor=e}e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=n(5100),a=n(4819),s=n(9735),o=n(93),u=function(e){function t(t,n){e.call(this),this.array=t,this.scheduler=n,n||1!==t.length||(this._isScalar=!0,this.value=t[0])}return r(t,e),t.create=function(e,n){return new t(e,n)},t.of=function(){for(var e=[],n=0;n<arguments.length;n++)e[n-0]=arguments[n];var r=e[e.length-1];o.isScheduler(r)?e.pop():r=null;var i=e.length;return i>1?new t(e,r):1===i?new a.ScalarObservable(e[0],r):new s.EmptyObservable(r)},t.dispatch=function(e){var t=e.array,n=e.index,r=e.count,i=e.subscriber;n>=r?i.complete():(i.next(t[n]),i.closed||(e.index=n+1,this.schedule(e)))},t.prototype._subscribe=function(e){var n=this.array,r=n.length,i=this.scheduler;if(i)return i.schedule(t.dispatch,0,{array:n,index:0,count:r,subscriber:e});for(var a=0;a<r&&!e.closed;a++)e.next(n[a]);e.complete()},t}(i.Observable);t.ArrayObservable=u},8852:function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function r(){this.constructor=e}e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=n(8314),a=n(5100),s=n(5239),o=n(4859),u=function(e){function t(t,n){e.call(this),this.source=t,this.subjectFactory=n,this._refCount=0}return r(t,e),t.prototype._subscribe=function(e){return this.getSubject().subscribe(e)},t.prototype.getSubject=function(){var e=this._subject;return e&&!e.isStopped||(this._subject=this.subjectFactory()),this._subject},t.prototype.connect=function(){var e=this._connection;return e||((e=this._connection=new o.Subscription).add(this.source.subscribe(new c(this.getSubject(),this))),e.closed?(this._connection=null,e=o.Subscription.EMPTY):this._connection=e),e},t.prototype.refCount=function(){return this.lift(new l(this))},t}(a.Observable);t.ConnectableObservable=u,t.connectableObservableDescriptor={operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:u.prototype._subscribe},getSubject:{value:u.prototype.getSubject},connect:{value:u.prototype.connect},refCount:{value:u.prototype.refCount}};var c=function(e){function t(t,n){e.call(this,t),this.connectable=n}return r(t,e),t.prototype._error=function(t){this._unsubscribe(),e.prototype._error.call(this,t)},t.prototype._complete=function(){this._unsubscribe(),e.prototype._complete.call(this)},t.prototype._unsubscribe=function(){var e=this.connectable;if(e){this.connectable=null;var t=e._connection;e._refCount=0,e._subject=null,e._connection=null,t&&t.unsubscribe()}},t}(i.SubjectSubscriber),l=function(){function e(e){this.connectable=e}return e.prototype.call=function(e,t){var n=this.connectable;n._refCount++;var r=new d(e,n),i=t.subscribe(r);return r.closed||(r.connection=n.connect()),i},e}(),d=function(e){function t(t,n){e.call(this,t),this.connectable=n}return r(t,e),t.prototype._unsubscribe=function(){var e=this.connectable;if(e){this.connectable=null;var t=e._refCount;if(t<=0)this.connection=null;else if(e._refCount=t-1,t>1)this.connection=null;else{var n=this.connection,r=e._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}else this.connection=null},t}(s.Subscriber)},9735:function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function r(){this.constructor=e}e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=function(e){function t(t){e.call(this),this.scheduler=t}return r(t,e),t.create=function(e){return new t(e)},t.dispatch=function(e){e.subscriber.complete()},t.prototype._subscribe=function(e){var n=this.scheduler;if(n)return n.schedule(t.dispatch,0,{subscriber:e});e.complete()},t}(n(5100).Observable);t.EmptyObservable=i},4521:function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function r(){this.constructor=e}e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=function(e){function t(t,n){e.call(this),this.error=t,this.scheduler=n}return r(t,e),t.create=function(e,n){return new t(e,n)},t.dispatch=function(e){var t=e.error;e.subscriber.error(t)},t.prototype._subscribe=function(e){var n=this.error,r=this.scheduler;if(r)return r.schedule(t.dispatch,0,{error:n,subscriber:e});e.error(n)},t}(n(5100).Observable);t.ErrorObservable=i},9483:function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function r(){this.constructor=e}e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=n(5100),a=n(6447),s=n(1404),o=n(4456),u=n(4859),c=Object.prototype.toString;var l=function(e){function t(t,n,r,i){e.call(this),this.sourceObj=t,this.eventName=n,this.selector=r,this.options=i}return r(t,e),t.create=function(e,n,r,i){return s.isFunction(r)&&(i=r,r=void 0),new t(e,n,i,r)},t.setupSubscription=function(e,n,r,i,a){var s;if(function(e){return!!e&&"[object NodeList]"===c.call(e)}(e)||function(e){return!!e&&"[object HTMLCollection]"===c.call(e)}(e))for(var o=0,l=e.length;o<l;o++)t.setupSubscription(e[o],n,r,i,a);else if(function(e){return!!e&&"function"==typeof e.addEventListener&&"function"==typeof e.removeEventListener}(e)){var d=e;e.addEventListener(n,r,a),s=function(){return d.removeEventListener(n,r)}}else if(function(e){return!!e&&"function"==typeof e.on&&"function"==typeof e.off}(e)){var h=e;e.on(n,r),s=function(){return h.off(n,r)}}else{if(!function(e){return!!e&&"function"==typeof e.addListener&&"function"==typeof e.removeListener}(e))throw new TypeError("Invalid event target");var p=e;e.addListener(n,r),s=function(){return p.removeListener(n,r)}}i.add(new u.Subscription(s))},t.prototype._subscribe=function(e){var n=this.sourceObj,r=this.eventName,i=this.options,s=this.selector,u=s?function(){for(var t=[],n=0;n<arguments.length;n++)t[n-0]=arguments[n];var r=a.tryCatch(s).apply(void 0,t);r===o.errorObject?e.error(o.errorObject.e):e.next(r)}:function(t){return e.next(t)};t.setupSubscription(n,r,u,e,i)},t}(i.Observable);t.FromEventObservable=l},3083:function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function r(){this.constructor=e}e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=n(1404),a=n(5100),s=n(4859),o=function(e){function t(t,n,r){e.call(this),this.addHandler=t,this.removeHandler=n,this.selector=r}return r(t,e),t.create=function(e,n,r){return new t(e,n,r)},t.prototype._subscribe=function(e){var t=this,n=this.removeHandler,r=this.selector?function(){for(var n=[],r=0;r<arguments.length;r++)n[r-0]=arguments[r];t._callSelector(e,n)}:function(t){e.next(t)},a=this._callAddHandler(r,e);i.isFunction(n)&&e.add(new s.Subscription((function(){n(r,a)})))},t.prototype._callSelector=function(e,t){try{var n=this.selector.apply(this,t);e.next(n)}catch(t){e.error(t)}},t.prototype._callAddHandler=function(e,t){try{return this.addHandler(e)||null}catch(e){t.error(e)}},t}(a.Observable);t.FromEventPatternObservable=o},7305:function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function r(){this.constructor=e}e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=n(5936),a=n(2900),s=n(338),o=n(6694),u=n(8770),c=n(3418),l=n(1235),d=n(5810),h=n(5100),p=n(1073),f=n(683),m=function(e){function t(t,n){e.call(this,null),this.ish=t,this.scheduler=n}return r(t,e),t.create=function(e,n){if(null!=e){if("function"==typeof e[f.observable])return e instanceof h.Observable&&!n?e:new t(e,n);if(i.isArray(e))return new c.ArrayObservable(e,n);if(s.isPromise(e))return new o.PromiseObservable(e,n);if("function"==typeof e[d.iterator]||"string"==typeof e)return new u.IteratorObservable(e,n);if(a.isArrayLike(e))return new l.ArrayLikeObservable(e,n)}throw new TypeError((null!==e&&typeof e||e)+" is not observable")},t.prototype._subscribe=function(e){var t=this.ish,n=this.scheduler;return null==n?t[f.observable]().subscribe(e):t[f.observable]().subscribe(new p.ObserveOnSubscriber(e,n,0))},t}(h.Observable);t.FromObservable=m},1763:function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function r(){this.constructor=e}e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=n(3523),a=n(5100),s=n(8404),o=function(e){function t(t,n){void 0===t&&(t=0),void 0===n&&(n=s.async),e.call(this),this.period=t,this.scheduler=n,(!i.isNumeric(t)||t<0)&&(this.period=0),n&&"function"==typeof n.schedule||(this.scheduler=s.async)}return r(t,e),t.create=function(e,n){return void 0===e&&(e=0),void 0===n&&(n=s.async),new t(e,n)},t.dispatch=function(e){var t=e.index,n=e.subscriber,r=e.period;n.next(t),n.closed||(e.index+=1,this.schedule(e,r))},t.prototype._subscribe=function(e){var n=this.period,r=this.scheduler;e.add(r.schedule(t.dispatch,n,{index:0,subscriber:e,period:n}))},t}(a.Observable);t.IntervalObservable=o},8770:function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function r(){this.constructor=e}e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=n(7919),a=n(5100),s=n(5810),o=function(e){function t(t,n){if(e.call(this),this.scheduler=n,null==t)throw new Error("iterator cannot be null.");this.iterator=function(e){var t=e[s.iterator];if(!t&&"string"==typeof e)return new u(e);if(!t&&void 0!==e.length)return new c(e);if(!t)throw new TypeError("object is not iterable");return e[s.iterator]()}(t)}return r(t,e),t.create=function(e,n){return new t(e,n)},t.dispatch=function(e){var t=e.index,n=e.hasError,r=e.iterator,i=e.subscriber;if(n)i.error(e.error);else{var a=r.next();a.done?i.complete():(i.next(a.value),e.index=t+1,i.closed?"function"==typeof r.return&&r.return():this.schedule(e))}},t.prototype._subscribe=function(e){var n=this.iterator,r=this.scheduler;if(r)return r.schedule(t.dispatch,0,{index:0,iterator:n,subscriber:e});for(;;){var i=n.next();if(i.done){e.complete();break}if(e.next(i.value),e.closed){"function"==typeof n.return&&n.return();break}}},t}(a.Observable);t.IteratorObservable=o;var u=function(){function e(e,t,n){void 0===t&&(t=0),void 0===n&&(n=e.length),this.str=e,this.idx=t,this.len=n}return e.prototype[s.iterator]=function(){return this},e.prototype.next=function(){return this.idx<this.len?{done:!1,value:this.str.charAt(this.idx++)}:{done:!0,value:void 0}},e}(),c=function(){function e(e,t,n){void 0===t&&(t=0),void 0===n&&(n=function(e){var t=+e.length;if(isNaN(t))return 0;if(0===t||(n=t,"number"!=typeof n||!i.root.isFinite(n)))return t;var n;if((t=function(e){var t=+e;if(0===t)return t;if(isNaN(t))return t;return t<0?-1:1}(t)*Math.floor(Math.abs(t)))<=0)return 0;if(t>l)return l;return t}(e)),this.arr=e,this.idx=t,this.len=n}return e.prototype[s.iterator]=function(){return this},e.prototype.next=function(){return this.idx<this.len?{done:!1,value:this.arr[this.idx++]}:{done:!0,value:void 0}},e}();var l=Math.pow(2,53)-1},5659:function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function r(){this.constructor=e}e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=n(5100),a=n(4985),s=function(e){function t(){e.call(this)}return r(t,e),t.create=function(){return new t},t.prototype._subscribe=function(e){a.noop()},t}(i.Observable);t.NeverObservable=s},6694:function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function r(){this.constructor=e}e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=n(7919),a=function(e){function t(t,n){e.call(this),this.promise=t,this.scheduler=n}return r(t,e),t.create=function(e,n){return new t(e,n)},t.prototype._subscribe=function(e){var t=this,n=this.promise,r=this.scheduler;if(null==r)this._isScalar?e.closed||(e.next(this.value),e.complete()):n.then((function(n){t.value=n,t._isScalar=!0,e.closed||(e.next(n),e.complete())}),(function(t){e.closed||e.error(t)})).then(null,(function(e){i.root.setTimeout((function(){throw e}))}));else if(this._isScalar){if(!e.closed)return r.schedule(s,0,{value:this.value,subscriber:e})}else n.then((function(n){t.value=n,t._isScalar=!0,e.closed||e.add(r.schedule(s,0,{value:n,subscriber:e}))}),(function(t){e.closed||e.add(r.schedule(o,0,{err:t,subscriber:e}))})).then(null,(function(e){i.root.setTimeout((function(){throw e}))}))},t}(n(5100).Observable);function s(e){var t=e.value,n=e.subscriber;n.closed||(n.next(t),n.complete())}function o(e){var t=e.err,n=e.subscriber;n.closed||n.error(t)}t.PromiseObservable=a},4819:function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function r(){this.constructor=e}e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=function(e){function t(t,n){e.call(this),this.value=t,this.scheduler=n,this._isScalar=!0,n&&(this._isScalar=!1)}return r(t,e),t.create=function(e,n){return new t(e,n)},t.dispatch=function(e){var t=e.done,n=e.value,r=e.subscriber;t?r.complete():(r.next(n),r.closed||(e.done=!0,this.schedule(e)))},t.prototype._subscribe=function(e){var n=this.value,r=this.scheduler;if(r)return r.schedule(t.dispatch,0,{done:!1,value:n,subscriber:e});e.next(n),e.closed||e.complete()},t}(n(5100).Observable);t.ScalarObservable=i},2453:function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function r(){this.constructor=e}e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=n(3523),a=n(5100),s=n(8404),o=n(93),u=n(1589),c=function(e){function t(t,n,r){void 0===t&&(t=0),e.call(this),this.period=-1,this.dueTime=0,i.isNumeric(n)?this.period=Number(n)<1?1:Number(n):o.isScheduler(n)&&(r=n),o.isScheduler(r)||(r=s.async),this.scheduler=r,this.dueTime=u.isDate(t)?+t-this.scheduler.now():t}return r(t,e),t.create=function(e,n,r){return void 0===e&&(e=0),new t(e,n,r)},t.dispatch=function(e){var t=e.index,n=e.period,r=e.subscriber;if(r.next(t),!r.closed){if(-1===n)return r.complete();e.index=t+1,this.schedule(e,n)}},t.prototype._subscribe=function(e){var n=this,r=n.period,i=n.dueTime;return n.scheduler.schedule(t.dispatch,i,{index:0,period:r,subscriber:e})},t}(a.Observable);t.TimerObservable=c},1071:(e,t,n)=>{"use strict";var r=n(93),i=n(5936),a=n(3418),s=n(3339);t.combineLatest=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];var n=null,o=null;return r.isScheduler(e[e.length-1])&&(o=e.pop()),"function"==typeof e[e.length-1]&&(n=e.pop()),1===e.length&&i.isArray(e[0])&&(e=e[0]),new a.ArrayObservable(e,o).lift(new s.CombineLatestOperator(n))}},5167:(e,t,n)=>{"use strict";var r=n(8311);t.concat=r.concatStatic},6256:(e,t,n)=>{"use strict";var r=n(9735);t.empty=r.EmptyObservable.create},7038:(e,t,n)=>{"use strict";var r=n(7305);t.from=r.FromObservable.create},9126:(e,t,n)=>{"use strict";var r=n(9483);t.fromEvent=r.FromEventObservable.create},9535:(e,t,n)=>{"use strict";var r=n(3083);t.fromEventPattern=r.FromEventPatternObservable.create},8808:(e,t,n)=>{"use strict";var r=n(6694);t.fromPromise=r.PromiseObservable.create},1775:(e,t,n)=>{"use strict";var r=n(1763);t.interval=r.IntervalObservable.create},3943:(e,t,n)=>{"use strict";var r=n(4039);t.merge=r.mergeStatic},4403:(e,t,n)=>{"use strict";var r=n(5659);t.never=r.NeverObservable.create},9325:(e,t,n)=>{"use strict";var r=n(3418);t.of=r.ArrayObservable.of},1344:(e,t,n)=>{"use strict";var r=n(4521);t._throw=r.ErrorObservable.create},4903:(e,t,n)=>{"use strict";var r=n(2453);t.timer=r.TimerObservable.create},5545:(e,t,n)=>{"use strict";var r=n(8655);t.zip=r.zipStatic},4402:function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function r(){this.constructor=e}e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=n(3147),a=n(8794);t.buffer=function(e){return this.lift(new s(e))};var s=function(){function e(e){this.closingNotifier=e}return e.prototype.call=function(e,t){return t.subscribe(new o(e,this.closingNotifier))},e}(),o=function(e){function t(t,n){e.call(this,t),this.buffer=[],this.add(a.subscribeToResult(this,n))}return r(t,e),t.prototype._next=function(e){this.buffer.push(e)},t.prototype.notifyNext=function(e,t,n,r,i){var a=this.buffer;this.buffer=[],this.destination.next(a)},t}(i.OuterSubscriber)},4824:function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function r(){this.constructor=e}e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=n(3147),a=n(8794);t._catch=function(e){var t=new s(e),n=this.lift(t);return t.caught=n};var s=function(){function e(e){this.selector=e}return e.prototype.call=function(e,t){return t.subscribe(new o(e,this.selector,this.caught))},e}(),o=function(e){function t(t,n,r){e.call(this,t),this.selector=n,this.caught=r}return r(t,e),t.prototype.error=function(t){if(!this.isStopped){var n=void 0;try{n=this.selector(t,this.caught)}catch(t){return void e.prototype.error.call(this,t)}this._unsubscribeAndRecycle(),this.add(a.subscribeToResult(this,n))}},t}(i.OuterSubscriber)},3339:function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function r(){this.constructor=e}e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=n(3418),a=n(5936),s=n(3147),o=n(8794),u={};t.combineLatest=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];var n=null;return"function"==typeof e[e.length-1]&&(n=e.pop()),1===e.length&&a.isArray(e[0])&&(e=e[0].slice()),e.unshift(this),this.lift.call(new i.ArrayObservable(e),new c(n))};var c=function(){function e(e){this.project=e}return e.prototype.call=function(e,t){return t.subscribe(new l(e,this.project))},e}();t.CombineLatestOperator=c;var l=function(e){function t(t,n){e.call(this,t),this.project=n,this.active=0,this.values=[],this.observables=[]}return r(t,e),t.prototype._next=function(e){this.values.push(u),this.observables.push(e)},t.prototype._complete=function(){var e=this.observables,t=e.length;if(0===t)this.destination.complete();else{this.active=t,this.toRespond=t;for(var n=0;n<t;n++){var r=e[n];this.add(o.subscribeToResult(this,r,r,n))}}},t.prototype.notifyComplete=function(e){0==(this.active-=1)&&this.destination.complete()},t.prototype.notifyNext=function(e,t,n,r,i){var a=this.values,s=a[n],o=this.toRespond?s===u?--this.toRespond:this.toRespond:0;a[n]=t,0===o&&(this.project?this._tryProject(a):this.destination.next(a.slice()))},t.prototype._tryProject=function(e){var t;try{t=this.project.apply(this,e)}catch(e){return void this.destination.error(e)}this.destination.next(t)},t}(s.OuterSubscriber);t.CombineLatestSubscriber=l},8311:(e,t,n)=>{"use strict";var r=n(5100),i=n(93),a=n(3418),s=n(895);function o(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];var n=null,o=e;return i.isScheduler(o[e.length-1])&&(n=o.pop()),null===n&&1===e.length&&e[0]instanceof r.Observable?e[0]:new a.ArrayObservable(e,n).lift(new s.MergeAllOperator(1))}t.concat=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return this.lift.call(o.apply(void 0,[this].concat(e)))},t.concatStatic=o},6358:function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function r(){this.constructor=e}e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=n(8404),a=n(1589),s=n(5239),o=n(8270);t.delay=function(e,t){void 0===t&&(t=i.async);var n=a.isDate(e)?+e-t.now():Math.abs(e);return this.lift(new u(n,t))};var u=function(){function e(e,t){this.delay=e,this.scheduler=t}return e.prototype.call=function(e,t){return t.subscribe(new c(e,this.delay,this.scheduler))},e}(),c=function(e){function t(t,n,r){e.call(this,t),this.delay=n,this.scheduler=r,this.queue=[],this.active=!1,this.errored=!1}return r(t,e),t.dispatch=function(e){for(var t=e.source,n=t.queue,r=e.scheduler,i=e.destination;n.length>0&&n[0].time-r.now()<=0;)n.shift().notification.observe(i);if(n.length>0){var a=Math.max(0,n[0].time-r.now());this.schedule(e,a)}else t.active=!1},t.prototype._schedule=function(e){this.active=!0,this.add(e.schedule(t.dispatch,this.delay,{source:this,destination:this.destination,scheduler:e}))},t.prototype.scheduleNotification=function(e){if(!0!==this.errored){var t=this.scheduler,n=new l(t.now()+this.delay,e);this.queue.push(n),!1===this.active&&this._schedule(t)}},t.prototype._next=function(e){this.scheduleNotification(o.Notification.createNext(e))},t.prototype._error=function(e){this.errored=!0,this.queue=[],this.destination.error(e)},t.prototype._complete=function(){this.scheduleNotification(o.Notification.createComplete())},t}(s.Subscriber),l=function(e,t){this.time=e,this.notification=t}},2339:function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function r(){this.constructor=e}e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=n(3147),a=n(8794),s=n(6900);t.distinct=function(e,t){return this.lift(new o(e,t))};var o=function(){function e(e,t){this.keySelector=e,this.flushes=t}return e.prototype.call=function(e,t){return t.subscribe(new u(e,this.keySelector,this.flushes))},e}(),u=function(e){function t(t,n,r){e.call(this,t),this.keySelector=n,this.values=new s.Set,r&&this.add(a.subscribeToResult(this,r))}return r(t,e),t.prototype.notifyNext=function(e,t,n,r,i){this.values.clear()},t.prototype.notifyError=function(e,t){this._error(e)},t.prototype._next=function(e){this.keySelector?this._useKeySelector(e):this._finalizeNext(e,e)},t.prototype._useKeySelector=function(e){var t,n=this.destination;try{t=this.keySelector(e)}catch(e){return void n.error(e)}this._finalizeNext(t,e)},t.prototype._finalizeNext=function(e,t){var n=this.values;n.has(e)||(n.add(e),this.destination.next(t))},t}(i.OuterSubscriber);t.DistinctSubscriber=u},5275:function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function r(){this.constructor=e}e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=n(5239),a=n(6447),s=n(4456);t.distinctUntilChanged=function(e,t){return this.lift(new o(e,t))};var o=function(){function e(e,t){this.compare=e,this.keySelector=t}return e.prototype.call=function(e,t){return t.subscribe(new u(e,this.compare,this.keySelector))},e}(),u=function(e){function t(t,n,r){e.call(this,t),this.keySelector=r,this.hasKey=!1,"function"==typeof n&&(this.compare=n)}return r(t,e),t.prototype.compare=function(e,t){return e===t},t.prototype._next=function(e){var t=e;if(this.keySelector&&(t=a.tryCatch(this.keySelector)(e))===s.errorObject)return this.destination.error(s.errorObject.e);var n=!1;if(this.hasKey){if((n=a.tryCatch(this.compare)(this.key,t))===s.errorObject)return this.destination.error(s.errorObject.e)}else this.hasKey=!0;!1===Boolean(n)&&(this.key=t,this.destination.next(e))},t}(i.Subscriber)},1490:function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function r(){this.constructor=e}e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=n(5239);t._do=function(e,t,n){return this.lift(new a(e,t,n))};var a=function(){function e(e,t,n){this.nextOrObserver=e,this.error=t,this.complete=n}return e.prototype.call=function(e,t){return t.subscribe(new s(e,this.nextOrObserver,this.error,this.complete))},e}(),s=function(e){function t(t,n,r,a){e.call(this,t);var s=new i.Subscriber(n,r,a);s.syncErrorThrowable=!0,this.add(s),this.safeSubscriber=s}return r(t,e),t.prototype._next=function(e){var t=this.safeSubscriber;t.next(e),t.syncErrorThrown?this.destination.error(t.syncErrorValue):this.destination.next(e)},t.prototype._error=function(e){var t=this.safeSubscriber;t.error(e),t.syncErrorThrown?this.destination.error(t.syncErrorValue):this.destination.error(e)},t.prototype._complete=function(){var e=this.safeSubscriber;e.complete(),e.syncErrorThrown?this.destination.error(e.syncErrorValue):this.destination.complete()},t}(i.Subscriber)},2044:function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function r(){this.constructor=e}e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=n(5239);t.filter=function(e,t){return this.lift(new a(e,t))};var a=function(){function e(e,t){this.predicate=e,this.thisArg=t}return e.prototype.call=function(e,t){return t.subscribe(new s(e,this.predicate,this.thisArg))},e}(),s=function(e){function t(t,n,r){e.call(this,t),this.predicate=n,this.thisArg=r,this.count=0,this.predicate=n}return r(t,e),t.prototype._next=function(e){var t;try{t=this.predicate.call(this.thisArg,e,this.count++)}catch(e){return void this.destination.error(e)}t&&this.destination.next(e)},t}(i.Subscriber)},8616:function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function r(){this.constructor=e}e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=n(5239),a=n(2107);t.first=function(e,t,n){return this.lift(new s(e,t,n,this))};var s=function(){function e(e,t,n,r){this.predicate=e,this.resultSelector=t,this.defaultValue=n,this.source=r}return e.prototype.call=function(e,t){return t.subscribe(new o(e,this.predicate,this.resultSelector,this.defaultValue,this.source))},e}(),o=function(e){function t(t,n,r,i,a){e.call(this,t),this.predicate=n,this.resultSelector=r,this.defaultValue=i,this.source=a,this.index=0,this.hasCompleted=!1,this._emitted=!1}return r(t,e),t.prototype._next=function(e){var t=this.index++;this.predicate?this._tryPredicate(e,t):this._emit(e,t)},t.prototype._tryPredicate=function(e,t){var n;try{n=this.predicate(e,t,this.source)}catch(e){return void this.destination.error(e)}n&&this._emit(e,t)},t.prototype._emit=function(e,t){this.resultSelector?this._tryResultSelector(e,t):this._emitFinal(e)},t.prototype._tryResultSelector=function(e,t){var n;try{n=this.resultSelector(e,t)}catch(e){return void this.destination.error(e)}this._emitFinal(n)},t.prototype._emitFinal=function(e){var t=this.destination;this._emitted||(this._emitted=!0,t.next(e),t.complete(),this.hasCompleted=!0)},t.prototype._complete=function(){var e=this.destination;this.hasCompleted||void 0===this.defaultValue?this.hasCompleted||e.error(new a.EmptyError):(e.next(this.defaultValue),e.complete())},t}(i.Subscriber)},7774:(e,t)=>{"use strict";t.letProto=function(e){return e(this)}},9987:function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function r(){this.constructor=e}e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=n(5239);t.map=function(e,t){if("function"!=typeof e)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return this.lift(new a(e,t))};var a=function(){function e(e,t){this.project=e,this.thisArg=t}return e.prototype.call=function(e,t){return t.subscribe(new s(e,this.project,this.thisArg))},e}();t.MapOperator=a;var s=function(e){function t(t,n,r){e.call(this,t),this.project=n,this.count=0,this.thisArg=r||this}return r(t,e),t.prototype._next=function(e){var t;try{t=this.project.call(this.thisArg,e,this.count++)}catch(e){return void this.destination.error(e)}this.destination.next(t)},t}(i.Subscriber)},1727:function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function r(){this.constructor=e}e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=n(5239);t.mapTo=function(e){return this.lift(new a(e))};var a=function(){function e(e){this.value=e}return e.prototype.call=function(e,t){return t.subscribe(new s(e,this.value))},e}(),s=function(e){function t(t,n){e.call(this,t),this.value=n}return r(t,e),t.prototype._next=function(e){this.destination.next(this.value)},t}(i.Subscriber)},4039:(e,t,n)=>{"use strict";var r=n(5100),i=n(3418),a=n(895),s=n(93);function o(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];var n=Number.POSITIVE_INFINITY,o=null,u=e[e.length-1];return s.isScheduler(u)?(o=e.pop(),e.length>1&&"number"==typeof e[e.length-1]&&(n=e.pop())):"number"==typeof u&&(n=e.pop()),null===o&&1===e.length&&e[0]instanceof r.Observable?e[0]:new i.ArrayObservable(e,o).lift(new a.MergeAllOperator(n))}t.merge=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return this.lift.call(o.apply(void 0,[this].concat(e)))},t.mergeStatic=o},895:function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function r(){this.constructor=e}e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=n(3147),a=n(8794);t.mergeAll=function(e){return void 0===e&&(e=Number.POSITIVE_INFINITY),this.lift(new s(e))};var s=function(){function e(e){this.concurrent=e}return e.prototype.call=function(e,t){return t.subscribe(new o(e,this.concurrent))},e}();t.MergeAllOperator=s;var o=function(e){function t(t,n){e.call(this,t),this.concurrent=n,this.hasCompleted=!1,this.buffer=[],this.active=0}return r(t,e),t.prototype._next=function(e){this.active<this.concurrent?(this.active++,this.add(a.subscribeToResult(this,e))):this.buffer.push(e)},t.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete()},t.prototype.notifyComplete=function(e){var t=this.buffer;this.remove(e),this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},t}(i.OuterSubscriber);t.MergeAllSubscriber=o},493:function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function r(){this.constructor=e}e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=n(8794),a=n(3147);t.mergeMap=function(e,t,n){return void 0===n&&(n=Number.POSITIVE_INFINITY),"number"==typeof t&&(n=t,t=null),this.lift(new s(e,t,n))};var s=function(){function e(e,t,n){void 0===n&&(n=Number.POSITIVE_INFINITY),this.project=e,this.resultSelector=t,this.concurrent=n}return e.prototype.call=function(e,t){return t.subscribe(new o(e,this.project,this.resultSelector,this.concurrent))},e}();t.MergeMapOperator=s;var o=function(e){function t(t,n,r,i){void 0===i&&(i=Number.POSITIVE_INFINITY),e.call(this,t),this.project=n,this.resultSelector=r,this.concurrent=i,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}return r(t,e),t.prototype._next=function(e){this.active<this.concurrent?this._tryNext(e):this.buffer.push(e)},t.prototype._tryNext=function(e){var t,n=this.index++;try{t=this.project(e,n)}catch(e){return void this.destination.error(e)}this.active++,this._innerSub(t,e,n)},t.prototype._innerSub=function(e,t,n){this.add(i.subscribeToResult(this,e,t,n))},t.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete()},t.prototype.notifyNext=function(e,t,n,r,i){this.resultSelector?this._notifyResultSelector(e,t,n,r):this.destination.next(t)},t.prototype._notifyResultSelector=function(e,t,n,r){var i;try{i=this.resultSelector(e,t,n,r)}catch(e){return void this.destination.error(e)}this.destination.next(i)},t.prototype.notifyComplete=function(e){var t=this.buffer;this.remove(e),this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},t}(a.OuterSubscriber);t.MergeMapSubscriber=o},5760:function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function r(){this.constructor=e}e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=n(3147),a=n(8794);t.mergeMapTo=function(e,t,n){return void 0===n&&(n=Number.POSITIVE_INFINITY),"number"==typeof t&&(n=t,t=null),this.lift(new s(e,t,n))};var s=function(){function e(e,t,n){void 0===n&&(n=Number.POSITIVE_INFINITY),this.ish=e,this.resultSelector=t,this.concurrent=n}return e.prototype.call=function(e,t){return t.subscribe(new o(e,this.ish,this.resultSelector,this.concurrent))},e}();t.MergeMapToOperator=s;var o=function(e){function t(t,n,r,i){void 0===i&&(i=Number.POSITIVE_INFINITY),e.call(this,t),this.ish=n,this.resultSelector=r,this.concurrent=i,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}return r(t,e),t.prototype._next=function(e){if(this.active<this.concurrent){var t=this.resultSelector,n=this.index++,r=this.ish,i=this.destination;this.active++,this._innerSub(r,i,t,e,n)}else this.buffer.push(e)},t.prototype._innerSub=function(e,t,n,r,i){this.add(a.subscribeToResult(this,e,r,i))},t.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete()},t.prototype.notifyNext=function(e,t,n,r,i){var a=this.resultSelector,s=this.destination;a?this.trySelectResult(e,t,n,r):s.next(t)},t.prototype.trySelectResult=function(e,t,n,r){var i,a=this.resultSelector,s=this.destination;try{i=a(e,t,n,r)}catch(e){return void s.error(e)}s.next(i)},t.prototype.notifyError=function(e){this.destination.error(e)},t.prototype.notifyComplete=function(e){var t=this.buffer;this.remove(e),this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},t}(i.OuterSubscriber);t.MergeMapToSubscriber=o},6064:function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function r(){this.constructor=e}e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=n(6447),a=n(4456),s=n(8794),o=n(3147);t.mergeScan=function(e,t,n){return void 0===n&&(n=Number.POSITIVE_INFINITY),this.lift(new u(e,t,n))};var u=function(){function e(e,t,n){this.accumulator=e,this.seed=t,this.concurrent=n}return e.prototype.call=function(e,t){return t.subscribe(new c(e,this.accumulator,this.seed,this.concurrent))},e}();t.MergeScanOperator=u;var c=function(e){function t(t,n,r,i){e.call(this,t),this.accumulator=n,this.acc=r,this.concurrent=i,this.hasValue=!1,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}return r(t,e),t.prototype._next=function(e){if(this.active<this.concurrent){var t=this.index++,n=i.tryCatch(this.accumulator)(this.acc,e),r=this.destination;n===a.errorObject?r.error(a.errorObject.e):(this.active++,this._innerSub(n,e,t))}else this.buffer.push(e)},t.prototype._innerSub=function(e,t,n){this.add(s.subscribeToResult(this,e,t,n))},t.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&(!1===this.hasValue&&this.destination.next(this.acc),this.destination.complete())},t.prototype.notifyNext=function(e,t,n,r,i){var a=this.destination;this.acc=t,this.hasValue=!0,a.next(t)},t.prototype.notifyComplete=function(e){var t=this.buffer;this.remove(e),this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&(!1===this.hasValue&&this.destination.next(this.acc),this.destination.complete())},t}(o.OuterSubscriber);t.MergeScanSubscriber=c},900:(e,t,n)=>{"use strict";var r=n(8852);t.multicast=function(e,t){var n;if(n="function"==typeof e?e:function(){return e},"function"==typeof t)return this.lift(new i(n,t));var a=Object.create(this,r.connectableObservableDescriptor);return a.source=this,a.subjectFactory=n,a};var i=function(){function e(e,t){this.subjectFactory=e,this.selector=t}return e.prototype.call=function(e,t){var n=this.selector,r=this.subjectFactory(),i=n(r).subscribe(e);return i.add(t.subscribe(r)),i},e}();t.MulticastOperator=i},1073:function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function r(){this.constructor=e}e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=n(5239),a=n(8270);t.observeOn=function(e,t){return void 0===t&&(t=0),this.lift(new s(e,t))};var s=function(){function e(e,t){void 0===t&&(t=0),this.scheduler=e,this.delay=t}return e.prototype.call=function(e,t){return t.subscribe(new o(e,this.scheduler,this.delay))},e}();t.ObserveOnOperator=s;var o=function(e){function t(t,n,r){void 0===r&&(r=0),e.call(this,t),this.scheduler=n,this.delay=r}return r(t,e),t.dispatch=function(e){var t=e.notification,n=e.destination;t.observe(n),this.unsubscribe()},t.prototype.scheduleMessage=function(e){this.add(this.scheduler.schedule(t.dispatch,this.delay,new u(e,this.destination)))},t.prototype._next=function(e){this.scheduleMessage(a.Notification.createNext(e))},t.prototype._error=function(e){this.scheduleMessage(a.Notification.createError(e))},t.prototype._complete=function(){this.scheduleMessage(a.Notification.createComplete())},t}(i.Subscriber);t.ObserveOnSubscriber=o;var u=function(e,t){this.notification=e,this.destination=t};t.ObserveOnMessage=u},1786:function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function r(){this.constructor=e}e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=n(5239);t.pairwise=function(){return this.lift(new a)};var a=function(){function e(){}return e.prototype.call=function(e,t){return t.subscribe(new s(e))},e}(),s=function(e){function t(t){e.call(this,t),this.hasPrev=!1}return r(t,e),t.prototype._next=function(e){this.hasPrev?this.destination.next([this.prev,e]):this.hasPrev=!0,this.prev=e},t}(i.Subscriber)},1686:(e,t,n)=>{"use strict";var r=n(1088),i=n(2044);t.partition=function(e,t){return[i.filter.call(this,e,t),i.filter.call(this,r.not(e,t))]}},5490:(e,t,n)=>{"use strict";var r=n(9987);function i(e,t){return function(n){for(var r=n,i=0;i<t;i++){var a=r[e[i]];if(void 0===a)return;r=a}return r}}t.pluck=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];var n=e.length;if(0===n)throw new Error("list of properties cannot be empty.");return r.map.call(this,i(e,n))}},9916:(e,t,n)=>{"use strict";var r=n(8314),i=n(900);t.publish=function(e){return e?i.multicast.call(this,(function(){return new r.Subject}),e):i.multicast.call(this,new r.Subject)}},7634:(e,t,n)=>{"use strict";var r=n(9122),i=n(900);t.publishBehavior=function(e){return i.multicast.call(this,new r.BehaviorSubject(e))}},8563:(e,t,n)=>{"use strict";var r=n(7875),i=n(900);t.publishReplay=function(e,t,n){return void 0===e&&(e=Number.POSITIVE_INFINITY),void 0===t&&(t=Number.POSITIVE_INFINITY),i.multicast.call(this,new r.ReplaySubject(e,t,n))}},1208:function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function r(){this.constructor=e}e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=n(5936),a=n(3418),s=n(3147),o=n(8794);function u(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];if(1===e.length){if(!i.isArray(e[0]))return e[0];e=e[0]}return new a.ArrayObservable(e).lift(new c)}t.race=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return 1===e.length&&i.isArray(e[0])&&(e=e[0]),this.lift.call(u.apply(void 0,[this].concat(e)))},t.raceStatic=u;var c=function(){function e(){}return e.prototype.call=function(e,t){return t.subscribe(new l(e))},e}();t.RaceOperator=c;var l=function(e){function t(t){e.call(this,t),this.hasFirst=!1,this.observables=[],this.subscriptions=[]}return r(t,e),t.prototype._next=function(e){this.observables.push(e)},t.prototype._complete=function(){var e=this.observables,t=e.length;if(0===t)this.destination.complete();else{for(var n=0;n<t&&!this.hasFirst;n++){var r=e[n],i=o.subscribeToResult(this,r,r,n);this.subscriptions&&this.subscriptions.push(i),this.add(i)}this.observables=null}},t.prototype.notifyNext=function(e,t,n,r,i){if(!this.hasFirst){this.hasFirst=!0;for(var a=0;a<this.subscriptions.length;a++)if(a!==n){var s=this.subscriptions[a];s.unsubscribe(),this.remove(s)}this.subscriptions=null}this.destination.next(t)},t}(s.OuterSubscriber);t.RaceSubscriber=l},7733:function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function r(){this.constructor=e}e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=n(5239);t.reduce=function(e,t){var n=!1;return arguments.length>=2&&(n=!0),this.lift(new a(e,t,n))};var a=function(){function e(e,t,n){void 0===n&&(n=!1),this.accumulator=e,this.seed=t,this.hasSeed=n}return e.prototype.call=function(e,t){return t.subscribe(new s(e,this.accumulator,this.seed,this.hasSeed))},e}();t.ReduceOperator=a;var s=function(e){function t(t,n,r,i){e.call(this,t),this.accumulator=n,this.hasSeed=i,this.index=0,this.hasValue=!1,this.acc=r,this.hasSeed||this.index++}return r(t,e),t.prototype._next=function(e){this.hasValue||(this.hasValue=this.hasSeed)?this._tryReduce(e):(this.acc=e,this.hasValue=!0)},t.prototype._tryReduce=function(e){var t;try{t=this.accumulator(this.acc,e,this.index++)}catch(e){return void this.destination.error(e)}this.acc=t},t.prototype._complete=function(){(this.hasValue||this.hasSeed)&&this.destination.next(this.acc),this.destination.complete()},t}(i.Subscriber);t.ReduceSubscriber=s},151:function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function r(){this.constructor=e}e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=n(5239),a=n(8404);t.sampleTime=function(e,t){return void 0===t&&(t=a.async),this.lift(new s(e,t))};var s=function(){function e(e,t){this.period=e,this.scheduler=t}return e.prototype.call=function(e,t){return t.subscribe(new o(e,this.period,this.scheduler))},e}(),o=function(e){function t(t,n,r){e.call(this,t),this.period=n,this.scheduler=r,this.hasValue=!1,this.add(r.schedule(u,n,{subscriber:this,period:n}))}return r(t,e),t.prototype._next=function(e){this.lastValue=e,this.hasValue=!0},t.prototype.notifyNext=function(){this.hasValue&&(this.hasValue=!1,this.destination.next(this.lastValue))},t}(i.Subscriber);function u(e){var t=e.subscriber,n=e.period;t.notifyNext(),this.schedule(e,n)}},8076:function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function r(){this.constructor=e}e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=n(5239);t.scan=function(e,t){var n=!1;return arguments.length>=2&&(n=!0),this.lift(new a(e,t,n))};var a=function(){function e(e,t,n){void 0===n&&(n=!1),this.accumulator=e,this.seed=t,this.hasSeed=n}return e.prototype.call=function(e,t){return t.subscribe(new s(e,this.accumulator,this.seed,this.hasSeed))},e}(),s=function(e){function t(t,n,r,i){e.call(this,t),this.accumulator=n,this._seed=r,this.hasSeed=i,this.index=0}return r(t,e),Object.defineProperty(t.prototype,"seed",{get:function(){return this._seed},set:function(e){this.hasSeed=!0,this._seed=e},enumerable:!0,configurable:!0}),t.prototype._next=function(e){if(this.hasSeed)return this._tryNext(e);this.seed=e,this.destination.next(e)},t.prototype._tryNext=function(e){var t,n=this.index++;try{t=this.accumulator(this.seed,e,n)}catch(e){this.destination.error(e)}this.seed=t,this.destination.next(t)},t}(i.Subscriber)},5192:(e,t,n)=>{"use strict";var r=n(900),i=n(8314);function a(){return new i.Subject}t.share=function(){return r.multicast.call(this,a).refCount()}},7232:function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function r(){this.constructor=e}e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=n(5239);t.skip=function(e){return this.lift(new a(e))};var a=function(){function e(e){this.total=e}return e.prototype.call=function(e,t){return t.subscribe(new s(e,this.total))},e}(),s=function(e){function t(t,n){e.call(this,t),this.total=n,this.count=0}return r(t,e),t.prototype._next=function(e){++this.count>this.total&&this.destination.next(e)},t}(i.Subscriber)},8225:function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function r(){this.constructor=e}e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=n(3147),a=n(8794);t.skipUntil=function(e){return this.lift(new s(e))};var s=function(){function e(e){this.notifier=e}return e.prototype.call=function(e,t){return t.subscribe(new o(e,this.notifier))},e}(),o=function(e){function t(t,n){e.call(this,t),this.hasValue=!1,this.isInnerStopped=!1,this.add(a.subscribeToResult(this,n))}return r(t,e),t.prototype._next=function(t){this.hasValue&&e.prototype._next.call(this,t)},t.prototype._complete=function(){this.isInnerStopped?e.prototype._complete.call(this):this.unsubscribe()},t.prototype.notifyNext=function(e,t,n,r,i){this.hasValue=!0},t.prototype.notifyComplete=function(){this.isInnerStopped=!0,this.isStopped&&e.prototype._complete.call(this)},t}(i.OuterSubscriber)},775:function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function r(){this.constructor=e}e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=n(5239);t.skipWhile=function(e){return this.lift(new a(e))};var a=function(){function e(e){this.predicate=e}return e.prototype.call=function(e,t){return t.subscribe(new s(e,this.predicate))},e}(),s=function(e){function t(t,n){e.call(this,t),this.predicate=n,this.skipping=!0,this.index=0}return r(t,e),t.prototype._next=function(e){var t=this.destination;this.skipping&&this.tryCallPredicate(e),this.skipping||t.next(e)},t.prototype.tryCallPredicate=function(e){try{var t=this.predicate(e,this.index++);this.skipping=Boolean(t)}catch(e){this.destination.error(e)}},t}(i.Subscriber)},341:(e,t,n)=>{"use strict";var r=n(3418),i=n(4819),a=n(9735),s=n(8311),o=n(93);t.startWith=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];var n=e[e.length-1];o.isScheduler(n)?e.pop():n=null;var u=e.length;return 1===u?s.concatStatic(new i.ScalarObservable(e[0],n),this):u>1?s.concatStatic(new r.ArrayObservable(e,n),this):s.concatStatic(new a.EmptyObservable(n),this)}},9318:function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function r(){this.constructor=e}e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=n(3147),a=n(8794);t.switchMap=function(e,t){return this.lift(new s(e,t))};var s=function(){function e(e,t){this.project=e,this.resultSelector=t}return e.prototype.call=function(e,t){return t.subscribe(new o(e,this.project,this.resultSelector))},e}(),o=function(e){function t(t,n,r){e.call(this,t),this.project=n,this.resultSelector=r,this.index=0}return r(t,e),t.prototype._next=function(e){var t,n=this.index++;try{t=this.project(e,n)}catch(e){return void this.destination.error(e)}this._innerSub(t,e,n)},t.prototype._innerSub=function(e,t,n){var r=this.innerSubscription;r&&r.unsubscribe(),this.add(this.innerSubscription=a.subscribeToResult(this,e,t,n))},t.prototype._complete=function(){var t=this.innerSubscription;t&&!t.closed||e.prototype._complete.call(this)},t.prototype._unsubscribe=function(){this.innerSubscription=null},t.prototype.notifyComplete=function(t){this.remove(t),this.innerSubscription=null,this.isStopped&&e.prototype._complete.call(this)},t.prototype.notifyNext=function(e,t,n,r,i){this.resultSelector?this._tryNotifyNext(e,t,n,r):this.destination.next(t)},t.prototype._tryNotifyNext=function(e,t,n,r){var i;try{i=this.resultSelector(e,t,n,r)}catch(e){return void this.destination.error(e)}this.destination.next(i)},t}(i.OuterSubscriber)},9881:function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function r(){this.constructor=e}e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=n(3147),a=n(8794);t.switchMapTo=function(e,t){return this.lift(new s(e,t))};var s=function(){function e(e,t){this.observable=e,this.resultSelector=t}return e.prototype.call=function(e,t){return t.subscribe(new o(e,this.observable,this.resultSelector))},e}(),o=function(e){function t(t,n,r){e.call(this,t),this.inner=n,this.resultSelector=r,this.index=0}return r(t,e),t.prototype._next=function(e){var t=this.innerSubscription;t&&t.unsubscribe(),this.add(this.innerSubscription=a.subscribeToResult(this,this.inner,e,this.index++))},t.prototype._complete=function(){var t=this.innerSubscription;t&&!t.closed||e.prototype._complete.call(this)},t.prototype._unsubscribe=function(){this.innerSubscription=null},t.prototype.notifyComplete=function(t){this.remove(t),this.innerSubscription=null,this.isStopped&&e.prototype._complete.call(this)},t.prototype.notifyNext=function(e,t,n,r,i){var a=this.resultSelector,s=this.destination;a?this.tryResultSelector(e,t,n,r):s.next(t)},t.prototype.tryResultSelector=function(e,t,n,r){var i,a=this.resultSelector,s=this.destination;try{i=a(e,t,n,r)}catch(e){return void s.error(e)}s.next(i)},t}(i.OuterSubscriber)},4545:function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function r(){this.constructor=e}e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=n(5239),a=n(521),s=n(9735);t.take=function(e){return 0===e?new s.EmptyObservable:this.lift(new o(e))};var o=function(){function e(e){if(this.total=e,this.total<0)throw new a.ArgumentOutOfRangeError}return e.prototype.call=function(e,t){return t.subscribe(new u(e,this.total))},e}(),u=function(e){function t(t,n){e.call(this,t),this.total=n,this.count=0}return r(t,e),t.prototype._next=function(e){var t=this.total,n=++this.count;n<=t&&(this.destination.next(e),n===t&&(this.destination.complete(),this.unsubscribe()))},t}(i.Subscriber)},1305:function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function r(){this.constructor=e}e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=n(3147),a=n(8794);t.takeUntil=function(e){return this.lift(new s(e))};var s=function(){function e(e){this.notifier=e}return e.prototype.call=function(e,t){return t.subscribe(new o(e,this.notifier))},e}(),o=function(e){function t(t,n){e.call(this,t),this.notifier=n,this.add(a.subscribeToResult(this,n))}return r(t,e),t.prototype.notifyNext=function(e,t,n,r,i){this.complete()},t.prototype.notifyComplete=function(){},t}(i.OuterSubscriber)},4686:function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function r(){this.constructor=e}e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=n(5239);t.takeWhile=function(e){return this.lift(new a(e))};var a=function(){function e(e){this.predicate=e}return e.prototype.call=function(e,t){return t.subscribe(new s(e,this.predicate))},e}(),s=function(e){function t(t,n){e.call(this,t),this.predicate=n,this.index=0}return r(t,e),t.prototype._next=function(e){var t,n=this.destination;try{t=this.predicate(e,this.index++)}catch(e){return void n.error(e)}this.nextOrComplete(e,t)},t.prototype.nextOrComplete=function(e,t){var n=this.destination;Boolean(t)?n.next(e):n.complete()},t}(i.Subscriber)},2508:function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function r(){this.constructor=e}e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=n(5239),a=n(8404);t.throttleTime=function(e,t){return void 0===t&&(t=a.async),this.lift(new s(e,t))};var s=function(){function e(e,t){this.duration=e,this.scheduler=t}return e.prototype.call=function(e,t){return t.subscribe(new o(e,this.duration,this.scheduler))},e}(),o=function(e){function t(t,n,r){e.call(this,t),this.duration=n,this.scheduler=r}return r(t,e),t.prototype._next=function(e){this.throttled||(this.add(this.throttled=this.scheduler.schedule(u,this.duration,{subscriber:this})),this.destination.next(e))},t.prototype.clearThrottle=function(){var e=this.throttled;e&&(e.unsubscribe(),this.remove(e),this.throttled=null)},t}(i.Subscriber);function u(e){e.subscriber.clearThrottle()}},9090:function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function r(){this.constructor=e}e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=n(3147),a=n(8794);t.withLatestFrom=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n-0]=arguments[n];"function"==typeof t[t.length-1]&&(e=t.pop());var r=t;return this.lift(new s(r,e))};var s=function(){function e(e,t){this.observables=e,this.project=t}return e.prototype.call=function(e,t){return t.subscribe(new o(e,this.observables,this.project))},e}(),o=function(e){function t(t,n,r){e.call(this,t),this.observables=n,this.project=r,this.toRespond=[];var i=n.length;this.values=new Array(i);for(var s=0;s<i;s++)this.toRespond.push(s);for(s=0;s<i;s++){var o=n[s];this.add(a.subscribeToResult(this,o,o,s))}}return r(t,e),t.prototype.notifyNext=function(e,t,n,r,i){this.values[n]=t;var a=this.toRespond;if(a.length>0){var s=a.indexOf(n);-1!==s&&a.splice(s,1)}},t.prototype.notifyComplete=function(){},t.prototype._next=function(e){if(0===this.toRespond.length){var t=[e].concat(this.values);this.project?this._tryProject(t):this.destination.next(t)}},t.prototype._tryProject=function(e){var t;try{t=this.project.apply(this,e)}catch(e){return void this.destination.error(e)}this.destination.next(t)},t}(i.OuterSubscriber)},8655:function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function r(){this.constructor=e}e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=n(3418),a=n(5936),s=n(5239),o=n(3147),u=n(8794),c=n(5810);function l(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];var n=e[e.length-1];return"function"==typeof n&&e.pop(),new i.ArrayObservable(e).lift(new d(n))}t.zipProto=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return this.lift.call(l.apply(void 0,[this].concat(e)))},t.zipStatic=l;var d=function(){function e(e){this.project=e}return e.prototype.call=function(e,t){return t.subscribe(new h(e,this.project))},e}();t.ZipOperator=d;var h=function(e){function t(t,n,r){void 0===r&&(r=Object.create(null)),e.call(this,t),this.iterators=[],this.active=0,this.project="function"==typeof n?n:null,this.values=r}return r(t,e),t.prototype._next=function(e){var t=this.iterators;a.isArray(e)?t.push(new f(e)):"function"==typeof e[c.iterator]?t.push(new p(e[c.iterator]())):t.push(new m(this.destination,this,e))},t.prototype._complete=function(){var e=this.iterators,t=e.length;if(0!==t){this.active=t;for(var n=0;n<t;n++){var r=e[n];r.stillUnsubscribed?this.add(r.subscribe(r,n)):this.active--}}else this.destination.complete()},t.prototype.notifyInactive=function(){this.active--,0===this.active&&this.destination.complete()},t.prototype.checkIterators=function(){for(var e=this.iterators,t=e.length,n=this.destination,r=0;r<t;r++){if("function"==typeof(s=e[r]).hasValue&&!s.hasValue())return}var i=!1,a=[];for(r=0;r<t;r++){var s,o=(s=e[r]).next();if(s.hasCompleted()&&(i=!0),o.done)return void n.complete();a.push(o.value)}this.project?this._tryProject(a):n.next(a),i&&n.complete()},t.prototype._tryProject=function(e){var t;try{t=this.project.apply(this,e)}catch(e){return void this.destination.error(e)}this.destination.next(t)},t}(s.Subscriber);t.ZipSubscriber=h;var p=function(){function e(e){this.iterator=e,this.nextResult=e.next()}return e.prototype.hasValue=function(){return!0},e.prototype.next=function(){var e=this.nextResult;return this.nextResult=this.iterator.next(),e},e.prototype.hasCompleted=function(){var e=this.nextResult;return e&&e.done},e}(),f=function(){function e(e){this.array=e,this.index=0,this.length=0,this.length=e.length}return e.prototype[c.iterator]=function(){return this},e.prototype.next=function(e){var t=this.index++,n=this.array;return t<this.length?{value:n[t],done:!1}:{value:null,done:!0}},e.prototype.hasValue=function(){return this.array.length>this.index},e.prototype.hasCompleted=function(){return this.array.length===this.index},e}(),m=function(e){function t(t,n,r){e.call(this,t),this.parent=n,this.observable=r,this.stillUnsubscribed=!0,this.buffer=[],this.isComplete=!1}return r(t,e),t.prototype[c.iterator]=function(){return this},t.prototype.next=function(){var e=this.buffer;return 0===e.length&&this.isComplete?{value:null,done:!0}:{value:e.shift(),done:!1}},t.prototype.hasValue=function(){return this.buffer.length>0},t.prototype.hasCompleted=function(){return 0===this.buffer.length&&this.isComplete},t.prototype.notifyComplete=function(){this.buffer.length>0?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()},t.prototype.notifyNext=function(e,t,n,r,i){this.buffer.push(t),this.parent.checkIterators()},t.prototype.subscribe=function(e,t){return u.subscribeToResult(this,this.observable,this,t)},t}(o.OuterSubscriber)},3896:function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function r(){this.constructor=e}e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=function(e){function t(t,n){e.call(this)}return r(t,e),t.prototype.schedule=function(e,t){return void 0===t&&(t=0),this},t}(n(4859).Subscription);t.Action=i},3569:function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function r(){this.constructor=e}e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=n(2932),a=n(3833),s=function(e){function t(t,n){e.call(this,t,n),this.scheduler=t,this.work=n}return r(t,e),t.prototype.requestAsyncId=function(t,n,r){return void 0===r&&(r=0),null!==r&&r>0?e.prototype.requestAsyncId.call(this,t,n,r):(t.actions.push(this),t.scheduled||(t.scheduled=a.AnimationFrame.requestAnimationFrame(t.flush.bind(t,null))))},t.prototype.recycleAsyncId=function(t,n,r){if(void 0===r&&(r=0),null!==r&&r>0||null===r&&this.delay>0)return e.prototype.recycleAsyncId.call(this,t,n,r);0===t.actions.length&&(a.AnimationFrame.cancelAnimationFrame(n),t.scheduled=void 0)},t}(i.AsyncAction);t.AnimationFrameAction=s},4737:function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function r(){this.constructor=e}e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=function(e){function t(){e.apply(this,arguments)}return r(t,e),t.prototype.flush=function(e){this.active=!0,this.scheduled=void 0;var t,n=this.actions,r=-1,i=n.length;e=e||n.shift();do{if(t=e.execute(e.state,e.delay))break}while(++r<i&&(e=n.shift()));if(this.active=!1,t){for(;++r<i&&(e=n.shift());)e.unsubscribe();throw t}},t}(n(884).AsyncScheduler);t.AnimationFrameScheduler=i},2932:function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function r(){this.constructor=e}e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=n(7919),a=function(e){function t(t,n){e.call(this,t,n),this.scheduler=t,this.work=n,this.pending=!1}return r(t,e),t.prototype.schedule=function(e,t){if(void 0===t&&(t=0),this.closed)return this;this.state=e,this.pending=!0;var n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,t)),this.delay=t,this.id=this.id||this.requestAsyncId(r,this.id,t),this},t.prototype.requestAsyncId=function(e,t,n){return void 0===n&&(n=0),i.root.setInterval(e.flush.bind(e,this),n)},t.prototype.recycleAsyncId=function(e,t,n){if(void 0===n&&(n=0),null!==n&&this.delay===n)return t;i.root.clearInterval(t)},t.prototype.execute=function(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(e,t);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},t.prototype._execute=function(e,t){var n=!1,r=void 0;try{this.work(e)}catch(e){n=!0,r=!!e&&e||new Error(e)}if(n)return this.unsubscribe(),r},t.prototype._unsubscribe=function(){var e=this.id,t=this.scheduler,n=t.actions,r=n.indexOf(this);this.work=null,this.delay=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=e&&(this.id=this.recycleAsyncId(t,e,null))},t}(n(3896).Action);t.AsyncAction=a},884:function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function r(){this.constructor=e}e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=function(e){function t(){e.apply(this,arguments),this.actions=[],this.active=!1,this.scheduled=void 0}return r(t,e),t.prototype.flush=function(e){var t=this.actions;if(this.active)t.push(e);else{var n;this.active=!0;do{if(n=e.execute(e.state,e.delay))break}while(e=t.shift());if(this.active=!1,n){for(;e=t.shift();)e.unsubscribe();throw n}}},t}(n(3422).Scheduler);t.AsyncScheduler=i},1807:function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function r(){this.constructor=e}e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=function(e){function t(t,n){e.call(this,t,n),this.scheduler=t,this.work=n}return r(t,e),t.prototype.schedule=function(t,n){return void 0===n&&(n=0),n>0?e.prototype.schedule.call(this,t,n):(this.delay=n,this.state=t,this.scheduler.flush(this),this)},t.prototype.execute=function(t,n){return n>0||this.closed?e.prototype.execute.call(this,t,n):this._execute(t,n)},t.prototype.requestAsyncId=function(t,n,r){return void 0===r&&(r=0),null!==r&&r>0||null===r&&this.delay>0?e.prototype.requestAsyncId.call(this,t,n,r):t.flush(this)},t}(n(2932).AsyncAction);t.QueueAction=i},2824:function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function r(){this.constructor=e}e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=function(e){function t(){e.apply(this,arguments)}return r(t,e),t}(n(884).AsyncScheduler);t.QueueScheduler=i},4401:(e,t,n)=>{"use strict";var r=n(3569),i=n(4737);t.r=new i.AnimationFrameScheduler(r.AnimationFrameAction)},8404:(e,t,n)=>{"use strict";var r=n(2932),i=n(884);t.async=new i.AsyncScheduler(r.AsyncAction)},9082:(e,t,n)=>{"use strict";var r=n(1807),i=n(2824);t.queue=new i.QueueScheduler(r.QueueAction)},5810:(e,t,n)=>{"use strict";var r=n(7919);function i(e){var t=e.Symbol;if("function"==typeof t)return t.iterator||(t.iterator=t("iterator polyfill")),t.iterator;var n=e.Set;if(n&&"function"==typeof(new n)["@@iterator"])return"@@iterator";var r=e.Map;if(r)for(var i=Object.getOwnPropertyNames(r.prototype),a=0;a<i.length;++a){var s=i[a];if("entries"!==s&&"size"!==s&&r.prototype[s]===r.prototype.entries)return s}return"@@iterator"}t.symbolIteratorPonyfill=i,t.iterator=i(r.root),t.$$iterator=t.iterator},683:(e,t,n)=>{"use strict";var r=n(7919);function i(e){var t,n=e.Symbol;return"function"==typeof n?n.observable?t=n.observable:(t=n("observable"),n.observable=t):t="@@observable",t}t.getSymbolObservable=i,t.observable=i(r.root),t.$$observable=t.observable},2992:(e,t,n)=>{"use strict";var r=n(7919).root.Symbol;t.rxSubscriber="function"==typeof r&&"function"==typeof r.for?r.for("rxSubscriber"):"@@rxSubscriber",t.$$rxSubscriber=t.rxSubscriber},3833:(e,t,n)=>{"use strict";var r=n(7919),i=function(e){e.requestAnimationFrame?(this.cancelAnimationFrame=e.cancelAnimationFrame.bind(e),this.requestAnimationFrame=e.requestAnimationFrame.bind(e)):e.mozRequestAnimationFrame?(this.cancelAnimationFrame=e.mozCancelAnimationFrame.bind(e),this.requestAnimationFrame=e.mozRequestAnimationFrame.bind(e)):e.webkitRequestAnimationFrame?(this.cancelAnimationFrame=e.webkitCancelAnimationFrame.bind(e),this.requestAnimationFrame=e.webkitRequestAnimationFrame.bind(e)):e.msRequestAnimationFrame?(this.cancelAnimationFrame=e.msCancelAnimationFrame.bind(e),this.requestAnimationFrame=e.msRequestAnimationFrame.bind(e)):e.oRequestAnimationFrame?(this.cancelAnimationFrame=e.oCancelAnimationFrame.bind(e),this.requestAnimationFrame=e.oRequestAnimationFrame.bind(e)):(this.cancelAnimationFrame=e.clearTimeout.bind(e),this.requestAnimationFrame=function(t){return e.setTimeout(t,1e3/60)})};t.RequestAnimationFrameDefinition=i,t.AnimationFrame=new i(r.root)},521:function(e,t){"use strict";var n=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function r(){this.constructor=e}e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},r=function(e){function t(){var t=e.call(this,"argument out of range");this.name=t.name="ArgumentOutOfRangeError",this.stack=t.stack,this.message=t.message}return n(t,e),t}(Error);t.ArgumentOutOfRangeError=r},2107:function(e,t){"use strict";var n=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function r(){this.constructor=e}e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},r=function(e){function t(){var t=e.call(this,"no elements in sequence");this.name=t.name="EmptyError",this.stack=t.stack,this.message=t.message}return n(t,e),t}(Error);t.EmptyError=r},7376:function(e,t){"use strict";var n=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function r(){this.constructor=e}e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},r=function(e){function t(){var t=e.call(this,"object unsubscribed");this.name=t.name="ObjectUnsubscribedError",this.stack=t.stack,this.message=t.message}return n(t,e),t}(Error);t.ObjectUnsubscribedError=r},6900:(e,t,n)=>{"use strict";var r=n(7919);function i(){return function(){function e(){this._values=[]}return e.prototype.add=function(e){this.has(e)||this._values.push(e)},e.prototype.has=function(e){return-1!==this._values.indexOf(e)},Object.defineProperty(e.prototype,"size",{get:function(){return this._values.length},enumerable:!0,configurable:!0}),e.prototype.clear=function(){this._values.length=0},e}()}t.minimalSetImpl=i,t.Set=r.root.Set||i()},6288:function(e,t){"use strict";var n=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function r(){this.constructor=e}e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},r=function(e){function t(t){e.call(this),this.errors=t;var n=Error.call(this,t?t.length+" errors occurred during unsubscription:\n  "+t.map((function(e,t){return t+1+") "+e.toString()})).join("\n  "):"");this.name=n.name="UnsubscriptionError",this.stack=n.stack,this.message=n.message}return n(t,e),t}(Error);t.UnsubscriptionError=r},4456:(e,t)=>{"use strict";t.errorObject={e:{}}},5936:(e,t)=>{"use strict";t.isArray=Array.isArray||function(e){return e&&"number"==typeof e.length}},2900:(e,t)=>{"use strict";t.isArrayLike=function(e){return e&&"number"==typeof e.length}},1589:(e,t)=>{"use strict";t.isDate=function(e){return e instanceof Date&&!isNaN(+e)}},1404:(e,t)=>{"use strict";t.isFunction=function(e){return"function"==typeof e}},3523:(e,t,n)=>{"use strict";var r=n(5936);t.isNumeric=function(e){return!r.isArray(e)&&e-parseFloat(e)+1>=0}},7620:(e,t)=>{"use strict";t.isObject=function(e){return null!=e&&"object"==typeof e}},338:(e,t)=>{"use strict";t.isPromise=function(e){return e&&"function"!=typeof e.subscribe&&"function"==typeof e.then}},93:(e,t)=>{"use strict";t.isScheduler=function(e){return e&&"function"==typeof e.schedule}},4985:(e,t)=>{"use strict";t.noop=function(){}},1088:(e,t)=>{"use strict";t.not=function(e,t){function n(){return!n.pred.apply(n.thisArg,arguments)}return n.pred=e,n.thisArg=t,n}},7919:(e,t)=>{"use strict";if(t.root="object"==typeof window&&window.window===window&&window||"object"==typeof self&&self.self===self&&self||!1,!t.root)throw new Error("RxJS could not find any global context (window, self, global)")},8794:(e,t,n)=>{"use strict";var r=n(7919),i=n(2900),a=n(338),s=n(7620),o=n(5100),u=n(5810),c=n(7056),l=n(683);t.subscribeToResult=function(e,t,n,d){var h=new c.InnerSubscriber(e,n,d);if(h.closed)return null;if(t instanceof o.Observable)return t._isScalar?(h.next(t.value),h.complete(),null):t.subscribe(h);if(i.isArrayLike(t)){for(var p=0,f=t.length;p<f&&!h.closed;p++)h.next(t[p]);h.closed||h.complete()}else{if(a.isPromise(t))return t.then((function(e){h.closed||(h.next(e),h.complete())}),(function(e){return h.error(e)})).then(null,(function(e){r.root.setTimeout((function(){throw e}))})),h;if(t&&"function"==typeof t[u.iterator])for(var m=t[u.iterator]();;){var g=m.next();if(g.done){h.complete();break}if(h.next(g.value),h.closed)break}else if(t&&"function"==typeof t[l.observable]){var v=t[l.observable]();if("function"==typeof v.subscribe)return v.subscribe(new c.InnerSubscriber(e,n,d));h.error(new TypeError("Provided object does not correctly implement Symbol.observable"))}else{var y="You provided "+(s.isObject(t)?"an invalid object":"'"+t+"'")+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.";h.error(new TypeError(y))}}return null}},9510:(e,t,n)=>{"use strict";var r=n(5239),i=n(2992),a=n(2320);t.toSubscriber=function(e,t,n){if(e){if(e instanceof r.Subscriber)return e;if(e[i.rxSubscriber])return e[i.rxSubscriber]()}return e||t||n?new r.Subscriber(e,t,n):new r.Subscriber(a.empty)}},6447:(e,t,n)=>{"use strict";var r,i=n(4456);function a(){try{return r.apply(this,arguments)}catch(e){return i.errorObject.e=e,i.errorObject}}t.tryCatch=function(e){return r=e,a}},9945:function(e){var t,n,r,i,a;t=/^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/,n=/^(?=([^\/?#]*))\1([^]*)$/,r=/(?:\/|^)\.(?=\/)/g,i=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,a={buildAbsoluteURL:function(e,t,r){if(r=r||{},e=e.trim(),!(t=t.trim())){if(!r.alwaysNormalize)return e;var i=a.parseURL(e);if(!i)throw new Error("Error trying to parse base URL.");return i.path=a.normalizePath(i.path),a.buildURLFromParts(i)}var s=a.parseURL(t);if(!s)throw new Error("Error trying to parse relative URL.");if(s.scheme)return r.alwaysNormalize?(s.path=a.normalizePath(s.path),a.buildURLFromParts(s)):t;var o=a.parseURL(e);if(!o)throw new Error("Error trying to parse base URL.");if(!o.netLoc&&o.path&&"/"!==o.path[0]){var u=n.exec(o.path);o.netLoc=u[1],o.path=u[2]}o.netLoc&&!o.path&&(o.path="/");var c={scheme:o.scheme,netLoc:s.netLoc,path:null,params:s.params,query:s.query,fragment:s.fragment};if(!s.netLoc&&(c.netLoc=o.netLoc,"/"!==s.path[0]))if(s.path){var l=o.path,d=l.substring(0,l.lastIndexOf("/")+1)+s.path;c.path=a.normalizePath(d)}else c.path=o.path,s.params||(c.params=o.params,s.query||(c.query=o.query));return null===c.path&&(c.path=r.alwaysNormalize?a.normalizePath(s.path):s.path),a.buildURLFromParts(c)},parseURL:function(e){var n=t.exec(e);return n?{scheme:n[1]||"",netLoc:n[2]||"",path:n[3]||"",params:n[4]||"",query:n[5]||"",fragment:n[6]||""}:null},normalizePath:function(e){for(e=e.split("").reverse().join("").replace(r,"");e.length!==(e=e.replace(i,"")).length;);return e.split("").reverse().join("")},buildURLFromParts:function(e){return e.scheme+e.netLoc+e.path+e.params+e.query+e.fragment}},e.exports=a},5387:function(e){
/**
 * @license
 * Video.js 7.2.4 <http://videojs.com/>
 * Copyright Brightcove, Inc. <https://www.brightcove.com/>
 * Available under Apache License Version 2.0
 * <https://github.com/videojs/video.js/blob/master/LICENSE>
 *
 * Includes vtt.js <https://github.com/mozilla/vtt.js>
 * Available under Apache License Version 2.0
 * <https://github.com/mozilla/vtt.js/blob/master/LICENSE>
 */
e.exports=function(){var e="7.2.4",t="undefined"!=typeof window?window:"undefined"!=typeof self?self:{};function n(e,t){return e(t={exports:{}},t.exports),t.exports}var r,i="undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{},a={},s=Object.freeze({default:a}),o=s&&a||s,u=void 0!==t?t:"undefined"!=typeof window?window:{};"undefined"!=typeof document?r=document:(r=u["__GLOBAL_DOCUMENT_CACHE@4"])||(r=u["__GLOBAL_DOCUMENT_CACHE@4"]=o);var c=r,l=void 0,d="info",h=[],p=function(e,t){var n=l.levels[d],r=new RegExp("^("+n+")$");if("log"!==e&&t.unshift(e.toUpperCase()+":"),h&&h.push([].concat(t)),t.unshift("VIDEOJS:"),i.console){var a=i.console[e];a||"debug"!==e||(a=i.console.info||i.console.log),a&&n&&r.test(e)&&a[Array.isArray(t)?"apply":"call"](i.console,t)}};l=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];p("log",t)},l.levels={all:"debug|log|warn|error",off:"",debug:"debug|log|warn|error",info:"log|warn|error",warn:"warn|error",error:"error",DEFAULT:d},l.level=function(e){if("string"==typeof e){if(!l.levels.hasOwnProperty(e))throw new Error('"'+e+'" in not a valid log level');d=e}return d},l.history=function(){return h?[].concat(h):[]},l.history.clear=function(){h&&(h.length=0)},l.history.disable=function(){null!==h&&(h.length=0,h=null)},l.history.enable=function(){null===h&&(h=[])},l.error=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return p("error",t)},l.warn=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return p("warn",t)},l.debug=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return p("debug",t)};var f=l;function m(e){return e.replace(/\n\r?\s*/g,"")}var g=function(e){for(var t="",n=0;n<arguments.length;n++)t+=m(e[n])+(arguments[n+1]||"");return t},v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},b=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},_=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},T=function(e,t){return e.raw=t,e},w=Object.prototype.toString,S=function(e){return O(e)?Object.keys(e):[]};function C(e,t){S(e).forEach((function(n){return t(e[n],n)}))}function E(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return S(e).reduce((function(n,r){return t(n,e[r],r)}),n)}function k(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Object.assign?Object.assign.apply(Object,[e].concat(n)):(n.forEach((function(t){t&&C(t,(function(t,n){e[n]=t}))})),e)}function O(e){return!!e&&"object"===(void 0===e?"undefined":v(e))}function x(e){return O(e)&&"[object Object]"===w.call(e)&&e.constructor===Object}function A(e,t){if(!e||!t)return"";if("function"==typeof i.getComputedStyle){var n=i.getComputedStyle(e);return n?n[t]:""}return""}var P=T(["Setting attributes in the second argument of createEl()\n                has been deprecated. Use the third argument instead.\n                createEl(type, properties, attributes). Attempting to set "," to ","."],["Setting attributes in the second argument of createEl()\n                has been deprecated. Use the third argument instead.\n                createEl(type, properties, attributes). Attempting to set "," to ","."]);function I(e){return"string"==typeof e&&/\S/.test(e)}function L(e){if(/\s/.test(e))throw new Error("class has illegal whitespace characters")}function M(e){return new RegExp("(^|\\s)"+e+"($|\\s)")}function D(){return c===i.document}function R(e){return O(e)&&1===e.nodeType}function N(){try{return i.parent!==i.self}catch(e){return!0}}function j(e){return function(t,n){if(!I(t))return c[e](null);I(n)&&(n=c.querySelector(n));var r=R(n)?n:c;return r[e]&&r[e](t)}}function U(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"div",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments[3],i=c.createElement(e);return Object.getOwnPropertyNames(t).forEach((function(e){var n=t[e];-1!==e.indexOf("aria-")||"role"===e||"type"===e?(f.warn(g(P,e,n)),i.setAttribute(e,n)):"textContent"===e?F(i,n):i[e]=n})),Object.getOwnPropertyNames(n).forEach((function(e){i.setAttribute(e,n[e])})),r&&ie(i,r),i}function F(e,t){return void 0===e.textContent?e.innerText=t:e.textContent=t,e}function $(e,t){t.firstChild?t.insertBefore(e,t.firstChild):t.appendChild(e)}function B(e,t){return L(t),e.classList?e.classList.contains(t):M(t).test(e.className)}function V(e,t){return e.classList?e.classList.add(t):B(e,t)||(e.className=(e.className+" "+t).trim()),e}function q(e,t){return e.classList?e.classList.remove(t):(L(t),e.className=e.className.split(/\s+/).filter((function(e){return e!==t})).join(" ")),e}function H(e,t,n){var r=B(e,t);if("function"==typeof n&&(n=n(e,t)),"boolean"!=typeof n&&(n=!r),n!==r)return n?V(e,t):q(e,t),e}function W(e,t){Object.getOwnPropertyNames(t).forEach((function(n){var r=t[n];null==r||!1===r?e.removeAttribute(n):e.setAttribute(n,!0===r?"":r)}))}function z(e){var t={},n=",autoplay,controls,playsinline,loop,muted,default,defaultMuted,";if(e&&e.attributes&&e.attributes.length>0)for(var r=e.attributes,i=r.length-1;i>=0;i--){var a=r[i].name,s=r[i].value;"boolean"!=typeof e[a]&&-1===n.indexOf(","+a+",")||(s=null!==s),t[a]=s}return t}function G(e,t){return e.getAttribute(t)}function K(e,t,n){e.setAttribute(t,n)}function X(e,t){e.removeAttribute(t)}function Y(){c.body.focus(),c.onselectstart=function(){return!1}}function Q(){c.onselectstart=function(){return!0}}function J(e){if(e&&e.getBoundingClientRect&&e.parentNode){var t=e.getBoundingClientRect(),n={};return["bottom","height","left","right","top","width"].forEach((function(e){void 0!==t[e]&&(n[e]=t[e])})),n.height||(n.height=parseFloat(A(e,"height"))),n.width||(n.width=parseFloat(A(e,"width"))),n}}function Z(e){var t=void 0;if(e.getBoundingClientRect&&e.parentNode&&(t=e.getBoundingClientRect()),!t)return{left:0,top:0};var n=c.documentElement,r=c.body,a=n.clientLeft||r.clientLeft||0,s=i.pageXOffset||r.scrollLeft,o=t.left+s-a,u=n.clientTop||r.clientTop||0,l=i.pageYOffset||r.scrollTop,d=t.top+l-u;return{left:Math.round(o),top:Math.round(d)}}function ee(e,t){var n={},r=Z(e),i=e.offsetWidth,a=e.offsetHeight,s=r.top,o=r.left,u=t.pageY,c=t.pageX;return t.changedTouches&&(c=t.changedTouches[0].pageX,u=t.changedTouches[0].pageY),n.y=Math.max(0,Math.min(1,(s-u+a)/a)),n.x=Math.max(0,Math.min(1,(c-o)/i)),n}function te(e){return O(e)&&3===e.nodeType}function ne(e){for(;e.firstChild;)e.removeChild(e.firstChild);return e}function re(e){return"function"==typeof e&&(e=e()),(Array.isArray(e)?e:[e]).map((function(e){return"function"==typeof e&&(e=e()),R(e)||te(e)?e:"string"==typeof e&&/\S/.test(e)?c.createTextNode(e):void 0})).filter((function(e){return e}))}function ie(e,t){return re(t).forEach((function(t){return e.appendChild(t)})),e}function ae(e,t){return ie(ne(e),t)}function se(e){return void 0===e.button&&void 0===e.buttons||0===e.button&&void 0===e.buttons||0===e.button&&1===e.buttons}var oe=j("querySelector"),ue=j("querySelectorAll"),ce=Object.freeze({isReal:D,isEl:R,isInFrame:N,createEl:U,textContent:F,prependTo:$,hasClass:B,addClass:V,removeClass:q,toggleClass:H,setAttributes:W,getAttributes:z,getAttribute:G,setAttribute:K,removeAttribute:X,blockTextSelection:Y,unblockTextSelection:Q,getBoundingClientRect:J,findPosition:Z,getPointerPosition:ee,isTextNode:te,emptyEl:ne,normalizeContent:re,appendContent:ie,insertContent:ae,isSingleLeftClick:se,$:oe,$$:ue}),le=1;function de(){return le++}var he={},pe="vdata"+(new Date).getTime();function fe(e){var t=e[pe];return t||(t=e[pe]=de()),he[t]||(he[t]={}),he[t]}function me(e){var t=e[pe];return!!t&&!!Object.getOwnPropertyNames(he[t]).length}function ge(e){var t=e[pe];if(t){delete he[t];try{delete e[pe]}catch(t){e.removeAttribute?e.removeAttribute(pe):e[pe]=null}}}function ve(e,t){var n=fe(e);0===n.handlers[t].length&&(delete n.handlers[t],e.removeEventListener?e.removeEventListener(t,n.dispatcher,!1):e.detachEvent&&e.detachEvent("on"+t,n.dispatcher)),Object.getOwnPropertyNames(n.handlers).length<=0&&(delete n.handlers,delete n.dispatcher,delete n.disabled),0===Object.getOwnPropertyNames(n).length&&ge(e)}function ye(e,t,n,r){n.forEach((function(n){e(t,n,r)}))}function be(e){function t(){return!0}function n(){return!1}if(!e||!e.isPropagationStopped){var r=e||i.event;for(var a in e={},r)"layerX"!==a&&"layerY"!==a&&"keyLocation"!==a&&"webkitMovementX"!==a&&"webkitMovementY"!==a&&("returnValue"===a&&r.preventDefault||(e[a]=r[a]));if(e.target||(e.target=e.srcElement||c),e.relatedTarget||(e.relatedTarget=e.fromElement===e.target?e.toElement:e.fromElement),e.preventDefault=function(){r.preventDefault&&r.preventDefault(),e.returnValue=!1,r.returnValue=!1,e.defaultPrevented=!0},e.defaultPrevented=!1,e.stopPropagation=function(){r.stopPropagation&&r.stopPropagation(),e.cancelBubble=!0,r.cancelBubble=!0,e.isPropagationStopped=t},e.isPropagationStopped=n,e.stopImmediatePropagation=function(){r.stopImmediatePropagation&&r.stopImmediatePropagation(),e.isImmediatePropagationStopped=t,e.stopPropagation()},e.isImmediatePropagationStopped=n,null!==e.clientX&&void 0!==e.clientX){var s=c.documentElement,o=c.body;e.pageX=e.clientX+(s&&s.scrollLeft||o&&o.scrollLeft||0)-(s&&s.clientLeft||o&&o.clientLeft||0),e.pageY=e.clientY+(s&&s.scrollTop||o&&o.scrollTop||0)-(s&&s.clientTop||o&&o.clientTop||0)}e.which=e.charCode||e.keyCode,null!==e.button&&void 0!==e.button&&(e.button=1&e.button?0:4&e.button?1:2&e.button?2:0)}return e}var _e=!1;!function(){try{var e=Object.defineProperty({},"passive",{get:function(){_e=!0}});i.addEventListener("test",null,e),i.removeEventListener("test",null,e)}catch(e){}}();var Te=["touchstart","touchmove"];function we(e,t,n){if(Array.isArray(t))return ye(we,e,t,n);var r=fe(e);if(r.handlers||(r.handlers={}),r.handlers[t]||(r.handlers[t]=[]),n.guid||(n.guid=de()),r.handlers[t].push(n),r.dispatcher||(r.disabled=!1,r.dispatcher=function(t,n){if(!r.disabled){t=be(t);var i=r.handlers[t.type];if(i)for(var a=i.slice(0),s=0,o=a.length;s<o&&!t.isImmediatePropagationStopped();s++)try{a[s].call(e,t,n)}catch(e){f.error(e)}}}),1===r.handlers[t].length)if(e.addEventListener){var i=!1;_e&&Te.indexOf(t)>-1&&(i={passive:!0}),e.addEventListener(t,r.dispatcher,i)}else e.attachEvent&&e.attachEvent("on"+t,r.dispatcher)}function Se(e,t,n){if(me(e)){var r=fe(e);if(r.handlers){if(Array.isArray(t))return ye(Se,e,t,n);var i=function(e,t){r.handlers[t]=[],ve(e,t)};if(void 0!==t){var a=r.handlers[t];if(a)if(n){if(n.guid)for(var s=0;s<a.length;s++)a[s].guid===n.guid&&a.splice(s--,1);ve(e,t)}else i(e,t)}else for(var o in r.handlers)Object.prototype.hasOwnProperty.call(r.handlers||{},o)&&i(e,o)}}}function Ce(e,t,n){var r=me(e)?fe(e):{},i=e.parentNode||e.ownerDocument;if("string"==typeof t?t={type:t,target:e}:t.target||(t.target=e),t=be(t),r.dispatcher&&r.dispatcher.call(e,t,n),i&&!t.isPropagationStopped()&&!0===t.bubbles)Ce.call(null,i,t,n);else if(!i&&!t.defaultPrevented){var a=fe(t.target);t.target[t.type]&&(a.disabled=!0,"function"==typeof t.target[t.type]&&t.target[t.type](),a.disabled=!1)}return!t.defaultPrevented}function Ee(e,t,n){if(Array.isArray(t))return ye(Ee,e,t,n);var r=function r(){Se(e,t,r),n.apply(this,arguments)};r.guid=n.guid=n.guid||de(),we(e,t,r)}var ke=Object.freeze({fixEvent:be,on:we,off:Se,trigger:Ce,one:Ee}),Oe=!1,xe=void 0,Ae=function(){if(D()&&!1!==xe.options.autoSetup){var e=Array.prototype.slice.call(c.getElementsByTagName("video")),t=Array.prototype.slice.call(c.getElementsByTagName("audio")),n=Array.prototype.slice.call(c.getElementsByTagName("video-js")),r=e.concat(t,n);if(r&&r.length>0)for(var i=0,a=r.length;i<a;i++){var s=r[i];if(!s||!s.getAttribute){Pe(1);break}void 0===s.player&&null!==s.getAttribute("data-setup")&&xe(s)}else Oe||Pe(1)}};function Pe(e,t){t&&(xe=t),i.setTimeout(Ae,e)}D()&&"complete"===c.readyState?Oe=!0:Ee(i,"load",(function(){Oe=!0}));var Ie=function(e){var t=c.createElement("style");return t.className=e,t},Le=function(e,t){e.styleSheet?e.styleSheet.cssText=t:e.textContent=t},Me=function(e,t,n){t.guid||(t.guid=de());var r=function(){return t.apply(e,arguments)};return r.guid=n?n+"_"+t.guid:t.guid,r},De=function(e,t){var n=Date.now(),r=function(){var r=Date.now();r-n>=t&&(e.apply(void 0,arguments),n=r)};return r},Re=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:i,a=void 0,s=function(){r.clearTimeout(a),a=null},o=function(){var i=this,s=arguments,o=function(){a=null,o=null,n||e.apply(i,s)};!a&&n&&e.apply(i,s),r.clearTimeout(a),a=r.setTimeout(o,t)};return o.cancel=s,o},Ne=function(){};Ne.prototype.allowedEvents_={},Ne.prototype.on=function(e,t){var n=this.addEventListener;this.addEventListener=function(){},we(this,e,t),this.addEventListener=n},Ne.prototype.addEventListener=Ne.prototype.on,Ne.prototype.off=function(e,t){Se(this,e,t)},Ne.prototype.removeEventListener=Ne.prototype.off,Ne.prototype.one=function(e,t){var n=this.addEventListener;this.addEventListener=function(){},Ee(this,e,t),this.addEventListener=n},Ne.prototype.trigger=function(e){var t=e.type||e;"string"==typeof e&&(e={type:t}),e=be(e),this.allowedEvents_[t]&&this["on"+t]&&this["on"+t](e),Ce(this,e)},Ne.prototype.dispatchEvent=Ne.prototype.trigger;var je=void 0;Ne.prototype.queueTrigger=function(e){var t=this;je||(je=new Map);var n=e.type||e,r=je.get(this);r||(r=new Map,je.set(this,r));var a=r.get(n);r.delete(n),i.clearTimeout(a);var s=i.setTimeout((function(){0===r.size&&(r=null,je.delete(t)),t.trigger(e)}),0);r.set(n,s)};var Ue=function(e){return e instanceof Ne||!!e.eventBusEl_&&["on","one","off","trigger"].every((function(t){return"function"==typeof e[t]}))},Fe=function(e){return"string"==typeof e&&/\S/.test(e)||Array.isArray(e)&&!!e.length},$e=function(e){if(!e.nodeName&&!Ue(e))throw new Error("Invalid target; must be a DOM node or evented object.")},Be=function(e){if(!Fe(e))throw new Error("Invalid event type; must be a non-empty string or array.")},Ve=function(e){if("function"!=typeof e)throw new Error("Invalid listener; must be a function.")},qe=function(e,t){var n=t.length<3||t[0]===e||t[0]===e.eventBusEl_,r=void 0,i=void 0,a=void 0;return n?(r=e.eventBusEl_,t.length>=3&&t.shift(),i=t[0],a=t[1]):(r=t[0],i=t[1],a=t[2]),$e(r),Be(i),Ve(a),{isTargetingSelf:n,target:r,type:i,listener:a=Me(e,a)}},He=function(e,t,n,r){$e(e),e.nodeName?ke[t](e,n,r):e[t](n,r)},We={on:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=qe(this,n),a=i.isTargetingSelf,s=i.target,o=i.type,u=i.listener;if(He(s,"on",o,u),!a){var c=function(){return e.off(s,o,u)};c.guid=u.guid;var l=function(){return e.off("dispose",c)};l.guid=u.guid,He(this,"on","dispose",c),He(s,"on","dispose",l)}},one:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=qe(this,n),a=i.isTargetingSelf,s=i.target,o=i.type,u=i.listener;if(a)He(s,"one",o,u);else{var c=function t(){for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];e.off(s,o,t),u.apply(null,r)};c.guid=u.guid,He(s,"one",o,c)}},off:function(e,t,n){if(!e||Fe(e))Se(this.eventBusEl_,e,t);else{var r=e,i=t;$e(r),Be(i),Ve(n),n=Me(this,n),this.off("dispose",n),r.nodeName?(Se(r,i,n),Se(r,"dispose",n)):Ue(r)&&(r.off(i,n),r.off("dispose",n))}},trigger:function(e,t){return Ce(this.eventBusEl_,e,t)}};function ze(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).eventBusKey;if(t){if(!e[t].nodeName)throw new Error('The eventBusKey "'+t+'" does not refer to an element.');e.eventBusEl_=e[t]}else e.eventBusEl_=U("span",{className:"vjs-event-bus"});return k(e,We),e.on("dispose",(function(){e.off(),i.setTimeout((function(){e.eventBusEl_=null}),0)})),e}var Ge={state:{},setState:function(e){var t=this;"function"==typeof e&&(e=e());var n=void 0;return C(e,(function(e,r){t.state[r]!==e&&((n=n||{})[r]={from:t.state[r],to:e}),t.state[r]=e})),n&&Ue(this)&&this.trigger({changes:n,type:"statechanged"}),n}};function Ke(e,t){return k(e,Ge),e.state=k({},e.state,t),"function"==typeof e.handleStateChanged&&Ue(e)&&e.on("statechanged",e.handleStateChanged),e}function Xe(e){return"string"!=typeof e?e:e.charAt(0).toUpperCase()+e.slice(1)}function Ye(e,t){return Xe(e)===Xe(t)}function Qe(){for(var e={},t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];return n.forEach((function(t){t&&C(t,(function(t,n){x(t)?(x(e[n])||(e[n]={}),e[n]=Qe(e[n],t)):e[n]=t}))})),e}var Je=function(){function e(t,n,r){if(y(this,e),!t&&this.play?this.player_=t=this:this.player_=t,this.options_=Qe({},this.options_),n=this.options_=Qe(this.options_,n),this.id_=n.id||n.el&&n.el.id,!this.id_){var i=t&&t.id&&t.id()||"no_player";this.id_=i+"_component_"+de()}this.name_=n.name||null,n.el?this.el_=n.el:!1!==n.createEl&&(this.el_=this.createEl()),!1!==n.evented&&ze(this,{eventBusKey:this.el_?"el_":null}),Ke(this,this.constructor.defaultState),this.children_=[],this.childIndex_={},this.childNameIndex_={},!1!==n.initChildren&&this.initChildren(),this.ready(r),!1!==n.reportTouchActivity&&this.enableTouchActivity()}return e.prototype.dispose=function(){if(this.trigger({type:"dispose",bubbles:!1}),this.children_)for(var e=this.children_.length-1;e>=0;e--)this.children_[e].dispose&&this.children_[e].dispose();this.children_=null,this.childIndex_=null,this.childNameIndex_=null,this.el_&&(this.el_.parentNode&&this.el_.parentNode.removeChild(this.el_),ge(this.el_),this.el_=null),this.player_=null},e.prototype.player=function(){return this.player_},e.prototype.options=function(e){return f.warn("this.options() has been deprecated and will be moved to the constructor in 6.0"),e?(this.options_=Qe(this.options_,e),this.options_):this.options_},e.prototype.el=function(){return this.el_},e.prototype.createEl=function(e,t,n){return U(e,t,n)},e.prototype.localize=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e,r=this.player_.language&&this.player_.language(),i=this.player_.languages&&this.player_.languages(),a=i&&i[r],s=r&&r.split("-")[0],o=i&&i[s],u=n;return a&&a[e]?u=a[e]:o&&o[e]&&(u=o[e]),t&&(u=u.replace(/\{(\d+)\}/g,(function(e,n){var r=t[n-1],i=r;return void 0===r&&(i=e),i}))),u},e.prototype.contentEl=function(){return this.contentEl_||this.el_},e.prototype.id=function(){return this.id_},e.prototype.name=function(){return this.name_},e.prototype.children=function(){return this.children_},e.prototype.getChildById=function(e){return this.childIndex_[e]},e.prototype.getChild=function(e){if(e)return e=Xe(e),this.childNameIndex_[e]},e.prototype.addChild=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.children_.length,i=void 0,a=void 0;if("string"==typeof t){a=Xe(t);var s=n.componentClass||a;n.name=a;var o=e.getComponent(s);if(!o)throw new Error("Component "+s+" does not exist");if("function"!=typeof o)return null;i=new o(this.player_||this,n)}else i=t;if(this.children_.splice(r,0,i),"function"==typeof i.id&&(this.childIndex_[i.id()]=i),(a=a||i.name&&Xe(i.name()))&&(this.childNameIndex_[a]=i),"function"==typeof i.el&&i.el()){var u=this.contentEl().children[r]||null;this.contentEl().insertBefore(i.el(),u)}return i},e.prototype.removeChild=function(e){if("string"==typeof e&&(e=this.getChild(e)),e&&this.children_){for(var t=!1,n=this.children_.length-1;n>=0;n--)if(this.children_[n]===e){t=!0,this.children_.splice(n,1);break}if(t){this.childIndex_[e.id()]=null,this.childNameIndex_[e.name()]=null;var r=e.el();r&&r.parentNode===this.contentEl()&&this.contentEl().removeChild(e.el())}}},e.prototype.initChildren=function(){var t=this,n=this.options_.children;if(n){var r=this.options_,i=function(e){var n=e.name,i=e.opts;if(void 0!==r[n]&&(i=r[n]),!1!==i){!0===i&&(i={}),i.playerOptions=t.options_.playerOptions;var a=t.addChild(n,i);a&&(t[n]=a)}},a=void 0,s=e.getComponent("Tech");(a=Array.isArray(n)?n:Object.keys(n)).concat(Object.keys(this.options_).filter((function(e){return!a.some((function(t){return"string"==typeof t?e===t:e===t.name}))}))).map((function(e){var r=void 0,i=void 0;return"string"==typeof e?i=n[r=e]||t.options_[r]||{}:(r=e.name,i=e),{name:r,opts:i}})).filter((function(t){var n=e.getComponent(t.opts.componentClass||Xe(t.name));return n&&!s.isTech(n)})).forEach(i)}},e.prototype.buildCSSClass=function(){return""},e.prototype.ready=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e)return this.isReady_?void(t?e.call(this):this.setTimeout(e,1)):(this.readyQueue_=this.readyQueue_||[],void this.readyQueue_.push(e))},e.prototype.triggerReady=function(){this.isReady_=!0,this.setTimeout((function(){var e=this.readyQueue_;this.readyQueue_=[],e&&e.length>0&&e.forEach((function(e){e.call(this)}),this),this.trigger("ready")}),1)},e.prototype.$=function(e,t){return oe(e,t||this.contentEl())},e.prototype.$$=function(e,t){return ue(e,t||this.contentEl())},e.prototype.hasClass=function(e){return B(this.el_,e)},e.prototype.addClass=function(e){V(this.el_,e)},e.prototype.removeClass=function(e){q(this.el_,e)},e.prototype.toggleClass=function(e,t){H(this.el_,e,t)},e.prototype.show=function(){this.removeClass("vjs-hidden")},e.prototype.hide=function(){this.addClass("vjs-hidden")},e.prototype.lockShowing=function(){this.addClass("vjs-lock-showing")},e.prototype.unlockShowing=function(){this.removeClass("vjs-lock-showing")},e.prototype.getAttribute=function(e){return G(this.el_,e)},e.prototype.setAttribute=function(e,t){K(this.el_,e,t)},e.prototype.removeAttribute=function(e){X(this.el_,e)},e.prototype.width=function(e,t){return this.dimension("width",e,t)},e.prototype.height=function(e,t){return this.dimension("height",e,t)},e.prototype.dimensions=function(e,t){this.width(e,!0),this.height(t)},e.prototype.dimension=function(e,t,n){if(void 0!==t)return null!==t&&t==t||(t=0),-1!==(""+t).indexOf("%")||-1!==(""+t).indexOf("px")?this.el_.style[e]=t:this.el_.style[e]="auto"===t?"":t+"px",void(n||this.trigger("componentresize"));if(!this.el_)return 0;var r=this.el_.style[e],i=r.indexOf("px");return-1!==i?parseInt(r.slice(0,i),10):parseInt(this.el_["offset"+Xe(e)],10)},e.prototype.currentDimension=function(e){var t=0;if("width"!==e&&"height"!==e)throw new Error("currentDimension only accepts width or height value");if("function"==typeof i.getComputedStyle){var n=i.getComputedStyle(this.el_);t=n.getPropertyValue(e)||n[e]}if(0===(t=parseFloat(t))){var r="offset"+Xe(e);t=this.el_[r]}return t},e.prototype.currentDimensions=function(){return{width:this.currentDimension("width"),height:this.currentDimension("height")}},e.prototype.currentWidth=function(){return this.currentDimension("width")},e.prototype.currentHeight=function(){return this.currentDimension("height")},e.prototype.focus=function(){this.el_.focus()},e.prototype.blur=function(){this.el_.blur()},e.prototype.emitTapEvents=function(){var e=0,t=null,n=10,r=200,i=void 0;this.on("touchstart",(function(n){1===n.touches.length&&(t={pageX:n.touches[0].pageX,pageY:n.touches[0].pageY},e=(new Date).getTime(),i=!0)})),this.on("touchmove",(function(e){if(e.touches.length>1)i=!1;else if(t){var r=e.touches[0].pageX-t.pageX,a=e.touches[0].pageY-t.pageY;Math.sqrt(r*r+a*a)>n&&(i=!1)}}));var a=function(){i=!1};this.on("touchleave",a),this.on("touchcancel",a),this.on("touchend",(function(n){t=null,!0===i&&(new Date).getTime()-e<r&&(n.preventDefault(),this.trigger("tap"))}))},e.prototype.enableTouchActivity=function(){if(this.player()&&this.player().reportUserActivity){var e=Me(this.player(),this.player().reportUserActivity),t=void 0;this.on("touchstart",(function(){e(),this.clearInterval(t),t=this.setInterval(e,250)}));var n=function(n){e(),this.clearInterval(t)};this.on("touchmove",e),this.on("touchend",n),this.on("touchcancel",n)}},e.prototype.setTimeout=function(e,t){var n,r,a=this;return e=Me(this,e),n=i.setTimeout((function(){a.off("dispose",r),e()}),t),(r=function(){return a.clearTimeout(n)}).guid="vjs-timeout-"+n,this.on("dispose",r),n},e.prototype.clearTimeout=function(e){i.clearTimeout(e);var t=function(){};return t.guid="vjs-timeout-"+e,this.off("dispose",t),e},e.prototype.setInterval=function(e,t){var n=this;e=Me(this,e);var r=i.setInterval(e,t),a=function(){return n.clearInterval(r)};return a.guid="vjs-interval-"+r,this.on("dispose",a),r},e.prototype.clearInterval=function(e){i.clearInterval(e);var t=function(){};return t.guid="vjs-interval-"+e,this.off("dispose",t),e},e.prototype.requestAnimationFrame=function(e){var t,n,r=this;return this.supportsRaf_?(e=Me(this,e),t=i.requestAnimationFrame((function(){r.off("dispose",n),e()})),(n=function(){return r.cancelAnimationFrame(t)}).guid="vjs-raf-"+t,this.on("dispose",n),t):this.setTimeout(e,1e3/60)},e.prototype.cancelAnimationFrame=function(e){if(this.supportsRaf_){i.cancelAnimationFrame(e);var t=function(){};return t.guid="vjs-raf-"+e,this.off("dispose",t),e}return this.clearTimeout(e)},e.registerComponent=function(t,n){if("string"!=typeof t||!t)throw new Error('Illegal component name, "'+t+'"; must be a non-empty string.');var r=e.getComponent("Tech"),i=r&&r.isTech(n),a=e===n||e.prototype.isPrototypeOf(n.prototype);if(i||!a){var s=void 0;throw s=i?"techs must be registered using Tech.registerTech()":"must be a Component subclass",new Error('Illegal component, "'+t+'"; '+s+".")}t=Xe(t),e.components_||(e.components_={});var o=e.getComponent("Player");if("Player"===t&&o&&o.players){var u=o.players,c=Object.keys(u);if(u&&c.length>0&&c.map((function(e){return u[e]})).every(Boolean))throw new Error("Can not register Player component after player has been created.")}return e.components_[t]=n,n},e.getComponent=function(t){if(t)return t=Xe(t),e.components_&&e.components_[t]?e.components_[t]:void 0},e}();Je.prototype.supportsRaf_="function"==typeof i.requestAnimationFrame&&"function"==typeof i.cancelAnimationFrame,Je.registerComponent("Component",Je);var Ze,et=i.navigator&&i.navigator.userAgent||"",tt=/AppleWebKit\/([\d.]+)/i.exec(et),nt=tt?parseFloat(tt.pop()):null,rt=/iPad/i.test(et),it=/iPhone/i.test(et)&&!rt,at=/iPod/i.test(et),st=it||rt||at,ot=(Ze=et.match(/OS (\d+)_/i))&&Ze[1]?Ze[1]:null,ut=/Android/i.test(et),ct=function(){var e=et.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!e)return null;var t=e[1]&&parseFloat(e[1]),n=e[2]&&parseFloat(e[2]);return t&&n?parseFloat(e[1]+"."+e[2]):t||null}(),lt=ut&&ct<5&&nt<537,dt=/Firefox/i.test(et),ht=/Edge/i.test(et),pt=!ht&&(/Chrome/i.test(et)||/CriOS/i.test(et)),ft=function(){var e=et.match(/(Chrome|CriOS)\/(\d+)/);return e&&e[2]?parseFloat(e[2]):null}(),mt=function(){var e=/MSIE\s(\d+)\.\d/.exec(et),t=e&&parseFloat(e[1]);return!t&&/Trident\/7.0/i.test(et)&&/rv:11.0/.test(et)&&(t=11),t}(),gt=/Safari/i.test(et)&&!pt&&!ut&&!ht,vt=(gt||st)&&!pt,yt=D()&&("ontouchstart"in i||i.navigator.maxTouchPoints||i.DocumentTouch&&i.document instanceof i.DocumentTouch),bt=Object.freeze({IS_IPAD:rt,IS_IPHONE:it,IS_IPOD:at,IS_IOS:st,IOS_VERSION:ot,IS_ANDROID:ut,ANDROID_VERSION:ct,IS_NATIVE_ANDROID:lt,IS_FIREFOX:dt,IS_EDGE:ht,IS_CHROME:pt,CHROME_VERSION:ft,IE_VERSION:mt,IS_SAFARI:gt,IS_ANY_SAFARI:vt,TOUCH_ENABLED:yt});function _t(e,t,n){if("number"!=typeof t||t<0||t>n)throw new Error("Failed to execute '"+e+"' on 'TimeRanges': The index provided ("+t+") is non-numeric or out of bounds (0-"+n+").")}function Tt(e,t,n,r){return _t(e,r,n.length-1),n[r][t]}function wt(e){return void 0===e||0===e.length?{length:0,start:function(){throw new Error("This TimeRanges object is empty")},end:function(){throw new Error("This TimeRanges object is empty")}}:{length:e.length,start:Tt.bind(null,"start",0,e),end:Tt.bind(null,"end",1,e)}}function St(e,t){return Array.isArray(e)?wt(e):void 0===e||void 0===t?wt():wt([[e,t]])}function Ct(e,t){var n=0,r=void 0,i=void 0;if(!t)return 0;e&&e.length||(e=St(0,0));for(var a=0;a<e.length;a++)r=e.start(a),(i=e.end(a))>t&&(i=t),n+=i-r;return n/t}for(var Et={},kt=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],Ot=kt[0],xt=void 0,At=0;At<kt.length;At++)if(kt[At][1]in c){xt=kt[At];break}if(xt)for(var Pt=0;Pt<xt.length;Pt++)Et[Ot[Pt]]=xt[Pt];function It(e){if(e instanceof It)return e;"number"==typeof e?this.code=e:"string"==typeof e?this.message=e:O(e)&&("number"==typeof e.code&&(this.code=e.code),k(this,e)),this.message||(this.message=It.defaultMessages[this.code]||"")}It.prototype.code=0,It.prototype.message="",It.prototype.status=null,It.errorTypes=["MEDIA_ERR_CUSTOM","MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED","MEDIA_ERR_ENCRYPTED"],It.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail part-way.",3:"The media playback was aborted due to a corruption problem or because the media used features your browser did not support.",4:"The media could not be loaded, either because the server or network failed or because the format is not supported.",5:"The media is encrypted and we do not have the keys to decrypt it."};for(var Lt=0;Lt<It.errorTypes.length;Lt++)It[It.errorTypes[Lt]]=Lt,It.prototype[It.errorTypes[Lt]]=Lt;var Mt=Dt;function Dt(e,t){var n,r=null;try{n=JSON.parse(e,t)}catch(e){r=e}return[r,n]}function Rt(e){return null!=e&&"function"==typeof e.then}function Nt(e){Rt(e)&&e.then(null,(function(e){}))}var jt=function(e){return["kind","label","language","id","inBandMetadataTrackDispatchType","mode","src"].reduce((function(t,n,r){return e[n]&&(t[n]=e[n]),t}),{cues:e.cues&&Array.prototype.map.call(e.cues,(function(e){return{startTime:e.startTime,endTime:e.endTime,text:e.text,id:e.id}}))})},Ut=function(e){var t=e.$$("track"),n=Array.prototype.map.call(t,(function(e){return e.track}));return Array.prototype.map.call(t,(function(e){var t=jt(e.track);return e.src&&(t.src=e.src),t})).concat(Array.prototype.filter.call(e.textTracks(),(function(e){return-1===n.indexOf(e)})).map(jt))},Ft=function(e,t){return e.forEach((function(e){var n=t.addRemoteTextTrack(e).track;!e.src&&e.cues&&e.cues.forEach((function(e){return n.addCue(e)}))})),t.textTracks()},$t={textTracksToJson:Ut,jsonToTextTracks:Ft,trackToJson_:jt},Bt="vjs-modal-dialog",Vt=27,qt=function(e){function t(n,r){y(this,t);var i=_(this,e.call(this,n,r));return i.opened_=i.hasBeenOpened_=i.hasBeenFilled_=!1,i.closeable(!i.options_.uncloseable),i.content(i.options_.content),i.contentEl_=U("div",{className:Bt+"-content"},{role:"document"}),i.descEl_=U("p",{className:Bt+"-description vjs-control-text",id:i.el().getAttribute("aria-describedby")}),F(i.descEl_,i.description()),i.el_.appendChild(i.descEl_),i.el_.appendChild(i.contentEl_),i}return b(t,e),t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:this.buildCSSClass(),tabIndex:-1},{"aria-describedby":this.id()+"_description","aria-hidden":"true","aria-label":this.label(),role:"dialog"})},t.prototype.dispose=function(){this.contentEl_=null,this.descEl_=null,this.previouslyActiveEl_=null,e.prototype.dispose.call(this)},t.prototype.buildCSSClass=function(){return Bt+" vjs-hidden "+e.prototype.buildCSSClass.call(this)},t.prototype.handleKeyPress=function(e){e.which===Vt&&this.closeable()&&this.close()},t.prototype.label=function(){return this.localize(this.options_.label||"Modal Window")},t.prototype.description=function(){var e=this.options_.description||this.localize("This is a modal window.");return this.closeable()&&(e+=" "+this.localize("This modal can be closed by pressing the Escape key or activating the close button.")),e},t.prototype.open=function(){if(!this.opened_){var e=this.player();this.trigger("beforemodalopen"),this.opened_=!0,(this.options_.fillAlways||!this.hasBeenOpened_&&!this.hasBeenFilled_)&&this.fill(),this.wasPlaying_=!e.paused(),this.options_.pauseOnOpen&&this.wasPlaying_&&e.pause(),this.closeable()&&this.on(this.el_.ownerDocument,"keydown",Me(this,this.handleKeyPress)),this.hadControls_=e.controls(),e.controls(!1),this.show(),this.conditionalFocus_(),this.el().setAttribute("aria-hidden","false"),this.trigger("modalopen"),this.hasBeenOpened_=!0}},t.prototype.opened=function(e){return"boolean"==typeof e&&this[e?"open":"close"](),this.opened_},t.prototype.close=function(){if(this.opened_){var e=this.player();this.trigger("beforemodalclose"),this.opened_=!1,this.wasPlaying_&&this.options_.pauseOnOpen&&e.play(),this.closeable()&&this.off(this.el_.ownerDocument,"keydown",Me(this,this.handleKeyPress)),this.hadControls_&&e.controls(!0),this.hide(),this.el().setAttribute("aria-hidden","true"),this.trigger("modalclose"),this.conditionalBlur_(),this.options_.temporary&&this.dispose()}},t.prototype.closeable=function(e){if("boolean"==typeof e){var t=this.closeable_=!!e,n=this.getChild("closeButton");if(t&&!n){var r=this.contentEl_;this.contentEl_=this.el_,n=this.addChild("closeButton",{controlText:"Close Modal Dialog"}),this.contentEl_=r,this.on(n,"close",this.close)}!t&&n&&(this.off(n,"close",this.close),this.removeChild(n),n.dispose())}return this.closeable_},t.prototype.fill=function(){this.fillWith(this.content())},t.prototype.fillWith=function(e){var t=this.contentEl(),n=t.parentNode,r=t.nextSibling;this.trigger("beforemodalfill"),this.hasBeenFilled_=!0,n.removeChild(t),this.empty(),ae(t,e),this.trigger("modalfill"),r?n.insertBefore(t,r):n.appendChild(t);var i=this.getChild("closeButton");i&&n.appendChild(i.el_)},t.prototype.empty=function(){this.trigger("beforemodalempty"),ne(this.contentEl()),this.trigger("modalempty")},t.prototype.content=function(e){return void 0!==e&&(this.content_=e),this.content_},t.prototype.conditionalFocus_=function(){var e=c.activeElement,t=this.player_.el_;this.previouslyActiveEl_=null,(t.contains(e)||t===e)&&(this.previouslyActiveEl_=e,this.focus(),this.on(c,"keydown",this.handleKeyDown))},t.prototype.conditionalBlur_=function(){this.previouslyActiveEl_&&(this.previouslyActiveEl_.focus(),this.previouslyActiveEl_=null),this.off(c,"keydown",this.handleKeyDown)},t.prototype.handleKeyDown=function(e){if(9===e.which){for(var t=this.focusableEls_(),n=this.el_.querySelector(":focus"),r=void 0,i=0;i<t.length;i++)if(n===t[i]){r=i;break}c.activeElement===this.el_&&(r=0),e.shiftKey&&0===r?(t[t.length-1].focus(),e.preventDefault()):e.shiftKey||r!==t.length-1||(t[0].focus(),e.preventDefault())}},t.prototype.focusableEls_=function(){var e=this.el_.querySelectorAll("*");return Array.prototype.filter.call(e,(function(e){return(e instanceof i.HTMLAnchorElement||e instanceof i.HTMLAreaElement)&&e.hasAttribute("href")||(e instanceof i.HTMLInputElement||e instanceof i.HTMLSelectElement||e instanceof i.HTMLTextAreaElement||e instanceof i.HTMLButtonElement)&&!e.hasAttribute("disabled")||e instanceof i.HTMLIFrameElement||e instanceof i.HTMLObjectElement||e instanceof i.HTMLEmbedElement||e.hasAttribute("tabindex")&&-1!==e.getAttribute("tabindex")||e.hasAttribute("contenteditable")}))},t}(Je);qt.prototype.options_={pauseOnOpen:!0,temporary:!0},Je.registerComponent("ModalDialog",qt);var Ht=function(e){function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];y(this,t);var r=_(this,e.call(this));r.tracks_=[],Object.defineProperty(r,"length",{get:function(){return this.tracks_.length}});for(var i=0;i<n.length;i++)r.addTrack(n[i]);return r}return b(t,e),t.prototype.addTrack=function(e){var t=this.tracks_.length;""+t in this||Object.defineProperty(this,t,{get:function(){return this.tracks_[t]}}),-1===this.tracks_.indexOf(e)&&(this.tracks_.push(e),this.trigger({track:e,type:"addtrack"}))},t.prototype.removeTrack=function(e){for(var t=void 0,n=0,r=this.length;n<r;n++)if(this[n]===e){(t=this[n]).off&&t.off(),this.tracks_.splice(n,1);break}t&&this.trigger({track:t,type:"removetrack"})},t.prototype.getTrackById=function(e){for(var t=null,n=0,r=this.length;n<r;n++){var i=this[n];if(i.id===e){t=i;break}}return t},t}(Ne);for(var Wt in Ht.prototype.allowedEvents_={change:"change",addtrack:"addtrack",removetrack:"removetrack"},Ht.prototype.allowedEvents_)Ht.prototype["on"+Wt]=null;var zt=function(e,t){for(var n=0;n<e.length;n++)Object.keys(e[n]).length&&t.id!==e[n].id&&(e[n].enabled=!1)},Gt=function(e){function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];y(this,t);for(var r=n.length-1;r>=0;r--)if(n[r].enabled){zt(n,n[r]);break}var i=_(this,e.call(this,n));return i.changing_=!1,i}return b(t,e),t.prototype.addTrack=function(t){var n=this;t.enabled&&zt(this,t),e.prototype.addTrack.call(this,t),t.addEventListener&&t.addEventListener("enabledchange",(function(){n.changing_||(n.changing_=!0,zt(n,t),n.changing_=!1,n.trigger("change"))}))},t}(Ht),Kt=function(e,t){for(var n=0;n<e.length;n++)Object.keys(e[n]).length&&t.id!==e[n].id&&(e[n].selected=!1)},Xt=function(e){function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];y(this,t);for(var r=n.length-1;r>=0;r--)if(n[r].selected){Kt(n,n[r]);break}var i=_(this,e.call(this,n));return i.changing_=!1,Object.defineProperty(i,"selectedIndex",{get:function(){for(var e=0;e<this.length;e++)if(this[e].selected)return e;return-1},set:function(){}}),i}return b(t,e),t.prototype.addTrack=function(t){var n=this;t.selected&&Kt(this,t),e.prototype.addTrack.call(this,t),t.addEventListener&&t.addEventListener("selectedchange",(function(){n.changing_||(n.changing_=!0,Kt(n,t),n.changing_=!1,n.trigger("change"))}))},t}(Ht),Yt=function(e){function t(){return y(this,t),_(this,e.apply(this,arguments))}return b(t,e),t.prototype.addTrack=function(t){e.prototype.addTrack.call(this,t),t.addEventListener("modechange",Me(this,(function(){this.queueTrigger("change")}))),-1===["metadata","chapters"].indexOf(t.kind)&&t.addEventListener("modechange",Me(this,(function(){this.trigger("selectedlanguagechange")})))},t}(Ht),Qt=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];y(this,e),this.trackElements_=[],Object.defineProperty(this,"length",{get:function(){return this.trackElements_.length}});for(var n=0,r=t.length;n<r;n++)this.addTrackElement_(t[n])}return e.prototype.addTrackElement_=function(e){var t=this.trackElements_.length;""+t in this||Object.defineProperty(this,t,{get:function(){return this.trackElements_[t]}}),-1===this.trackElements_.indexOf(e)&&this.trackElements_.push(e)},e.prototype.getTrackElementByTrack_=function(e){for(var t=void 0,n=0,r=this.trackElements_.length;n<r;n++)if(e===this.trackElements_[n].track){t=this.trackElements_[n];break}return t},e.prototype.removeTrackElement_=function(e){for(var t=0,n=this.trackElements_.length;t<n;t++)if(e===this.trackElements_[t]){this.trackElements_.splice(t,1);break}},e}(),Jt=function(){function e(t){y(this,e),e.prototype.setCues_.call(this,t),Object.defineProperty(this,"length",{get:function(){return this.length_}})}return e.prototype.setCues_=function(e){var t=this.length||0,n=0,r=e.length;this.cues_=e,this.length_=e.length;var i=function(e){""+e in this||Object.defineProperty(this,""+e,{get:function(){return this.cues_[e]}})};if(t<r)for(n=t;n<r;n++)i.call(this,n)},e.prototype.getCueById=function(e){for(var t=null,n=0,r=this.length;n<r;n++){var i=this[n];if(i.id===e){t=i;break}}return t},e}(),Zt={alternative:"alternative",captions:"captions",main:"main",sign:"sign",subtitles:"subtitles",commentary:"commentary"},en={alternative:"alternative",descriptions:"descriptions",main:"main","main-desc":"main-desc",translation:"translation",commentary:"commentary"},tn={subtitles:"subtitles",captions:"captions",descriptions:"descriptions",chapters:"chapters",metadata:"metadata"},nn={disabled:"disabled",hidden:"hidden",showing:"showing"},rn=function(e){function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};y(this,t);var r=_(this,e.call(this)),i={id:n.id||"vjs_track_"+de(),kind:n.kind||"",label:n.label||"",language:n.language||""},a=function(e){Object.defineProperty(r,e,{get:function(){return i[e]},set:function(){}})};for(var s in i)a(s);return r}return b(t,e),t}(Ne),an=function(e){var t=["protocol","hostname","port","pathname","search","hash","host"],n=c.createElement("a");n.href=e;var r=""===n.host&&"file:"!==n.protocol,a=void 0;r&&((a=c.createElement("div")).innerHTML='<a href="'+e+'"></a>',n=a.firstChild,a.setAttribute("style","display:none; position:absolute;"),c.body.appendChild(a));for(var s={},o=0;o<t.length;o++)s[t[o]]=n[t[o]];return"http:"===s.protocol&&(s.host=s.host.replace(/:80$/,"")),"https:"===s.protocol&&(s.host=s.host.replace(/:443$/,"")),s.protocol||(s.protocol=i.location.protocol),r&&c.body.removeChild(a),s},sn=function(e){if(!e.match(/^https?:\/\//)){var t=c.createElement("div");t.innerHTML='<a href="'+e+'">x</a>',e=t.firstChild.href}return e},on=function(e){if("string"==typeof e){var t=/^(\/?)([\s\S]*?)((?:\.{1,2}|[^\/]+?)(\.([^\.\/\?]+)))(?:[\/]*|[\?].*)$/i.exec(e);if(t)return t.pop().toLowerCase()}return""},un=function(e){var t=i.location,n=an(e);return(":"===n.protocol?t.protocol:n.protocol)+n.host!==t.protocol+t.host},cn=Object.freeze({parseUrl:an,getAbsoluteURL:sn,getFileExtension:on,isCrossOrigin:un}),ln=hn,dn=Object.prototype.toString;function hn(e){var t=dn.call(e);return"[object Function]"===t||"function"==typeof e&&"[object RegExp]"!==t||"undefined"!=typeof window&&(e===window.setTimeout||e===window.alert||e===window.confirm||e===window.prompt)}var pn=n((function(e,t){function n(e){return e.replace(/^\s*|\s*$/g,"")}(t=e.exports=n).left=function(e){return e.replace(/^\s*/,"")},t.right=function(e){return e.replace(/\s*$/,"")}})),fn=(pn.left,pn.right,vn),mn=Object.prototype.toString,gn=Object.prototype.hasOwnProperty;function vn(e,t,n){if(!ln(t))throw new TypeError("iterator must be a function");arguments.length<3&&(n=this),"[object Array]"===mn.call(e)?yn(e,t,n):"string"==typeof e?bn(e,t,n):_n(e,t,n)}function yn(e,t,n){for(var r=0,i=e.length;r<i;r++)gn.call(e,r)&&t.call(n,e[r],r,e)}function bn(e,t,n){for(var r=0,i=e.length;r<i;r++)t.call(n,e.charAt(r),r,e)}function _n(e,t,n){for(var r in e)gn.call(e,r)&&t.call(n,e[r],r,e)}var Tn=function(e){return"[object Array]"===Object.prototype.toString.call(e)},wn=function(e){if(!e)return{};var t={};return fn(pn(e).split("\n"),(function(e){var n=e.indexOf(":"),r=pn(e.slice(0,n)).toLowerCase(),i=pn(e.slice(n+1));void 0===t[r]?t[r]=i:Tn(t[r])?t[r].push(i):t[r]=[t[r],i]})),t},Sn=En,Cn=Object.prototype.hasOwnProperty;function En(){for(var e={},t=0;t<arguments.length;t++){var n=arguments[t];for(var r in n)Cn.call(n,r)&&(e[r]=n[r])}return e}var kn=Pn;function On(e,t){for(var n=0;n<e.length;n++)t(e[n])}function xn(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}function An(e,t,n){var r=e;return ln(t)?(n=t,"string"==typeof e&&(r={uri:e})):r=Sn(t,{uri:e}),r.callback=n,r}function Pn(e,t,n){return In(t=An(e,t,n))}function In(e){if(void 0===e.callback)throw new Error("callback argument missing");var t=!1,n=function(n,r,i){t||(t=!0,e.callback(n,r,i))};function r(){4===c.readyState&&setTimeout(s,0)}function i(){var e=void 0;if(e=c.response?c.response:c.responseText||Ln(c),g)try{e=JSON.parse(e)}catch(e){}return e}function a(e){return clearTimeout(l),e instanceof Error||(e=new Error(""+(e||"Unknown XMLHttpRequest Error"))),e.statusCode=0,n(e,v)}function s(){if(!u){var t;clearTimeout(l),t=e.useXDR&&void 0===c.status?200:1223===c.status?204:c.status;var r=v,a=null;return 0!==t?(r={body:i(),statusCode:t,method:h,headers:{},url:d,rawRequest:c},c.getAllResponseHeaders&&(r.headers=wn(c.getAllResponseHeaders()))):a=new Error("Internal XMLHttpRequest Error"),n(a,r,r.body)}}var o,u,c=e.xhr||null;c||(c=e.cors||e.useXDR?new Pn.XDomainRequest:new Pn.XMLHttpRequest);var l,d=c.url=e.uri||e.url,h=c.method=e.method||"GET",p=e.body||e.data,f=c.headers=e.headers||{},m=!!e.sync,g=!1,v={body:void 0,headers:{},statusCode:0,method:h,url:d,rawRequest:c};if("json"in e&&!1!==e.json&&(g=!0,f.accept||f.Accept||(f.Accept="application/json"),"GET"!==h&&"HEAD"!==h&&(f["content-type"]||f["Content-Type"]||(f["Content-Type"]="application/json"),p=JSON.stringify(!0===e.json?p:e.json))),c.onreadystatechange=r,c.onload=s,c.onerror=a,c.onprogress=function(){},c.onabort=function(){u=!0},c.ontimeout=a,c.open(h,d,!m,e.username,e.password),m||(c.withCredentials=!!e.withCredentials),!m&&e.timeout>0&&(l=setTimeout((function(){if(!u){u=!0,c.abort("timeout");var e=new Error("XMLHttpRequest timeout");e.code="ETIMEDOUT",a(e)}}),e.timeout)),c.setRequestHeader)for(o in f)f.hasOwnProperty(o)&&c.setRequestHeader(o,f[o]);else if(e.headers&&!xn(e.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in e&&(c.responseType=e.responseType),"beforeSend"in e&&"function"==typeof e.beforeSend&&e.beforeSend(c),c.send(p||null),c}function Ln(e){if("document"===e.responseType)return e.responseXML;var t=e.responseXML&&"parsererror"===e.responseXML.documentElement.nodeName;return""!==e.responseType||t?null:e.responseXML}function Mn(){}Pn.XMLHttpRequest=i.XMLHttpRequest||Mn,Pn.XDomainRequest="withCredentials"in new Pn.XMLHttpRequest?Pn.XMLHttpRequest:i.XDomainRequest,On(["get","put","post","patch","head","delete"],(function(e){Pn["delete"===e?"del":e]=function(t,n,r){return(n=An(t,n,r)).method=e.toUpperCase(),In(n)}}));var Dn=function(e,t){var n=new i.WebVTT.Parser(i,i.vttjs,i.WebVTT.StringDecoder()),r=[];n.oncue=function(e){t.addCue(e)},n.onparsingerror=function(e){r.push(e)},n.onflush=function(){t.trigger({type:"loadeddata",target:t})},n.parse(e),r.length>0&&(i.console&&i.console.groupCollapsed&&i.console.groupCollapsed("Text Track parsing errors for "+t.src),r.forEach((function(e){return f.error(e)})),i.console&&i.console.groupEnd&&i.console.groupEnd()),n.flush()},Rn=function(e,t){var n={uri:e},r=un(e);r&&(n.cors=r),kn(n,Me(this,(function(e,n,r){if(e)return f.error(e,n);if(t.loaded_=!0,"function"!=typeof i.WebVTT){if(t.tech_){var a=function(){return Dn(r,t)};t.tech_.on("vttjsloaded",a),t.tech_.on("vttjserror",(function(){f.error("vttjs failed to load, stopping trying to process "+t.src),t.tech_.off("vttjsloaded",a)}))}}else Dn(r,t)})))},Nn=function(e){function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(y(this,t),!n.tech)throw new Error("A tech was not provided.");var r=Qe(n,{kind:tn[n.kind]||"subtitles",language:n.language||n.srclang||""}),i=nn[r.mode]||"disabled",a=r.default;"metadata"!==r.kind&&"chapters"!==r.kind||(i="hidden");var s=_(this,e.call(this,r));s.tech_=r.tech,s.cues_=[],s.activeCues_=[];var o=new Jt(s.cues_),u=new Jt(s.activeCues_),c=!1,l=Me(s,(function(){this.activeCues=this.activeCues,c&&(this.trigger("cuechange"),c=!1)}));return"disabled"!==i&&s.tech_.ready((function(){s.tech_.on("timeupdate",l)}),!0),Object.defineProperties(s,{default:{get:function(){return a},set:function(){}},mode:{get:function(){return i},set:function(e){var t=this;nn[e]&&("disabled"!==(i=e)?this.tech_.ready((function(){t.tech_.on("timeupdate",l)}),!0):this.tech_.off("timeupdate",l),this.trigger("modechange"))}},cues:{get:function(){return this.loaded_?o:null},set:function(){}},activeCues:{get:function(){if(!this.loaded_)return null;if(0===this.cues.length)return u;for(var e=this.tech_.currentTime(),t=[],n=0,r=this.cues.length;n<r;n++){var i=this.cues[n];(i.startTime<=e&&i.endTime>=e||i.startTime===i.endTime&&i.startTime<=e&&i.startTime+.5>=e)&&t.push(i)}if(c=!1,t.length!==this.activeCues_.length)c=!0;else for(var a=0;a<t.length;a++)-1===this.activeCues_.indexOf(t[a])&&(c=!0);return this.activeCues_=t,u.setCues_(this.activeCues_),u},set:function(){}}}),r.src?(s.src=r.src,Rn(r.src,s)):s.loaded_=!0,s}return b(t,e),t.prototype.addCue=function(e){var t=e;if(i.vttjs&&!(e instanceof i.vttjs.VTTCue)){for(var n in t=new i.vttjs.VTTCue(e.startTime,e.endTime,e.text),e)n in t||(t[n]=e[n]);t.id=e.id,t.originalCue_=e}for(var r=this.tech_.textTracks(),a=0;a<r.length;a++)r[a]!==this&&r[a].removeCue(t);this.cues_.push(t),this.cues.setCues_(this.cues_)},t.prototype.removeCue=function(e){for(var t=this.cues_.length;t--;){var n=this.cues_[t];if(n===e||n.originalCue_&&n.originalCue_===e){this.cues_.splice(t,1),this.cues.setCues_(this.cues_);break}}},t}(rn);Nn.prototype.allowedEvents_={cuechange:"cuechange"};var jn=function(e){function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};y(this,t);var r=Qe(n,{kind:en[n.kind]||""}),i=_(this,e.call(this,r)),a=!1;return Object.defineProperty(i,"enabled",{get:function(){return a},set:function(e){"boolean"==typeof e&&e!==a&&(a=e,this.trigger("enabledchange"))}}),r.enabled&&(i.enabled=r.enabled),i.loaded_=!0,i}return b(t,e),t}(rn),Un=function(e){function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};y(this,t);var r=Qe(n,{kind:Zt[n.kind]||""}),i=_(this,e.call(this,r)),a=!1;return Object.defineProperty(i,"selected",{get:function(){return a},set:function(e){"boolean"==typeof e&&e!==a&&(a=e,this.trigger("selectedchange"))}}),r.selected&&(i.selected=r.selected),i}return b(t,e),t}(rn),Fn=0,$n=1,Bn=2,Vn=3,qn=function(e){function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};y(this,t);var r=_(this,e.call(this)),i=void 0,a=new Nn(n);return r.kind=a.kind,r.src=a.src,r.srclang=a.language,r.label=a.label,r.default=a.default,Object.defineProperties(r,{readyState:{get:function(){return i}},track:{get:function(){return a}}}),i=Fn,a.addEventListener("loadeddata",(function(){i=Bn,r.trigger({type:"load",target:r})})),r}return b(t,e),t}(Ne);qn.prototype.allowedEvents_={load:"load"},qn.NONE=Fn,qn.LOADING=$n,qn.LOADED=Bn,qn.ERROR=Vn;var Hn={audio:{ListClass:Gt,TrackClass:jn,capitalName:"Audio"},video:{ListClass:Xt,TrackClass:Un,capitalName:"Video"},text:{ListClass:Yt,TrackClass:Nn,capitalName:"Text"}};Object.keys(Hn).forEach((function(e){Hn[e].getterName=e+"Tracks",Hn[e].privateName=e+"Tracks_"}));var Wn={remoteText:{ListClass:Yt,TrackClass:Nn,capitalName:"RemoteText",getterName:"remoteTextTracks",privateName:"remoteTextTracks_"},remoteTextEl:{ListClass:Qt,TrackClass:qn,capitalName:"RemoteTextTrackEls",getterName:"remoteTextTrackEls",privateName:"remoteTextTrackEls_"}},zn=Qe(Hn,Wn);Wn.names=Object.keys(Wn),Hn.names=Object.keys(Hn),zn.names=[].concat(Wn.names).concat(Hn.names);var Gn=Object.create||function(){function e(){}return function(t){if(1!==arguments.length)throw new Error("Object.create shim only accepts one parameter.");return e.prototype=t,new e}}();function Kn(e,t){this.name="ParsingError",this.code=e.code,this.message=t||e.message}function Xn(e){function t(e,t,n,r){return 3600*(0|e)+60*(0|t)+(0|n)+(0|r)/1e3}var n=e.match(/^(\d+):(\d{2})(:\d{2})?\.(\d{3})/);return n?n[3]?t(n[1],n[2],n[3].replace(":",""),n[4]):n[1]>59?t(n[1],n[2],0,n[4]):t(0,n[1],n[2],n[4]):null}function Yn(){this.values=Gn(null)}function Qn(e,t,n,r){var i=r?e.split(r):[e];for(var a in i)if("string"==typeof i[a]){var s=i[a].split(n);2===s.length&&t(s[0],s[1])}}function Jn(e,t,n){var r=e;function i(){var t=Xn(e);if(null===t)throw new Kn(Kn.Errors.BadTimeStamp,"Malformed timestamp: "+r);return e=e.replace(/^[^\sa-zA-Z-]+/,""),t}function a(e,t){var r=new Yn;Qn(e,(function(e,t){switch(e){case"region":for(var i=n.length-1;i>=0;i--)if(n[i].id===t){r.set(e,n[i].region);break}break;case"vertical":r.alt(e,t,["rl","lr"]);break;case"line":var a=t.split(","),s=a[0];r.integer(e,s),r.percent(e,s)&&r.set("snapToLines",!1),r.alt(e,s,["auto"]),2===a.length&&r.alt("lineAlign",a[1],["start","middle","end"]);break;case"position":a=t.split(","),r.percent(e,a[0]),2===a.length&&r.alt("positionAlign",a[1],["start","middle","end"]);break;case"size":r.percent(e,t);break;case"align":r.alt(e,t,["start","middle","end","left","right"])}}),/:/,/\s/),t.region=r.get("region",null),t.vertical=r.get("vertical",""),t.line=r.get("line","auto"),t.lineAlign=r.get("lineAlign","start"),t.snapToLines=r.get("snapToLines",!0),t.size=r.get("size",100),t.align=r.get("align","middle"),t.position=r.get("position",{start:0,left:0,middle:50,end:100,right:100},t.align),t.positionAlign=r.get("positionAlign",{start:"start",left:"start",middle:"middle",end:"end",right:"end"},t.align)}function s(){e=e.replace(/^\s+/,"")}if(s(),t.startTime=i(),s(),"--\x3e"!==e.substr(0,3))throw new Kn(Kn.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '--\x3e'): "+r);e=e.substr(3),s(),t.endTime=i(),s(),a(e,t)}Kn.prototype=Gn(Error.prototype),Kn.prototype.constructor=Kn,Kn.Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}},Yn.prototype={set:function(e,t){this.get(e)||""===t||(this.values[e]=t)},get:function(e,t,n){return n?this.has(e)?this.values[e]:t[n]:this.has(e)?this.values[e]:t},has:function(e){return e in this.values},alt:function(e,t,n){for(var r=0;r<n.length;++r)if(t===n[r]){this.set(e,t);break}},integer:function(e,t){/^-?\d+$/.test(t)&&this.set(e,parseInt(t,10))},percent:function(e,t){return!!(t.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&(t=parseFloat(t))>=0&&t<=100)&&(this.set(e,t),!0)}};var Zn={"&amp;":"&","&lt;":"<","&gt;":">","&lrm;":"‎","&rlm;":"‏","&nbsp;":" "},er={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"},tr={v:"title",lang:"lang"},nr={rt:"ruby"};function rr(e,t){function n(){if(!t)return null;function e(e){return t=t.substr(e.length),e}var n=t.match(/^([^<]*)(<[^>]*>?)?/);return e(n[1]?n[1]:n[2])}function r(e){return Zn[e]}function i(e){for(;p=e.match(/&(amp|lt|gt|lrm|rlm|nbsp);/);)e=e.replace(p[0],r);return e}function a(e,t){return!nr[t.localName]||nr[t.localName]===e.localName}function s(t,n){var r=er[t];if(!r)return null;var i=e.document.createElement(r);i.localName=r;var a=tr[t];return a&&n&&(i[a]=n.trim()),i}for(var o,u=e.document.createElement("div"),c=u,l=[];null!==(o=n());)if("<"!==o[0])c.appendChild(e.document.createTextNode(i(o)));else{if("/"===o[1]){l.length&&l[l.length-1]===o.substr(2).replace(">","")&&(l.pop(),c=c.parentNode);continue}var d,h=Xn(o.substr(1,o.length-2));if(h){d=e.document.createProcessingInstruction("timestamp",h),c.appendChild(d);continue}var p=o.match(/^<([^.\s/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/);if(!p)continue;if(!(d=s(p[1],p[3])))continue;if(!a(c,d))continue;p[2]&&(d.className=p[2].substr(1).replace("."," ")),l.push(p[1]),c.appendChild(d),c=d}return u}var ir=[[1470,1470],[1472,1472],[1475,1475],[1478,1478],[1488,1514],[1520,1524],[1544,1544],[1547,1547],[1549,1549],[1563,1563],[1566,1610],[1645,1647],[1649,1749],[1765,1766],[1774,1775],[1786,1805],[1807,1808],[1810,1839],[1869,1957],[1969,1969],[1984,2026],[2036,2037],[2042,2042],[2048,2069],[2074,2074],[2084,2084],[2088,2088],[2096,2110],[2112,2136],[2142,2142],[2208,2208],[2210,2220],[8207,8207],[64285,64285],[64287,64296],[64298,64310],[64312,64316],[64318,64318],[64320,64321],[64323,64324],[64326,64449],[64467,64829],[64848,64911],[64914,64967],[65008,65020],[65136,65140],[65142,65276],[67584,67589],[67592,67592],[67594,67637],[67639,67640],[67644,67644],[67647,67669],[67671,67679],[67840,67867],[67872,67897],[67903,67903],[67968,68023],[68030,68031],[68096,68096],[68112,68115],[68117,68119],[68121,68147],[68160,68167],[68176,68184],[68192,68223],[68352,68405],[68416,68437],[68440,68466],[68472,68479],[68608,68680],[126464,126467],[126469,126495],[126497,126498],[126500,126500],[126503,126503],[126505,126514],[126516,126519],[126521,126521],[126523,126523],[126530,126530],[126535,126535],[126537,126537],[126539,126539],[126541,126543],[126545,126546],[126548,126548],[126551,126551],[126553,126553],[126555,126555],[126557,126557],[126559,126559],[126561,126562],[126564,126564],[126567,126570],[126572,126578],[126580,126583],[126585,126588],[126590,126590],[126592,126601],[126603,126619],[126625,126627],[126629,126633],[126635,126651],[1114109,1114109]];function ar(e){for(var t=0;t<ir.length;t++){var n=ir[t];if(e>=n[0]&&e<=n[1])return!0}return!1}function sr(e){var t=[],n="";if(!e||!e.childNodes)return"ltr";function r(e,t){for(var n=t.childNodes.length-1;n>=0;n--)e.push(t.childNodes[n])}function i(e){if(!e||!e.length)return null;var t=e.pop(),n=t.textContent||t.innerText;if(n){var a=n.match(/^.*(\n|\r)/);return a?(e.length=0,a[0]):n}return"ruby"===t.tagName?i(e):t.childNodes?(r(e,t),i(e)):void 0}for(r(t,e);n=i(t);)for(var a=0;a<n.length;a++)if(ar(n.charCodeAt(a)))return"rtl";return"ltr"}function or(e){if("number"==typeof e.line&&(e.snapToLines||e.line>=0&&e.line<=100))return e.line;if(!e.track||!e.track.textTrackList||!e.track.textTrackList.mediaElement)return-1;for(var t=e.track,n=t.textTrackList,r=0,i=0;i<n.length&&n[i]!==t;i++)"showing"===n[i].mode&&r++;return-1*++r}function ur(){}function cr(e,t,n){ur.call(this),this.cue=t,this.cueDiv=rr(e,t.text);var r={color:"rgba(255, 255, 255, 1)",backgroundColor:"rgba(0, 0, 0, 0.8)",position:"relative",left:0,right:0,top:0,bottom:0,display:"inline",writingMode:""===t.vertical?"horizontal-tb":"lr"===t.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext"};this.applyStyles(r,this.cueDiv),this.div=e.document.createElement("div"),r={direction:sr(this.cueDiv),writingMode:""===t.vertical?"horizontal-tb":"lr"===t.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext",textAlign:"middle"===t.align?"center":t.align,font:n.font,whiteSpace:"pre-line",position:"absolute"},this.applyStyles(r),this.div.appendChild(this.cueDiv);var i=0;switch(t.positionAlign){case"start":i=t.position;break;case"middle":i=t.position-t.size/2;break;case"end":i=t.position-t.size}""===t.vertical?this.applyStyles({left:this.formatStyle(i,"%"),width:this.formatStyle(t.size,"%")}):this.applyStyles({top:this.formatStyle(i,"%"),height:this.formatStyle(t.size,"%")}),this.move=function(e){this.applyStyles({top:this.formatStyle(e.top,"px"),bottom:this.formatStyle(e.bottom,"px"),left:this.formatStyle(e.left,"px"),right:this.formatStyle(e.right,"px"),height:this.formatStyle(e.height,"px"),width:this.formatStyle(e.width,"px")})}}function lr(e){var t,n,r,i;if(e.div){n=e.div.offsetHeight,r=e.div.offsetWidth,i=e.div.offsetTop;var a=(a=e.div.childNodes)&&(a=a[0])&&a.getClientRects&&a.getClientRects();e=e.div.getBoundingClientRect(),t=a?Math.max(a[0]&&a[0].height||0,e.height/a.length):0}this.left=e.left,this.right=e.right,this.top=e.top||i,this.height=e.height||n,this.bottom=e.bottom||i+(e.height||n),this.width=e.width||r,this.lineHeight=void 0!==t?t:e.lineHeight}function dr(e,t,n,r){function i(e,t){for(var i,a=new lr(e),s=1,o=0;o<t.length;o++){for(;e.overlapsOppositeAxis(n,t[o])||e.within(n)&&e.overlapsAny(r);)e.move(t[o]);if(e.within(n))return e;var u=e.intersectPercentage(n);s>u&&(i=new lr(e),s=u),e=new lr(a)}return i||a}var a=new lr(t),s=t.cue,o=or(s),u=[];if(s.snapToLines){var c;switch(s.vertical){case"":u=["+y","-y"],c="height";break;case"rl":u=["+x","-x"],c="width";break;case"lr":u=["-x","+x"],c="width"}var l=a.lineHeight,d=l*Math.round(o),h=n[c]+l,p=u[0];Math.abs(d)>h&&(d=d<0?-1:1,d*=Math.ceil(h/l)*l),o<0&&(d+=""===s.vertical?n.height:n.width,u=u.reverse()),a.move(p,d)}else{var f=a.lineHeight/n.height*100;switch(s.lineAlign){case"middle":o-=f/2;break;case"end":o-=f}switch(s.vertical){case"":t.applyStyles({top:t.formatStyle(o,"%")});break;case"rl":t.applyStyles({left:t.formatStyle(o,"%")});break;case"lr":t.applyStyles({right:t.formatStyle(o,"%")})}u=["+y","-x","+x","-y"],a=new lr(t)}var m=i(a,u);t.move(m.toCSSCompatValues(n))}function hr(){}ur.prototype.applyStyles=function(e,t){for(var n in t=t||this.div,e)e.hasOwnProperty(n)&&(t.style[n]=e[n])},ur.prototype.formatStyle=function(e,t){return 0===e?0:e+t},cr.prototype=Gn(ur.prototype),cr.prototype.constructor=cr,lr.prototype.move=function(e,t){switch(t=void 0!==t?t:this.lineHeight,e){case"+x":this.left+=t,this.right+=t;break;case"-x":this.left-=t,this.right-=t;break;case"+y":this.top+=t,this.bottom+=t;break;case"-y":this.top-=t,this.bottom-=t}},lr.prototype.overlaps=function(e){return this.left<e.right&&this.right>e.left&&this.top<e.bottom&&this.bottom>e.top},lr.prototype.overlapsAny=function(e){for(var t=0;t<e.length;t++)if(this.overlaps(e[t]))return!0;return!1},lr.prototype.within=function(e){return this.top>=e.top&&this.bottom<=e.bottom&&this.left>=e.left&&this.right<=e.right},lr.prototype.overlapsOppositeAxis=function(e,t){switch(t){case"+x":return this.left<e.left;case"-x":return this.right>e.right;case"+y":return this.top<e.top;case"-y":return this.bottom>e.bottom}},lr.prototype.intersectPercentage=function(e){return Math.max(0,Math.min(this.right,e.right)-Math.max(this.left,e.left))*Math.max(0,Math.min(this.bottom,e.bottom)-Math.max(this.top,e.top))/(this.height*this.width)},lr.prototype.toCSSCompatValues=function(e){return{top:this.top-e.top,bottom:e.bottom-this.bottom,left:this.left-e.left,right:e.right-this.right,height:this.height,width:this.width}},lr.getSimpleBoxPosition=function(e){var t=e.div?e.div.offsetHeight:e.tagName?e.offsetHeight:0,n=e.div?e.div.offsetWidth:e.tagName?e.offsetWidth:0,r=e.div?e.div.offsetTop:e.tagName?e.offsetTop:0;return{left:(e=e.div?e.div.getBoundingClientRect():e.tagName?e.getBoundingClientRect():e).left,right:e.right,top:e.top||r,height:e.height||t,bottom:e.bottom||r+(e.height||t),width:e.width||n}},hr.StringDecoder=function(){return{decode:function(e){if(!e)return"";if("string"!=typeof e)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))}}},hr.convertCueToDOMTree=function(e,t){return e&&t?rr(e,t):null};var pr=.05,fr="sans-serif",mr="1.5%";hr.processCues=function(e,t,n){if(!e||!t||!n)return null;for(;n.firstChild;)n.removeChild(n.firstChild);var r=e.document.createElement("div");function i(e){for(var t=0;t<e.length;t++)if(e[t].hasBeenReset||!e[t].displayState)return!0;return!1}if(r.style.position="absolute",r.style.left="0",r.style.right="0",r.style.top="0",r.style.bottom="0",r.style.margin=mr,n.appendChild(r),i(t)){var a=[],s=lr.getSimpleBoxPosition(r),o={font:Math.round(s.height*pr*100)/100+"px "+fr};!function(){for(var n,i,u=0;u<t.length;u++)i=t[u],n=new cr(e,i,o),r.appendChild(n.div),dr(e,n,s,a),i.displayState=n.div,a.push(lr.getSimpleBoxPosition(n))}()}else for(var u=0;u<t.length;u++)r.appendChild(t[u].displayState)},hr.Parser=function(e,t,n){n||(n=t,t={}),t||(t={}),this.window=e,this.vttjs=t,this.state="INITIAL",this.buffer="",this.decoder=n||new TextDecoder("utf8"),this.regionList=[]},hr.Parser.prototype={reportOrThrowError:function(e){if(!(e instanceof Kn))throw e;this.onparsingerror&&this.onparsingerror(e)},parse:function(e){var t=this;function n(){for(var e=t.buffer,n=0;n<e.length&&"\r"!==e[n]&&"\n"!==e[n];)++n;var r=e.substr(0,n);return"\r"===e[n]&&++n,"\n"===e[n]&&++n,t.buffer=e.substr(n),r}function r(e){var n=new Yn;if(Qn(e,(function(e,t){switch(e){case"id":n.set(e,t);break;case"width":n.percent(e,t);break;case"lines":n.integer(e,t);break;case"regionanchor":case"viewportanchor":var r=t.split(",");if(2!==r.length)break;var i=new Yn;if(i.percent("x",r[0]),i.percent("y",r[1]),!i.has("x")||!i.has("y"))break;n.set(e+"X",i.get("x")),n.set(e+"Y",i.get("y"));break;case"scroll":n.alt(e,t,["up"])}}),/=/,/\s/),n.has("id")){var r=new(t.vttjs.VTTRegion||t.window.VTTRegion);r.width=n.get("width",100),r.lines=n.get("lines",3),r.regionAnchorX=n.get("regionanchorX",0),r.regionAnchorY=n.get("regionanchorY",100),r.viewportAnchorX=n.get("viewportanchorX",0),r.viewportAnchorY=n.get("viewportanchorY",100),r.scroll=n.get("scroll",""),t.onregion&&t.onregion(r),t.regionList.push({id:n.get("id"),region:r})}}function i(e){var n=new Yn;Qn(e,(function(e,t){switch(e){case"MPEGT":n.integer(e+"S",t);break;case"LOCA":n.set(e+"L",Xn(t))}}),/[^\d]:/,/,/),t.ontimestampmap&&t.ontimestampmap({MPEGTS:n.get("MPEGTS"),LOCAL:n.get("LOCAL")})}function a(e){e.match(/X-TIMESTAMP-MAP/)?Qn(e,(function(e,t){"X-TIMESTAMP-MAP"===e&&i(t)}),/=/):Qn(e,(function(e,t){"Region"===e&&r(t)}),/:/)}e&&(t.buffer+=t.decoder.decode(e,{stream:!0}));try{var s;if("INITIAL"===t.state){if(!/\r\n|\n/.test(t.buffer))return this;var o=(s=n()).match(/^WEBVTT([ \t].*)?$/);if(!o||!o[0])throw new Kn(Kn.Errors.BadSignature);t.state="HEADER"}for(var u=!1;t.buffer;){if(!/\r\n|\n/.test(t.buffer))return this;switch(u?u=!1:s=n(),t.state){case"HEADER":/:/.test(s)?a(s):s||(t.state="ID");continue;case"NOTE":s||(t.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(s)){t.state="NOTE";break}if(!s)continue;if(t.cue=new(t.vttjs.VTTCue||t.window.VTTCue)(0,0,""),t.state="CUE",-1===s.indexOf("--\x3e")){t.cue.id=s;continue}case"CUE":try{Jn(s,t.cue,t.regionList)}catch(e){t.reportOrThrowError(e),t.cue=null,t.state="BADCUE";continue}t.state="CUETEXT";continue;case"CUETEXT":var c=-1!==s.indexOf("--\x3e");if(!s||c&&(u=!0)){t.oncue&&t.oncue(t.cue),t.cue=null,t.state="ID";continue}t.cue.text&&(t.cue.text+="\n"),t.cue.text+=s;continue;case"BADCUE":s||(t.state="ID");continue}}}catch(e){t.reportOrThrowError(e),"CUETEXT"===t.state&&t.cue&&t.oncue&&t.oncue(t.cue),t.cue=null,t.state="INITIAL"===t.state?"BADWEBVTT":"BADCUE"}return this},flush:function(){var e=this;try{if(e.buffer+=e.decoder.decode(),(e.cue||"HEADER"===e.state)&&(e.buffer+="\n\n",e.parse()),"INITIAL"===e.state)throw new Kn(Kn.Errors.BadSignature)}catch(t){e.reportOrThrowError(t)}return e.onflush&&e.onflush(),this}};var gr=hr,vr="auto",yr={"":1,lr:1,rl:1},br={start:1,middle:1,end:1,left:1,right:1};function _r(e){return"string"==typeof e&&!!yr[e.toLowerCase()]&&e.toLowerCase()}function Tr(e){return"string"==typeof e&&!!br[e.toLowerCase()]&&e.toLowerCase()}function wr(e,t,n){this.hasBeenReset=!1;var r="",i=!1,a=e,s=t,o=n,u=null,c="",l=!0,d="auto",h="start",p=50,f="middle",m=50,g="middle";Object.defineProperties(this,{id:{enumerable:!0,get:function(){return r},set:function(e){r=""+e}},pauseOnExit:{enumerable:!0,get:function(){return i},set:function(e){i=!!e}},startTime:{enumerable:!0,get:function(){return a},set:function(e){if("number"!=typeof e)throw new TypeError("Start time must be set to a number.");a=e,this.hasBeenReset=!0}},endTime:{enumerable:!0,get:function(){return s},set:function(e){if("number"!=typeof e)throw new TypeError("End time must be set to a number.");s=e,this.hasBeenReset=!0}},text:{enumerable:!0,get:function(){return o},set:function(e){o=""+e,this.hasBeenReset=!0}},region:{enumerable:!0,get:function(){return u},set:function(e){u=e,this.hasBeenReset=!0}},vertical:{enumerable:!0,get:function(){return c},set:function(e){var t=_r(e);if(!1===t)throw new SyntaxError("An invalid or illegal string was specified.");c=t,this.hasBeenReset=!0}},snapToLines:{enumerable:!0,get:function(){return l},set:function(e){l=!!e,this.hasBeenReset=!0}},line:{enumerable:!0,get:function(){return d},set:function(e){if("number"!=typeof e&&e!==vr)throw new SyntaxError("An invalid number or illegal string was specified.");d=e,this.hasBeenReset=!0}},lineAlign:{enumerable:!0,get:function(){return h},set:function(e){var t=Tr(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");h=t,this.hasBeenReset=!0}},position:{enumerable:!0,get:function(){return p},set:function(e){if(e<0||e>100)throw new Error("Position must be between 0 and 100.");p=e,this.hasBeenReset=!0}},positionAlign:{enumerable:!0,get:function(){return f},set:function(e){var t=Tr(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");f=t,this.hasBeenReset=!0}},size:{enumerable:!0,get:function(){return m},set:function(e){if(e<0||e>100)throw new Error("Size must be between 0 and 100.");m=e,this.hasBeenReset=!0}},align:{enumerable:!0,get:function(){return g},set:function(e){var t=Tr(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");g=t,this.hasBeenReset=!0}}}),this.displayState=void 0}wr.prototype.getCueAsHTML=function(){return WebVTT.convertCueToDOMTree(window,this.text)};var Sr=wr,Cr={"":!0,up:!0};function Er(e){return"string"==typeof e&&!!Cr[e.toLowerCase()]&&e.toLowerCase()}function kr(e){return"number"==typeof e&&e>=0&&e<=100}function Or(){var e=100,t=3,n=0,r=100,i=0,a=100,s="";Object.defineProperties(this,{width:{enumerable:!0,get:function(){return e},set:function(t){if(!kr(t))throw new Error("Width must be between 0 and 100.");e=t}},lines:{enumerable:!0,get:function(){return t},set:function(e){if("number"!=typeof e)throw new TypeError("Lines must be set to a number.");t=e}},regionAnchorY:{enumerable:!0,get:function(){return r},set:function(e){if(!kr(e))throw new Error("RegionAnchorX must be between 0 and 100.");r=e}},regionAnchorX:{enumerable:!0,get:function(){return n},set:function(e){if(!kr(e))throw new Error("RegionAnchorY must be between 0 and 100.");n=e}},viewportAnchorY:{enumerable:!0,get:function(){return a},set:function(e){if(!kr(e))throw new Error("ViewportAnchorY must be between 0 and 100.");a=e}},viewportAnchorX:{enumerable:!0,get:function(){return i},set:function(e){if(!kr(e))throw new Error("ViewportAnchorX must be between 0 and 100.");i=e}},scroll:{enumerable:!0,get:function(){return s},set:function(e){var t=Er(e);if(!1===t)throw new SyntaxError("An invalid or illegal string was specified.");s=t}}})}var xr=Or,Ar=n((function(e){var t=e.exports={WebVTT:gr,VTTCue:Sr,VTTRegion:xr};i.vttjs=t,i.WebVTT=t.WebVTT;var n=t.VTTCue,r=t.VTTRegion,a=i.VTTCue,s=i.VTTRegion;t.shim=function(){i.VTTCue=n,i.VTTRegion=r},t.restore=function(){i.VTTCue=a,i.VTTRegion=s},i.VTTCue||t.shim()}));function Pr(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},a=e.textTracks();i.kind=t,n&&(i.label=n),r&&(i.language=r),i.tech=e;var s=new zn.text.TrackClass(i);return a.addTrack(s),s}Ar.WebVTT,Ar.VTTCue,Ar.VTTRegion;var Ir=function(e){function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};y(this,t),n.reportTouchActivity=!1;var i=_(this,e.call(this,null,n,r));return i.hasStarted_=!1,i.on("playing",(function(){this.hasStarted_=!0})),i.on("loadstart",(function(){this.hasStarted_=!1})),zn.names.forEach((function(e){var t=zn[e];n&&n[t.getterName]&&(i[t.privateName]=n[t.getterName])})),i.featuresProgressEvents||i.manualProgressOn(),i.featuresTimeupdateEvents||i.manualTimeUpdatesOn(),["Text","Audio","Video"].forEach((function(e){!1===n["native"+e+"Tracks"]&&(i["featuresNative"+e+"Tracks"]=!1)})),!1===n.nativeCaptions||!1===n.nativeTextTracks?i.featuresNativeTextTracks=!1:!0!==n.nativeCaptions&&!0!==n.nativeTextTracks||(i.featuresNativeTextTracks=!0),i.featuresNativeTextTracks||i.emulateTextTracks(),i.autoRemoteTextTracks_=new zn.text.ListClass,i.initTrackListeners(),n.nativeControlsForTouch||i.emitTapEvents(),i.constructor&&(i.name_=i.constructor.name||"Unknown Tech"),i}return b(t,e),t.prototype.triggerSourceset=function(e){var t=this;this.isReady_||this.one("ready",(function(){return t.setTimeout((function(){return t.triggerSourceset(e)}),1)})),this.trigger({src:e,type:"sourceset"})},t.prototype.manualProgressOn=function(){this.on("durationchange",this.onDurationChange),this.manualProgress=!0,this.one("ready",this.trackProgress)},t.prototype.manualProgressOff=function(){this.manualProgress=!1,this.stopTrackingProgress(),this.off("durationchange",this.onDurationChange)},t.prototype.trackProgress=function(e){this.stopTrackingProgress(),this.progressInterval=this.setInterval(Me(this,(function(){var e=this.bufferedPercent();this.bufferedPercent_!==e&&this.trigger("progress"),this.bufferedPercent_=e,1===e&&this.stopTrackingProgress()})),500)},t.prototype.onDurationChange=function(e){this.duration_=this.duration()},t.prototype.buffered=function(){return St(0,0)},t.prototype.bufferedPercent=function(){return Ct(this.buffered(),this.duration_)},t.prototype.stopTrackingProgress=function(){this.clearInterval(this.progressInterval)},t.prototype.manualTimeUpdatesOn=function(){this.manualTimeUpdates=!0,this.on("play",this.trackCurrentTime),this.on("pause",this.stopTrackingCurrentTime)},t.prototype.manualTimeUpdatesOff=function(){this.manualTimeUpdates=!1,this.stopTrackingCurrentTime(),this.off("play",this.trackCurrentTime),this.off("pause",this.stopTrackingCurrentTime)},t.prototype.trackCurrentTime=function(){this.currentTimeInterval&&this.stopTrackingCurrentTime(),this.currentTimeInterval=this.setInterval((function(){this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})}),250)},t.prototype.stopTrackingCurrentTime=function(){this.clearInterval(this.currentTimeInterval),this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},t.prototype.dispose=function(){this.clearTracks(Hn.names),this.manualProgress&&this.manualProgressOff(),this.manualTimeUpdates&&this.manualTimeUpdatesOff(),e.prototype.dispose.call(this)},t.prototype.clearTracks=function(e){var t=this;(e=[].concat(e)).forEach((function(e){for(var n=t[e+"Tracks"]()||[],r=n.length;r--;){var i=n[r];"text"===e&&t.removeRemoteTextTrack(i),n.removeTrack(i)}}))},t.prototype.cleanupAutoTextTracks=function(){for(var e=this.autoRemoteTextTracks_||[],t=e.length;t--;){var n=e[t];this.removeRemoteTextTrack(n)}},t.prototype.reset=function(){},t.prototype.error=function(e){return void 0!==e&&(this.error_=new It(e),this.trigger("error")),this.error_},t.prototype.played=function(){return this.hasStarted_?St(0,0):St()},t.prototype.setCurrentTime=function(){this.manualTimeUpdates&&this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},t.prototype.initTrackListeners=function(){var e=this;Hn.names.forEach((function(t){var n=Hn[t],r=function(){e.trigger(t+"trackchange")},i=e[n.getterName]();i.addEventListener("removetrack",r),i.addEventListener("addtrack",r),e.on("dispose",(function(){i.removeEventListener("removetrack",r),i.removeEventListener("addtrack",r)}))}))},t.prototype.addWebVttScript_=function(){var e=this;if(!i.WebVTT)if(c.body.contains(this.el())){if(!this.options_["vtt.js"]&&x(Ar)&&Object.keys(Ar).length>0)return void this.trigger("vttjsloaded");var t=c.createElement("script");t.src=this.options_["vtt.js"]||"https://vjs.zencdn.net/vttjs/0.14.1/vtt.min.js",t.onload=function(){e.trigger("vttjsloaded")},t.onerror=function(){e.trigger("vttjserror")},this.on("dispose",(function(){t.onload=null,t.onerror=null})),i.WebVTT=!0,this.el().parentNode.appendChild(t)}else this.ready(this.addWebVttScript_)},t.prototype.emulateTextTracks=function(){var e=this,t=this.textTracks(),n=this.remoteTextTracks(),r=function(e){return t.addTrack(e.track)},i=function(e){return t.removeTrack(e.track)};n.on("addtrack",r),n.on("removetrack",i),this.addWebVttScript_();var a=function(){return e.trigger("texttrackchange")},s=function(){a();for(var e=0;e<t.length;e++){var n=t[e];n.removeEventListener("cuechange",a),"showing"===n.mode&&n.addEventListener("cuechange",a)}};s(),t.addEventListener("change",s),t.addEventListener("addtrack",s),t.addEventListener("removetrack",s),this.on("dispose",(function(){n.off("addtrack",r),n.off("removetrack",i),t.removeEventListener("change",s),t.removeEventListener("addtrack",s),t.removeEventListener("removetrack",s);for(var e=0;e<t.length;e++)t[e].removeEventListener("cuechange",a)}))},t.prototype.addTextTrack=function(e,t,n){if(!e)throw new Error("TextTrack kind is required but was not provided");return Pr(this,e,t,n)},t.prototype.createRemoteTextTrack=function(e){var t=Qe(e,{tech:this});return new Wn.remoteTextEl.TrackClass(t)},t.prototype.addRemoteTextTrack=function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments[1],r=this.createRemoteTextTrack(t);return!0!==n&&!1!==n&&(f.warn('Calling addRemoteTextTrack without explicitly setting the "manualCleanup" parameter to `true` is deprecated and default to `false` in future version of video.js'),n=!0),this.remoteTextTrackEls().addTrackElement_(r),this.remoteTextTracks().addTrack(r.track),!0!==n&&this.ready((function(){return e.autoRemoteTextTracks_.addTrack(r.track)})),r},t.prototype.removeRemoteTextTrack=function(e){var t=this.remoteTextTrackEls().getTrackElementByTrack_(e);this.remoteTextTrackEls().removeTrackElement_(t),this.remoteTextTracks().removeTrack(e),this.autoRemoteTextTracks_.removeTrack(e)},t.prototype.getVideoPlaybackQuality=function(){return{}},t.prototype.setPoster=function(){},t.prototype.playsinline=function(){},t.prototype.setPlaysinline=function(){},t.prototype.overrideNativeAudioTracks=function(){},t.prototype.overrideNativeVideoTracks=function(){},t.prototype.canPlayType=function(){return""},t.canPlayType=function(){return""},t.canPlaySource=function(e,n){return t.canPlayType(e.type)},t.isTech=function(e){return e.prototype instanceof t||e instanceof t||e===t},t.registerTech=function(e,n){if(t.techs_||(t.techs_={}),!t.isTech(n))throw new Error("Tech "+e+" must be a Tech");if(!t.canPlayType)throw new Error("Techs must have a static canPlayType method on them");if(!t.canPlaySource)throw new Error("Techs must have a static canPlaySource method on them");return e=Xe(e),t.techs_[e]=n,"Tech"!==e&&t.defaultTechOrder_.push(e),n},t.getTech=function(e){if(e)return e=Xe(e),t.techs_&&t.techs_[e]?t.techs_[e]:i&&i.videojs&&i.videojs[e]?(f.warn("The "+e+" tech was added to the videojs object when it should be registered using videojs.registerTech(name, tech)"),i.videojs[e]):void 0},t}(Je);zn.names.forEach((function(e){var t=zn[e];Ir.prototype[t.getterName]=function(){return this[t.privateName]=this[t.privateName]||new t.ListClass,this[t.privateName]}})),Ir.prototype.featuresVolumeControl=!0,Ir.prototype.featuresMuteControl=!0,Ir.prototype.featuresFullscreenResize=!1,Ir.prototype.featuresPlaybackRate=!1,Ir.prototype.featuresProgressEvents=!1,Ir.prototype.featuresSourceset=!1,Ir.prototype.featuresTimeupdateEvents=!1,Ir.prototype.featuresNativeTextTracks=!1,Ir.withSourceHandlers=function(e){e.registerSourceHandler=function(t,n){var r=e.sourceHandlers;r||(r=e.sourceHandlers=[]),void 0===n&&(n=r.length),r.splice(n,0,t)},e.canPlayType=function(t){for(var n=e.sourceHandlers||[],r=void 0,i=0;i<n.length;i++)if(r=n[i].canPlayType(t))return r;return""},e.selectSourceHandler=function(t,n){for(var r=e.sourceHandlers||[],i=0;i<r.length;i++)if(r[i].canHandleSource(t,n))return r[i];return null},e.canPlaySource=function(t,n){var r=e.selectSourceHandler(t,n);return r?r.canHandleSource(t,n):""},["seekable","seeking","duration"].forEach((function(e){var t=this[e];"function"==typeof t&&(this[e]=function(){return this.sourceHandler_&&this.sourceHandler_[e]?this.sourceHandler_[e].apply(this.sourceHandler_,arguments):t.apply(this,arguments)})}),e.prototype),e.prototype.setSource=function(t){var n=e.selectSourceHandler(t,this.options_);n||(e.nativeSourceHandler?n=e.nativeSourceHandler:f.error("No source handler found for the current source.")),this.disposeSourceHandler(),this.off("dispose",this.disposeSourceHandler),n!==e.nativeSourceHandler&&(this.currentSource_=t),this.sourceHandler_=n.handleSource(t,this,this.options_),this.on("dispose",this.disposeSourceHandler)},e.prototype.disposeSourceHandler=function(){this.currentSource_&&(this.clearTracks(["audio","video"]),this.currentSource_=null),this.cleanupAutoTextTracks(),this.sourceHandler_&&(this.sourceHandler_.dispose&&this.sourceHandler_.dispose(),this.sourceHandler_=null)}},Je.registerComponent("Tech",Ir),Ir.registerTech("Tech",Ir),Ir.defaultTechOrder_=[];var Lr={},Mr={},Dr={};function Rr(e,t){Lr[e]=Lr[e]||[],Lr[e].push(t)}function Nr(e,t,n){e.setTimeout((function(){return Kr(t,Lr[t.type],n,e)}),1)}function jr(e,t){e.forEach((function(e){return e.setTech&&e.setTech(t)}))}function Ur(e,t,n){return e.reduceRight(Hr(n),t[n]())}function Fr(e,t,n,r){return t[n](e.reduce(Hr(n),r))}function $r(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i="call"+Xe(n),a=e.reduce(Hr(i),r),s=a===Dr,o=s?null:t[n](a);return Wr(e,n,o,s),o}var Br={buffered:1,currentTime:1,duration:1,seekable:1,played:1,paused:1},Vr={setCurrentTime:1},qr={play:1,pause:1};function Hr(e){return function(t,n){return t===Dr?Dr:n[e]?n[e](t):t}}function Wr(e,t,n,r){for(var i=e.length-1;i>=0;i--){var a=e[i];a[t]&&a[t](r,n)}}function zr(e){Mr[e.id()]=null}function Gr(e,t){var n=Mr[e.id()],r=null;if(null==n)return r=t(e),Mr[e.id()]=[[t,r]],r;for(var i=0;i<n.length;i++){var a=n[i],s=a[0],o=a[1];s===t&&(r=o)}return null===r&&(r=t(e),n.push([t,r])),r}function Kr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments[2],r=arguments[3],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],a=arguments.length>5&&void 0!==arguments[5]&&arguments[5],s=t[0],o=t.slice(1);if("string"==typeof s)Kr(e,Lr[s],n,r,i,a);else if(s){var u=Gr(r,s);if(!u.setSource)return i.push(u),Kr(e,o,n,r,i,a);u.setSource(k({},e),(function(t,s){if(t)return Kr(e,o,n,r,i,a);i.push(u),Kr(s,e.type===s.type?o:Lr[s.type],n,r,i,a)}))}else o.length?Kr(e,o,n,r,i,a):a?n(e,i):Kr(e,Lr["*"],n,r,i,!0)}var Xr={opus:"video/ogg",ogv:"video/ogg",mp4:"video/mp4",mov:"video/mp4",m4v:"video/mp4",mkv:"video/x-matroska",mp3:"audio/mpeg",aac:"audio/aac",oga:"audio/ogg",m3u8:"application/x-mpegURL"},Yr=function(){var e=on(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"");return Xr[e.toLowerCase()]||""},Qr=function(e,t){if(!t)return"";if(e.cache_.source.src===t&&e.cache_.source.type)return e.cache_.source.type;var n=e.cache_.sources.filter((function(e){return e.src===t}));if(n.length)return n[0].type;for(var r=e.$$("source"),i=0;i<r.length;i++){var a=r[i];if(a.type&&a.src&&a.src===t)return a.type}return Yr(t)},Jr=function e(t){if(Array.isArray(t)){var n=[];t.forEach((function(t){t=e(t),Array.isArray(t)?n=n.concat(t):O(t)&&n.push(t)})),t=n}else t="string"==typeof t&&t.trim()?[Zr({src:t})]:O(t)&&"string"==typeof t.src&&t.src&&t.src.trim()?[Zr(t)]:[];return t};function Zr(e){var t=Yr(e.src);return!e.type&&t&&(e.type=t),e}var ei=function(e){function t(n,r,i){y(this,t);var a=Qe({createEl:!1},r),s=_(this,e.call(this,n,a,i));if(r.playerOptions.sources&&0!==r.playerOptions.sources.length)n.src(r.playerOptions.sources);else for(var o=0,u=r.playerOptions.techOrder;o<u.length;o++){var c=Xe(u[o]),l=Ir.getTech(c);if(c||(l=Je.getComponent(c)),l&&l.isSupported()){n.loadTech_(c);break}}return s}return b(t,e),t}(Je);Je.registerComponent("MediaLoader",ei);var ti=function(e){function t(n,r){y(this,t);var i=_(this,e.call(this,n,r));return i.emitTapEvents(),i.enable(),i}return b(t,e),t.prototype.createEl=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"div",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};n=k({innerHTML:'<span aria-hidden="true" class="vjs-icon-placeholder"></span>',className:this.buildCSSClass(),tabIndex:0},n),"button"===t&&f.error("Creating a ClickableComponent with an HTML element of "+t+" is not supported; use a Button instead."),r=k({role:"button"},r),this.tabIndex_=n.tabIndex;var i=e.prototype.createEl.call(this,t,n,r);return this.createControlTextEl(i),i},t.prototype.dispose=function(){this.controlTextEl_=null,e.prototype.dispose.call(this)},t.prototype.createControlTextEl=function(e){return this.controlTextEl_=U("span",{className:"vjs-control-text"},{"aria-live":"polite"}),e&&e.appendChild(this.controlTextEl_),this.controlText(this.controlText_,e),this.controlTextEl_},t.prototype.controlText=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.el();if(void 0===e)return this.controlText_||"Need Text";var n=this.localize(e);this.controlText_=e,F(this.controlTextEl_,n),this.nonIconControl||t.setAttribute("title",n)},t.prototype.buildCSSClass=function(){return"vjs-control vjs-button "+e.prototype.buildCSSClass.call(this)},t.prototype.enable=function(){this.enabled_||(this.enabled_=!0,this.removeClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","false"),void 0!==this.tabIndex_&&this.el_.setAttribute("tabIndex",this.tabIndex_),this.on(["tap","click"],this.handleClick),this.on("focus",this.handleFocus),this.on("blur",this.handleBlur))},t.prototype.disable=function(){this.enabled_=!1,this.addClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","true"),void 0!==this.tabIndex_&&this.el_.removeAttribute("tabIndex"),this.off(["tap","click"],this.handleClick),this.off("focus",this.handleFocus),this.off("blur",this.handleBlur)},t.prototype.handleClick=function(e){},t.prototype.handleFocus=function(e){we(c,"keydown",Me(this,this.handleKeyPress))},t.prototype.handleKeyPress=function(t){32===t.which||13===t.which?(t.preventDefault(),this.trigger("click")):e.prototype.handleKeyPress&&e.prototype.handleKeyPress.call(this,t)},t.prototype.handleBlur=function(e){Se(c,"keydown",Me(this,this.handleKeyPress))},t}(Je);Je.registerComponent("ClickableComponent",ti);var ni=function(e){function t(n,r){y(this,t);var i=_(this,e.call(this,n,r));return i.update(),n.on("posterchange",Me(i,i.update)),i}return b(t,e),t.prototype.dispose=function(){this.player().off("posterchange",this.update),e.prototype.dispose.call(this)},t.prototype.createEl=function(){return U("div",{className:"vjs-poster",tabIndex:-1})},t.prototype.update=function(e){var t=this.player().poster();this.setSrc(t),t?this.show():this.hide()},t.prototype.setSrc=function(e){var t="";e&&(t='url("'+e+'")'),this.el_.style.backgroundImage=t},t.prototype.handleClick=function(e){this.player_.controls()&&(this.player_.paused()?Nt(this.player_.play()):this.player_.pause())},t}(ti);Je.registerComponent("PosterImage",ni);var ri="#222",ii="#ccc",ai={monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:'"Andale Mono", "Lucida Console", monospace',monospaceSerif:'"Courier New", monospace',proportionalSansSerif:"sans-serif",proportionalSerif:"serif",casual:'"Comic Sans MS", Impact, fantasy',script:'"Monotype Corsiva", cursive',smallcaps:'"Andale Mono", "Lucida Console", monospace, sans-serif'};function si(e,t){var n=void 0;if(4===e.length)n=e[1]+e[1]+e[2]+e[2]+e[3]+e[3];else{if(7!==e.length)throw new Error("Invalid color code provided, "+e+"; must be formatted as e.g. #f0e or #f604e2.");n=e.slice(1)}return"rgba("+parseInt(n.slice(0,2),16)+","+parseInt(n.slice(2,4),16)+","+parseInt(n.slice(4,6),16)+","+t+")"}function oi(e,t,n){try{e.style[t]=n}catch(e){return}}var ui=function(e){function t(n,r,a){y(this,t);var s=_(this,e.call(this,n,r,a)),o=Me(s,s.updateDisplay);return n.on("loadstart",Me(s,s.toggleDisplay)),n.on("texttrackchange",o),n.on("loadstart",Me(s,s.preselectTrack)),n.ready(Me(s,(function(){if(n.tech_&&n.tech_.featuresNativeTextTracks)this.hide();else{n.on("fullscreenchange",o),n.on("playerresize",o),i.addEventListener("orientationchange",o),n.on("dispose",(function(){return i.removeEventListener("orientationchange",o)}));for(var e=this.options_.playerOptions.tracks||[],t=0;t<e.length;t++)this.player_.addRemoteTextTrack(e[t],!0);this.preselectTrack()}}))),s}return b(t,e),t.prototype.preselectTrack=function(){for(var e={captions:1,subtitles:1},t=this.player_.textTracks(),n=this.player_.cache_.selectedLanguage,r=void 0,i=void 0,a=void 0,s=0;s<t.length;s++){var o=t[s];n&&n.enabled&&n.language===o.language?o.kind===n.kind?a=o:a||(a=o):n&&!n.enabled?(a=null,r=null,i=null):o.default&&("descriptions"!==o.kind||r?o.kind in e&&!i&&(i=o):r=o)}a?a.mode="showing":i?i.mode="showing":r&&(r.mode="showing")},t.prototype.toggleDisplay=function(){this.player_.tech_&&this.player_.tech_.featuresNativeTextTracks?this.hide():this.show()},t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-text-track-display"},{"aria-live":"off","aria-atomic":"true"})},t.prototype.clearDisplay=function(){"function"==typeof i.WebVTT&&i.WebVTT.processCues(i,[],this.el_)},t.prototype.updateDisplay=function(){var e=this.player_.textTracks();this.clearDisplay();for(var t=null,n=null,r=e.length;r--;){var i=e[r];"showing"===i.mode&&("descriptions"===i.kind?t=i:n=i)}n?("off"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","off"),this.updateForTrack(n)):t&&("assertive"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","assertive"),this.updateForTrack(t))},t.prototype.updateForTrack=function(e){if("function"==typeof i.WebVTT&&e.activeCues){for(var t=[],n=0;n<e.activeCues.length;n++)t.push(e.activeCues[n]);if(i.WebVTT.processCues(i,t,this.el_),this.player_.textTrackSettings)for(var r=this.player_.textTrackSettings.getValues(),a=t.length;a--;){var s=t[a];if(s){var o=s.displayState;if(r.color&&(o.firstChild.style.color=r.color),r.textOpacity&&oi(o.firstChild,"color",si(r.color||"#fff",r.textOpacity)),r.backgroundColor&&(o.firstChild.style.backgroundColor=r.backgroundColor),r.backgroundOpacity&&oi(o.firstChild,"backgroundColor",si(r.backgroundColor||"#000",r.backgroundOpacity)),r.windowColor&&(r.windowOpacity?oi(o,"backgroundColor",si(r.windowColor,r.windowOpacity)):o.style.backgroundColor=r.windowColor),r.edgeStyle&&("dropshadow"===r.edgeStyle?o.firstChild.style.textShadow="2px 2px 3px "+ri+", 2px 2px 4px "+ri+", 2px 2px 5px "+ri:"raised"===r.edgeStyle?o.firstChild.style.textShadow="1px 1px "+ri+", 2px 2px "+ri+", 3px 3px "+ri:"depressed"===r.edgeStyle?o.firstChild.style.textShadow="1px 1px "+ii+", 0 1px "+ii+", -1px -1px "+ri+", 0 -1px "+ri:"uniform"===r.edgeStyle&&(o.firstChild.style.textShadow="0 0 4px "+ri+", 0 0 4px "+ri+", 0 0 4px "+ri+", 0 0 4px "+ri)),r.fontPercent&&1!==r.fontPercent){var u=i.parseFloat(o.style.fontSize);o.style.fontSize=u*r.fontPercent+"px",o.style.height="auto",o.style.top="auto",o.style.bottom="2px"}r.fontFamily&&"default"!==r.fontFamily&&("small-caps"===r.fontFamily?o.firstChild.style.fontVariant="small-caps":o.firstChild.style.fontFamily=ai[r.fontFamily])}}}},t}(Je);Je.registerComponent("TextTrackDisplay",ui);var ci=function(e){function t(){return y(this,t),_(this,e.apply(this,arguments))}return b(t,e),t.prototype.createEl=function(){var t=this.player_.isAudio(),n=this.localize(t?"Audio Player":"Video Player"),r=U("span",{className:"vjs-control-text",innerHTML:this.localize("{1} is loading.",[n])}),i=e.prototype.createEl.call(this,"div",{className:"vjs-loading-spinner",dir:"ltr"});return i.appendChild(r),i},t}(Je);Je.registerComponent("LoadingSpinner",ci);var li=function(e){function t(){return y(this,t),_(this,e.apply(this,arguments))}return b(t,e),t.prototype.createEl=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};e="button",t=k({innerHTML:'<span aria-hidden="true" class="vjs-icon-placeholder"></span>',className:this.buildCSSClass()},t),n=k({type:"button"},n);var r=Je.prototype.createEl.call(this,e,t,n);return this.createControlTextEl(r),r},t.prototype.addChild=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.constructor.name;return f.warn("Adding an actionable (user controllable) child to a Button ("+n+") is not supported; use a ClickableComponent instead."),Je.prototype.addChild.call(this,e,t)},t.prototype.enable=function(){e.prototype.enable.call(this),this.el_.removeAttribute("disabled")},t.prototype.disable=function(){e.prototype.disable.call(this),this.el_.setAttribute("disabled","disabled")},t.prototype.handleKeyPress=function(t){32!==t.which&&13!==t.which&&e.prototype.handleKeyPress.call(this,t)},t}(ti);Je.registerComponent("Button",li);var di=function(e){function t(n,r){y(this,t);var i=_(this,e.call(this,n,r));return i.mouseused_=!1,i.on("mousedown",i.handleMouseDown),i}return b(t,e),t.prototype.buildCSSClass=function(){return"vjs-big-play-button"},t.prototype.handleClick=function(e){var t=this.player_.play();if(this.mouseused_&&e.clientX&&e.clientY)Nt(t);else{var n=this.player_.getChild("controlBar"),r=n&&n.getChild("playToggle");if(r){var i=function(){return r.focus()};Rt(t)?t.then(i,(function(){})):this.setTimeout(i,1)}else this.player_.focus()}},t.prototype.handleKeyPress=function(t){this.mouseused_=!1,e.prototype.handleKeyPress.call(this,t)},t.prototype.handleMouseDown=function(e){this.mouseused_=!0},t}(li);di.prototype.controlText_="Play Video",Je.registerComponent("BigPlayButton",di);var hi=function(e){function t(n,r){y(this,t);var i=_(this,e.call(this,n,r));return i.controlText(r&&r.controlText||i.localize("Close")),i}return b(t,e),t.prototype.buildCSSClass=function(){return"vjs-close-button "+e.prototype.buildCSSClass.call(this)},t.prototype.handleClick=function(e){this.trigger({type:"close",bubbles:!1})},t}(li);Je.registerComponent("CloseButton",hi);var pi=function(e){function t(n,r){y(this,t);var i=_(this,e.call(this,n,r));return i.on(n,"play",i.handlePlay),i.on(n,"pause",i.handlePause),i.on(n,"ended",i.handleEnded),i}return b(t,e),t.prototype.buildCSSClass=function(){return"vjs-play-control "+e.prototype.buildCSSClass.call(this)},t.prototype.handleClick=function(e){this.player_.paused()?this.player_.play():this.player_.pause()},t.prototype.handleSeeked=function(e){this.removeClass("vjs-ended"),this.player_.paused()?this.handlePause(e):this.handlePlay(e)},t.prototype.handlePlay=function(e){this.removeClass("vjs-ended"),this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.controlText("Pause")},t.prototype.handlePause=function(e){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.controlText("Play")},t.prototype.handleEnded=function(e){this.removeClass("vjs-playing"),this.addClass("vjs-ended"),this.controlText("Replay"),this.one(this.player_,"seeked",this.handleSeeked)},t}(li);pi.prototype.controlText_="Play",Je.registerComponent("PlayToggle",pi);var fi=function(e,t){e=e<0?0:e;var n=Math.floor(e%60),r=Math.floor(e/60%60),i=Math.floor(e/3600),a=Math.floor(t/60%60),s=Math.floor(t/3600);return(isNaN(e)||e===1/0)&&(i=r=n="-"),(i=i>0||s>0?i+":":"")+(r=((i||a>=10)&&r<10?"0"+r:r)+":")+(n=n<10?"0"+n:n)},mi=fi;function gi(e){mi=e}function vi(){mi=fi}function yi(e){return mi(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:e)}var bi=function(e){function t(n,r){y(this,t);var i=_(this,e.call(this,n,r));return i.throttledUpdateContent=De(Me(i,i.updateContent),25),i.on(n,"timeupdate",i.throttledUpdateContent),i}return b(t,e),t.prototype.createEl=function(t){var n=this.buildCSSClass(),r=e.prototype.createEl.call(this,"div",{className:n+" vjs-time-control vjs-control",innerHTML:'<span class="vjs-control-text">'+this.localize(this.labelText_)+" </span>"});return this.contentEl_=U("span",{className:n+"-display"},{"aria-live":"off"}),this.updateTextNode_(),r.appendChild(this.contentEl_),r},t.prototype.dispose=function(){this.contentEl_=null,this.textNode_=null,e.prototype.dispose.call(this)},t.prototype.updateTextNode_=function(){if(this.contentEl_){for(;this.contentEl_.firstChild;)this.contentEl_.removeChild(this.contentEl_.firstChild);this.textNode_=c.createTextNode(this.formattedTime_||this.formatTime_(0)),this.contentEl_.appendChild(this.textNode_)}},t.prototype.formatTime_=function(e){return yi(e)},t.prototype.updateFormattedTime_=function(e){var t=this.formatTime_(e);t!==this.formattedTime_&&(this.formattedTime_=t,this.requestAnimationFrame(this.updateTextNode_))},t.prototype.updateContent=function(e){},t}(Je);bi.prototype.labelText_="Time",bi.prototype.controlText_="Time",Je.registerComponent("TimeDisplay",bi);var _i=function(e){function t(n,r){y(this,t);var i=_(this,e.call(this,n,r));return i.on(n,"ended",i.handleEnded),i}return b(t,e),t.prototype.buildCSSClass=function(){return"vjs-current-time"},t.prototype.updateContent=function(e){var t=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();this.updateFormattedTime_(t)},t.prototype.handleEnded=function(e){this.player_.duration()&&this.updateFormattedTime_(this.player_.duration())},t}(bi);_i.prototype.labelText_="Current Time",_i.prototype.controlText_="Current Time",Je.registerComponent("CurrentTimeDisplay",_i);var Ti=function(e){function t(n,r){y(this,t);var i=_(this,e.call(this,n,r));return i.on(n,"durationchange",i.updateContent),i.on(n,"loadedmetadata",i.throttledUpdateContent),i}return b(t,e),t.prototype.buildCSSClass=function(){return"vjs-duration"},t.prototype.updateContent=function(e){var t=this.player_.duration();t&&this.duration_!==t&&(this.duration_=t,this.updateFormattedTime_(t))},t}(bi);Ti.prototype.labelText_="Duration",Ti.prototype.controlText_="Duration",Je.registerComponent("DurationDisplay",Ti);var wi=function(e){function t(){return y(this,t),_(this,e.apply(this,arguments))}return b(t,e),t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-time-control vjs-time-divider",innerHTML:"<div><span>/</span></div>"})},t}(Je);Je.registerComponent("TimeDivider",wi);var Si=function(e){function t(n,r){y(this,t);var i=_(this,e.call(this,n,r));return i.on(n,"durationchange",i.throttledUpdateContent),i.on(n,"ended",i.handleEnded),i}return b(t,e),t.prototype.buildCSSClass=function(){return"vjs-remaining-time"},t.prototype.formatTime_=function(t){return"-"+e.prototype.formatTime_.call(this,t)},t.prototype.updateContent=function(e){this.player_.duration()&&(this.player_.remainingTimeDisplay?this.updateFormattedTime_(this.player_.remainingTimeDisplay()):this.updateFormattedTime_(this.player_.remainingTime()))},t.prototype.handleEnded=function(e){this.player_.duration()&&this.updateFormattedTime_(0)},t}(bi);Si.prototype.labelText_="Remaining Time",Si.prototype.controlText_="Remaining Time",Je.registerComponent("RemainingTimeDisplay",Si);var Ci=function(e){function t(n,r){y(this,t);var i=_(this,e.call(this,n,r));return i.updateShowing(),i.on(i.player(),"durationchange",i.updateShowing),i}return b(t,e),t.prototype.createEl=function(){var t=e.prototype.createEl.call(this,"div",{className:"vjs-live-control vjs-control"});return this.contentEl_=U("div",{className:"vjs-live-display",innerHTML:'<span class="vjs-control-text">'+this.localize("Stream Type")+" </span>"+this.localize("LIVE")},{"aria-live":"off"}),t.appendChild(this.contentEl_),t},t.prototype.dispose=function(){this.contentEl_=null,e.prototype.dispose.call(this)},t.prototype.updateShowing=function(e){this.player().duration()===1/0?this.show():this.hide()},t}(Je);Je.registerComponent("LiveDisplay",Ci);var Ei=function(e){function t(n,r){y(this,t);var i=_(this,e.call(this,n,r));return i.bar=i.getChild(i.options_.barName),i.vertical(!!i.options_.vertical),i.enable(),i}return b(t,e),t.prototype.enabled=function(){return this.enabled_},t.prototype.enable=function(){this.enabled()||(this.on("mousedown",this.handleMouseDown),this.on("touchstart",this.handleMouseDown),this.on("focus",this.handleFocus),this.on("blur",this.handleBlur),this.on("click",this.handleClick),this.on(this.player_,"controlsvisible",this.update),this.playerEvent&&this.on(this.player_,this.playerEvent,this.update),this.removeClass("disabled"),this.setAttribute("tabindex",0),this.enabled_=!0)},t.prototype.disable=function(){if(this.enabled()){var e=this.bar.el_.ownerDocument;this.off("mousedown",this.handleMouseDown),this.off("touchstart",this.handleMouseDown),this.off("focus",this.handleFocus),this.off("blur",this.handleBlur),this.off("click",this.handleClick),this.off(this.player_,"controlsvisible",this.update),this.off(e,"mousemove",this.handleMouseMove),this.off(e,"mouseup",this.handleMouseUp),this.off(e,"touchmove",this.handleMouseMove),this.off(e,"touchend",this.handleMouseUp),this.removeAttribute("tabindex"),this.addClass("disabled"),this.playerEvent&&this.off(this.player_,this.playerEvent,this.update),this.enabled_=!1}},t.prototype.createEl=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return n.className=n.className+" vjs-slider",n=k({tabIndex:0},n),r=k({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100,tabIndex:0},r),e.prototype.createEl.call(this,t,n,r)},t.prototype.handleMouseDown=function(e){var t=this.bar.el_.ownerDocument;"mousedown"===e.type&&e.preventDefault(),"touchstart"!==e.type||pt||e.preventDefault(),Y(),this.addClass("vjs-sliding"),this.trigger("slideractive"),this.on(t,"mousemove",this.handleMouseMove),this.on(t,"mouseup",this.handleMouseUp),this.on(t,"touchmove",this.handleMouseMove),this.on(t,"touchend",this.handleMouseUp),this.handleMouseMove(e)},t.prototype.handleMouseMove=function(e){},t.prototype.handleMouseUp=function(){var e=this.bar.el_.ownerDocument;Q(),this.removeClass("vjs-sliding"),this.trigger("sliderinactive"),this.off(e,"mousemove",this.handleMouseMove),this.off(e,"mouseup",this.handleMouseUp),this.off(e,"touchmove",this.handleMouseMove),this.off(e,"touchend",this.handleMouseUp),this.update()},t.prototype.update=function(){if(this.el_){var e=this.getPercent(),t=this.bar;if(t){("number"!=typeof e||e!=e||e<0||e===1/0)&&(e=0);var n=(100*e).toFixed(2)+"%",r=t.el().style;return this.vertical()?r.height=n:r.width=n,e}}},t.prototype.calculateDistance=function(e){var t=ee(this.el_,e);return this.vertical()?t.y:t.x},t.prototype.handleFocus=function(){this.on(this.bar.el_.ownerDocument,"keydown",this.handleKeyPress)},t.prototype.handleKeyPress=function(e){37===e.which||40===e.which?(e.preventDefault(),this.stepBack()):38!==e.which&&39!==e.which||(e.preventDefault(),this.stepForward())},t.prototype.handleBlur=function(){this.off(this.bar.el_.ownerDocument,"keydown",this.handleKeyPress)},t.prototype.handleClick=function(e){e.stopImmediatePropagation(),e.preventDefault()},t.prototype.vertical=function(e){if(void 0===e)return this.vertical_||!1;this.vertical_=!!e,this.vertical_?this.addClass("vjs-slider-vertical"):this.addClass("vjs-slider-horizontal")},t}(Je);Je.registerComponent("Slider",Ei);var ki=function(e){function t(n,r){y(this,t);var i=_(this,e.call(this,n,r));return i.partEls_=[],i.on(n,"progress",i.update),i}return b(t,e),t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-load-progress",innerHTML:'<span class="vjs-control-text"><span>'+this.localize("Loaded")+"</span>: 0%</span>"})},t.prototype.dispose=function(){this.partEls_=null,e.prototype.dispose.call(this)},t.prototype.update=function(e){var t=this.player_.buffered(),n=this.player_.duration(),r=this.player_.bufferedEnd(),i=this.partEls_,a=function(e,t){var n=e/t||0;return 100*(n>=1?1:n)+"%"};this.el_.style.width=a(r,n);for(var s=0;s<t.length;s++){var o=t.start(s),u=t.end(s),c=i[s];c||(c=this.el_.appendChild(U()),i[s]=c),c.style.left=a(o,r),c.style.width=a(u-o,r)}for(var l=i.length;l>t.length;l--)this.el_.removeChild(i[l-1]);i.length=t.length},t}(Je);Je.registerComponent("LoadProgressBar",ki);var Oi=function(e){function t(){return y(this,t),_(this,e.apply(this,arguments))}return b(t,e),t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-time-tooltip"})},t.prototype.update=function(e,t,n){var r=J(this.el_),i=J(this.player_.el()),a=e.width*t;if(i&&r){var s=e.left-i.left+a,o=e.width-a+(i.right-e.right),u=r.width/2;s<u?u+=u-s:o<u&&(u=o),u<0?u=0:u>r.width&&(u=r.width),this.el_.style.right="-"+u+"px",F(this.el_,n)}},t}(Je);Je.registerComponent("TimeTooltip",Oi);var xi=function(e){function t(){return y(this,t),_(this,e.apply(this,arguments))}return b(t,e),t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-play-progress vjs-slider-bar",innerHTML:'<span class="vjs-control-text"><span>'+this.localize("Progress")+"</span>: 0%</span>"})},t.prototype.update=function(e,t){var n=this;this.rafId_&&this.cancelAnimationFrame(this.rafId_),this.rafId_=this.requestAnimationFrame((function(){var r=yi(n.player_.scrubbing()?n.player_.getCache().currentTime:n.player_.currentTime(),n.player_.duration()),i=n.getChild("timeTooltip");i&&i.update(e,t,r)}))},t}(Je);xi.prototype.options_={children:[]},st||ut||xi.prototype.options_.children.push("timeTooltip"),Je.registerComponent("PlayProgressBar",xi);var Ai=function(e){function t(n,r){y(this,t);var i=_(this,e.call(this,n,r));return i.update=De(Me(i,i.update),25),i}return b(t,e),t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-mouse-display"})},t.prototype.update=function(e,t){var n=this;this.rafId_&&this.cancelAnimationFrame(this.rafId_),this.rafId_=this.requestAnimationFrame((function(){var r=n.player_.duration(),i=yi(t*r,r);n.el_.style.left=e.width*t+"px",n.getChild("timeTooltip").update(e,t,i)}))},t}(Je);Ai.prototype.options_={children:["timeTooltip"]},Je.registerComponent("MouseTimeDisplay",Ai);var Pi=5,Ii=30,Li=function(e){function t(n,r){y(this,t);var i=_(this,e.call(this,n,r));return i.setEventHandlers_(),i}return b(t,e),t.prototype.setEventHandlers_=function(){var e=this;this.update=De(Me(this,this.update),Ii),this.on(this.player_,"timeupdate",this.update),this.on(this.player_,"ended",this.handleEnded),this.updateInterval=null,this.on(this.player_,["playing"],(function(){e.clearInterval(e.updateInterval),e.updateInterval=e.setInterval((function(){e.requestAnimationFrame((function(){e.update()}))}),Ii)})),this.on(this.player_,["ended","pause","waiting"],(function(){e.clearInterval(e.updateInterval)})),this.on(this.player_,["timeupdate","ended"],this.update)},t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-progress-holder"},{"aria-label":this.localize("Progress Bar")})},t.prototype.update_=function(e,t){var n=this.player_.duration();this.el_.setAttribute("aria-valuenow",(100*t).toFixed(2)),this.el_.setAttribute("aria-valuetext",this.localize("progress bar timing: currentTime={1} duration={2}",[yi(e,n),yi(n,n)],"{1} of {2}")),this.bar.update(J(this.el_),t)},t.prototype.update=function(t){var n=e.prototype.update.call(this);return this.update_(this.getCurrentTime_(),n),n},t.prototype.getCurrentTime_=function(){return this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime()},t.prototype.handleEnded=function(e){this.update_(this.player_.duration(),1)},t.prototype.getPercent=function(){var e=this.getCurrentTime_()/this.player_.duration();return e>=1?1:e||0},t.prototype.handleMouseDown=function(t){se(t)&&(t.stopPropagation(),this.player_.scrubbing(!0),this.videoWasPlaying=!this.player_.paused(),this.player_.pause(),e.prototype.handleMouseDown.call(this,t))},t.prototype.handleMouseMove=function(e){if(se(e)){var t=this.calculateDistance(e)*this.player_.duration();t===this.player_.duration()&&(t-=.1),this.player_.currentTime(t)}},t.prototype.enable=function(){e.prototype.enable.call(this);var t=this.getChild("mouseTimeDisplay");t&&t.show()},t.prototype.disable=function(){e.prototype.disable.call(this);var t=this.getChild("mouseTimeDisplay");t&&t.hide()},t.prototype.handleMouseUp=function(t){e.prototype.handleMouseUp.call(this,t),t&&t.stopPropagation(),this.player_.scrubbing(!1),this.player_.trigger({type:"timeupdate",target:this,manuallyTriggered:!0}),this.videoWasPlaying&&Nt(this.player_.play())},t.prototype.stepForward=function(){this.player_.currentTime(this.player_.currentTime()+Pi)},t.prototype.stepBack=function(){this.player_.currentTime(this.player_.currentTime()-Pi)},t.prototype.handleAction=function(e){this.player_.paused()?this.player_.play():this.player_.pause()},t.prototype.handleKeyPress=function(t){32===t.which||13===t.which?(t.preventDefault(),this.handleAction(t)):e.prototype.handleKeyPress&&e.prototype.handleKeyPress.call(this,t)},t}(Ei);Li.prototype.options_={children:["loadProgressBar","playProgressBar"],barName:"playProgressBar"},st||ut||Li.prototype.options_.children.splice(1,0,"mouseTimeDisplay"),Li.prototype.playerEvent="timeupdate",Je.registerComponent("SeekBar",Li);var Mi=function(e){function t(n,r){y(this,t);var i=_(this,e.call(this,n,r));return i.handleMouseMove=De(Me(i,i.handleMouseMove),25),i.throttledHandleMouseSeek=De(Me(i,i.handleMouseSeek),25),i.enable(),i}return b(t,e),t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-progress-control vjs-control"})},t.prototype.handleMouseMove=function(e){var t=this.getChild("seekBar");if(t){var n=t.getChild("mouseTimeDisplay"),r=t.el(),i=J(r),a=ee(r,e).x;a>1?a=1:a<0&&(a=0),n&&n.update(i,a)}},t.prototype.handleMouseSeek=function(e){var t=this.getChild("seekBar");t&&t.handleMouseMove(e)},t.prototype.enabled=function(){return this.enabled_},t.prototype.disable=function(){this.children().forEach((function(e){return e.disable&&e.disable()})),this.enabled()&&(this.off(["mousedown","touchstart"],this.handleMouseDown),this.off(this.el_,"mousemove",this.handleMouseMove),this.handleMouseUp(),this.addClass("disabled"),this.enabled_=!1)},t.prototype.enable=function(){this.children().forEach((function(e){return e.enable&&e.enable()})),this.enabled()||(this.on(["mousedown","touchstart"],this.handleMouseDown),this.on(this.el_,"mousemove",this.handleMouseMove),this.removeClass("disabled"),this.enabled_=!0)},t.prototype.handleMouseDown=function(e){var t=this.el_.ownerDocument,n=this.getChild("seekBar");n&&n.handleMouseDown(e),this.on(t,"mousemove",this.throttledHandleMouseSeek),this.on(t,"touchmove",this.throttledHandleMouseSeek),this.on(t,"mouseup",this.handleMouseUp),this.on(t,"touchend",this.handleMouseUp)},t.prototype.handleMouseUp=function(e){var t=this.el_.ownerDocument,n=this.getChild("seekBar");n&&n.handleMouseUp(e),this.off(t,"mousemove",this.throttledHandleMouseSeek),this.off(t,"touchmove",this.throttledHandleMouseSeek),this.off(t,"mouseup",this.handleMouseUp),this.off(t,"touchend",this.handleMouseUp)},t}(Je);Mi.prototype.options_={children:["seekBar"]},Je.registerComponent("ProgressControl",Mi);var Di=function(e){function t(n,r){y(this,t);var i=_(this,e.call(this,n,r));return i.on(n,"fullscreenchange",i.handleFullscreenChange),!1===c[Et.fullscreenEnabled]&&i.disable(),i}return b(t,e),t.prototype.buildCSSClass=function(){return"vjs-fullscreen-control "+e.prototype.buildCSSClass.call(this)},t.prototype.handleFullscreenChange=function(e){this.player_.isFullscreen()?this.controlText("Non-Fullscreen"):this.controlText("Fullscreen")},t.prototype.handleClick=function(e){this.player_.isFullscreen()?this.player_.exitFullscreen():this.player_.requestFullscreen()},t}(li);Di.prototype.controlText_="Fullscreen",Je.registerComponent("FullscreenToggle",Di);var Ri=function(e,t){t.tech_&&!t.tech_.featuresVolumeControl&&e.addClass("vjs-hidden"),e.on(t,"loadstart",(function(){t.tech_.featuresVolumeControl?e.removeClass("vjs-hidden"):e.addClass("vjs-hidden")}))},Ni=function(e){function t(){return y(this,t),_(this,e.apply(this,arguments))}return b(t,e),t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-volume-level",innerHTML:'<span class="vjs-control-text"></span>'})},t}(Je);Je.registerComponent("VolumeLevel",Ni);var ji=function(e){function t(n,r){y(this,t);var i=_(this,e.call(this,n,r));return i.on("slideractive",i.updateLastVolume_),i.on(n,"volumechange",i.updateARIAAttributes),n.ready((function(){return i.updateARIAAttributes()})),i}return b(t,e),t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-volume-bar vjs-slider-bar"},{"aria-label":this.localize("Volume Level"),"aria-live":"polite"})},t.prototype.handleMouseDown=function(t){se(t)&&e.prototype.handleMouseDown.call(this,t)},t.prototype.handleMouseMove=function(e){se(e)&&(this.checkMuted(),this.player_.volume(this.calculateDistance(e)))},t.prototype.checkMuted=function(){this.player_.muted()&&this.player_.muted(!1)},t.prototype.getPercent=function(){return this.player_.muted()?0:this.player_.volume()},t.prototype.stepForward=function(){this.checkMuted(),this.player_.volume(this.player_.volume()+.1)},t.prototype.stepBack=function(){this.checkMuted(),this.player_.volume(this.player_.volume()-.1)},t.prototype.updateARIAAttributes=function(e){var t=this.player_.muted()?0:this.volumeAsPercentage_();this.el_.setAttribute("aria-valuenow",t),this.el_.setAttribute("aria-valuetext",t+"%")},t.prototype.volumeAsPercentage_=function(){return Math.round(100*this.player_.volume())},t.prototype.updateLastVolume_=function(){var e=this,t=this.player_.volume();this.one("sliderinactive",(function(){0===e.player_.volume()&&e.player_.lastVolume_(t)}))},t}(Ei);ji.prototype.options_={children:["volumeLevel"],barName:"volumeLevel"},ji.prototype.playerEvent="volumechange",Je.registerComponent("VolumeBar",ji);var Ui=function(e){function t(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};y(this,t),r.vertical=r.vertical||!1,(void 0===r.volumeBar||x(r.volumeBar))&&(r.volumeBar=r.volumeBar||{},r.volumeBar.vertical=r.vertical);var i=_(this,e.call(this,n,r));return Ri(i,n),i.throttledHandleMouseMove=De(Me(i,i.handleMouseMove),25),i.on("mousedown",i.handleMouseDown),i.on("touchstart",i.handleMouseDown),i.on(i.volumeBar,["focus","slideractive"],(function(){i.volumeBar.addClass("vjs-slider-active"),i.addClass("vjs-slider-active"),i.trigger("slideractive")})),i.on(i.volumeBar,["blur","sliderinactive"],(function(){i.volumeBar.removeClass("vjs-slider-active"),i.removeClass("vjs-slider-active"),i.trigger("sliderinactive")})),i}return b(t,e),t.prototype.createEl=function(){var t="vjs-volume-horizontal";return this.options_.vertical&&(t="vjs-volume-vertical"),e.prototype.createEl.call(this,"div",{className:"vjs-volume-control vjs-control "+t})},t.prototype.handleMouseDown=function(e){var t=this.el_.ownerDocument;this.on(t,"mousemove",this.throttledHandleMouseMove),this.on(t,"touchmove",this.throttledHandleMouseMove),this.on(t,"mouseup",this.handleMouseUp),this.on(t,"touchend",this.handleMouseUp)},t.prototype.handleMouseUp=function(e){var t=this.el_.ownerDocument;this.off(t,"mousemove",this.throttledHandleMouseMove),this.off(t,"touchmove",this.throttledHandleMouseMove),this.off(t,"mouseup",this.handleMouseUp),this.off(t,"touchend",this.handleMouseUp)},t.prototype.handleMouseMove=function(e){this.volumeBar.handleMouseMove(e)},t}(Je);Ui.prototype.options_={children:["volumeBar"]},Je.registerComponent("VolumeControl",Ui);var Fi=function(e,t){t.tech_&&!t.tech_.featuresMuteControl&&e.addClass("vjs-hidden"),e.on(t,"loadstart",(function(){t.tech_.featuresMuteControl?e.removeClass("vjs-hidden"):e.addClass("vjs-hidden")}))},$i=function(e){function t(n,r){y(this,t);var i=_(this,e.call(this,n,r));return Fi(i,n),i.on(n,["loadstart","volumechange"],i.update),i}return b(t,e),t.prototype.buildCSSClass=function(){return"vjs-mute-control "+e.prototype.buildCSSClass.call(this)},t.prototype.handleClick=function(e){var t=this.player_.volume(),n=this.player_.lastVolume_();if(0===t){var r=n<.1?.1:n;this.player_.volume(r),this.player_.muted(!1)}else this.player_.muted(!this.player_.muted())},t.prototype.update=function(e){this.updateIcon_(),this.updateControlText_()},t.prototype.updateIcon_=function(){var e=this.player_.volume(),t=3;st&&this.player_.muted(this.player_.tech_.el_.muted),0===e||this.player_.muted()?t=0:e<.33?t=1:e<.67&&(t=2);for(var n=0;n<4;n++)q(this.el_,"vjs-vol-"+n);V(this.el_,"vjs-vol-"+t)},t.prototype.updateControlText_=function(){var e=this.player_.muted()||0===this.player_.volume()?"Unmute":"Mute";this.controlText()!==e&&this.controlText(e)},t}(li);$i.prototype.controlText_="Mute",Je.registerComponent("MuteToggle",$i);var Bi=function(e){function t(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};y(this,t),void 0!==r.inline?r.inline=r.inline:r.inline=!0,(void 0===r.volumeControl||x(r.volumeControl))&&(r.volumeControl=r.volumeControl||{},r.volumeControl.vertical=!r.inline);var i=_(this,e.call(this,n,r));return i.on(n,["loadstart"],i.volumePanelState_),i.on(i.volumeControl,["slideractive"],i.sliderActive_),i.on(i.volumeControl,["sliderinactive"],i.sliderInactive_),i}return b(t,e),t.prototype.sliderActive_=function(){this.addClass("vjs-slider-active")},t.prototype.sliderInactive_=function(){this.removeClass("vjs-slider-active")},t.prototype.volumePanelState_=function(){this.volumeControl.hasClass("vjs-hidden")&&this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-hidden"),this.volumeControl.hasClass("vjs-hidden")&&!this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-mute-toggle-only")},t.prototype.createEl=function(){var t="vjs-volume-panel-horizontal";return this.options_.inline||(t="vjs-volume-panel-vertical"),e.prototype.createEl.call(this,"div",{className:"vjs-volume-panel vjs-control "+t})},t}(Je);Bi.prototype.options_={children:["muteToggle","volumeControl"]},Je.registerComponent("VolumePanel",Bi);var Vi=function(e){function t(n,r){y(this,t);var i=_(this,e.call(this,n,r));return r&&(i.menuButton_=r.menuButton),i.focusedChild_=-1,i.on("keydown",i.handleKeyPress),i}return b(t,e),t.prototype.addItem=function(e){this.addChild(e),e.on("click",Me(this,(function(t){this.menuButton_&&(this.menuButton_.unpressButton(),"CaptionSettingsMenuItem"!==e.name()&&this.menuButton_.focus())})))},t.prototype.createEl=function(){var t=this.options_.contentElType||"ul";this.contentEl_=U(t,{className:"vjs-menu-content"}),this.contentEl_.setAttribute("role","menu");var n=e.prototype.createEl.call(this,"div",{append:this.contentEl_,className:"vjs-menu"});return n.appendChild(this.contentEl_),we(n,"click",(function(e){e.preventDefault(),e.stopImmediatePropagation()})),n},t.prototype.dispose=function(){this.contentEl_=null,e.prototype.dispose.call(this)},t.prototype.handleKeyPress=function(e){37===e.which||40===e.which?(e.preventDefault(),this.stepForward()):38!==e.which&&39!==e.which||(e.preventDefault(),this.stepBack())},t.prototype.stepForward=function(){var e=0;void 0!==this.focusedChild_&&(e=this.focusedChild_+1),this.focus(e)},t.prototype.stepBack=function(){var e=0;void 0!==this.focusedChild_&&(e=this.focusedChild_-1),this.focus(e)},t.prototype.focus=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=this.children().slice();t.length&&t[0].className&&/vjs-menu-title/.test(t[0].className)&&t.shift(),t.length>0&&(e<0?e=0:e>=t.length&&(e=t.length-1),this.focusedChild_=e,t[e].el_.focus())},t}(Je);Je.registerComponent("Menu",Vi);var qi=function(e){function t(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};y(this,t);var i=_(this,e.call(this,n,r));i.menuButton_=new li(n,r),i.menuButton_.controlText(i.controlText_),i.menuButton_.el_.setAttribute("aria-haspopup","true");var a=li.prototype.buildCSSClass();return i.menuButton_.el_.className=i.buildCSSClass()+" "+a,i.menuButton_.removeClass("vjs-control"),i.addChild(i.menuButton_),i.update(),i.enabled_=!0,i.on(i.menuButton_,"tap",i.handleClick),i.on(i.menuButton_,"click",i.handleClick),i.on(i.menuButton_,"focus",i.handleFocus),i.on(i.menuButton_,"blur",i.handleBlur),i.on("keydown",i.handleSubmenuKeyPress),i}return b(t,e),t.prototype.update=function(){var e=this.createMenu();this.menu&&(this.menu.dispose(),this.removeChild(this.menu)),this.menu=e,this.addChild(e),this.buttonPressed_=!1,this.menuButton_.el_.setAttribute("aria-expanded","false"),this.items&&this.items.length<=this.hideThreshold_?this.hide():this.show()},t.prototype.createMenu=function(){var e=new Vi(this.player_,{menuButton:this});if(this.hideThreshold_=0,this.options_.title){var t=U("li",{className:"vjs-menu-title",innerHTML:Xe(this.options_.title),tabIndex:-1});this.hideThreshold_+=1,e.children_.unshift(t),$(t,e.contentEl())}if(this.items=this.createItems(),this.items)for(var n=0;n<this.items.length;n++)e.addItem(this.items[n]);return e},t.prototype.createItems=function(){},t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:this.buildWrapperCSSClass()},{})},t.prototype.buildWrapperCSSClass=function(){var t="vjs-menu-button";return!0===this.options_.inline?t+="-inline":t+="-popup","vjs-menu-button "+t+" "+li.prototype.buildCSSClass()+" "+e.prototype.buildCSSClass.call(this)},t.prototype.buildCSSClass=function(){var t="vjs-menu-button";return!0===this.options_.inline?t+="-inline":t+="-popup","vjs-menu-button "+t+" "+e.prototype.buildCSSClass.call(this)},t.prototype.controlText=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.menuButton_.el();return this.menuButton_.controlText(e,t)},t.prototype.handleClick=function(e){this.one(this.menu.contentEl(),"mouseleave",Me(this,(function(e){this.unpressButton(),this.el_.blur()}))),this.buttonPressed_?this.unpressButton():this.pressButton()},t.prototype.focus=function(){this.menuButton_.focus()},t.prototype.blur=function(){this.menuButton_.blur()},t.prototype.handleFocus=function(){we(c,"keydown",Me(this,this.handleKeyPress))},t.prototype.handleBlur=function(){Se(c,"keydown",Me(this,this.handleKeyPress))},t.prototype.handleKeyPress=function(e){27===e.which||9===e.which?(this.buttonPressed_&&this.unpressButton(),9!==e.which&&(e.preventDefault(),this.menuButton_.el_.focus())):38!==e.which&&40!==e.which||this.buttonPressed_||(this.pressButton(),e.preventDefault())},t.prototype.handleSubmenuKeyPress=function(e){27!==e.which&&9!==e.which||(this.buttonPressed_&&this.unpressButton(),9!==e.which&&(e.preventDefault(),this.menuButton_.el_.focus()))},t.prototype.pressButton=function(){if(this.enabled_){if(this.buttonPressed_=!0,this.menu.lockShowing(),this.menuButton_.el_.setAttribute("aria-expanded","true"),st&&N())return;this.menu.focus()}},t.prototype.unpressButton=function(){this.enabled_&&(this.buttonPressed_=!1,this.menu.unlockShowing(),this.menuButton_.el_.setAttribute("aria-expanded","false"))},t.prototype.disable=function(){this.unpressButton(),this.enabled_=!1,this.addClass("vjs-disabled"),this.menuButton_.disable()},t.prototype.enable=function(){this.enabled_=!0,this.removeClass("vjs-disabled"),this.menuButton_.enable()},t}(Je);Je.registerComponent("MenuButton",qi);var Hi=function(e){function t(n,r){y(this,t);var i=r.tracks,a=_(this,e.call(this,n,r));if(a.items.length<=1&&a.hide(),!i)return _(a);var s=Me(a,a.update);return i.addEventListener("removetrack",s),i.addEventListener("addtrack",s),a.player_.on("ready",s),a.player_.on("dispose",(function(){i.removeEventListener("removetrack",s),i.removeEventListener("addtrack",s)})),a}return b(t,e),t}(qi);Je.registerComponent("TrackButton",Hi);var Wi=function(e){function t(n,r){y(this,t);var i=_(this,e.call(this,n,r));return i.selectable=r.selectable,i.isSelected_=r.selected||!1,i.multiSelectable=r.multiSelectable,i.selected(i.isSelected_),i.selectable?i.multiSelectable?i.el_.setAttribute("role","menuitemcheckbox"):i.el_.setAttribute("role","menuitemradio"):i.el_.setAttribute("role","menuitem"),i}return b(t,e),t.prototype.createEl=function(t,n,r){return this.nonIconControl=!0,e.prototype.createEl.call(this,"li",k({className:"vjs-menu-item",innerHTML:'<span class="vjs-menu-item-text">'+this.localize(this.options_.label)+"</span>",tabIndex:-1},n),r)},t.prototype.handleClick=function(e){this.selected(!0)},t.prototype.selected=function(e){this.selectable&&(e?(this.addClass("vjs-selected"),this.el_.setAttribute("aria-checked","true"),this.controlText(", selected"),this.isSelected_=!0):(this.removeClass("vjs-selected"),this.el_.setAttribute("aria-checked","false"),this.controlText(""),this.isSelected_=!1))},t}(ti);Je.registerComponent("MenuItem",Wi);var zi=function(e){function t(n,r){y(this,t);var a=r.track,s=n.textTracks();r.label=a.label||a.language||"Unknown",r.selected="showing"===a.mode;var o=_(this,e.call(this,n,r));o.track=a;var u=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];o.handleTracksChange.apply(o,t)},l=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];o.handleSelectedLanguageChange.apply(o,t)};if(n.on(["loadstart","texttrackchange"],u),s.addEventListener("change",u),s.addEventListener("selectedlanguagechange",l),o.on("dispose",(function(){n.off(["loadstart","texttrackchange"],u),s.removeEventListener("change",u),s.removeEventListener("selectedlanguagechange",l)})),void 0===s.onchange){var d=void 0;o.on(["tap","click"],(function(){if("object"!==v(i.Event))try{d=new i.Event("change")}catch(e){}d||(d=c.createEvent("Event")).initEvent("change",!0,!0),s.dispatchEvent(d)}))}return o.handleTracksChange(),o}return b(t,e),t.prototype.handleClick=function(t){var n=this.track.kind,r=this.track.kinds,i=this.player_.textTracks();if(r||(r=[n]),e.prototype.handleClick.call(this,t),i)for(var a=0;a<i.length;a++){var s=i[a];s===this.track&&r.indexOf(s.kind)>-1?"showing"!==s.mode&&(s.mode="showing"):"disabled"!==s.mode&&(s.mode="disabled")}},t.prototype.handleTracksChange=function(e){var t="showing"===this.track.mode;t!==this.isSelected_&&this.selected(t)},t.prototype.handleSelectedLanguageChange=function(e){if("showing"===this.track.mode){var t=this.player_.cache_.selectedLanguage;if(t&&t.enabled&&t.language===this.track.language&&t.kind!==this.track.kind)return;this.player_.cache_.selectedLanguage={enabled:!0,language:this.track.language,kind:this.track.kind}}},t.prototype.dispose=function(){this.track=null,e.prototype.dispose.call(this)},t}(Wi);Je.registerComponent("TextTrackMenuItem",zi);var Gi=function(e){function t(n,r){return y(this,t),r.track={player:n,kind:r.kind,kinds:r.kinds,default:!1,mode:"disabled"},r.kinds||(r.kinds=[r.kind]),r.label?r.track.label=r.label:r.track.label=r.kinds.join(" and ")+" off",r.selectable=!0,r.multiSelectable=!1,_(this,e.call(this,n,r))}return b(t,e),t.prototype.handleTracksChange=function(e){for(var t=this.player().textTracks(),n=!0,r=0,i=t.length;r<i;r++){var a=t[r];if(this.options_.kinds.indexOf(a.kind)>-1&&"showing"===a.mode){n=!1;break}}n!==this.isSelected_&&this.selected(n)},t.prototype.handleSelectedLanguageChange=function(e){for(var t=this.player().textTracks(),n=!0,r=0,i=t.length;r<i;r++){var a=t[r];if(["captions","descriptions","subtitles"].indexOf(a.kind)>-1&&"showing"===a.mode){n=!1;break}}n&&(this.player_.cache_.selectedLanguage={enabled:!1})},t}(zi);Je.registerComponent("OffTextTrackMenuItem",Gi);var Ki=function(e){function t(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return y(this,t),r.tracks=n.textTracks(),_(this,e.call(this,n,r))}return b(t,e),t.prototype.createItems=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:zi,n=void 0;this.label_&&(n=this.label_+" off"),e.push(new Gi(this.player_,{kinds:this.kinds_,kind:this.kind_,label:n})),this.hideThreshold_+=1;var r=this.player_.textTracks();Array.isArray(this.kinds_)||(this.kinds_=[this.kind_]);for(var i=0;i<r.length;i++){var a=r[i];if(this.kinds_.indexOf(a.kind)>-1){var s=new t(this.player_,{track:a,selectable:!0,multiSelectable:!1});s.addClass("vjs-"+a.kind+"-menu-item"),e.push(s)}}return e},t}(Hi);Je.registerComponent("TextTrackButton",Ki);var Xi=function(e){function t(n,r){y(this,t);var i=r.track,a=r.cue,s=n.currentTime();r.selectable=!0,r.multiSelectable=!1,r.label=a.text,r.selected=a.startTime<=s&&s<a.endTime;var o=_(this,e.call(this,n,r));return o.track=i,o.cue=a,i.addEventListener("cuechange",Me(o,o.update)),o}return b(t,e),t.prototype.handleClick=function(t){e.prototype.handleClick.call(this),this.player_.currentTime(this.cue.startTime),this.update(this.cue.startTime)},t.prototype.update=function(e){var t=this.cue,n=this.player_.currentTime();this.selected(t.startTime<=n&&n<t.endTime)},t}(Wi);Je.registerComponent("ChaptersTrackMenuItem",Xi);var Yi=function(e){function t(n,r,i){return y(this,t),_(this,e.call(this,n,r,i))}return b(t,e),t.prototype.buildCSSClass=function(){return"vjs-chapters-button "+e.prototype.buildCSSClass.call(this)},t.prototype.buildWrapperCSSClass=function(){return"vjs-chapters-button "+e.prototype.buildWrapperCSSClass.call(this)},t.prototype.update=function(t){this.track_&&(!t||"addtrack"!==t.type&&"removetrack"!==t.type)||this.setTrack(this.findChaptersTrack()),e.prototype.update.call(this)},t.prototype.setTrack=function(e){if(this.track_!==e){if(this.updateHandler_||(this.updateHandler_=this.update.bind(this)),this.track_){var t=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);t&&t.removeEventListener("load",this.updateHandler_),this.track_=null}if(this.track_=e,this.track_){this.track_.mode="hidden";var n=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);n&&n.addEventListener("load",this.updateHandler_)}}},t.prototype.findChaptersTrack=function(){for(var e=this.player_.textTracks()||[],t=e.length-1;t>=0;t--){var n=e[t];if(n.kind===this.kind_)return n}},t.prototype.getMenuCaption=function(){return this.track_&&this.track_.label?this.track_.label:this.localize(Xe(this.kind_))},t.prototype.createMenu=function(){return this.options_.title=this.getMenuCaption(),e.prototype.createMenu.call(this)},t.prototype.createItems=function(){var e=[];if(!this.track_)return e;var t=this.track_.cues;if(!t)return e;for(var n=0,r=t.length;n<r;n++){var i=t[n],a=new Xi(this.player_,{track:this.track_,cue:i});e.push(a)}return e},t}(Ki);Yi.prototype.kind_="chapters",Yi.prototype.controlText_="Chapters",Je.registerComponent("ChaptersButton",Yi);var Qi=function(e){function t(n,r,i){y(this,t);var a=_(this,e.call(this,n,r,i)),s=n.textTracks(),o=Me(a,a.handleTracksChange);return s.addEventListener("change",o),a.on("dispose",(function(){s.removeEventListener("change",o)})),a}return b(t,e),t.prototype.handleTracksChange=function(e){for(var t=this.player().textTracks(),n=!1,r=0,i=t.length;r<i;r++){var a=t[r];if(a.kind!==this.kind_&&"showing"===a.mode){n=!0;break}}n?this.disable():this.enable()},t.prototype.buildCSSClass=function(){return"vjs-descriptions-button "+e.prototype.buildCSSClass.call(this)},t.prototype.buildWrapperCSSClass=function(){return"vjs-descriptions-button "+e.prototype.buildWrapperCSSClass.call(this)},t}(Ki);Qi.prototype.kind_="descriptions",Qi.prototype.controlText_="Descriptions",Je.registerComponent("DescriptionsButton",Qi);var Ji=function(e){function t(n,r,i){return y(this,t),_(this,e.call(this,n,r,i))}return b(t,e),t.prototype.buildCSSClass=function(){return"vjs-subtitles-button "+e.prototype.buildCSSClass.call(this)},t.prototype.buildWrapperCSSClass=function(){return"vjs-subtitles-button "+e.prototype.buildWrapperCSSClass.call(this)},t}(Ki);Ji.prototype.kind_="subtitles",Ji.prototype.controlText_="Subtitles",Je.registerComponent("SubtitlesButton",Ji);var Zi=function(e){function t(n,r){y(this,t),r.track={player:n,kind:r.kind,label:r.kind+" settings",selectable:!1,default:!1,mode:"disabled"},r.selectable=!1,r.name="CaptionSettingsMenuItem";var i=_(this,e.call(this,n,r));return i.addClass("vjs-texttrack-settings"),i.controlText(", opens "+r.kind+" settings dialog"),i}return b(t,e),t.prototype.handleClick=function(e){this.player().getChild("textTrackSettings").open()},t}(zi);Je.registerComponent("CaptionSettingsMenuItem",Zi);var ea=function(e){function t(n,r,i){return y(this,t),_(this,e.call(this,n,r,i))}return b(t,e),t.prototype.buildCSSClass=function(){return"vjs-captions-button "+e.prototype.buildCSSClass.call(this)},t.prototype.buildWrapperCSSClass=function(){return"vjs-captions-button "+e.prototype.buildWrapperCSSClass.call(this)},t.prototype.createItems=function(){var t=[];return this.player().tech_&&this.player().tech_.featuresNativeTextTracks||!this.player().getChild("textTrackSettings")||(t.push(new Zi(this.player_,{kind:this.kind_})),this.hideThreshold_+=1),e.prototype.createItems.call(this,t)},t}(Ki);ea.prototype.kind_="captions",ea.prototype.controlText_="Captions",Je.registerComponent("CaptionsButton",ea);var ta=function(e){function t(){return y(this,t),_(this,e.apply(this,arguments))}return b(t,e),t.prototype.createEl=function(t,n,r){var i='<span class="vjs-menu-item-text">'+this.localize(this.options_.label);return"captions"===this.options_.track.kind&&(i+='\n        <span aria-hidden="true" class="vjs-icon-placeholder"></span>\n        <span class="vjs-control-text"> '+this.localize("Captions")+"</span>\n      "),i+="</span>",e.prototype.createEl.call(this,t,k({innerHTML:i},n),r)},t}(zi);Je.registerComponent("SubsCapsMenuItem",ta);var na=function(e){function t(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};y(this,t);var i=_(this,e.call(this,n,r));return i.label_="subtitles",["en","en-us","en-ca","fr-ca"].indexOf(i.player_.language_)>-1&&(i.label_="captions"),i.menuButton_.controlText(Xe(i.label_)),i}return b(t,e),t.prototype.buildCSSClass=function(){return"vjs-subs-caps-button "+e.prototype.buildCSSClass.call(this)},t.prototype.buildWrapperCSSClass=function(){return"vjs-subs-caps-button "+e.prototype.buildWrapperCSSClass.call(this)},t.prototype.createItems=function(){var t=[];return this.player().tech_&&this.player().tech_.featuresNativeTextTracks||!this.player().getChild("textTrackSettings")||(t.push(new Zi(this.player_,{kind:this.label_})),this.hideThreshold_+=1),t=e.prototype.createItems.call(this,t,ta)},t}(Ki);na.prototype.kinds_=["captions","subtitles"],na.prototype.controlText_="Subtitles",Je.registerComponent("SubsCapsButton",na);var ra=function(e){function t(n,r){y(this,t);var i=r.track,a=n.audioTracks();r.label=i.label||i.language||"Unknown",r.selected=i.enabled;var s=_(this,e.call(this,n,r));s.track=i,s.addClass("vjs-"+i.kind+"-menu-item");var o=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];s.handleTracksChange.apply(s,t)};return a.addEventListener("change",o),s.on("dispose",(function(){a.removeEventListener("change",o)})),s}return b(t,e),t.prototype.createEl=function(t,n,r){var i='<span class="vjs-menu-item-text">'+this.localize(this.options_.label);return"main-desc"===this.options_.track.kind&&(i+='\n        <span aria-hidden="true" class="vjs-icon-placeholder"></span>\n        <span class="vjs-control-text"> '+this.localize("Descriptions")+"</span>\n      "),i+="</span>",e.prototype.createEl.call(this,t,k({innerHTML:i},n),r)},t.prototype.handleClick=function(t){var n=this.player_.audioTracks();e.prototype.handleClick.call(this,t);for(var r=0;r<n.length;r++){var i=n[r];i.enabled=i===this.track}},t.prototype.handleTracksChange=function(e){this.selected(this.track.enabled)},t}(Wi);Je.registerComponent("AudioTrackMenuItem",ra);var ia=function(e){function t(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return y(this,t),r.tracks=n.audioTracks(),_(this,e.call(this,n,r))}return b(t,e),t.prototype.buildCSSClass=function(){return"vjs-audio-button "+e.prototype.buildCSSClass.call(this)},t.prototype.buildWrapperCSSClass=function(){return"vjs-audio-button "+e.prototype.buildWrapperCSSClass.call(this)},t.prototype.createItems=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.hideThreshold_=1;for(var t=this.player_.audioTracks(),n=0;n<t.length;n++){var r=t[n];e.push(new ra(this.player_,{track:r,selectable:!0,multiSelectable:!1}))}return e},t}(Hi);ia.prototype.controlText_="Audio Track",Je.registerComponent("AudioTrackButton",ia);var aa=function(e){function t(n,r){y(this,t);var i=r.rate,a=parseFloat(i,10);r.label=i,r.selected=1===a,r.selectable=!0,r.multiSelectable=!1;var s=_(this,e.call(this,n,r));return s.label=i,s.rate=a,s.on(n,"ratechange",s.update),s}return b(t,e),t.prototype.handleClick=function(t){e.prototype.handleClick.call(this),this.player().playbackRate(this.rate)},t.prototype.update=function(e){this.selected(this.player().playbackRate()===this.rate)},t}(Wi);aa.prototype.contentElType="button",Je.registerComponent("PlaybackRateMenuItem",aa);var sa=function(e){function t(n,r){y(this,t);var i=_(this,e.call(this,n,r));return i.updateVisibility(),i.updateLabel(),i.on(n,"loadstart",i.updateVisibility),i.on(n,"ratechange",i.updateLabel),i}return b(t,e),t.prototype.createEl=function(){var t=e.prototype.createEl.call(this);return this.labelEl_=U("div",{className:"vjs-playback-rate-value",innerHTML:"1x"}),t.appendChild(this.labelEl_),t},t.prototype.dispose=function(){this.labelEl_=null,e.prototype.dispose.call(this)},t.prototype.buildCSSClass=function(){return"vjs-playback-rate "+e.prototype.buildCSSClass.call(this)},t.prototype.buildWrapperCSSClass=function(){return"vjs-playback-rate "+e.prototype.buildWrapperCSSClass.call(this)},t.prototype.createMenu=function(){var e=new Vi(this.player()),t=this.playbackRates();if(t)for(var n=t.length-1;n>=0;n--)e.addChild(new aa(this.player(),{rate:t[n]+"x"}));return e},t.prototype.updateARIAAttributes=function(){this.el().setAttribute("aria-valuenow",this.player().playbackRate())},t.prototype.handleClick=function(e){for(var t=this.player().playbackRate(),n=this.playbackRates(),r=n[0],i=0;i<n.length;i++)if(n[i]>t){r=n[i];break}this.player().playbackRate(r)},t.prototype.playbackRates=function(){return this.options_.playbackRates||this.options_.playerOptions&&this.options_.playerOptions.playbackRates},t.prototype.playbackRateSupported=function(){return this.player().tech_&&this.player().tech_.featuresPlaybackRate&&this.playbackRates()&&this.playbackRates().length>0},t.prototype.updateVisibility=function(e){this.playbackRateSupported()?this.removeClass("vjs-hidden"):this.addClass("vjs-hidden")},t.prototype.updateLabel=function(e){this.playbackRateSupported()&&(this.labelEl_.innerHTML=this.player().playbackRate()+"x")},t}(qi);sa.prototype.controlText_="Playback Rate",Je.registerComponent("PlaybackRateMenuButton",sa);var oa=function(e){function t(){return y(this,t),_(this,e.apply(this,arguments))}return b(t,e),t.prototype.buildCSSClass=function(){return"vjs-spacer "+e.prototype.buildCSSClass.call(this)},t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:this.buildCSSClass()})},t}(Je);Je.registerComponent("Spacer",oa);var ua=function(e){function t(){return y(this,t),_(this,e.apply(this,arguments))}return b(t,e),t.prototype.buildCSSClass=function(){return"vjs-custom-control-spacer "+e.prototype.buildCSSClass.call(this)},t.prototype.createEl=function(){var t=e.prototype.createEl.call(this,{className:this.buildCSSClass()});return t.innerHTML=" ",t},t}(oa);Je.registerComponent("CustomControlSpacer",ua);var ca=function(e){function t(){return y(this,t),_(this,e.apply(this,arguments))}return b(t,e),t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-control-bar",dir:"ltr"})},t}(Je);ca.prototype.options_={children:["playToggle","volumePanel","currentTimeDisplay","timeDivider","durationDisplay","progressControl","liveDisplay","remainingTimeDisplay","customControlSpacer","playbackRateMenuButton","chaptersButton","descriptionsButton","subsCapsButton","audioTrackButton","fullscreenToggle"]},Je.registerComponent("ControlBar",ca);var la=function(e){function t(n,r){y(this,t);var i=_(this,e.call(this,n,r));return i.on(n,"error",i.open),i}return b(t,e),t.prototype.buildCSSClass=function(){return"vjs-error-display "+e.prototype.buildCSSClass.call(this)},t.prototype.content=function(){var e=this.player().error();return e?this.localize(e.message):""},t}(qt);la.prototype.options_=Qe(qt.prototype.options_,{pauseOnOpen:!1,fillAlways:!0,temporary:!1,uncloseable:!0}),Je.registerComponent("ErrorDisplay",la);var da="vjs-text-track-settings",ha=["#000","Black"],pa=["#00F","Blue"],fa=["#0FF","Cyan"],ma=["#0F0","Green"],ga=["#F0F","Magenta"],va=["#F00","Red"],ya=["#FFF","White"],ba=["#FF0","Yellow"],_a=["1","Opaque"],Ta=["0.5","Semi-Transparent"],wa=["0","Transparent"],Sa={backgroundColor:{selector:".vjs-bg-color > select",id:"captions-background-color-%s",label:"Color",options:[ha,ya,va,ma,pa,ba,ga,fa]},backgroundOpacity:{selector:".vjs-bg-opacity > select",id:"captions-background-opacity-%s",label:"Transparency",options:[_a,Ta,wa]},color:{selector:".vjs-fg-color > select",id:"captions-foreground-color-%s",label:"Color",options:[ya,ha,va,ma,pa,ba,ga,fa]},edgeStyle:{selector:".vjs-edge-style > select",id:"%s",label:"Text Edge Style",options:[["none","None"],["raised","Raised"],["depressed","Depressed"],["uniform","Uniform"],["dropshadow","Dropshadow"]]},fontFamily:{selector:".vjs-font-family > select",id:"captions-font-family-%s",label:"Font Family",options:[["proportionalSansSerif","Proportional Sans-Serif"],["monospaceSansSerif","Monospace Sans-Serif"],["proportionalSerif","Proportional Serif"],["monospaceSerif","Monospace Serif"],["casual","Casual"],["script","Script"],["small-caps","Small Caps"]]},fontPercent:{selector:".vjs-font-percent > select",id:"captions-font-size-%s",label:"Font Size",options:[["0.50","50%"],["0.75","75%"],["1.00","100%"],["1.25","125%"],["1.50","150%"],["1.75","175%"],["2.00","200%"],["3.00","300%"],["4.00","400%"]],default:2,parser:function(e){return"1.00"===e?null:Number(e)}},textOpacity:{selector:".vjs-text-opacity > select",id:"captions-foreground-opacity-%s",label:"Transparency",options:[_a,Ta]},windowColor:{selector:".vjs-window-color > select",id:"captions-window-color-%s",label:"Color"},windowOpacity:{selector:".vjs-window-opacity > select",id:"captions-window-opacity-%s",label:"Transparency",options:[wa,Ta,_a]}};function Ca(e,t){if(t&&(e=t(e)),e&&"none"!==e)return e}function Ea(e,t){return Ca(e.options[e.options.selectedIndex].value,t)}function ka(e,t,n){if(t)for(var r=0;r<e.options.length;r++)if(Ca(e.options[r].value,n)===t){e.selectedIndex=r;break}}Sa.windowColor.options=Sa.backgroundColor.options;var Oa=function(e){function t(n,r){y(this,t),r.temporary=!1;var i=_(this,e.call(this,n,r));return i.updateDisplay=Me(i,i.updateDisplay),i.fill(),i.hasBeenOpened_=i.hasBeenFilled_=!0,i.endDialog=U("p",{className:"vjs-control-text",textContent:i.localize("End of dialog window.")}),i.el().appendChild(i.endDialog),i.setDefaults(),void 0===r.persistTextTrackSettings&&(i.options_.persistTextTrackSettings=i.options_.playerOptions.persistTextTrackSettings),i.on(i.$(".vjs-done-button"),"click",(function(){i.saveSettings(),i.close()})),i.on(i.$(".vjs-default-button"),"click",(function(){i.setDefaults(),i.updateDisplay()})),C(Sa,(function(e){i.on(i.$(e.selector),"change",i.updateDisplay)})),i.options_.persistTextTrackSettings&&i.restoreSettings(),i}return b(t,e),t.prototype.dispose=function(){this.endDialog=null,e.prototype.dispose.call(this)},t.prototype.createElSelect_=function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"label",i=Sa[e],a=i.id.replace("%s",this.id_),s=[n,a].join(" ").trim();return["<"+r+' id="'+a+'" class="'+("label"===r?"vjs-label":"")+'">',this.localize(i.label),"</"+r+">",'<select aria-labelledby="'+s+'">'].concat(i.options.map((function(e){var n=a+"-"+e[1].replace(/\W+/g,"");return['<option id="'+n+'" value="'+e[0]+'" ','aria-labelledby="'+s+" "+n+'">',t.localize(e[1]),"</option>"].join("")}))).concat("</select>").join("")},t.prototype.createElFgColor_=function(){var e="captions-text-legend-"+this.id_;return['<fieldset class="vjs-fg-color vjs-track-setting">','<legend id="'+e+'">',this.localize("Text"),"</legend>",this.createElSelect_("color",e),'<span class="vjs-text-opacity vjs-opacity">',this.createElSelect_("textOpacity",e),"</span>","</fieldset>"].join("")},t.prototype.createElBgColor_=function(){var e="captions-background-"+this.id_;return['<fieldset class="vjs-bg-color vjs-track-setting">','<legend id="'+e+'">',this.localize("Background"),"</legend>",this.createElSelect_("backgroundColor",e),'<span class="vjs-bg-opacity vjs-opacity">',this.createElSelect_("backgroundOpacity",e),"</span>","</fieldset>"].join("")},t.prototype.createElWinColor_=function(){var e="captions-window-"+this.id_;return['<fieldset class="vjs-window-color vjs-track-setting">','<legend id="'+e+'">',this.localize("Window"),"</legend>",this.createElSelect_("windowColor",e),'<span class="vjs-window-opacity vjs-opacity">',this.createElSelect_("windowOpacity",e),"</span>","</fieldset>"].join("")},t.prototype.createElColors_=function(){return U("div",{className:"vjs-track-settings-colors",innerHTML:[this.createElFgColor_(),this.createElBgColor_(),this.createElWinColor_()].join("")})},t.prototype.createElFont_=function(){return U("div",{className:"vjs-track-settings-font",innerHTML:['<fieldset class="vjs-font-percent vjs-track-setting">',this.createElSelect_("fontPercent","","legend"),"</fieldset>",'<fieldset class="vjs-edge-style vjs-track-setting">',this.createElSelect_("edgeStyle","","legend"),"</fieldset>",'<fieldset class="vjs-font-family vjs-track-setting">',this.createElSelect_("fontFamily","","legend"),"</fieldset>"].join("")})},t.prototype.createElControls_=function(){var e=this.localize("restore all settings to the default values");return U("div",{className:"vjs-track-settings-controls",innerHTML:['<button class="vjs-default-button" title="'+e+'">',this.localize("Reset"),'<span class="vjs-control-text"> '+e+"</span>","</button>",'<button class="vjs-done-button">'+this.localize("Done")+"</button>"].join("")})},t.prototype.content=function(){return[this.createElColors_(),this.createElFont_(),this.createElControls_()]},t.prototype.label=function(){return this.localize("Caption Settings Dialog")},t.prototype.description=function(){return this.localize("Beginning of dialog window. Escape will cancel and close the window.")},t.prototype.buildCSSClass=function(){return e.prototype.buildCSSClass.call(this)+" vjs-text-track-settings"},t.prototype.getValues=function(){var e=this;return E(Sa,(function(t,n,r){var i=Ea(e.$(n.selector),n.parser);return void 0!==i&&(t[r]=i),t}),{})},t.prototype.setValues=function(e){var t=this;C(Sa,(function(n,r){ka(t.$(n.selector),e[r],n.parser)}))},t.prototype.setDefaults=function(){var e=this;C(Sa,(function(t){var n=t.hasOwnProperty("default")?t.default:0;e.$(t.selector).selectedIndex=n}))},t.prototype.restoreSettings=function(){var e=void 0;try{e=JSON.parse(i.localStorage.getItem(da))}catch(e){f.warn(e)}e&&this.setValues(e)},t.prototype.saveSettings=function(){if(this.options_.persistTextTrackSettings){var e=this.getValues();try{Object.keys(e).length?i.localStorage.setItem(da,JSON.stringify(e)):i.localStorage.removeItem(da)}catch(e){f.warn(e)}}},t.prototype.updateDisplay=function(){var e=this.player_.getChild("textTrackDisplay");e&&e.updateDisplay()},t.prototype.conditionalBlur_=function(){this.previouslyActiveEl_=null,this.off(c,"keydown",this.handleKeyDown);var e=this.player_.controlBar,t=e&&e.subsCapsButton,n=e&&e.captionsButton;t?t.focus():n&&n.focus()},t}(qt);Je.registerComponent("TextTrackSettings",Oa);var xa=function(e){function t(n,r){y(this,t);var a=r.ResizeObserver||i.ResizeObserver;null===r.ResizeObserver&&(a=!1);var s=Qe({createEl:!a,reportTouchActivity:!1},r),o=_(this,e.call(this,n,s));return o.ResizeObserver=r.ResizeObserver||i.ResizeObserver,o.loadListener_=null,o.resizeObserver_=null,o.debouncedHandler_=Re((function(){o.resizeHandler()}),100,!1,o),a?(o.resizeObserver_=new o.ResizeObserver(o.debouncedHandler_),o.resizeObserver_.observe(n.el())):(o.loadListener_=function(){o.el_&&o.el_.contentWindow&&we(o.el_.contentWindow,"resize",o.debouncedHandler_)},o.one("load",o.loadListener_)),o}return b(t,e),t.prototype.createEl=function(){return e.prototype.createEl.call(this,"iframe",{className:"vjs-resize-manager"})},t.prototype.resizeHandler=function(){this.player_&&this.player_.trigger&&this.player_.trigger("playerresize")},t.prototype.dispose=function(){this.debouncedHandler_&&this.debouncedHandler_.cancel(),this.resizeObserver_&&(this.player_.el()&&this.resizeObserver_.unobserve(this.player_.el()),this.resizeObserver_.disconnect()),this.el_&&this.el_.contentWindow&&Se(this.el_.contentWindow,"resize",this.debouncedHandler_),this.loadListener_&&this.off("load",this.loadListener_),this.ResizeObserver=null,this.resizeObserver=null,this.debouncedHandler_=null,this.loadListener_=null},t}(Je);Je.registerComponent("ResizeManager",xa);var Aa=function(e){var t=e.el();if(t.hasAttribute("src"))return e.triggerSourceset(t.src),!0;var n=e.$$("source"),r=[],i="";if(!n.length)return!1;for(var a=0;a<n.length;a++){var s=n[a].src;s&&-1===r.indexOf(s)&&r.push(s)}return!!r.length&&(1===r.length&&(i=r[0]),e.triggerSourceset(i),!0)},Pa=Object.defineProperty({},"innerHTML",{get:function(){return this.cloneNode(!0).innerHTML},set:function(e){var t=c.createElement(this.nodeName.toLowerCase());t.innerHTML=e;for(var n=c.createDocumentFragment();t.childNodes.length;)n.appendChild(t.childNodes[0]);return this.innerText="",i.Element.prototype.appendChild.call(this,n),this.innerHTML}}),Ia=function(e,t){for(var n={},r=0;r<e.length&&!((n=Object.getOwnPropertyDescriptor(e[r],t))&&n.set&&n.get);r++);return n.enumerable=!0,n.configurable=!0,n},La=function(e){return Ia([e.el(),i.HTMLMediaElement.prototype,i.Element.prototype,Pa],"innerHTML")},Ma=function(e){var t=e.el();if(!t.resetSourceWatch_){var n={},r=La(e),i=function(n){return function(){for(var r=arguments.length,i=Array(r),a=0;a<r;a++)i[a]=arguments[a];var s=n.apply(t,i);return Aa(e),s}};["append","appendChild","insertAdjacentHTML"].forEach((function(e){t[e]&&(n[e]=t[e],t[e]=i(n[e]))})),Object.defineProperty(t,"innerHTML",Qe(r,{set:i(r.set)})),t.resetSourceWatch_=function(){t.resetSourceWatch_=null,Object.keys(n).forEach((function(e){t[e]=n[e]})),Object.defineProperty(t,"innerHTML",r)},e.one("sourceset",t.resetSourceWatch_)}},Da=Object.defineProperty({},"src",{get:function(){return this.hasAttribute("src")?sn(i.Element.prototype.getAttribute.call(this,"src")):""},set:function(e){return i.Element.prototype.setAttribute.call(this,"src",e),e}}),Ra=function(e){return Ia([e.el(),i.HTMLMediaElement.prototype,Da],"src")},Na=function(e){if(e.featuresSourceset){var t=e.el();if(!t.resetSourceset_){var n=Ra(e),r=t.setAttribute,i=t.load;Object.defineProperty(t,"src",Qe(n,{set:function(r){var i=n.set.call(t,r);return e.triggerSourceset(t.src),i}})),t.setAttribute=function(n,i){var a=r.call(t,n,i);return/src/i.test(n)&&e.triggerSourceset(t.src),a},t.load=function(){var n=i.call(t);return Aa(e)||(e.triggerSourceset(""),Ma(e)),n},t.currentSrc?e.triggerSourceset(t.currentSrc):Aa(e)||Ma(e),t.resetSourceset_=function(){t.resetSourceset_=null,t.load=i,t.setAttribute=r,Object.defineProperty(t,"src",n),t.resetSourceWatch_&&t.resetSourceWatch_()}}}},ja=T(["Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.\n            This may prevent text tracks from loading."],["Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.\n            This may prevent text tracks from loading."]),Ua=function(e){function t(n,r){y(this,t);var i=_(this,e.call(this,n,r)),a=n.source,s=!1;if(a&&(i.el_.currentSrc!==a.src||n.tag&&3===n.tag.initNetworkState_)?i.setSource(a):i.handleLateInit_(i.el_),n.enableSourceset&&i.setupSourcesetHandling_(),i.el_.hasChildNodes()){for(var o=i.el_.childNodes,u=o.length,c=[];u--;){var l=o[u];"track"===l.nodeName.toLowerCase()&&(i.featuresNativeTextTracks?(i.remoteTextTrackEls().addTrackElement_(l),i.remoteTextTracks().addTrack(l.track),i.textTracks().addTrack(l.track),s||i.el_.hasAttribute("crossorigin")||!un(l.src)||(s=!0)):c.push(l))}for(var d=0;d<c.length;d++)i.el_.removeChild(c[d])}return i.proxyNativeTracks_(),i.featuresNativeTextTracks&&s&&f.warn(g(ja)),i.restoreMetadataTracksInIOSNativePlayer_(),(yt||it||lt)&&!0===n.nativeControlsForTouch&&i.setControls(!0),i.proxyWebkitFullscreen_(),i.triggerReady(),i}return b(t,e),t.prototype.dispose=function(){this.el_&&this.el_.resetSourceset_&&this.el_.resetSourceset_(),t.disposeMediaElement(this.el_),this.options_=null,e.prototype.dispose.call(this)},t.prototype.setupSourcesetHandling_=function(){Na(this)},t.prototype.restoreMetadataTracksInIOSNativePlayer_=function(){var e=this.textTracks(),t=void 0,n=function(){t=[];for(var n=0;n<e.length;n++){var r=e[n];"metadata"===r.kind&&t.push({track:r,storedMode:r.mode})}};n(),e.addEventListener("change",n),this.on("dispose",(function(){return e.removeEventListener("change",n)}));var r=function n(){for(var r=0;r<t.length;r++){var i=t[r];"disabled"===i.track.mode&&i.track.mode!==i.storedMode&&(i.track.mode=i.storedMode)}e.removeEventListener("change",n)};this.on("webkitbeginfullscreen",(function(){e.removeEventListener("change",n),e.removeEventListener("change",r),e.addEventListener("change",r)})),this.on("webkitendfullscreen",(function(){e.removeEventListener("change",n),e.addEventListener("change",n),e.removeEventListener("change",r)}))},t.prototype.overrideNative_=function(e,t){var n=this;if(t===this["featuresNative"+e+"Tracks"]){var r=e.toLowerCase();this[r+"TracksListeners_"]&&Object.keys(this[r+"TracksListeners_"]).forEach((function(e){n.el()[r+"Tracks"].removeEventListener(e,n[r+"TracksListeners_"][e])})),this["featuresNative"+e+"Tracks"]=!t,this[r+"TracksListeners_"]=null,this.proxyNativeTracksForType_(r)}},t.prototype.overrideNativeAudioTracks=function(e){this.overrideNative_("Audio",e)},t.prototype.overrideNativeVideoTracks=function(e){this.overrideNative_("Video",e)},t.prototype.proxyNativeTracksForType_=function(e){var t=this,n=Hn[e],r=this.el()[n.getterName],i=this[n.getterName]();if(this["featuresNative"+n.capitalName+"Tracks"]&&r&&r.addEventListener){var a={change:function(e){i.trigger({type:"change",target:i,currentTarget:i,srcElement:i})},addtrack:function(e){i.addTrack(e.track)},removetrack:function(e){i.removeTrack(e.track)}},s=function(){for(var e=[],t=0;t<i.length;t++){for(var n=!1,a=0;a<r.length;a++)if(r[a]===i[t]){n=!0;break}n||e.push(i[t])}for(;e.length;)i.removeTrack(e.shift())};this[n.getterName+"Listeners_"]=a,Object.keys(a).forEach((function(e){var n=a[e];r.addEventListener(e,n),t.on("dispose",(function(t){return r.removeEventListener(e,n)}))})),this.on("loadstart",s),this.on("dispose",(function(e){return t.off("loadstart",s)}))}},t.prototype.proxyNativeTracks_=function(){var e=this;Hn.names.forEach((function(t){e.proxyNativeTracksForType_(t)}))},t.prototype.createEl=function(){var e=this.options_.tag;if(!e||!this.options_.playerElIngest&&!this.movingMediaElementInDOM){if(e){var n=e.cloneNode(!0);e.parentNode&&e.parentNode.insertBefore(n,e),t.disposeMediaElement(e),e=n}else{e=c.createElement("video");var r=Qe({},this.options_.tag&&z(this.options_.tag));yt&&!0===this.options_.nativeControlsForTouch||delete r.controls,W(e,k(r,{id:this.options_.techId,class:"vjs-tech"}))}e.playerId=this.options_.playerId}void 0!==this.options_.preload&&K(e,"preload",this.options_.preload);for(var i=["loop","muted","playsinline","autoplay"],a=0;a<i.length;a++){var s=i[a],o=this.options_[s];void 0!==o&&(o?K(e,s,s):X(e,s),e[s]=o)}return e},t.prototype.handleLateInit_=function(e){if(0!==e.networkState&&3!==e.networkState){if(0===e.readyState){var t=!1,n=function(){t=!0};this.on("loadstart",n);var r=function(){t||this.trigger("loadstart")};return this.on("loadedmetadata",r),void this.ready((function(){this.off("loadstart",n),this.off("loadedmetadata",r),t||this.trigger("loadstart")}))}var i=["loadstart"];i.push("loadedmetadata"),e.readyState>=2&&i.push("loadeddata"),e.readyState>=3&&i.push("canplay"),e.readyState>=4&&i.push("canplaythrough"),this.ready((function(){i.forEach((function(e){this.trigger(e)}),this)}))}},t.prototype.setCurrentTime=function(e){try{this.el_.currentTime=e}catch(e){f(e,"Video is not ready. (Video.js)")}},t.prototype.duration=function(){var e=this;if(this.el_.duration===1/0&&ut&&pt&&0===this.el_.currentTime){var t=function t(){e.el_.currentTime>0&&(e.el_.duration===1/0&&e.trigger("durationchange"),e.off("timeupdate",t))};return this.on("timeupdate",t),NaN}return this.el_.duration||NaN},t.prototype.width=function(){return this.el_.offsetWidth},t.prototype.height=function(){return this.el_.offsetHeight},t.prototype.proxyWebkitFullscreen_=function(){var e=this;if("webkitDisplayingFullscreen"in this.el_){var t=function(){this.trigger("fullscreenchange",{isFullscreen:!1})},n=function(){"webkitPresentationMode"in this.el_&&"picture-in-picture"!==this.el_.webkitPresentationMode&&(this.one("webkitendfullscreen",t),this.trigger("fullscreenchange",{isFullscreen:!0}))};this.on("webkitbeginfullscreen",n),this.on("dispose",(function(){e.off("webkitbeginfullscreen",n),e.off("webkitendfullscreen",t)}))}},t.prototype.supportsFullScreen=function(){if("function"==typeof this.el_.webkitEnterFullScreen){var e=i.navigator&&i.navigator.userAgent||"";if(/Android/.test(e)||!/Chrome|Mac OS X 10.5/.test(e))return!0}return!1},t.prototype.enterFullScreen=function(){var e=this.el_;e.paused&&e.networkState<=e.HAVE_METADATA?(this.el_.play(),this.setTimeout((function(){e.pause(),e.webkitEnterFullScreen()}),0)):e.webkitEnterFullScreen()},t.prototype.exitFullScreen=function(){this.el_.webkitExitFullScreen()},t.prototype.src=function(e){if(void 0===e)return this.el_.src;this.setSrc(e)},t.prototype.reset=function(){t.resetMediaElement(this.el_)},t.prototype.currentSrc=function(){return this.currentSource_?this.currentSource_.src:this.el_.currentSrc},t.prototype.setControls=function(e){this.el_.controls=!!e},t.prototype.addTextTrack=function(t,n,r){return this.featuresNativeTextTracks?this.el_.addTextTrack(t,n,r):e.prototype.addTextTrack.call(this,t,n,r)},t.prototype.createRemoteTextTrack=function(t){if(!this.featuresNativeTextTracks)return e.prototype.createRemoteTextTrack.call(this,t);var n=c.createElement("track");return t.kind&&(n.kind=t.kind),t.label&&(n.label=t.label),(t.language||t.srclang)&&(n.srclang=t.language||t.srclang),t.default&&(n.default=t.default),t.id&&(n.id=t.id),t.src&&(n.src=t.src),n},t.prototype.addRemoteTextTrack=function(t,n){var r=e.prototype.addRemoteTextTrack.call(this,t,n);return this.featuresNativeTextTracks&&this.el().appendChild(r),r},t.prototype.removeRemoteTextTrack=function(t){if(e.prototype.removeRemoteTextTrack.call(this,t),this.featuresNativeTextTracks)for(var n=this.$$("track"),r=n.length;r--;)t!==n[r]&&t!==n[r].track||this.el().removeChild(n[r])},t.prototype.getVideoPlaybackQuality=function(){if("function"==typeof this.el().getVideoPlaybackQuality)return this.el().getVideoPlaybackQuality();var e={};return void 0!==this.el().webkitDroppedFrameCount&&void 0!==this.el().webkitDecodedFrameCount&&(e.droppedVideoFrames=this.el().webkitDroppedFrameCount,e.totalVideoFrames=this.el().webkitDecodedFrameCount),i.performance&&"function"==typeof i.performance.now?e.creationTime=i.performance.now():i.performance&&i.performance.timing&&"number"==typeof i.performance.timing.navigationStart&&(e.creationTime=i.Date.now()-i.performance.timing.navigationStart),e},t}(Ir);if(D()){Ua.TEST_VID=c.createElement("video");var Fa=c.createElement("track");Fa.kind="captions",Fa.srclang="en",Fa.label="English",Ua.TEST_VID.appendChild(Fa)}Ua.isSupported=function(){try{Ua.TEST_VID.volume=.5}catch(e){return!1}return!(!Ua.TEST_VID||!Ua.TEST_VID.canPlayType)},Ua.canPlayType=function(e){return Ua.TEST_VID.canPlayType(e)},Ua.canPlaySource=function(e,t){return Ua.canPlayType(e.type)},Ua.canControlVolume=function(){try{var e=Ua.TEST_VID.volume;return Ua.TEST_VID.volume=e/2+.1,e!==Ua.TEST_VID.volume}catch(e){return!1}},Ua.canMuteVolume=function(){try{var e=Ua.TEST_VID.muted;return Ua.TEST_VID.muted=!e,Ua.TEST_VID.muted?K(Ua.TEST_VID,"muted","muted"):X(Ua.TEST_VID,"muted","muted"),e!==Ua.TEST_VID.muted}catch(e){return!1}},Ua.canControlPlaybackRate=function(){if(ut&&pt&&ft<58)return!1;try{var e=Ua.TEST_VID.playbackRate;return Ua.TEST_VID.playbackRate=e/2+.1,e!==Ua.TEST_VID.playbackRate}catch(e){return!1}},Ua.canOverrideAttributes=function(){try{var e=function(){};Object.defineProperty(c.createElement("video"),"src",{get:e,set:e}),Object.defineProperty(c.createElement("audio"),"src",{get:e,set:e}),Object.defineProperty(c.createElement("video"),"innerHTML",{get:e,set:e}),Object.defineProperty(c.createElement("audio"),"innerHTML",{get:e,set:e})}catch(e){return!1}return!0},Ua.supportsNativeTextTracks=function(){return vt||st&&pt},Ua.supportsNativeVideoTracks=function(){return!(!Ua.TEST_VID||!Ua.TEST_VID.videoTracks)},Ua.supportsNativeAudioTracks=function(){return!(!Ua.TEST_VID||!Ua.TEST_VID.audioTracks)},Ua.Events=["loadstart","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","seeking","seeked","ended","durationchange","timeupdate","progress","play","pause","ratechange","resize","volumechange"],Ua.prototype.featuresVolumeControl=Ua.canControlVolume(),Ua.prototype.featuresMuteControl=Ua.canMuteVolume(),Ua.prototype.featuresPlaybackRate=Ua.canControlPlaybackRate(),Ua.prototype.featuresSourceset=Ua.canOverrideAttributes(),Ua.prototype.movingMediaElementInDOM=!st,Ua.prototype.featuresFullscreenResize=!0,Ua.prototype.featuresProgressEvents=!0,Ua.prototype.featuresTimeupdateEvents=!0,Ua.prototype.featuresNativeTextTracks=Ua.supportsNativeTextTracks(),Ua.prototype.featuresNativeVideoTracks=Ua.supportsNativeVideoTracks(),Ua.prototype.featuresNativeAudioTracks=Ua.supportsNativeAudioTracks();var $a=Ua.TEST_VID&&Ua.TEST_VID.constructor.prototype.canPlayType,Ba=/^application\/(?:x-|vnd\.apple\.)mpegurl/i;Ua.patchCanPlayType=function(){ct>=4&&!dt&&!pt&&(Ua.TEST_VID.constructor.prototype.canPlayType=function(e){return e&&Ba.test(e)?"maybe":$a.call(this,e)})},Ua.unpatchCanPlayType=function(){var e=Ua.TEST_VID.constructor.prototype.canPlayType;return Ua.TEST_VID.constructor.prototype.canPlayType=$a,e},Ua.patchCanPlayType(),Ua.disposeMediaElement=function(e){if(e){for(e.parentNode&&e.parentNode.removeChild(e);e.hasChildNodes();)e.removeChild(e.firstChild);e.removeAttribute("src"),"function"==typeof e.load&&function(){try{e.load()}catch(e){}}()}},Ua.resetMediaElement=function(e){if(e){for(var t=e.querySelectorAll("source"),n=t.length;n--;)e.removeChild(t[n]);e.removeAttribute("src"),"function"==typeof e.load&&function(){try{e.load()}catch(e){}}()}},["muted","defaultMuted","autoplay","controls","loop","playsinline"].forEach((function(e){Ua.prototype[e]=function(){return this.el_[e]||this.el_.hasAttribute(e)}})),["muted","defaultMuted","autoplay","loop","playsinline"].forEach((function(e){Ua.prototype["set"+Xe(e)]=function(t){this.el_[e]=t,t?this.el_.setAttribute(e,e):this.el_.removeAttribute(e)}})),["paused","currentTime","buffered","volume","poster","preload","error","seeking","seekable","ended","playbackRate","defaultPlaybackRate","played","networkState","readyState","videoWidth","videoHeight"].forEach((function(e){Ua.prototype[e]=function(){return this.el_[e]}})),["volume","src","poster","preload","playbackRate","defaultPlaybackRate"].forEach((function(e){Ua.prototype["set"+Xe(e)]=function(t){this.el_[e]=t}})),["pause","load","play"].forEach((function(e){Ua.prototype[e]=function(){return this.el_[e]()}})),Ir.withSourceHandlers(Ua),Ua.nativeSourceHandler={},Ua.nativeSourceHandler.canPlayType=function(e){try{return Ua.TEST_VID.canPlayType(e)}catch(e){return""}},Ua.nativeSourceHandler.canHandleSource=function(e,t){if(e.type)return Ua.nativeSourceHandler.canPlayType(e.type);if(e.src){var n=on(e.src);return Ua.nativeSourceHandler.canPlayType("video/"+n)}return""},Ua.nativeSourceHandler.handleSource=function(e,t,n){t.setSrc(e.src)},Ua.nativeSourceHandler.dispose=function(){},Ua.registerSourceHandler(Ua.nativeSourceHandler),Ir.registerTech("Html5",Ua);var Va=T(["\n        Using the tech directly can be dangerous. I hope you know what you're doing.\n        See https://github.com/videojs/video.js/issues/2617 for more info.\n      "],["\n        Using the tech directly can be dangerous. I hope you know what you're doing.\n        See https://github.com/videojs/video.js/issues/2617 for more info.\n      "]),qa=["progress","abort","suspend","emptied","stalled","loadedmetadata","loadeddata","timeupdate","resize","volumechange","texttrackchange"],Ha={canplay:"CanPlay",canplaythrough:"CanPlayThrough",playing:"Playing",seeked:"Seeked"},Wa=function(t){function n(r,i,a){if(y(this,n),r.id=r.id||i.id||"vjs_video_"+de(),(i=k(n.getTagSettings(r),i)).initChildren=!1,i.createEl=!1,i.evented=!1,i.reportTouchActivity=!1,!i.language)if("function"==typeof r.closest){var s=r.closest("[lang]");s&&s.getAttribute&&(i.language=s.getAttribute("lang"))}else for(var o=r;o&&1===o.nodeType;){if(z(o).hasOwnProperty("lang")){i.language=o.getAttribute("lang");break}o=o.parentNode}var u=_(this,t.call(this,null,i,a));if(u.isPosterFromTech_=!1,u.queuedCallbacks_=[],u.isReady_=!1,u.hasStarted_=!1,u.userActive_=!1,!u.options_||!u.options_.techOrder||!u.options_.techOrder.length)throw new Error("No techOrder specified. Did you overwrite videojs.options instead of just changing the properties you want to override?");if(u.tag=r,u.tagAttributes=r&&z(r),u.language(u.options_.language),i.languages){var c={};Object.getOwnPropertyNames(i.languages).forEach((function(e){c[e.toLowerCase()]=i.languages[e]})),u.languages_=c}else u.languages_=n.prototype.options_.languages;u.cache_={},u.poster_=i.poster||"",u.controls_=!!i.controls,u.cache_.lastVolume=1,r.controls=!1,r.removeAttribute("controls"),r.hasAttribute("autoplay")?u.options_.autoplay=!0:u.autoplay(u.options_.autoplay),u.scrubbing_=!1,u.el_=u.createEl(),u.cache_.lastPlaybackRate=u.defaultPlaybackRate(),ze(u,{eventBusKey:"el_"});var l=Qe(u.options_);if(i.plugins){var d=i.plugins;Object.keys(d).forEach((function(e){if("function"!=typeof this[e])throw new Error('plugin "'+e+'" does not exist');this[e](d[e])}),u)}u.options_.playerOptions=l,u.middleware_=[],u.initChildren(),u.isAudio("audio"===r.nodeName.toLowerCase()),u.controls()?u.addClass("vjs-controls-enabled"):u.addClass("vjs-controls-disabled"),u.el_.setAttribute("role","region"),u.isAudio()?u.el_.setAttribute("aria-label",u.localize("Audio Player")):u.el_.setAttribute("aria-label",u.localize("Video Player")),u.isAudio()&&u.addClass("vjs-audio"),u.flexNotSupported_()&&u.addClass("vjs-no-flex"),st||u.addClass("vjs-workinghover"),n.players[u.id_]=u;var h=e.split(".")[0];return u.addClass("vjs-v"+h),u.userActive(!0),u.reportUserActivity(),u.one("play",u.listenForUserActivity_),u.on("fullscreenchange",u.handleFullscreenChange_),u.on("stageclick",u.handleStageClick_),u.changingSrc_=!1,u.playWaitingForReady_=!1,u.playOnLoadstart_=null,u}return b(n,t),n.prototype.dispose=function(){this.trigger("dispose"),this.off("dispose"),this.styleEl_&&this.styleEl_.parentNode&&(this.styleEl_.parentNode.removeChild(this.styleEl_),this.styleEl_=null),n.players[this.id_]=null,this.tag&&this.tag.player&&(this.tag.player=null),this.el_&&this.el_.player&&(this.el_.player=null),this.tech_&&(this.tech_.dispose(),this.isPosterFromTech_=!1,this.poster_=""),this.playerElIngest_&&(this.playerElIngest_=null),this.tag&&(this.tag=null),zr(this),t.prototype.dispose.call(this)},n.prototype.createEl=function(){var e=this.tag,n=void 0,r=this.playerElIngest_=e.parentNode&&e.parentNode.hasAttribute&&e.parentNode.hasAttribute("data-vjs-player"),a="video-js"===this.tag.tagName.toLowerCase();r?n=this.el_=e.parentNode:a||(n=this.el_=t.prototype.createEl.call(this,"div"));var s=z(e);if(a){for(n=this.el_=e,e=this.tag=c.createElement("video");n.children.length;)e.appendChild(n.firstChild);B(n,"video-js")||V(n,"video-js"),n.appendChild(e),r=this.playerElIngest_=n,Object.keys(n).forEach((function(t){e[t]=n[t]}))}if(e.setAttribute("tabindex","-1"),s.tabindex="-1",mt&&(e.setAttribute("role","application"),s.role="application"),e.removeAttribute("width"),e.removeAttribute("height"),"width"in s&&delete s.width,"height"in s&&delete s.height,Object.getOwnPropertyNames(s).forEach((function(t){a&&"class"===t||n.setAttribute(t,s[t]),a&&e.setAttribute(t,s[t])})),e.playerId=e.id,e.id+="_html5_api",e.className="vjs-tech",e.player=n.player=this,this.addClass("vjs-paused"),!0!==i.VIDEOJS_NO_DYNAMIC_STYLE){this.styleEl_=Ie("vjs-styles-dimensions");var o=oe(".vjs-styles-defaults"),u=oe("head");u.insertBefore(this.styleEl_,o?o.nextSibling:u.firstChild)}this.width(this.options_.width),this.height(this.options_.height),this.fluid(this.options_.fluid),this.aspectRatio(this.options_.aspectRatio);for(var l=e.getElementsByTagName("a"),d=0;d<l.length;d++){var h=l.item(d);V(h,"vjs-hidden"),h.setAttribute("hidden","hidden")}return e.initNetworkState_=e.networkState,e.parentNode&&!r&&e.parentNode.insertBefore(n,e),$(e,n),this.children_.unshift(e),this.el_.setAttribute("lang",this.language_),this.el_=n,n},n.prototype.width=function(e){return this.dimension("width",e)},n.prototype.height=function(e){return this.dimension("height",e)},n.prototype.dimension=function(e,t){var n=e+"_";if(void 0===t)return this[n]||0;if(""===t)return this[n]=void 0,void this.updateStyleEl_();var r=parseFloat(t);isNaN(r)?f.error('Improper value "'+t+'" supplied for for '+e):(this[n]=r,this.updateStyleEl_())},n.prototype.fluid=function(e){if(void 0===e)return!!this.fluid_;this.fluid_=!!e,e?this.addClass("vjs-fluid"):this.removeClass("vjs-fluid"),this.updateStyleEl_()},n.prototype.aspectRatio=function(e){if(void 0===e)return this.aspectRatio_;if(!/^\d+\:\d+$/.test(e))throw new Error("Improper value supplied for aspect ratio. The format should be width:height, for example 16:9.");this.aspectRatio_=e,this.fluid(!0),this.updateStyleEl_()},n.prototype.updateStyleEl_=function(){if(!0!==i.VIDEOJS_NO_DYNAMIC_STYLE){var e=void 0,t=void 0,n=void 0,r=(void 0!==this.aspectRatio_&&"auto"!==this.aspectRatio_?this.aspectRatio_:this.videoWidth()>0?this.videoWidth()+":"+this.videoHeight():"16:9").split(":"),a=r[1]/r[0];e=void 0!==this.width_?this.width_:void 0!==this.height_?this.height_/a:this.videoWidth()||300,t=void 0!==this.height_?this.height_:e*a,n=/^[^a-zA-Z]/.test(this.id())?"dimensions-"+this.id():this.id()+"-dimensions",this.addClass(n),Le(this.styleEl_,"\n      ."+n+" {\n        width: "+e+"px;\n        height: "+t+"px;\n      }\n\n      ."+n+".vjs-fluid {\n        padding-top: "+100*a+"%;\n      }\n    ")}else{var s="number"==typeof this.width_?this.width_:this.options_.width,o="number"==typeof this.height_?this.height_:this.options_.height,u=this.tech_&&this.tech_.el();u&&(s>=0&&(u.width=s),o>=0&&(u.height=o))}},n.prototype.loadTech_=function(e,t){var n=this;this.tech_&&this.unloadTech_();var r=Xe(e),i=e.charAt(0).toLowerCase()+e.slice(1);"Html5"!==r&&this.tag&&(Ir.getTech("Html5").disposeMediaElement(this.tag),this.tag.player=null,this.tag=null),this.techName_=r,this.isReady_=!1;var a={source:t,autoplay:"string"!=typeof this.autoplay()&&this.autoplay(),nativeControlsForTouch:this.options_.nativeControlsForTouch,playerId:this.id(),techId:this.id()+"_"+i+"_api",playsinline:this.options_.playsinline,preload:this.options_.preload,loop:this.options_.loop,muted:this.options_.muted,poster:this.poster(),language:this.language(),playerElIngest:this.playerElIngest_||!1,"vtt.js":this.options_["vtt.js"],canOverridePoster:!!this.options_.techCanOverridePoster,enableSourceset:this.options_.enableSourceset};zn.names.forEach((function(e){var t=zn[e];a[t.getterName]=n[t.privateName]})),k(a,this.options_[r]),k(a,this.options_[i]),k(a,this.options_[e.toLowerCase()]),this.tag&&(a.tag=this.tag),t&&t.src===this.cache_.src&&this.cache_.currentTime>0&&(a.startTime=this.cache_.currentTime);var s=Ir.getTech(e);if(!s)throw new Error("No Tech named '"+r+"' exists! '"+r+"' should be registered using videojs.registerTech()'");this.tech_=new s(a),this.tech_.ready(Me(this,this.handleTechReady_),!0),$t.jsonToTextTracks(this.textTracksJson_||[],this.tech_),qa.forEach((function(e){n.on(n.tech_,e,n["handleTech"+Xe(e)+"_"])})),Object.keys(Ha).forEach((function(e){n.on(n.tech_,e,(function(t){0===n.tech_.playbackRate()&&n.tech_.seeking()?n.queuedCallbacks_.push({callback:n["handleTech"+Ha[e]+"_"].bind(n),event:t}):n["handleTech"+Ha[e]+"_"](t)}))})),this.on(this.tech_,"loadstart",this.handleTechLoadStart_),this.on(this.tech_,"sourceset",this.handleTechSourceset_),this.on(this.tech_,"waiting",this.handleTechWaiting_),this.on(this.tech_,"ended",this.handleTechEnded_),this.on(this.tech_,"seeking",this.handleTechSeeking_),this.on(this.tech_,"play",this.handleTechPlay_),this.on(this.tech_,"firstplay",this.handleTechFirstPlay_),this.on(this.tech_,"pause",this.handleTechPause_),this.on(this.tech_,"durationchange",this.handleTechDurationChange_),this.on(this.tech_,"fullscreenchange",this.handleTechFullscreenChange_),this.on(this.tech_,"error",this.handleTechError_),this.on(this.tech_,"loadedmetadata",this.updateStyleEl_),this.on(this.tech_,"posterchange",this.handleTechPosterChange_),this.on(this.tech_,"textdata",this.handleTechTextData_),this.on(this.tech_,"ratechange",this.handleTechRateChange_),this.usingNativeControls(this.techGet_("controls")),this.controls()&&!this.usingNativeControls()&&this.addTechControlsListeners_(),this.tech_.el().parentNode===this.el()||"Html5"===r&&this.tag||$(this.tech_.el(),this.el()),this.tag&&(this.tag.player=null,this.tag=null)},n.prototype.unloadTech_=function(){var e=this;zn.names.forEach((function(t){var n=zn[t];e[n.privateName]=e[n.getterName]()})),this.textTracksJson_=$t.textTracksToJson(this.tech_),this.isReady_=!1,this.tech_.dispose(),this.tech_=!1,this.isPosterFromTech_&&(this.poster_="",this.trigger("posterchange")),this.isPosterFromTech_=!1},n.prototype.tech=function(e){return void 0===e&&f.warn(g(Va)),this.tech_},n.prototype.addTechControlsListeners_=function(){this.removeTechControlsListeners_(),this.on(this.tech_,"mousedown",this.handleTechClick_),this.on(this.tech_,"dblclick",this.handleTechDoubleClick_),this.on(this.tech_,"touchstart",this.handleTechTouchStart_),this.on(this.tech_,"touchmove",this.handleTechTouchMove_),this.on(this.tech_,"touchend",this.handleTechTouchEnd_),this.on(this.tech_,"tap",this.handleTechTap_)},n.prototype.removeTechControlsListeners_=function(){this.off(this.tech_,"tap",this.handleTechTap_),this.off(this.tech_,"touchstart",this.handleTechTouchStart_),this.off(this.tech_,"touchmove",this.handleTechTouchMove_),this.off(this.tech_,"touchend",this.handleTechTouchEnd_),this.off(this.tech_,"mousedown",this.handleTechClick_),this.off(this.tech_,"dblclick",this.handleTechDoubleClick_)},n.prototype.handleTechReady_=function(){this.triggerReady(),this.cache_.volume&&this.techCall_("setVolume",this.cache_.volume),this.handleTechPosterChange_(),this.handleTechDurationChange_()},n.prototype.handleTechLoadStart_=function(){this.removeClass("vjs-ended"),this.removeClass("vjs-seeking"),this.error(null),this.paused()?(this.hasStarted(!1),this.trigger("loadstart")):(this.trigger("loadstart"),this.trigger("firstplay")),this.manualAutoplay_(this.autoplay())},n.prototype.manualAutoplay_=function(e){var t=this;if(this.tech_&&"string"==typeof e){var n=function(){var e=t.muted();t.muted(!0);var n=t.play();if(n&&n.then&&n.catch)return n.catch((function(n){t.muted(e)}))},r=void 0;if("any"===e?(r=this.play())&&r.then&&r.catch&&r.catch((function(){return n()})):r="muted"===e?n():this.play(),r&&r.then&&r.catch)return r.then((function(){t.trigger({type:"autoplay-success",autoplay:e})})).catch((function(n){t.trigger({type:"autoplay-failure",autoplay:e})}))}},n.prototype.updateSourceCaches_=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=e,n="";if("string"!=typeof t&&(t=e.src,n=e.type),!/^blob:/.test(t)){this.cache_.source=this.cache_.source||{},this.cache_.sources=this.cache_.sources||[],t&&!n&&(n=Qr(this,t)),this.cache_.source=Qe({},e,{src:t,type:n});for(var r=this.cache_.sources.filter((function(e){return e.src&&e.src===t})),i=[],a=this.$$("source"),s=[],o=0;o<a.length;o++){var u=z(a[o]);i.push(u),u.src&&u.src===t&&s.push(u.src)}s.length&&!r.length?this.cache_.sources=i:r.length||(this.cache_.sources=[this.cache_.source]),this.cache_.src=t}},n.prototype.handleTechSourceset_=function(e){var t=this;if(!this.changingSrc_&&(this.updateSourceCaches_(e.src),!e.src)){var n=function e(n){"sourceset"!==n.type&&t.updateSourceCaches_(t.techGet_("currentSrc")),t.tech_.off(["sourceset","loadstart"],e)};this.tech_.one(["sourceset","loadstart"],n)}this.trigger({src:e.src,type:"sourceset"})},n.prototype.hasStarted=function(e){if(void 0===e)return this.hasStarted_;e!==this.hasStarted_&&(this.hasStarted_=e,this.hasStarted_?(this.addClass("vjs-has-started"),this.trigger("firstplay")):this.removeClass("vjs-has-started"))},n.prototype.handleTechPlay_=function(){this.removeClass("vjs-ended"),this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.hasStarted(!0),this.trigger("play")},n.prototype.handleTechRateChange_=function(){this.tech_.playbackRate()>0&&0===this.cache_.lastPlaybackRate&&(this.queuedCallbacks_.forEach((function(e){return e.callback(e.event)})),this.queuedCallbacks_=[]),this.cache_.lastPlaybackRate=this.tech_.playbackRate(),this.trigger("ratechange")},n.prototype.handleTechWaiting_=function(){var e=this;this.addClass("vjs-waiting"),this.trigger("waiting"),this.one("timeupdate",(function(){return e.removeClass("vjs-waiting")}))},n.prototype.handleTechCanPlay_=function(){this.removeClass("vjs-waiting"),this.trigger("canplay")},n.prototype.handleTechCanPlayThrough_=function(){this.removeClass("vjs-waiting"),this.trigger("canplaythrough")},n.prototype.handleTechPlaying_=function(){this.removeClass("vjs-waiting"),this.trigger("playing")},n.prototype.handleTechSeeking_=function(){this.addClass("vjs-seeking"),this.trigger("seeking")},n.prototype.handleTechSeeked_=function(){this.removeClass("vjs-seeking"),this.trigger("seeked")},n.prototype.handleTechFirstPlay_=function(){this.options_.starttime&&(f.warn("Passing the `starttime` option to the player will be deprecated in 6.0"),this.currentTime(this.options_.starttime)),this.addClass("vjs-has-started"),this.trigger("firstplay")},n.prototype.handleTechPause_=function(){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.trigger("pause")},n.prototype.handleTechEnded_=function(){this.addClass("vjs-ended"),this.options_.loop?(this.currentTime(0),this.play()):this.paused()||this.pause(),this.trigger("ended")},n.prototype.handleTechDurationChange_=function(){this.duration(this.techGet_("duration"))},n.prototype.handleTechClick_=function(e){se(e)&&this.controls_&&(this.paused()?Nt(this.play()):this.pause())},n.prototype.handleTechDoubleClick_=function(e){this.controls_&&(Array.prototype.some.call(this.$$(".vjs-control-bar, .vjs-modal-dialog"),(function(t){return t.contains(e.target)}))||(this.isFullscreen()?this.exitFullscreen():this.requestFullscreen()))},n.prototype.handleTechTap_=function(){this.userActive(!this.userActive())},n.prototype.handleTechTouchStart_=function(){this.userWasActive=this.userActive()},n.prototype.handleTechTouchMove_=function(){this.userWasActive&&this.reportUserActivity()},n.prototype.handleTechTouchEnd_=function(e){e.preventDefault()},n.prototype.handleFullscreenChange_=function(){this.isFullscreen()?this.addClass("vjs-fullscreen"):this.removeClass("vjs-fullscreen")},n.prototype.handleStageClick_=function(){this.reportUserActivity()},n.prototype.handleTechFullscreenChange_=function(e,t){t&&this.isFullscreen(t.isFullscreen),this.trigger("fullscreenchange")},n.prototype.handleTechError_=function(){var e=this.tech_.error();this.error(e)},n.prototype.handleTechTextData_=function(){var e=null;arguments.length>1&&(e=arguments[1]),this.trigger("textdata",e)},n.prototype.getCache=function(){return this.cache_},n.prototype.techCall_=function(e,t){this.ready((function(){if(e in Vr)return Fr(this.middleware_,this.tech_,e,t);if(e in qr)return $r(this.middleware_,this.tech_,e,t);try{this.tech_&&this.tech_[e](t)}catch(e){throw f(e),e}}),!0)},n.prototype.techGet_=function(e){if(this.tech_&&this.tech_.isReady_){if(e in Br)return Ur(this.middleware_,this.tech_,e);if(e in qr)return $r(this.middleware_,this.tech_,e);try{return this.tech_[e]()}catch(t){if(void 0===this.tech_[e])throw f("Video.js: "+e+" method not defined for "+this.techName_+" playback technology.",t),t;if("TypeError"===t.name)throw f("Video.js: "+e+" unavailable on "+this.techName_+" playback technology element.",t),this.tech_.isReady_=!1,t;throw f(t),t}}},n.prototype.play=function(){var e=this,t=this.options_.Promise||i.Promise;return t?new t((function(t){e.play_(t)})):this.play_()},n.prototype.play_=function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Nt;if(this.playOnLoadstart_&&this.off("loadstart",this.playOnLoadstart_),this.isReady_){if(!this.changingSrc_&&(this.src()||this.currentSrc()))return void t(this.techGet_("play"));this.playOnLoadstart_=function(){e.playOnLoadstart_=null,t(e.play())},this.one("loadstart",this.playOnLoadstart_)}else{if(this.playWaitingForReady_)return;this.playWaitingForReady_=!0,this.ready((function(){e.playWaitingForReady_=!1,t(e.play())}))}},n.prototype.pause=function(){this.techCall_("pause")},n.prototype.paused=function(){return!1!==this.techGet_("paused")},n.prototype.played=function(){return this.techGet_("played")||St(0,0)},n.prototype.scrubbing=function(e){if(void 0===e)return this.scrubbing_;this.scrubbing_=!!e,e?this.addClass("vjs-scrubbing"):this.removeClass("vjs-scrubbing")},n.prototype.currentTime=function(e){return void 0!==e?(e<0&&(e=0),void this.techCall_("setCurrentTime",e)):(this.cache_.currentTime=this.techGet_("currentTime")||0,this.cache_.currentTime)},n.prototype.duration=function(e){if(void 0===e)return void 0!==this.cache_.duration?this.cache_.duration:NaN;(e=parseFloat(e))<0&&(e=1/0),e!==this.cache_.duration&&(this.cache_.duration=e,e===1/0?this.addClass("vjs-live"):this.removeClass("vjs-live"),this.trigger("durationchange"))},n.prototype.remainingTime=function(){return this.duration()-this.currentTime()},n.prototype.remainingTimeDisplay=function(){return Math.floor(this.duration())-Math.floor(this.currentTime())},n.prototype.buffered=function(){var e=this.techGet_("buffered");return e&&e.length||(e=St(0,0)),e},n.prototype.bufferedPercent=function(){return Ct(this.buffered(),this.duration())},n.prototype.bufferedEnd=function(){var e=this.buffered(),t=this.duration(),n=e.end(e.length-1);return n>t&&(n=t),n},n.prototype.volume=function(e){var t=void 0;return void 0!==e?(t=Math.max(0,Math.min(1,parseFloat(e))),this.cache_.volume=t,this.techCall_("setVolume",t),void(t>0&&this.lastVolume_(t))):(t=parseFloat(this.techGet_("volume")),isNaN(t)?1:t)},n.prototype.muted=function(e){if(void 0===e)return this.techGet_("muted")||!1;this.techCall_("setMuted",e)},n.prototype.defaultMuted=function(e){return void 0!==e?this.techCall_("setDefaultMuted",e):this.techGet_("defaultMuted")||!1},n.prototype.lastVolume_=function(e){if(void 0===e||0===e)return this.cache_.lastVolume;this.cache_.lastVolume=e},n.prototype.supportsFullScreen=function(){return this.techGet_("supportsFullScreen")||!1},n.prototype.isFullscreen=function(e){if(void 0===e)return!!this.isFullscreen_;this.isFullscreen_=!!e},n.prototype.requestFullscreen=function(){var e=Et;this.isFullscreen(!0),e.requestFullscreen?(we(c,e.fullscreenchange,Me(this,(function t(n){this.isFullscreen(c[e.fullscreenElement]),!1===this.isFullscreen()&&Se(c,e.fullscreenchange,t),this.trigger("fullscreenchange")}))),this.el_[e.requestFullscreen]()):this.tech_.supportsFullScreen()?this.techCall_("enterFullScreen"):(this.enterFullWindow(),this.trigger("fullscreenchange"))},n.prototype.exitFullscreen=function(){var e=Et;this.isFullscreen(!1),e.requestFullscreen?c[e.exitFullscreen]():this.tech_.supportsFullScreen()?this.techCall_("exitFullScreen"):(this.exitFullWindow(),this.trigger("fullscreenchange"))},n.prototype.enterFullWindow=function(){this.isFullWindow=!0,this.docOrigOverflow=c.documentElement.style.overflow,we(c,"keydown",Me(this,this.fullWindowOnEscKey)),c.documentElement.style.overflow="hidden",V(c.body,"vjs-full-window"),this.trigger("enterFullWindow")},n.prototype.fullWindowOnEscKey=function(e){27===e.keyCode&&(!0===this.isFullscreen()?this.exitFullscreen():this.exitFullWindow())},n.prototype.exitFullWindow=function(){this.isFullWindow=!1,Se(c,"keydown",this.fullWindowOnEscKey),c.documentElement.style.overflow=this.docOrigOverflow,q(c.body,"vjs-full-window"),this.trigger("exitFullWindow")},n.prototype.canPlayType=function(e){for(var t=void 0,n=0,r=this.options_.techOrder;n<r.length;n++){var i=r[n],a=Ir.getTech(i);if(a||(a=Je.getComponent(i)),a){if(a.isSupported()&&(t=a.canPlayType(e)))return t}else f.error('The "'+i+'" tech is undefined. Skipped browser support check for that tech.')}return""},n.prototype.selectSource=function(e){var t=this,n=this.options_.techOrder.map((function(e){return[e,Ir.getTech(e)]})).filter((function(e){var t=e[0],n=e[1];return n?n.isSupported():(f.error('The "'+t+'" tech is undefined. Skipped browser support check for that tech.'),!1)})),r=function(e,t,n){var r=void 0;return e.some((function(e){return t.some((function(t){if(r=n(e,t))return!0}))})),r},i=function(e){return function(t,n){return e(n,t)}},a=function(e,n){var r=e[0];if(e[1].canPlaySource(n,t.options_[r.toLowerCase()]))return{source:n,tech:r}};return(this.options_.sourceOrder?r(e,n,i(a)):r(n,e,a))||!1},n.prototype.src=function(e){var t=this;if(void 0===e)return this.cache_.src||"";var n=Jr(e);n.length?(this.changingSrc_=!0,this.cache_.sources=n,this.updateSourceCaches_(n[0]),Nr(this,n[0],(function(e,r){if(t.middleware_=r,t.cache_.sources=n,t.updateSourceCaches_(e),t.src_(e))return n.length>1?t.src(n.slice(1)):(t.changingSrc_=!1,t.setTimeout((function(){this.error({code:4,message:this.localize(this.options_.notSupportedMessage)})}),0),void t.triggerReady());jr(r,t.tech_)}))):this.setTimeout((function(){this.error({code:4,message:this.localize(this.options_.notSupportedMessage)})}),0)},n.prototype.src_=function(e){var t=this,n=this.selectSource([e]);return!n||(Ye(n.tech,this.techName_)?(this.ready((function(){this.tech_.constructor.prototype.hasOwnProperty("setSource")?this.techCall_("setSource",e):this.techCall_("src",e.src),this.changingSrc_=!1}),!0),!1):(this.changingSrc_=!0,this.loadTech_(n.tech,n.source),this.tech_.ready((function(){t.changingSrc_=!1})),!1))},n.prototype.load=function(){this.techCall_("load")},n.prototype.reset=function(){this.tech_&&this.tech_.clearTracks("text"),this.loadTech_(this.options_.techOrder[0],null),this.techCall_("reset")},n.prototype.currentSources=function(){var e=this.currentSource(),t=[];return 0!==Object.keys(e).length&&t.push(e),this.cache_.sources||t},n.prototype.currentSource=function(){return this.cache_.source||{}},n.prototype.currentSrc=function(){return this.currentSource()&&this.currentSource().src||""},n.prototype.currentType=function(){return this.currentSource()&&this.currentSource().type||""},n.prototype.preload=function(e){return void 0!==e?(this.techCall_("setPreload",e),void(this.options_.preload=e)):this.techGet_("preload")},n.prototype.autoplay=function(e){if(void 0===e)return this.options_.autoplay||!1;var t=void 0;"string"==typeof e&&/(any|play|muted)/.test(e)?(this.options_.autoplay=e,this.manualAutoplay_(e),t=!1):this.options_.autoplay=!!e,t=t||this.options_.autoplay,this.tech_&&this.techCall_("setAutoplay",t)},n.prototype.playsinline=function(e){return void 0!==e?(this.techCall_("setPlaysinline",e),this.options_.playsinline=e,this):this.techGet_("playsinline")},n.prototype.loop=function(e){return void 0!==e?(this.techCall_("setLoop",e),void(this.options_.loop=e)):this.techGet_("loop")},n.prototype.poster=function(e){if(void 0===e)return this.poster_;e||(e=""),e!==this.poster_&&(this.poster_=e,this.techCall_("setPoster",e),this.isPosterFromTech_=!1,this.trigger("posterchange"))},n.prototype.handleTechPosterChange_=function(){if((!this.poster_||this.options_.techCanOverridePoster)&&this.tech_&&this.tech_.poster){var e=this.tech_.poster()||"";e!==this.poster_&&(this.poster_=e,this.isPosterFromTech_=!0,this.trigger("posterchange"))}},n.prototype.controls=function(e){if(void 0===e)return!!this.controls_;e=!!e,this.controls_!==e&&(this.controls_=e,this.usingNativeControls()&&this.techCall_("setControls",e),this.controls_?(this.removeClass("vjs-controls-disabled"),this.addClass("vjs-controls-enabled"),this.trigger("controlsenabled"),this.usingNativeControls()||this.addTechControlsListeners_()):(this.removeClass("vjs-controls-enabled"),this.addClass("vjs-controls-disabled"),this.trigger("controlsdisabled"),this.usingNativeControls()||this.removeTechControlsListeners_()))},n.prototype.usingNativeControls=function(e){if(void 0===e)return!!this.usingNativeControls_;e=!!e,this.usingNativeControls_!==e&&(this.usingNativeControls_=e,this.usingNativeControls_?(this.addClass("vjs-using-native-controls"),this.trigger("usingnativecontrols")):(this.removeClass("vjs-using-native-controls"),this.trigger("usingcustomcontrols")))},n.prototype.error=function(e){return void 0===e?this.error_||null:null===e?(this.error_=e,this.removeClass("vjs-error"),void(this.errorDisplay&&this.errorDisplay.close())):(this.error_=new It(e),this.addClass("vjs-error"),f.error("(CODE:"+this.error_.code+" "+It.errorTypes[this.error_.code]+")",this.error_.message,this.error_),void this.trigger("error"))},n.prototype.reportUserActivity=function(e){this.userActivity_=!0},n.prototype.userActive=function(e){if(void 0===e)return this.userActive_;if((e=!!e)!==this.userActive_){if(this.userActive_=e,this.userActive_)return this.userActivity_=!0,this.removeClass("vjs-user-inactive"),this.addClass("vjs-user-active"),void this.trigger("useractive");this.tech_&&this.tech_.one("mousemove",(function(e){e.stopPropagation(),e.preventDefault()})),this.userActivity_=!1,this.removeClass("vjs-user-active"),this.addClass("vjs-user-inactive"),this.trigger("userinactive")}},n.prototype.listenForUserActivity_=function(){var e=void 0,t=void 0,n=void 0,r=Me(this,this.reportUserActivity),i=function(e){e.screenX===t&&e.screenY===n||(t=e.screenX,n=e.screenY,r())},a=function(){r(),this.clearInterval(e),e=this.setInterval(r,250)},s=function(t){r(),this.clearInterval(e)};this.on("mousedown",a),this.on("mousemove",i),this.on("mouseup",s),this.on("keydown",r),this.on("keyup",r);var o=void 0;this.setInterval((function(){if(this.userActivity_){this.userActivity_=!1,this.userActive(!0),this.clearTimeout(o);var e=this.options_.inactivityTimeout;e<=0||(o=this.setTimeout((function(){this.userActivity_||this.userActive(!1)}),e))}}),250)},n.prototype.playbackRate=function(e){if(void 0===e)return this.tech_&&this.tech_.featuresPlaybackRate?this.cache_.lastPlaybackRate||this.techGet_("playbackRate"):1;this.techCall_("setPlaybackRate",e)},n.prototype.defaultPlaybackRate=function(e){return void 0!==e?this.techCall_("setDefaultPlaybackRate",e):this.tech_&&this.tech_.featuresPlaybackRate?this.techGet_("defaultPlaybackRate"):1},n.prototype.isAudio=function(e){if(void 0===e)return!!this.isAudio_;this.isAudio_=!!e},n.prototype.addTextTrack=function(e,t,n){if(this.tech_)return this.tech_.addTextTrack(e,t,n)},n.prototype.addRemoteTextTrack=function(e,t){if(this.tech_)return this.tech_.addRemoteTextTrack(e,t)},n.prototype.removeRemoteTextTrack=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).track,t=void 0===e?arguments[0]:e;if(this.tech_)return this.tech_.removeRemoteTextTrack(t)},n.prototype.getVideoPlaybackQuality=function(){return this.techGet_("getVideoPlaybackQuality")},n.prototype.videoWidth=function(){return this.tech_&&this.tech_.videoWidth&&this.tech_.videoWidth()||0},n.prototype.videoHeight=function(){return this.tech_&&this.tech_.videoHeight&&this.tech_.videoHeight()||0},n.prototype.language=function(e){if(void 0===e)return this.language_;this.language_=String(e).toLowerCase()},n.prototype.languages=function(){return Qe(n.prototype.options_.languages,this.languages_)},n.prototype.toJSON=function(){var e=Qe(this.options_),t=e.tracks;e.tracks=[];for(var n=0;n<t.length;n++){var r=t[n];(r=Qe(r)).player=void 0,e.tracks[n]=r}return e},n.prototype.createModal=function(e,t){var n=this;(t=t||{}).content=e||"";var r=new qt(this,t);return this.addChild(r),r.on("dispose",(function(){n.removeChild(r)})),r.open(),r},n.getTagSettings=function(e){var t={sources:[],tracks:[]},n=z(e),r=n["data-setup"];if(B(e,"vjs-fluid")&&(n.fluid=!0),null!==r){var i=Mt(r||"{}"),a=i[0],s=i[1];a&&f.error(a),k(n,s)}if(k(t,n),e.hasChildNodes())for(var o=e.childNodes,u=0,c=o.length;u<c;u++){var l=o[u],d=l.nodeName.toLowerCase();"source"===d?t.sources.push(z(l)):"track"===d&&t.tracks.push(z(l))}return t},n.prototype.flexNotSupported_=function(){var e=c.createElement("i");return!("flexBasis"in e.style||"webkitFlexBasis"in e.style||"mozFlexBasis"in e.style||"msFlexBasis"in e.style||"msFlexOrder"in e.style)},n}(Je);zn.names.forEach((function(e){var t=zn[e];Wa.prototype[t.getterName]=function(){return this.tech_?this.tech_[t.getterName]():(this[t.privateName]=this[t.privateName]||new t.ListClass,this[t.privateName])}})),Wa.players={};var za=i.navigator;Wa.prototype.options_={techOrder:Ir.defaultTechOrder_,html5:{},flash:{},inactivityTimeout:2e3,playbackRates:[],children:["mediaLoader","posterImage","textTrackDisplay","loadingSpinner","bigPlayButton","controlBar","errorDisplay","textTrackSettings","resizeManager"],language:za&&(za.languages&&za.languages[0]||za.userLanguage||za.language)||"en",languages:{},notSupportedMessage:"No compatible source was found for this media."},["ended","seeking","seekable","networkState","readyState"].forEach((function(e){Wa.prototype[e]=function(){return this.techGet_(e)}})),qa.forEach((function(e){Wa.prototype["handleTech"+Xe(e)+"_"]=function(){return this.trigger(e)}})),Je.registerComponent("Player",Wa);var Ga="plugin",Ka="activePlugins_",Xa={},Ya=function(e){return Xa.hasOwnProperty(e)},Qa=function(e){return Ya(e)?Xa[e]:void 0},Ja=function(e,t){e[Ka]=e[Ka]||{},e[Ka][t]=!0},Za=function(e,t,n){var r=(n?"before":"")+"pluginsetup";e.trigger(r,t),e.trigger(r+":"+t.name,t)},es=function(e,t){var n=function(){Za(this,{name:e,plugin:t,instance:null},!0);var n=t.apply(this,arguments);return Ja(this,e),Za(this,{name:e,plugin:t,instance:n}),n};return Object.keys(t).forEach((function(e){n[e]=t[e]})),n},ts=function(e,t){return t.prototype.name=e,function(){Za(this,{name:e,plugin:t,instance:null},!0);for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];var a=new(Function.prototype.bind.apply(t,[null].concat([this].concat(r))));return this[e]=function(){return a},Za(this,a.getEventHash()),a}},ns=function(){function e(t){if(y(this,e),this.constructor===e)throw new Error("Plugin must be sub-classed; not directly instantiated.");this.player=t,ze(this),delete this.trigger,Ke(this,this.constructor.defaultState),Ja(t,this.name),this.dispose=Me(this,this.dispose),t.on("dispose",this.dispose)}return e.prototype.version=function(){return this.constructor.VERSION},e.prototype.getEventHash=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.name=this.name,e.plugin=this.constructor,e.instance=this,e},e.prototype.trigger=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Ce(this.eventBusEl_,e,this.getEventHash(t))},e.prototype.handleStateChanged=function(e){},e.prototype.dispose=function(){var e=this.name,t=this.player;this.trigger("dispose"),this.off(),t.off("dispose",this.dispose),t[Ka][e]=!1,this.player=this.state=null,t[e]=ts(e,Xa[e])},e.isBasic=function(t){var n="string"==typeof t?Qa(t):t;return"function"==typeof n&&!e.prototype.isPrototypeOf(n.prototype)},e.registerPlugin=function(t,n){if("string"!=typeof t)throw new Error('Illegal plugin name, "'+t+'", must be a string, was '+(void 0===t?"undefined":v(t))+".");if(Ya(t))f.warn('A plugin named "'+t+'" already exists. You may want to avoid re-registering plugins!');else if(Wa.prototype.hasOwnProperty(t))throw new Error('Illegal plugin name, "'+t+'", cannot share a name with an existing player method!');if("function"!=typeof n)throw new Error('Illegal plugin for "'+t+'", must be a function, was '+(void 0===n?"undefined":v(n))+".");return Xa[t]=n,t!==Ga&&(e.isBasic(n)?Wa.prototype[t]=es(t,n):Wa.prototype[t]=ts(t,n)),n},e.deregisterPlugin=function(e){if(e===Ga)throw new Error("Cannot de-register base plugin.");Ya(e)&&(delete Xa[e],delete Wa.prototype[e])},e.getPlugins=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object.keys(Xa),t=void 0;return e.forEach((function(e){var n=Qa(e);n&&((t=t||{})[e]=n)})),t},e.getPluginVersion=function(e){var t=Qa(e);return t&&t.VERSION||""},e}();ns.getPlugin=Qa,ns.BASE_PLUGIN_NAME=Ga,ns.registerPlugin(Ga,ns),Wa.prototype.usingPlugin=function(e){return!!this[Ka]&&!0===this[Ka][e]},Wa.prototype.hasPlugin=function(e){return!!Ya(e)};var rs=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":v(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(e.super_=t)},is=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=function(){e.apply(this,arguments)},r={};for(var i in"object"===(void 0===t?"undefined":v(t))?(t.constructor!==Object.prototype.constructor&&(n=t.constructor),r=t):"function"==typeof t&&(n=t),rs(n,e),r)r.hasOwnProperty(i)&&(n.prototype[i]=r[i]);return n},as=function(e){return 0===e.indexOf("#")?e.slice(1):e};function ss(e,t,n){var r=ss.getPlayer(e);if(r)return t&&f.warn('Player "'+e+'" is already initialised. Options will not be applied.'),n&&r.ready(n),r;var i="string"==typeof e?oe("#"+as(e)):e;if(!R(i))throw new TypeError("The element or ID supplied is not valid. (videojs)");c.body.contains(i)||f.warn("The element supplied is not included in the DOM"),t=t||{},ss.hooks("beforesetup").forEach((function(e){var n=e(i,Qe(t));O(n)&&!Array.isArray(n)?t=Qe(t,n):f.error("please return an object in beforesetup hooks")}));var a=Je.getComponent("Player");return r=new a(i,t,n),ss.hooks("setup").forEach((function(e){return e(r)})),r}if(ss.hooks_={},ss.hooks=function(e,t){return ss.hooks_[e]=ss.hooks_[e]||[],t&&(ss.hooks_[e]=ss.hooks_[e].concat(t)),ss.hooks_[e]},ss.hook=function(e,t){ss.hooks(e,t)},ss.hookOnce=function(e,t){ss.hooks(e,[].concat(t).map((function(t){var n=function n(){return ss.removeHook(e,n),t.apply(void 0,arguments)};return n})))},ss.removeHook=function(e,t){var n=ss.hooks(e).indexOf(t);return!(n<=-1||(ss.hooks_[e]=ss.hooks_[e].slice(),ss.hooks_[e].splice(n,1),0))},!0!==i.VIDEOJS_NO_DYNAMIC_STYLE&&D()){var os=oe(".vjs-styles-defaults");if(!os){os=Ie("vjs-styles-defaults");var us=oe("head");us&&us.insertBefore(os,us.firstChild),Le(os,"\n      .video-js {\n        width: 300px;\n        height: 150px;\n      }\n\n      .vjs-fluid {\n        padding-top: 56.25%\n      }\n    ")}}return Pe(1,ss),ss.VERSION=e,ss.options=Wa.prototype.options_,ss.getPlayers=function(){return Wa.players},ss.getPlayer=function(e){var t=Wa.players,n=void 0;if("string"==typeof e){var r=as(e),i=t[r];if(i)return i;n=oe("#"+r)}else n=e;if(R(n)){var a=n,s=a.player,o=a.playerId;if(s||t[o])return s||t[o]}},ss.getAllPlayers=function(){return Object.keys(Wa.players).map((function(e){return Wa.players[e]})).filter(Boolean)},ss.players=Wa.players,ss.getComponent=Je.getComponent,ss.registerComponent=function(e,t){Ir.isTech(t)&&f.warn("The "+e+" tech was registered as a component. It should instead be registered using videojs.registerTech(name, tech)"),Je.registerComponent.call(Je,e,t)},ss.getTech=Ir.getTech,ss.registerTech=Ir.registerTech,ss.use=Rr,Object.defineProperty(ss,"middleware",{value:{},writeable:!1,enumerable:!0}),Object.defineProperty(ss.middleware,"TERMINATOR",{value:Dr,writeable:!1,enumerable:!0}),ss.browser=bt,ss.TOUCH_ENABLED=yt,ss.extend=is,ss.mergeOptions=Qe,ss.bind=Me,ss.registerPlugin=ns.registerPlugin,ss.deregisterPlugin=ns.deregisterPlugin,ss.plugin=function(e,t){return f.warn("videojs.plugin() is deprecated; use videojs.registerPlugin() instead"),ns.registerPlugin(e,t)},ss.getPlugins=ns.getPlugins,ss.getPlugin=ns.getPlugin,ss.getPluginVersion=ns.getPluginVersion,ss.addLanguage=function(e,t){var n;return e=(""+e).toLowerCase(),ss.options.languages=Qe(ss.options.languages,((n={})[e]=t,n)),ss.options.languages[e]},ss.log=f,ss.createTimeRange=ss.createTimeRanges=St,ss.formatTime=yi,ss.setFormatTime=gi,ss.resetFormatTime=vi,ss.parseUrl=an,ss.isCrossOrigin=un,ss.EventTarget=Ne,ss.on=we,ss.one=Ee,ss.off=Se,ss.trigger=Ce,ss.xhr=kn,ss.TextTrack=Nn,ss.AudioTrack=jn,ss.VideoTrack=Un,["isEl","isTextNode","createEl","hasClass","addClass","removeClass","toggleClass","setAttributes","getAttributes","emptyEl","appendContent","insertContent"].forEach((function(e){ss[e]=function(){return f.warn("videojs."+e+"() is deprecated; use videojs.dom."+e+"() instead"),ce[e].apply(null,arguments)}})),ss.computedStyle=A,ss.dom=ce,ss.url=cn,ss}()},6150:(e,t,n)=>{function r(e){this.options=e||{locator:{}}}function i(){this.cdata=!1}function a(e,t){t.lineNumber=e.lineNumber,t.columnNumber=e.columnNumber}function s(e){if(e)return"\n@"+(e.systemId||"")+"#[line:"+e.lineNumber+",col:"+e.columnNumber+"]"}function o(e,t,n){return"string"==typeof e?e.substr(t,n):e.length>=t+n||t?new java.lang.String(e,t,n)+"":e}function u(e,t){e.currentElement?e.currentElement.appendChild(t):e.doc.appendChild(t)}r.prototype.parseFromString=function(e,t){var n=this.options,r=new c,a=n.domBuilder||new i,o=n.errorHandler,u=n.locator,l=n.xmlns||{},d={lt:"<",gt:">",amp:"&",quot:'"',apos:"'"};return u&&a.setDocumentLocator(u),r.errorHandler=function(e,t,n){if(!e){if(t instanceof i)return t;e=t}var r={},a=e instanceof Function;function o(t){var i=e[t];!i&&a&&(i=2==e.length?function(n){e(t,n)}:e),r[t]=i&&function(e){i("[xmldom "+t+"]\t"+e+s(n))}||function(){}}return n=n||{},o("warning"),o("error"),o("fatalError"),r}(o,a,u),r.domBuilder=n.domBuilder||a,/\/x?html?$/.test(t)&&(d.nbsp=" ",d.copy="©",l[""]="http://www.w3.org/1999/xhtml"),l.xml=l.xml||"http://www.w3.org/XML/1998/namespace",e?r.parse(e,l,d):r.errorHandler.error("invalid doc source"),a.doc},i.prototype={startDocument:function(){this.doc=(new l).createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(e,t,n,r){var i=this.doc,s=i.createElementNS(e,n||t),o=r.length;u(this,s),this.currentElement=s,this.locator&&a(this.locator,s);for(var c=0;c<o;c++){e=r.getURI(c);var l=r.getValue(c),d=(n=r.getQName(c),i.createAttributeNS(e,n));this.locator&&a(r.getLocator(c),d),d.value=d.nodeValue=l,s.setAttributeNode(d)}},endElement:function(e,t,n){var r=this.currentElement;r.tagName;this.currentElement=r.parentNode},startPrefixMapping:function(e,t){},endPrefixMapping:function(e){},processingInstruction:function(e,t){var n=this.doc.createProcessingInstruction(e,t);this.locator&&a(this.locator,n),u(this,n)},ignorableWhitespace:function(e,t,n){},characters:function(e,t,n){if(e=o.apply(this,arguments)){if(this.cdata)var r=this.doc.createCDATASection(e);else r=this.doc.createTextNode(e);this.currentElement?this.currentElement.appendChild(r):/^\s*$/.test(e)&&this.doc.appendChild(r),this.locator&&a(this.locator,r)}},skippedEntity:function(e){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(e){(this.locator=e)&&(e.lineNumber=0)},comment:function(e,t,n){e=o.apply(this,arguments);var r=this.doc.createComment(e);this.locator&&a(this.locator,r),u(this,r)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(e,t,n){var r=this.doc.implementation;if(r&&r.createDocumentType){var i=r.createDocumentType(e,t,n);this.locator&&a(this.locator,i),u(this,i)}},warning:function(e){console.warn("[xmldom warning]\t"+e,s(this.locator))},error:function(e){console.error("[xmldom error]\t"+e,s(this.locator))},fatalError:function(e){throw console.error("[xmldom fatalError]\t"+e,s(this.locator)),e}},"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,(function(e){i.prototype[e]=function(){return null}}));var c=n(6147).G,l=n(9541).DOMImplementation;n(9541),t.a=r},9541:(e,t)=>{function n(e,t){for(var n in e)t[n]=e[n]}function r(e,t){var r=e.prototype;if(Object.create){var i=Object.create(t.prototype);r.__proto__=i}if(!(r instanceof t)){function a(){}a.prototype=t.prototype,n(r,a=new a),e.prototype=r=a}r.constructor!=e&&("function"!=typeof e&&console.error("unknow Class:"+e),r.constructor=e)}var i={},a=i.ELEMENT_NODE=1,s=i.ATTRIBUTE_NODE=2,o=i.TEXT_NODE=3,u=i.CDATA_SECTION_NODE=4,c=i.ENTITY_REFERENCE_NODE=5,l=i.ENTITY_NODE=6,d=i.PROCESSING_INSTRUCTION_NODE=7,h=i.COMMENT_NODE=8,p=i.DOCUMENT_NODE=9,f=i.DOCUMENT_TYPE_NODE=10,m=i.DOCUMENT_FRAGMENT_NODE=11,g=i.NOTATION_NODE=12,v={},y={},b=(v.INDEX_SIZE_ERR=(y[1]="Index size error",1),v.DOMSTRING_SIZE_ERR=(y[2]="DOMString size error",2),v.HIERARCHY_REQUEST_ERR=(y[3]="Hierarchy request error",3)),_=(v.WRONG_DOCUMENT_ERR=(y[4]="Wrong document",4),v.INVALID_CHARACTER_ERR=(y[5]="Invalid character",5),v.NO_DATA_ALLOWED_ERR=(y[6]="No data allowed",6),v.NO_MODIFICATION_ALLOWED_ERR=(y[7]="No modification allowed",7),v.NOT_FOUND_ERR=(y[8]="Not found",8)),T=(v.NOT_SUPPORTED_ERR=(y[9]="Not supported",9),v.INUSE_ATTRIBUTE_ERR=(y[10]="Attribute in use",10));v.INVALID_STATE_ERR=(y[11]="Invalid state",11),v.SYNTAX_ERR=(y[12]="Syntax error",12),v.INVALID_MODIFICATION_ERR=(y[13]="Invalid modification",13),v.NAMESPACE_ERR=(y[14]="Invalid namespace",14),v.INVALID_ACCESS_ERR=(y[15]="Invalid access",15);function w(e,t){if(t instanceof Error)var n=t;else n=this,Error.call(this,y[e]),this.message=y[e],Error.captureStackTrace&&Error.captureStackTrace(this,w);return n.code=e,t&&(this.message=this.message+": "+t),n}function S(){}function C(e,t){this._node=e,this._refresh=t,E(this)}function E(e){var t=e._node._inc||e._node.ownerDocument._inc;if(e._inc!=t){var r=e._refresh(e._node);re(e,"length",r.length),n(r,e),e._inc=t}}function k(){}function O(e,t){for(var n=e.length;n--;)if(e[n]===t)return n}function x(e,t,n,r){if(r?t[O(t,r)]=n:t[t.length++]=n,e){n.ownerElement=e;var i=e.ownerDocument;i&&(r&&R(i,e,r),function(e,t,n){e&&e._inc++,"http://www.w3.org/2000/xmlns/"==n.namespaceURI&&(t._nsMap[n.prefix?n.localName:""]=n.value)}(i,e,n))}}function A(e,t,n){var r=O(t,n);if(!(r>=0))throw w(_,new Error(e.tagName+"@"+n));for(var i=t.length-1;r<i;)t[r]=t[++r];if(t.length=i,e){var a=e.ownerDocument;a&&(R(a,e,n),n.ownerElement=null)}}function P(e){if(this._features={},e)for(var t in e)this._features=e[t]}function I(){}function L(e){return("<"==e?"&lt;":">"==e&&"&gt;")||"&"==e&&"&amp;"||'"'==e&&"&quot;"||"&#"+e.charCodeAt()+";"}function M(e,t){if(t(e))return!0;if(e=e.firstChild)do{if(M(e,t))return!0}while(e=e.nextSibling)}function D(){}function R(e,t,n,r){e&&e._inc++,"http://www.w3.org/2000/xmlns/"==n.namespaceURI&&delete t._nsMap[n.prefix?n.localName:""]}function N(e,t,n){if(e&&e._inc){e._inc++;var r=t.childNodes;if(n)r[r.length++]=n;else{for(var i=t.firstChild,a=0;i;)r[a++]=i,i=i.nextSibling;r.length=a}}}function j(e,t){var n=t.previousSibling,r=t.nextSibling;return n?n.nextSibling=r:e.firstChild=r,r?r.previousSibling=n:e.lastChild=n,N(e.ownerDocument,e),t}function U(e,t,n){var r=t.parentNode;if(r&&r.removeChild(t),t.nodeType===m){var i=t.firstChild;if(null==i)return t;var a=t.lastChild}else i=a=t;var s=n?n.previousSibling:e.lastChild;i.previousSibling=s,a.nextSibling=n,s?s.nextSibling=i:e.firstChild=i,null==n?e.lastChild=a:n.previousSibling=a;do{i.parentNode=e}while(i!==a&&(i=i.nextSibling));return N(e.ownerDocument||e,e),t.nodeType==m&&(t.firstChild=t.lastChild=null),t}function F(){this._nsMap={}}function $(){}function B(){}function V(){}function q(){}function H(){}function W(){}function z(){}function G(){}function K(){}function X(){}function Y(){}function Q(){}function J(e,t){var n=[],r=9==this.nodeType?this.documentElement:this,i=r.prefix,a=r.namespaceURI;if(a&&null==i&&null==(i=r.lookupPrefix(a)))var s=[{namespace:a,prefix:null}];return ee(this,n,e,t,s),n.join("")}function Z(e,t,n){var r=e.prefix||"",i=e.namespaceURI;if(!r&&!i)return!1;if("xml"===r&&"http://www.w3.org/XML/1998/namespace"===i||"http://www.w3.org/2000/xmlns/"==i)return!1;for(var a=n.length;a--;){var s=n[a];if(s.prefix==r)return s.namespace!=i}return!0}function ee(e,t,n,r,i){if(r){if(!(e=r(e)))return;if("string"==typeof e)return void t.push(e)}switch(e.nodeType){case a:i||(i=[]);i.length;var l=e.attributes,g=l.length,v=e.firstChild,y=e.tagName;n="http://www.w3.org/1999/xhtml"===e.namespaceURI||n,t.push("<",y);for(var b=0;b<g;b++){"xmlns"==(_=l.item(b)).prefix?i.push({prefix:_.localName,namespace:_.value}):"xmlns"==_.nodeName&&i.push({prefix:"",namespace:_.value})}for(b=0;b<g;b++){var _;if(Z(_=l.item(b),0,i)){var T=_.prefix||"",w=_.namespaceURI,S=T?" xmlns:"+T:" xmlns";t.push(S,'="',w,'"'),i.push({prefix:T,namespace:w})}ee(_,t,n,r,i)}if(Z(e,0,i)){T=e.prefix||"",w=e.namespaceURI,S=T?" xmlns:"+T:" xmlns";t.push(S,'="',w,'"'),i.push({prefix:T,namespace:w})}if(v||n&&!/^(?:meta|link|img|br|hr|input)$/i.test(y)){if(t.push(">"),n&&/^script$/i.test(y))for(;v;)v.data?t.push(v.data):ee(v,t,n,r,i),v=v.nextSibling;else for(;v;)ee(v,t,n,r,i),v=v.nextSibling;t.push("</",y,">")}else t.push("/>");return;case p:case m:for(v=e.firstChild;v;)ee(v,t,n,r,i),v=v.nextSibling;return;case s:return t.push(" ",e.name,'="',e.value.replace(/[<&"]/g,L),'"');case o:return t.push(e.data.replace(/[<&]/g,L));case u:return t.push("<![CDATA[",e.data,"]]>");case h:return t.push("\x3c!--",e.data,"--\x3e");case f:var C=e.publicId,E=e.systemId;if(t.push("<!DOCTYPE ",e.name),C)t.push(' PUBLIC "',C),E&&"."!=E&&t.push('" "',E),t.push('">');else if(E&&"."!=E)t.push(' SYSTEM "',E,'">');else{var k=e.internalSubset;k&&t.push(" [",k,"]"),t.push(">")}return;case d:return t.push("<?",e.target," ",e.data,"?>");case c:return t.push("&",e.nodeName,";");default:t.push("??",e.nodeName)}}function te(e,t,n){var r;switch(t.nodeType){case a:(r=t.cloneNode(!1)).ownerDocument=e;case m:break;case s:n=!0}if(r||(r=t.cloneNode(!1)),r.ownerDocument=e,r.parentNode=null,n)for(var i=t.firstChild;i;)r.appendChild(te(e,i,n)),i=i.nextSibling;return r}function ne(e,t,n){var r=new t.constructor;for(var i in t){var o=t[i];"object"!=typeof o&&o!=r[i]&&(r[i]=o)}switch(t.childNodes&&(r.childNodes=new S),r.ownerDocument=e,r.nodeType){case a:var u=t.attributes,c=r.attributes=new k,l=u.length;c._ownerElement=r;for(var d=0;d<l;d++)r.setAttributeNode(ne(e,u.item(d),!0));break;case s:n=!0}if(n)for(var h=t.firstChild;h;)r.appendChild(ne(e,h,n)),h=h.nextSibling;return r}function re(e,t,n){e[t]=n}w.prototype=Error.prototype,n(v,w),S.prototype={length:0,item:function(e){return this[e]||null},toString:function(e,t){for(var n=[],r=0;r<this.length;r++)ee(this[r],n,e,t);return n.join("")}},C.prototype.item=function(e){return E(this),this[e]},r(C,S),k.prototype={length:0,item:S.prototype.item,getNamedItem:function(e){for(var t=this.length;t--;){var n=this[t];if(n.nodeName==e)return n}},setNamedItem:function(e){var t=e.ownerElement;if(t&&t!=this._ownerElement)throw new w(T);var n=this.getNamedItem(e.nodeName);return x(this._ownerElement,this,e,n),n},setNamedItemNS:function(e){var t,n=e.ownerElement;if(n&&n!=this._ownerElement)throw new w(T);return t=this.getNamedItemNS(e.namespaceURI,e.localName),x(this._ownerElement,this,e,t),t},removeNamedItem:function(e){var t=this.getNamedItem(e);return A(this._ownerElement,this,t),t},removeNamedItemNS:function(e,t){var n=this.getNamedItemNS(e,t);return A(this._ownerElement,this,n),n},getNamedItemNS:function(e,t){for(var n=this.length;n--;){var r=this[n];if(r.localName==t&&r.namespaceURI==e)return r}return null}},P.prototype={hasFeature:function(e,t){var n=this._features[e.toLowerCase()];return!(!n||t&&!(t in n))},createDocument:function(e,t,n){var r=new D;if(r.implementation=this,r.childNodes=new S,r.doctype=n,n&&r.appendChild(n),t){var i=r.createElementNS(e,t);r.appendChild(i)}return r},createDocumentType:function(e,t,n){var r=new W;return r.name=e,r.nodeName=e,r.publicId=t,r.systemId=n,r}},I.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(e,t){return U(this,e,t)},replaceChild:function(e,t){this.insertBefore(e,t),t&&this.removeChild(t)},removeChild:function(e){return j(this,e)},appendChild:function(e){return this.insertBefore(e,null)},hasChildNodes:function(){return null!=this.firstChild},cloneNode:function(e){return ne(this.ownerDocument||this,this,e)},normalize:function(){for(var e=this.firstChild;e;){var t=e.nextSibling;t&&t.nodeType==o&&e.nodeType==o?(this.removeChild(t),e.appendData(t.data)):(e.normalize(),e=t)}},isSupported:function(e,t){return this.ownerDocument.implementation.hasFeature(e,t)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(e){for(var t=this;t;){var n=t._nsMap;if(n)for(var r in n)if(n[r]==e)return r;t=t.nodeType==s?t.ownerDocument:t.parentNode}return null},lookupNamespaceURI:function(e){for(var t=this;t;){var n=t._nsMap;if(n&&e in n)return n[e];t=t.nodeType==s?t.ownerDocument:t.parentNode}return null},isDefaultNamespace:function(e){return null==this.lookupPrefix(e)}},n(i,I),n(i,I.prototype),D.prototype={nodeName:"#document",nodeType:p,doctype:null,documentElement:null,_inc:1,insertBefore:function(e,t){if(e.nodeType==m){for(var n=e.firstChild;n;){var r=n.nextSibling;this.insertBefore(n,t),n=r}return e}return null==this.documentElement&&e.nodeType==a&&(this.documentElement=e),U(this,e,t),e.ownerDocument=this,e},removeChild:function(e){return this.documentElement==e&&(this.documentElement=null),j(this,e)},importNode:function(e,t){return te(this,e,t)},getElementById:function(e){var t=null;return M(this.documentElement,(function(n){if(n.nodeType==a&&n.getAttribute("id")==e)return t=n,!0})),t},createElement:function(e){var t=new F;return t.ownerDocument=this,t.nodeName=e,t.tagName=e,t.childNodes=new S,(t.attributes=new k)._ownerElement=t,t},createDocumentFragment:function(){var e=new X;return e.ownerDocument=this,e.childNodes=new S,e},createTextNode:function(e){var t=new V;return t.ownerDocument=this,t.appendData(e),t},createComment:function(e){var t=new q;return t.ownerDocument=this,t.appendData(e),t},createCDATASection:function(e){var t=new H;return t.ownerDocument=this,t.appendData(e),t},createProcessingInstruction:function(e,t){var n=new Y;return n.ownerDocument=this,n.tagName=n.target=e,n.nodeValue=n.data=t,n},createAttribute:function(e){var t=new $;return t.ownerDocument=this,t.name=e,t.nodeName=e,t.localName=e,t.specified=!0,t},createEntityReference:function(e){var t=new K;return t.ownerDocument=this,t.nodeName=e,t},createElementNS:function(e,t){var n=new F,r=t.split(":"),i=n.attributes=new k;return n.childNodes=new S,n.ownerDocument=this,n.nodeName=t,n.tagName=t,n.namespaceURI=e,2==r.length?(n.prefix=r[0],n.localName=r[1]):n.localName=t,i._ownerElement=n,n},createAttributeNS:function(e,t){var n=new $,r=t.split(":");return n.ownerDocument=this,n.nodeName=t,n.name=t,n.namespaceURI=e,n.specified=!0,2==r.length?(n.prefix=r[0],n.localName=r[1]):n.localName=t,n}},r(D,I),F.prototype={nodeType:a,hasAttribute:function(e){return null!=this.getAttributeNode(e)},getAttribute:function(e){var t=this.getAttributeNode(e);return t&&t.value||""},getAttributeNode:function(e){return this.attributes.getNamedItem(e)},setAttribute:function(e,t){var n=this.ownerDocument.createAttribute(e);n.value=n.nodeValue=""+t,this.setAttributeNode(n)},removeAttribute:function(e){var t=this.getAttributeNode(e);t&&this.removeAttributeNode(t)},appendChild:function(e){return e.nodeType===m?this.insertBefore(e,null):function(e,t){var n=t.parentNode;if(n){var r=e.lastChild;n.removeChild(t),r=e.lastChild}return r=e.lastChild,t.parentNode=e,t.previousSibling=r,t.nextSibling=null,r?r.nextSibling=t:e.firstChild=t,e.lastChild=t,N(e.ownerDocument,e,t),t}(this,e)},setAttributeNode:function(e){return this.attributes.setNamedItem(e)},setAttributeNodeNS:function(e){return this.attributes.setNamedItemNS(e)},removeAttributeNode:function(e){return this.attributes.removeNamedItem(e.nodeName)},removeAttributeNS:function(e,t){var n=this.getAttributeNodeNS(e,t);n&&this.removeAttributeNode(n)},hasAttributeNS:function(e,t){return null!=this.getAttributeNodeNS(e,t)},getAttributeNS:function(e,t){var n=this.getAttributeNodeNS(e,t);return n&&n.value||""},setAttributeNS:function(e,t,n){var r=this.ownerDocument.createAttributeNS(e,t);r.value=r.nodeValue=""+n,this.setAttributeNode(r)},getAttributeNodeNS:function(e,t){return this.attributes.getNamedItemNS(e,t)},getElementsByTagName:function(e){return new C(this,(function(t){var n=[];return M(t,(function(r){r===t||r.nodeType!=a||"*"!==e&&r.tagName!=e||n.push(r)})),n}))},getElementsByTagNameNS:function(e,t){return new C(this,(function(n){var r=[];return M(n,(function(i){i===n||i.nodeType!==a||"*"!==e&&i.namespaceURI!==e||"*"!==t&&i.localName!=t||r.push(i)})),r}))}},D.prototype.getElementsByTagName=F.prototype.getElementsByTagName,D.prototype.getElementsByTagNameNS=F.prototype.getElementsByTagNameNS,r(F,I),$.prototype.nodeType=s,r($,I),B.prototype={data:"",substringData:function(e,t){return this.data.substring(e,e+t)},appendData:function(e){e=this.data+e,this.nodeValue=this.data=e,this.length=e.length},insertData:function(e,t){this.replaceData(e,0,t)},appendChild:function(e){throw new Error(y[b])},deleteData:function(e,t){this.replaceData(e,t,"")},replaceData:function(e,t,n){n=this.data.substring(0,e)+n+this.data.substring(e+t),this.nodeValue=this.data=n,this.length=n.length}},r(B,I),V.prototype={nodeName:"#text",nodeType:o,splitText:function(e){var t=this.data,n=t.substring(e);t=t.substring(0,e),this.data=this.nodeValue=t,this.length=t.length;var r=this.ownerDocument.createTextNode(n);return this.parentNode&&this.parentNode.insertBefore(r,this.nextSibling),r}},r(V,B),q.prototype={nodeName:"#comment",nodeType:h},r(q,B),H.prototype={nodeName:"#cdata-section",nodeType:u},r(H,B),W.prototype.nodeType=f,r(W,I),z.prototype.nodeType=g,r(z,I),G.prototype.nodeType=l,r(G,I),K.prototype.nodeType=c,r(K,I),X.prototype.nodeName="#document-fragment",X.prototype.nodeType=m,r(X,I),Y.prototype.nodeType=d,r(Y,I),Q.prototype.serializeToString=function(e,t,n){return J.call(e,t,n)},I.prototype.toString=J;try{if(Object.defineProperty){function ie(e){switch(e.nodeType){case a:case m:var t=[];for(e=e.firstChild;e;)7!==e.nodeType&&8!==e.nodeType&&t.push(ie(e)),e=e.nextSibling;return t.join("");default:return e.nodeValue}}Object.defineProperty(C.prototype,"length",{get:function(){return E(this),this.$$length}}),Object.defineProperty(I.prototype,"textContent",{get:function(){return ie(this)},set:function(e){switch(this.nodeType){case a:case m:for(;this.firstChild;)this.removeChild(this.firstChild);(e||String(e))&&this.appendChild(this.ownerDocument.createTextNode(e));break;default:this.data=e,this.value=e,this.nodeValue=e}}}),re=function(e,t,n){e["$$"+t]=n}}}catch(ae){}t.DOMImplementation=P},6147:(e,t)=>{var n=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,r=new RegExp("[\\-\\.0-9"+n.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),i=new RegExp("^"+n.source+r.source+"*(?::"+n.source+r.source+"*)?$");function a(){}function s(e,t){return t.lineNumber=e.lineNumber,t.columnNumber=e.columnNumber,t}function o(e,t,n,r,i,a){for(var s,o=++t,u=0;;){var c=e.charAt(o);switch(c){case"=":if(1===u)s=e.slice(t,o),u=3;else{if(2!==u)throw new Error("attribute equal must after attrName");u=3}break;case"'":case'"':if(3===u||1===u){if(1===u&&(a.warning('attribute value must after "="'),s=e.slice(t,o)),t=o+1,!((o=e.indexOf(c,t))>0))throw new Error("attribute value no end '"+c+"' match");l=e.slice(t,o).replace(/&#?\w+;/g,i),n.add(s,l,t-1),u=5}else{if(4!=u)throw new Error('attribute value must after "="');l=e.slice(t,o).replace(/&#?\w+;/g,i),n.add(s,l,t),a.warning('attribute "'+s+'" missed start quot('+c+")!!"),t=o+1,u=5}break;case"/":switch(u){case 0:n.setTagName(e.slice(t,o));case 5:case 6:case 7:u=7,n.closed=!0;case 4:case 1:case 2:break;default:throw new Error("attribute invalid close char('/')")}break;case"":return a.error("unexpected end of input"),0==u&&n.setTagName(e.slice(t,o)),o;case">":switch(u){case 0:n.setTagName(e.slice(t,o));case 5:case 6:case 7:break;case 4:case 1:"/"===(l=e.slice(t,o)).slice(-1)&&(n.closed=!0,l=l.slice(0,-1));case 2:2===u&&(l=s),4==u?(a.warning('attribute "'+l+'" missed quot(")!!'),n.add(s,l.replace(/&#?\w+;/g,i),t)):("http://www.w3.org/1999/xhtml"===r[""]&&l.match(/^(?:disabled|checked|selected)$/i)||a.warning('attribute "'+l+'" missed value!! "'+l+'" instead!!'),n.add(l,l,t));break;case 3:throw new Error("attribute value missed!!")}return o;case"":c=" ";default:if(c<=" ")switch(u){case 0:n.setTagName(e.slice(t,o)),u=6;break;case 1:s=e.slice(t,o),u=2;break;case 4:var l=e.slice(t,o).replace(/&#?\w+;/g,i);a.warning('attribute "'+l+'" missed quot(")!!'),n.add(s,l,t);case 5:u=6}else switch(u){case 2:n.tagName;"http://www.w3.org/1999/xhtml"===r[""]&&s.match(/^(?:disabled|checked|selected)$/i)||a.warning('attribute "'+s+'" missed value!! "'+s+'" instead2!!'),n.add(s,s,t),t=o,u=1;break;case 5:a.warning('attribute space is required"'+s+'"!!');case 6:u=1,t=o;break;case 3:u=4,t=o;break;case 7:throw new Error("elements closed character '/' and '>' must be connected to")}}o++}}function u(e,t,n){for(var r=e.tagName,i=null,a=e.length;a--;){var s=e[a],o=s.qName,u=s.value;if((p=o.indexOf(":"))>0)var c=s.prefix=o.slice(0,p),l=o.slice(p+1),h="xmlns"===c&&l;else l=o,c=null,h="xmlns"===o&&"";s.localName=l,!1!==h&&(null==i&&(i={},d(n,n={})),n[h]=i[h]=u,s.uri="http://www.w3.org/2000/xmlns/",t.startPrefixMapping(h,u))}for(a=e.length;a--;){(c=(s=e[a]).prefix)&&("xml"===c&&(s.uri="http://www.w3.org/XML/1998/namespace"),"xmlns"!==c&&(s.uri=n[c||""]))}var p;(p=r.indexOf(":"))>0?(c=e.prefix=r.slice(0,p),l=e.localName=r.slice(p+1)):(c=null,l=e.localName=r);var f=e.uri=n[c||""];if(t.startElement(f,l,r,e),!e.closed)return e.currentNSMap=n,e.localNSMap=i,!0;if(t.endElement(f,l,r),i)for(c in i)t.endPrefixMapping(c)}function c(e,t,n,r,i){if(/^(?:script|textarea)$/i.test(n)){var a=e.indexOf("</"+n+">",t),s=e.substring(t+1,a);if(/[&<]/.test(s))return/^script$/i.test(n)?(i.characters(s,0,s.length),a):(s=s.replace(/&#?\w+;/g,r),i.characters(s,0,s.length),a)}return t+1}function l(e,t,n,r){var i=r[n];return null==i&&((i=e.lastIndexOf("</"+n+">"))<t&&(i=e.lastIndexOf("</"+n)),r[n]=i),i<t}function d(e,t){for(var n in e)t[n]=e[n]}function h(e,t,n,r){if("-"===e.charAt(t+2))return"-"===e.charAt(t+3)?(i=e.indexOf("--\x3e",t+4))>t?(n.comment(e,t+4,i-t-4),i+3):(r.error("Unclosed comment"),-1):-1;if("CDATA["==e.substr(t+3,6)){var i=e.indexOf("]]>",t+9);return n.startCDATA(),n.characters(e,t+9,i-t-9),n.endCDATA(),i+3}var a=function(e,t){var n,r=[],i=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;i.lastIndex=t,i.exec(e);for(;n=i.exec(e);)if(r.push(n),n[1])return r}(e,t),s=a.length;if(s>1&&/!doctype/i.test(a[0][0])){var o=a[1][0],u=s>3&&/^public$/i.test(a[2][0])&&a[3][0],c=s>4&&a[4][0],l=a[s-1];return n.startDTD(o,u&&u.replace(/^(['"])(.*?)\1$/,"$2"),c&&c.replace(/^(['"])(.*?)\1$/,"$2")),n.endDTD(),l.index+l[0].length}return-1}function p(e,t,n){var r=e.indexOf("?>",t);if(r){var i=e.substring(t,r).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);if(i){i[0].length;return n.processingInstruction(i[1],i[2]),r+2}return-1}return-1}function f(e){}function m(e,t){return e.__proto__=t,e}a.prototype={parse:function(e,t,n){var r=this.domBuilder;r.startDocument(),d(t,t={}),function(e,t,n,r,i){function a(e){if(e>65535){var t=55296+((e-=65536)>>10),n=56320+(1023&e);return String.fromCharCode(t,n)}return String.fromCharCode(e)}function d(e){var t=e.slice(1,-1);return t in n?n[t]:"#"===t.charAt(0)?a(parseInt(t.substr(1).replace("x","0x"))):(i.error("entity not found:"+e),e)}function m(t){if(t>S){var n=e.substring(S,t).replace(/&#?\w+;/g,d);_&&g(S),r.characters(n,0,t-S),S=t}}function g(t,n){for(;t>=y&&(n=b.exec(e));)v=n.index,y=v+n[0].length,_.lineNumber++;_.columnNumber=t-v+1}var v=0,y=0,b=/.*(?:\r\n?|\n)|.*$/g,_=r.locator,T=[{currentNSMap:t}],w={},S=0;for(;;){try{var C=e.indexOf("<",S);if(C<0){if(!e.substr(S).match(/^\s*$/)){var E=r.doc,k=E.createTextNode(e.substr(S));E.appendChild(k),r.currentElement=k}return}switch(C>S&&m(C),e.charAt(C+1)){case"/":var O=e.indexOf(">",C+3),x=e.substring(C+2,O),A=T.pop();O<0?(x=e.substring(C+2).replace(/[\s<].*/,""),i.error("end tag name: "+x+" is not complete:"+A.tagName),O=C+1+x.length):x.match(/\s</)&&(x=x.replace(/[\s<].*/,""),i.error("end tag name: "+x+" maybe not complete"),O=C+1+x.length);var P=A.localNSMap,I=A.tagName==x;if(I||A.tagName&&A.tagName.toLowerCase()==x.toLowerCase()){if(r.endElement(A.uri,A.localName,x),P)for(var L in P)r.endPrefixMapping(L);I||i.fatalError("end tag name: "+x+" is not match the current start tagName:"+A.tagName)}else T.push(A);O++;break;case"?":_&&g(C),O=p(e,C,r);break;case"!":_&&g(C),O=h(e,C,r,i);break;default:_&&g(C);var M=new f,D=T[T.length-1].currentNSMap,R=(O=o(e,C,M,D,d,i),M.length);if(!M.closed&&l(e,O,M.tagName,w)&&(M.closed=!0,n.nbsp||i.warning("unclosed xml attribute")),_&&R){for(var N=s(_,{}),j=0;j<R;j++){var U=M[j];g(U.offset),U.locator=s(_,{})}r.locator=N,u(M,r,D)&&T.push(M),r.locator=_}else u(M,r,D)&&T.push(M);"http://www.w3.org/1999/xhtml"!==M.uri||M.closed?O++:O=c(e,O,M.tagName,d,r)}}catch(e){i.error("element parse error: "+e),O=-1}O>S?S=O:m(Math.max(C,S)+1)}}(e,t,n,r,this.errorHandler),r.endDocument()}},f.prototype={setTagName:function(e){if(!i.test(e))throw new Error("invalid tagName:"+e);this.tagName=e},add:function(e,t,n){if(!i.test(e))throw new Error("invalid attribute:"+e);this[this.length++]={qName:e,value:t,offset:n}},length:0,getLocalName:function(e){return this[e].localName},getLocator:function(e){return this[e].locator},getQName:function(e){return this[e].qName},getURI:function(e){return this[e].uri},getValue:function(e){return this[e].value}},m({},m.prototype)instanceof m||(m=function(e,t){function n(){}for(t in n.prototype=t,n=new n,e)n[t]=e[t];return n}),t.G=a},5893:()=>{}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r].call(a.exports,a,a.exports,n),a.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n(7878),n(7657),n(9074),n(2298),n(4244),n(8938);n(8466)})();